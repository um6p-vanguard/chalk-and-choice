{% extends "base.html" %}
{% block content %}
<div class="card">
  <h3 style="margin:0;">Edit project: {{ project.title }}</h3>
  <p class="muted" style="margin-top:6px;">Update the project details. Changes affect the project information shown to students.</p>
</div>

{% if error %}
<div class="sp"></div>
<div class="card" style="border-color:#f87171; background:#4c1d1d;">
  <p style="margin:0; color:#fca5a5;">{{ error }}</p>
</div>
{% endif %}

<div class="sp"></div>
<div class="card">
  <form method="post">
    <input type="hidden" name="csrf" value="{{ csrf_token() }}">
    
    <label>Project title *</label>
    <input type="text" name="title" value="{{ form_data.title }}" required>
    
    <div class="sp"></div>
    
    <label>Description</label>
    <textarea name="description" rows="4" placeholder="Short description of the project (supports markdown)">{{ form_data.description }}</textarea>
    <p class="muted" style="margin-top:4px; font-size:0.9rem;">Visible on project overview page.</p>
    
    <div class="sp"></div>
    
    <label>Student instructions</label>
    <textarea name="instructions" rows="6" placeholder="Detailed instructions for students (supports markdown)">{{ form_data.instructions }}</textarea>
    <p class="muted" style="margin-top:4px; font-size:0.9rem;">Shown to students when they view the project.</p>
    
    <div class="sp"></div>
    
    <label>Required task count</label>
    <input type="number" name="required_task_count" value="{{ form_data.required_task_count }}" min="0" placeholder="Leave empty to require all tasks">
    <p class="muted" style="margin-top:4px; font-size:0.9rem;">Minimum number of tasks students must complete. Leave empty to require all tasks.</p>
    
    <div class="sp"></div>
    
    <div class="row" style="gap:10px;">
      <button class="btn btn-primary" type="submit">Save changes</button>
      <a class="btn" href="{{ url_for('projects_show', code=project.code) }}">Cancel</a>
    </div>
  </form>
</div>
{% endblock %}
