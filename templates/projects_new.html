{% extends "base.html" %}
{% block content %}
<div class="card">
  <div class="row" style="justify-content:space-between; align-items:center;">
    <div>
      <h3 style="margin:0;">New project</h3>
      <p class="muted" style="margin-top:4px;">Define a project that groups one or more tasks. After saving, add tasks from the project page.</p>
    </div>
    <a class="btn" href="{{ url_for('projects_list') }}">Back</a>
  </div>
  {% if error %}<p class="text-danger" style="margin-top:10px;">{{ error }}</p>{% endif %}
  <form method="post">
    <input type="hidden" name="csrf" value="{{ csrf_token() }}">
    <label>Title</label>
    <input type="text" name="title" required value="{{ form_data.title }}" placeholder="e.g., Python Basics Project">

    <label>Description</label>
    <textarea name="description" rows="3" placeholder="Short overview for mentors.">{{ form_data.description }}</textarea>

    <label>Instructions</label>
    <textarea name="instructions" rows="4" placeholder="Shown to students before the tasks.">{{ form_data.instructions }}</textarea>

    <label>Required tasks to complete</label>
    <input type="number" min="0" name="required_task_count" placeholder="Leave blank to require all tasks" value="{{ form_data.required_task_count }}">

    <label>Project points (awarded on completion)</label>
    <input type="number" min="0" name="points" placeholder="e.g., 100" value="{{ form_data.points }}">

    <label>Retry cooldown (minutes) after rejection</label>
    <input type="number" min="0" name="retry_cooldown_minutes" placeholder="0 = no cooldown" value="{{ form_data.retry_cooldown_minutes }}">

    <div style="margin-top: 20px; padding: 15px; background: rgba(99, 127, 190, 0.05); border-radius: 6px;">
      <h4 style="margin: 0 0 15px;">‚è∞ Project Deadlines (Optional)</h4>
      
      <label>Starts at</label>
      <input type="datetime-local" name="starts_at" value="{{ form_data.starts_at }}">
      <small class="muted">Project becomes available to students at this time</small>

      <label style="margin-top: 10px;">Due at (Soft Deadline)</label>
      <input type="datetime-local" name="due_at" value="{{ form_data.due_at }}">
      <small class="muted">Late penalty applies after this time</small>

      <label style="margin-top: 10px;">Hard Deadline</label>
      <input type="datetime-local" name="hard_deadline_at" value="{{ form_data.hard_deadline_at }}">
      <small class="muted">No submissions accepted after this time</small>

      <label style="margin-top: 10px;">Late Penalty (%)</label>
      <input type="number" min="0" max="100" step="0.1" name="late_penalty_percent" placeholder="e.g., 20" value="{{ form_data.late_penalty_percent }}">
      <small class="muted">Percentage deducted from score for late submissions (0-100)</small>
    </div>

    <button class="btn btn-primary" type="submit" style="margin-top:12px;">Create project</button>
    <a class="btn" href="{{ url_for('projects_list') }}" style="margin-left:8px;">Cancel</a>
  </form>
</div>
{% endblock %}
