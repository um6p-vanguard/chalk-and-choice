{% extends "base.html" %}
{% block content %}
<div class="card">
  <h3>Forms</h3>
  <p><a class="btn btn-primary" href="{{ url_for('forms_new') }}">New Form</a></p>
  {% if forms %}
    <table>
      <thead><tr><th>Title</th><th>Code</th><th>Created</th><th>Actions</th></tr></thead>
      <tbody>
        {% for f in forms %}
          <tr>
            <td><a href="{{ url_for('forms_results', code=f.code) }}">{{ f.title }}</a></td>
            <td class="muted">{{ f.code }}</td>
            <td>
              {% if f.closes_at %}
                {% if f.is_open %}
                  <span class="muted">Open â€” closes {{ f.closes_at.strftime('%Y-%m-%d %H:%M UTC') }}</span>
                {% else %}
                  <span class="muted">Closed {{ f.closes_at.strftime('%Y-%m-%d %H:%M UTC') }}</span>
                {% endif %}
              {% else %}
                <span class="muted">No expiry</span>
              {% endif %}
            </td>
            <td>
              <a class="btn" href="{{ url_for('form_render', code=f.code) }}">Open</a>
              <button class="btn" onclick="navigator.clipboard.writeText('{{ request.url_root.rstrip('/') }}{{ url_for('form_render', code=f.code) }}')">Copy link</button>
            </td>
          </tr>
        {% endfor %}
        </tbody>        
    </table>
  {% else %}
    <p class="muted">No forms yet.</p>
  {% endif %}
</div>
{% endblock %}
