/*! For license information please see survey.core.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("survey-core",[],t):"object"==typeof exports?exports["survey-core"]=t():e.Survey=t()}(this,()=>(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Action:()=>dt,ActionContainer:()=>qe,ActionDropdownViewModel:()=>ft,AdaptiveActionContainer:()=>yt,AnimationBoolean:()=>wt,AnimationGroup:()=>Vt,AnimationGroupUtils:()=>Ct,AnimationProperty:()=>Pt,AnimationPropertyUtils:()=>vt,AnimationTab:()=>xt,AnimationUtils:()=>bt,AnswerCountValidator:()=>kn,AnswerRequiredError:()=>bn,ArrayChanges:()=>Re,ArrayOperand:()=>se,Base:()=>Te,BaseAction:()=>ht,BinaryOperand:()=>ie,ButtonGroupItemModel:()=>tl,ButtonGroupItemValue:()=>$a,CalculatedValue:()=>oo,CharacterCounter:()=>Ir,CheckboxItem:()=>is,ChoiceItem:()=>lr,ChoicesRestful:()=>co,ChoicesRestfull:()=>po,ComponentCollection:()=>wo,ComponentQuestionJSON:()=>Po,ComputedUpdater:()=>Ie,ConditionRunner:()=>Pe,ConditionsParser:()=>ye,Const:()=>ae,Cover:()=>Ei,CoverCell:()=>Ri,CssClassBuilder:()=>_e,CustomError:()=>En,CustomWidgetCollection:()=>zn,DefaultTitleModel:()=>Zr,DragDropChoices:()=>gs,DragDropCore:()=>ii,DragDropRankingSelectToRank:()=>vs,DragOrClickHelper:()=>li,DropdownListModel:()=>fr,DropdownMultiSelectListModel:()=>cs,ElementFactory:()=>To,EmailValidator:()=>Bn,Event:()=>Ee,EventBase:()=>Ae,ExceedSizeError:()=>Pn,ExpressionExecutor:()=>ve,ExpressionRunner:()=>we,ExpressionValidator:()=>qn,FlowPanelModel:()=>Xr,FunctionFactory:()=>B,FunctionOperand:()=>ue,Helpers:()=>r,HtmlConditionItem:()=>so,ImageItemValue:()=>ta,InputMaskBase:()=>ol,InputMaskCurrency:()=>Pl,InputMaskDateTime:()=>yl,InputMaskNumeric:()=>pl,InputMaskPattern:()=>ll,IsMobile:()=>Ue,IsTouch:()=>Je,ItemValue:()=>to,JsonError:()=>V,JsonIncorrectTypeError:()=>I,JsonMetadata:()=>w,JsonMetadataClass:()=>P,JsonMissingTypeError:()=>S,JsonMissingTypeErrorBase:()=>O,JsonObject:()=>A,JsonObjectProperty:()=>v,JsonRequiredPropertyError:()=>T,JsonUnknownPropertyError:()=>x,ListModel:()=>tt,LocalizableString:()=>Et,LocalizableStrings:()=>At,MatrixCells:()=>wr,MatrixColumn:()=>Cr,MatrixDropdownCell:()=>Wo,MatrixDropdownColumn:()=>No,MatrixDropdownRowModel:()=>ti,MatrixDropdownRowModelBase:()=>Ko,MatrixDynamicRowModel:()=>di,MatrixRowModel:()=>Pr,Model:()=>rr,MultiSelectListModel:()=>as,MultipleTextCell:()=>Jr,MultipleTextEditorModel:()=>zr,MultipleTextErrorCell:()=>Kr,MultipleTextItemModel:()=>Hr,MutlipleTextErrorRow:()=>Gr,MutlipleTextRow:()=>Wr,Notifier:()=>Si,NumericValidator:()=>Nn,OneAnswerRequiredError:()=>vn,Operand:()=>oe,PageModel:()=>Hi,PanelModel:()=>Qi,PanelModelBase:()=>qi,PopupBaseViewModel:()=>Ba,PopupDropdownViewModel:()=>Ua,PopupModalViewModel:()=>Ga,PopupModel:()=>it,PopupSurveyModel:()=>ja,ProcessValue:()=>k,ProgressButtons:()=>Wi,ProgressButtonsResponsivityManager:()=>Gi,Question:()=>Xn,QuestionBooleanModel:()=>Zs,QuestionButtonGroupModel:()=>el,QuestionCheckboxBase:()=>cr,QuestionCheckboxModel:()=>rs,QuestionCommentModel:()=>xs,QuestionCompositeModel:()=>So,QuestionCustomModel:()=>xo,QuestionCustomWidget:()=>Qn,QuestionDropdownModel:()=>mr,QuestionEmptyModel:()=>ns,QuestionExpressionModel:()=>Eo,QuestionFactory:()=>Io,QuestionFileModel:()=>Ds,QuestionFileModelBase:()=>Es,QuestionFilePage:()=>As,QuestionHtmlModel:()=>_s,QuestionImageModel:()=>sa,QuestionImagePickerModel:()=>na,QuestionMatrixBaseModel:()=>go,QuestionMatrixDropdownModel:()=>ni,QuestionMatrixDropdownModelBase:()=>Zo,QuestionMatrixDropdownRenderedCell:()=>Bo,QuestionMatrixDropdownRenderedErrorRow:()=>Qo,QuestionMatrixDropdownRenderedRow:()=>qo,QuestionMatrixDropdownRenderedTable:()=>Ho,QuestionMatrixDynamicModel:()=>fi,QuestionMatrixModel:()=>xr,QuestionMultipleTextModel:()=>Ur,QuestionNonValue:()=>es,QuestionPanelDynamicItem:()=>Ca,QuestionPanelDynamicModel:()=>wa,QuestionRadiogroupModel:()=>Ms,QuestionRankingModel:()=>ws,QuestionRatingModel:()=>Hs,QuestionRowModel:()=>Bi,QuestionSelectBase:()=>ur,QuestionSignaturePadModel:()=>da,QuestionSingleInputSummary:()=>ci,QuestionSingleInputSummaryItem:()=>ui,QuestionSliderModel:()=>Js,QuestionTagboxModel:()=>ds,QuestionTextBase:()=>Tr,QuestionTextModel:()=>jr,RegexValidator:()=>Fn,ReleaseDate:()=>bl,RenderedRatingItem:()=>Qs,RendererFactory:()=>Hn,RequreNumericError:()=>Cn,ResponsivityManager:()=>Le,ScrollViewModel:()=>Na,Serializer:()=>D,SliderLabelItemValue:()=>Gs,SurveyElement:()=>Tt,SurveyElementCore:()=>It,SurveyError:()=>yn,SurveyModel:()=>rr,SurveyProgressModel:()=>Va,SurveyTimer:()=>Ci,SurveyTimerModel:()=>Vi,SurveyTrigger:()=>Sa,SurveyTriggerComplete:()=>Ta,SurveyTriggerCopyValue:()=>Da,SurveyTriggerRunExpression:()=>Aa,SurveyTriggerSetValue:()=>Ra,SurveyTriggerSkip:()=>Ea,SurveyTriggerVisible:()=>Ia,SurveyValidator:()=>jn,SurveyWindowModel:()=>_a,SvgIconRegistry:()=>Tl,SvgRegistry:()=>Rl,SvgThemeSets:()=>El,TOCModel:()=>$i,TextAreaModel:()=>Un,TextPreProcessor:()=>bo,TextValidator:()=>Mn,Trigger:()=>Oa,UnaryOperand:()=>re,UpdateResponsivenessMode:()=>pt,UrlConditionItem:()=>ao,ValidatorResult:()=>Ln,ValidatorRunner:()=>_n,Variable:()=>le,Version:()=>ml,VerticalResponsivityManager:()=>je,_setIsTablet:()=>Xe,_setIsTouch:()=>Ke,activateLazyRenderingChecks:()=>Ft,addIconsToThemeSet:()=>Al,checkLibraryVersion:()=>wl,chooseFiles:()=>un,classesToSelector:()=>tn,cleanHtmlElementAfterAnimation:()=>hn,confirmAction:()=>Dt,confirmActionAsync:()=>Lt,createDropdownActionModel:()=>at,createDropdownActionModelAdvanced:()=>lt,createPopupModalViewModel:()=>Ka,createPopupModelWithListModel:()=>ut,createPopupViewModel:()=>Ya,createSvg:()=>Ht,createTOCListModel:()=>Yi,defaultActionBarCss:()=>Be,defaultCss:()=>mi,defaultThemeName:()=>bi,detectIEOrEdge:()=>jt,doKey2ClickBlur:()=>Kt,doKey2ClickDown:()=>Xt,doKey2ClickUp:()=>Yt,englishStrings:()=>s,getActionDropdownButtonTarget:()=>ct,getElement:()=>Mt,getIconNameFromProxy:()=>Qt,getLocaleString:()=>l,getLocaleStrings:()=>u,getOriginalEvent:()=>$t,getTocRootCss:()=>Zi,glc:()=>Sl,hasLicense:()=>Ol,increaseHeightByContent:()=>Zt,loadFileFromBase64:()=>_t,matrixDropdownColumnTypes:()=>_o,prepareElementForVerticalAnimation:()=>pn,property:()=>y,propertyArray:()=>b,registerFunction:()=>q,renamedIcons:()=>qt,sanitizeEditableContent:()=>rn,setLicenseKey:()=>Vl,settings:()=>gn,setupLocale:()=>c,slk:()=>xl,surveyCss:()=>yi,surveyLocalization:()=>a,surveyStrings:()=>p,tryFocusPage:()=>Ji,unwrap:()=>Ut});var n=function(){function e(){}return e.isAvailable=function(){return"undefined"!=typeof window},e.isFileReaderAvailable=function(){return!!e.isAvailable()&&!!window.FileReader},e.getLocation=function(){if(e.isAvailable())return window.location},e.getVisualViewport=function(){return e.isAvailable()?window.visualViewport:null},e.getInnerWidth=function(){if(e.isAvailable())return window.innerWidth},e.getInnerHeight=function(){return e.isAvailable()?window.innerHeight:null},e.getDevicePixelRatio=function(){return e.isAvailable()?window.devicePixelRatio:null},e.getWindow=function(){if(e.isAvailable())return window},e.hasOwn=function(t){if(e.isAvailable())return t in window},e.getSelection=function(){if(e.isAvailable()&&window.getSelection)return window.getSelection()},e.requestAnimationFrame=function(t){if(e.isAvailable())return window.requestAnimationFrame(t)},e.addEventListener=function(t,n){e.isAvailable()&&window.addEventListener(t,n)},e.removeEventListener=function(t,n){e.isAvailable()&&window.removeEventListener(t,n)},e.matchMedia=function(t){return e.isAvailable()&&void 0!==window.matchMedia?window.matchMedia(t):null},e}(),o=function(){function e(){}return e.isAvailable=function(){return"undefined"!=typeof document},e.getBody=function(){if(e.isAvailable())return document.body},e.getDocumentElement=function(){if(e.isAvailable())return document.documentElement},e.getDocument=function(){if(e.isAvailable())return document},e.getCookie=function(){if(e.isAvailable())return document.cookie},e.setCookie=function(t){e.isAvailable()&&(document.cookie=t)},e.activeElementBlur=function(){if(e.isAvailable()){var t=document.activeElement;t&&t.blur&&t.blur()}},e.createElement=function(t){if(e.isAvailable())return document.createElement(t)},e.getComputedStyle=function(t){return e.isAvailable()?document.defaultView.getComputedStyle(t):new CSSStyleDeclaration},e.addEventListener=function(t,n){e.isAvailable()&&document.addEventListener(t,n)},e.removeEventListener=function(t,n){e.isAvailable()&&document.removeEventListener(t,n)},e}();function i(e,t){if(!t)return new Date;var n;gn.storeUtcDates||"string"!=typeof t||(n=t).indexOf("T")>0||!/\d{4}-\d{2}-\d{2}/.test(n)||isNaN(new Date(n).getTime())||(t+="T00:00:00");var o=new Date(t);return gn.onDateCreated(o,e,t)}var r=function(){function e(){}return e.isValueEmpty=function(t){if(Array.isArray(t)&&0===t.length)return!0;if(t&&e.isValueObject(t)&&t.constructor===Object){for(var n in t)if(!e.isValueEmpty(t[n]))return!1;return!0}return!t&&0!==t&&!1!==t},e.isValueUndefined=function(e){return null==e||"number"==typeof e&&isNaN(e)},e.isArrayContainsEqual=function(t,n){if(!Array.isArray(t)||!Array.isArray(n))return!1;if(t.length!==n.length)return!1;for(var o=0;o<t.length;o++){for(var i=0;i<n.length&&!e.isTwoValueEquals(t[o],n[i]);i++);if(i===n.length)return!1}return!0},e.checkIfArraysEqual=function(t,n,o){if(!Array.isArray(t)||!Array.isArray(n))return!1;if(t.length!==n.length)return!1;if(void 0!==o.ignoreOrder&&o.ignoreOrder){for(var i=[],r=[],s=0;s<t.length;s++)i.push(t[s]),r.push(n[s]);i.sort(),r.sort(),t=i,n=r}for(s=0;s<t.length;s++)if(!e.checkIfValuesEqual(t[s],n[s],o))return!1;return!0},e.isArraysEqual=function(t,n,o,i,r){return void 0===o&&(o=!1),e.checkIfArraysEqual(t,n,{ignoreOrder:o,caseSensitive:i,trimStrings:r})},e.compareStrings=function(e,t){var n=gn.comparator.normalizeTextCallback;if(e&&(e=n(e,"compare").trim()),t&&(t=n(t,"compare").trim()),!e&&!t)return 0;if(!e)return-1;if(!t)return 1;if(e===t)return 0;for(var o=-1,i=0;i<e.length&&i<t.length;i++){if(this.isCharDigit(e[i])&&this.isCharDigit(t[i])){o=i;break}if(e[i]!==t[i])break}if(o>-1){var r=this.getNumberFromStr(e,o),s=this.getNumberFromStr(t,o);if(!Number.isNaN(r)&&!Number.isNaN(s)&&r!==s)return r>s?1:-1}return e>t?1:-1},e.checkIfValuesEqual=function(t,n,o){if(t===n)return!0;if(Array.isArray(t)&&0===t.length&&void 0===n)return!0;if(Array.isArray(n)&&0===n.length&&void 0===t)return!0;if(null==t&&""===n)return!0;if(null==n&&""===t)return!0;var i=void 0!==o.caseSensitive?o.caseSensitive:gn.comparator.caseSensitive,r=void 0!==o.trimStrings?o.trimStrings:gn.comparator.trimStrings;if("string"==typeof t&&"string"==typeof n){var s=gn.comparator.normalizeTextCallback;return t=s(t,"compare"),n=s(n,"compare"),r&&(t=t.trim(),n=n.trim()),i||(t=t.toLowerCase(),n=n.toLowerCase()),t===n}if(t instanceof Date&&n instanceof Date)return t.getTime()==n.getTime();var a=!o.doNotConvertNumbers;if(a&&e.isConvertibleToNumber(t)&&e.isConvertibleToNumber(n)&&parseInt(t)===parseInt(n)&&parseFloat(t)===parseFloat(n))return!0;if(!e.isValueEmpty(t)&&e.isValueEmpty(n)||e.isValueEmpty(t)&&!e.isValueEmpty(n))return!1;if((!0===t||!1===t)&&"string"==typeof n)return t.toString()===n.toLocaleLowerCase();if((!0===n||!1===n)&&"string"==typeof t)return n.toString()===t.toLocaleLowerCase();var l=e.isValueObject(t),u=e.isValueObject(n);if(!l&&!u&&(a||"number"!=typeof t&&"number"!=typeof n))return t==n;if(!l||!u)return!1;if(t.equals&&n.equals)return t.equals(n);if(Array.isArray(t)&&Array.isArray(n))return e.checkIfArraysEqual(t,n,o);for(var c in t)if(t.hasOwnProperty(c)){if(!n.hasOwnProperty(c))return!1;if(!this.checkIfValuesEqual(t[c],n[c],o))return!1}for(c in n)if(n.hasOwnProperty(c)&&!t.hasOwnProperty(c))return!1;return!0},e.isTwoValueEquals=function(e,t,n,o,i){return void 0===n&&(n=!1),this.checkIfValuesEqual(e,t,{ignoreOrder:n,caseSensitive:o,trimStrings:i})},e.randomizeArray=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),o=e[t];e[t]=e[n],e[n]=o}return e},e.getUnbindValue=function(t){if(Array.isArray(t)){for(var n=[],o=0;o<t.length;o++)n.push(e.getUnbindValue(t[o]));return n}return!t||!e.isValueObject(t)||t instanceof Date?t:JSON.parse(JSON.stringify(t))},e.createCopy=function(e){return this.createCopyWithPrefix(e,void 0)},e.createCopyWithPrefix=function(e,t){var n={};if(!e)return n;for(var o in e)n[t?t+o:o]=e[o];return n},e.isConvertibleToNumber=function(e){return null!=e&&!Array.isArray(e)&&!isNaN(e)},e.isValueObject=function(e,t){return e instanceof Object&&(!t||!Array.isArray(e))},e.isNumber=function(e){return!isNaN(this.getNumber(e))},e.getNumber=function(t){var n=e.getNumberCore(t);return gn.parseNumber(t,n)},e.getNumberCore=function(t){if("string"==typeof t){if(!(t=t.trim()))return NaN;if(0==t.indexOf("0x"))return t.length>32?NaN:parseInt(t);if(t.length>15&&e.isDigitsOnly(t))return NaN;if(e.isStringHasOperator(t))return NaN}t=this.prepareStringToNumber(t);var n=parseFloat(t);return isNaN(n)||!isFinite(t)?NaN:n},e.isStringHasOperator=function(e){if(e.lastIndexOf("-")>0)return!1;if(e.lastIndexOf("+")>0)return!1;for(var t=0;t<4;t++)if(e.indexOf("*^/%"[t])>-1)return!0;return!1},e.prepareStringToNumber=function(e){if("string"!=typeof e||!e)return e;var t=e.indexOf(",");return t>-1&&e.indexOf(",",t+1)<0?e.replace(",","."):e},e.getMaxLength=function(e,t){return e<0&&(e=t),e>0?e:null},e.getRemainingCharacterCounterText=function(e,t){return!t||t<=0||!gn.showMaxLengthIndicator?"":[e?e.length:"0",t].join("/")},e.getNumberByIndex=function(t,n,o){if(t<0)return"";var i=1,r="",s=n&&"."!==n[n.length-1]?"":".",a=!0,l="A",u="",c=function(t){if(!t)return!1;for(var n=0;n<t.length;n++)if(e.isCharDigit(t[n]))return!0;return!1};if(n){for(var p=(u=n).length-1,h=c(u),d=function(){return h&&!e.isCharDigit(u[p])||e.isCharNotLetterAndDigit(u[p])};p>=0&&d();)p--;var f="";for(p<u.length-1&&(f=u.substring(p+1),u=u.substring(0,p+1)),p=u.length-1;p>=0&&!d()&&(p--,h););l=u.substring(p+1),r=u.substring(0,p+1),parseInt(l)?i=parseInt(l):1==l.length&&(a=!1),(f||r)&&(s=f)}if(o>-1&&c(r)&&(r=this.getNumberByIndex(o,r)),a){for(var g=(t+i).toString();g.length<l.length;)g="0"+g;return r+g+s}return r+String.fromCharCode(l.charCodeAt(0)+t)+s},e.isCharNotLetterAndDigit=function(t){return t.toUpperCase()==t.toLowerCase()&&!e.isCharDigit(t)},e.isCharDigit=function(e){return e>="0"&&e<="9"},e.isDigitsOnly=function(t){if(!t)return!1;for(var n=0;n<t.length;n++)if(!e.isCharDigit(t[n]))return!1;return!0},e.getNumberFromStr=function(e,t){if(!this.isCharDigit(e[t]))return NaN;for(var n="";t<e.length&&this.isCharDigit(e[t]);)n+=e[t],t++;return n?this.getNumber(n):NaN},e.countDecimals=function(t){if(e.isNumber(t)&&Math.floor(t)!==t){var n=t.toString().split(".");return n.length>1&&n[1].length||0}return 0},e.correctAfterPlusMinis=function(t,n,o){var i=e.countDecimals(t),r=e.countDecimals(n);if(i>0||r>0){var s=Math.max(i,r);o=parseFloat(o.toFixed(s))}return o},e.sumAnyValues=function(t,n){if(!e.isNumber(t)||!e.isNumber(n)){if(Array.isArray(t)&&Array.isArray(n))return[].concat(t).concat(n);if(Array.isArray(t)||Array.isArray(n)){var o=Array.isArray(t)?t:n,i=o===t?n:t;if("string"==typeof i){var r=o.join(", ");return o===t?r+i:i+r}if("number"==typeof i){for(var s=0,a=0;a<o.length;a++)"number"==typeof o[a]&&(s=e.correctAfterPlusMinis(s,o[a],s+o[a]));return e.correctAfterPlusMinis(s,i,s+i)}}return t+n}return"string"==typeof t||"string"==typeof n?t+n:e.correctAfterPlusMinis(t,n,t+n)},e.correctAfterMultiple=function(t,n,o){var i=e.countDecimals(t)+e.countDecimals(n);return i>0&&(o=parseFloat(o.toFixed(i))),o},e.findObjByPropValue=function(t,n,o){for(var i=0;i<t.length;i++)if(e.isTwoValueEquals(t[i][n],o))return t[i]},e.convertArrayObjectToValue=function(t,n){var o=new Array;if(!t||!Array.isArray(t))return o;for(var i=0;i<t.length;i++){var r=t[i]?t[i][n]:void 0;e.isValueEmpty(r)||o.push(r)}return o},e.convertDateToString=function(e){var t=function(e){return e<10?"0"+e.toString():e.toString()};return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())},e.convertDateTimeToString=function(e){var t=function(e){return e<10?"0"+e.toString():e.toString()};return this.convertDateToString(e)+" "+t(e.getHours())+":"+t(e.getMinutes())},e.convertValToQuestionVal=function(t,n){return t instanceof Date?"datetime-local"===n?e.convertDateTimeToString(t):e.convertDateToString(t):this.getUnbindValue(t)},e.compareVerions=function(e,t){if(!e&&!t)return 0;for(var n=e.split("."),o=t.split("."),i=n.length,r=o.length,s=0;s<i&&s<r;s++){var a=n[s],l=o[s];if(a.length!==l.length)return a.length<l.length?-1:1;if(a!==l)return a<l?-1:1}return i===r?0:i<r?-1:1},e.isUrlYoutubeVideo=function(e){if(!e)return!1;var t=["www.youtube.com","m.youtube.com","youtube.com","youtu.be"];e=(e=e.toLowerCase()).replace(/^https?:\/\//,"");for(var n=0;n<t.length;n++)if(0===e.indexOf(t[n]+"/"))return!0;return!1},e}();String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return void 0!==e[n]?e[n]:t})});var s={pagePrevText:"Previous",pageNextText:"Next",completeText:"Complete",previewText:"Preview",editText:"Edit",startSurveyText:"Start",commentText:"Please leave a comment",otherItemText:"Other (describe)",noneItemText:"None",refuseItemText:"Refuse to answer",dontKnowItemText:"Don't know",selectAllItemText:"Select All",deselectAllItemText:"Deselect all",progressText:"Page {0} of {1}",indexText:"{0} of {1}",panelDynamicProgressText:"{0} of {1}",panelDynamicTabTextFormat:"Panel {panelIndex}",questionsProgressText:"Answered {0}/{1} questions",emptySurvey:"The survey doesn't contain any visible elements.",completingSurvey:"Thank you for completing the survey",completingSurveyBefore:"You have already completed this survey.",loadingSurvey:"Loading Survey...",placeholder:"Select...",ratingOptionsCaption:"Select...",buttongroupOptionsCaption:"Select...",value:"value",requiredError:"Response required.",requiredErrorInPanel:"Response required: answer at least one question.",requiredInAllRowsError:"Response required: answer questions in all rows.",eachRowUniqueError:"Each row must have a unique value.",numericError:"The value should be numeric.",minError:"The value should not be less than {0}",stepError:"Please enter a value that matches the step size of {0}.",maxError:"The value should not be greater than {0}",textNoDigitsAllow:"Numbers are not allowed.",textMinLength:"Please enter at least {0} character(s).",textMaxLength:"Please enter no more than {0} character(s).",textMinMaxLength:"Please enter at least {0} and no more than {1} characters.",minRowCountError:"Please fill in at least {0} row(s).",minSelectError:"Please select at least {0} option(s).",maxSelectError:"Please select no more than {0} option(s).",numericMinMax:"The '{0}' should be at least {1} and at most {2}",numericMin:"The '{0}' should be at least {1}",numericMax:"The '{0}' should be at most {1}",invalidEmail:"Please enter a valid e-mail address.",invalidExpression:"The expression: {0} should return 'true'.",urlRequestError:"The request returned error '{0}'. {1}",urlGetChoicesError:"The request returned empty data or the 'path' property is incorrect",exceedMaxSize:"The file size should not exceed {0}.",noUploadFilesHandler:"Files cannot be uploaded. Please add a handler for the 'onUploadFiles' event.",otherRequiredError:"Response required: enter another value.",uploadingFile:"Your file is uploading. Please wait several seconds and try again.",loadingFile:"Loading...",chooseFile:"Choose file(s)...",noFileChosen:"No file selected",filePlaceholder:"Drag and drop a file here or click the button below to select a file to upload.",confirmDelete:"Are you sure you want to delete this record?",keyDuplicationError:"This value should be unique.",addColumn:"Add Column",addRow:"Add Row",removeRow:"Remove",noRowsText:"There are no rows.",rowIndexTemplateTitle:"Row {rowIndex}",rowNameTemplateTitle:"{rowTitle}",addPanel:"Add new",removePanel:"Remove",showDetails:"Show Details",hideDetails:"Hide Details",choices_Item:"item",choices_Choice:"Choice option",matrix_column:"Column",matrix_row:"Row",multipletext_itemname:"text",savingData:"The results are being saved on the server...",savingDataError:"An error occurred and we could not save the results.",savingDataSuccess:"The results were saved successfully!",savingExceedSize:"Your response exceeds 64KB. Please reduce the size of your file(s) and try again or contact the survey owner.",saveAgainButton:"Try again",timerMin:"min",timerSec:"sec",timerSpentAll:"You have spent {0} on this page and {1} in total.",timerSpentPage:"You have spent {0} on this page.",timerSpentSurvey:"You have spent {0} in total.",timerLimitAll:"You have spent {0} of {1} on this page and {2} of {3} in total.",timerLimitPage:"You have spent {0} of {1} on this page.",timerLimitSurvey:"You have spent {0} of {1} in total.",clearCaption:"Clear",selectCaption:"Select",signaturePlaceHolder:"Sign here",signaturePlaceHolderReadOnly:"No signature",chooseFileCaption:"Select File",takePhotoCaption:"Take Photo",photoPlaceholder:"Click the button below to take a photo using the camera.",fileOrPhotoPlaceholder:"Drag and drop or select a file to upload or take a photo using the camera.",replaceFileCaption:"Replace file",removeFileCaption:"Remove this file",booleanCheckedLabel:"Yes",booleanUncheckedLabel:"No",confirmRemoveFile:"Are you sure that you want to remove this file: {0}?",confirmRemoveAllFiles:"Are you sure that you want to remove all files?",questionTitlePatternText:"Question Title",modalCancelButtonText:"Cancel",modalApplyButtonText:"Apply",filterStringPlaceholder:"Type to search...",emptyMessage:"No data to display",loadingPage:"Loading...",loadingData:"Loading...",noEntriesText:"No entries yet.\nClick the button below to add a new entry.",noEntriesReadonlyText:"No entries",tabTitlePlaceholder:"New Panel",more:"More",tagboxDoneButtonCaption:"OK",selectToRankEmptyRankedAreaText:"All choices are selected for ranking",selectToRankEmptyUnrankedAreaText:"Drag choices here to rank them",ok:"OK",cancel:"Cancel",createCustomItem:'Create "{0}" item...',toc:"Table of contents",progressbar:"Progress bar"},a={currentLocaleValue:"",defaultLocaleValue:"en",locales:{},localeNames:{},localeNamesInEnglish:{},localeDirections:{},supportedLocales:[],useEnglishNames:!1,get showNamesInEnglish(){return this.useEnglishNames},set showNamesInEnglish(e){this.useEnglishNames=e},setupLocale:function(e){var t=e.localeCode;this.locales[t]=e.strings,this.localeNames[t]=e.nativeName,this.localeNamesInEnglish[t]=e.englishName,void 0!==e.rtl&&(this.localeDirections[t]=e.rtl?"rtl":"ltr")},get currentLocale(){return this.currentLocaleValue===this.defaultLocaleValue?"":this.currentLocaleValue},set currentLocale(e){this.currentLocaleValue=this.getCorrectLocaleName(e)},get defaultLocale(){return this.defaultLocaleValue},set defaultLocale(e){this.defaultLocaleValue=this.getCorrectLocaleName(e)},getCorrectLocaleName:function(e){return"cz"===e&&(e="cs"),"gr"===e&&(e="el"),"rs"===e&&(e="sr"),"ua"===e&&(e="uk"),e},getLocaleStrings:function(e){return this.locales[e]},getString:function(e,t){var n=this;void 0===t&&(t=null);var o=new Array,i=function(e){var t=n.locales[e];t&&o.push(t)},r=function(e){if(e){i(e);var t=e.indexOf("-");t<1||(e=e.substring(0,t),i(e))}};r(t),r(this.currentLocale),r(this.defaultLocale),"en"!==this.defaultLocale&&i("en");for(var s=0;s<o.length;s++){var a=o[s][e];if(void 0!==a)return a}return this.onGetExternalString(e,t)},getLocaleName:function(e,t){if(!e)return"";void 0===t&&(t=this.showNamesInEnglish);var n=t?this.localeNamesInEnglish:this.localeNames,o=t?this.localeNames:this.localeNamesInEnglish;return n[e]||o[e]||e},getLocales:function(e){var t=this;void 0===e&&(e=!1);var n=[];n.push("");var o=this.locales;if(this.supportedLocales&&this.supportedLocales.length>0){o={};for(var i=0;i<this.supportedLocales.length;i++)o[this.supportedLocales[i]]=!0}for(var r in o)e&&r==this.defaultLocale||n.push(r);var s=function(e){return t.getLocaleName(e).toLowerCase()};return n.sort(function(e,t){var n=s(e),o=s(t);return n===o?0:n<o?-1:1}),n},onGetExternalString:function(e,t){}};function l(e,t){return void 0===t&&(t=null),a.getString(e,t)}function u(e){return a.getLocaleStrings(e)}function c(e){a.setupLocale(e)}var p=s;a.locales.en=s,a.localeNames.en="english";var h,d=(h=function(e,t){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},h(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=function(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))};function g(e,t,n){var o=e.getLocalizableString(n);if(!o){var i=void 0;"object"==typeof t.localizable&&t.localizable.defaultStr&&(i=t.localizable.defaultStr),o=e.createLocalizableString(n,e,!0,i),"object"==typeof t.localizable&&"function"==typeof t.localizable.onGetTextCallback&&(o.onGetTextCallback=t.localizable.onGetTextCallback)}}function y(e){return void 0===e&&(e={}),function(t,n){var o=function(e,t){if(t&&"object"==typeof t&&t.type===Ie.ComputedUpdaterType){Te.startCollectDependencies(function(){return e[n]=t.updater()},e,n);var o=t.updater(),i=Te.finishCollectDependencies();return t.setDependencies(i),e.dependencies[n]&&e.dependencies[n].dispose(),e.dependencies[n]=t,o}return t};e&&e.localizable?(Object.defineProperty(t,n,{get:function(){return function(e,t,n){g(e,t,n);var o=e.getLocalizableStringText(n);if(o)return o;if("object"==typeof t.localizable&&t.localizable.defaultStr){var i=e.getLocale?e.getLocale():"";return l(t.localizable.defaultStr,i)}return""}(this,e,n)},set:function(t){g(this,e,n);var i=o(this,t);this.setLocalizableStringText(n,i),e&&e.onSet&&e.onSet(i,this)}}),Object.defineProperty(t,"object"==typeof e.localizable&&e.localizable.name?e.localizable.name:"loc"+n.charAt(0).toUpperCase()+n.slice(1),{get:function(){return g(this,e,n),this.getLocalizableString(n)}})):Object.defineProperty(t,n,{get:function(){var t=null;return e&&("function"==typeof e.getDefaultValue&&(t=e.getDefaultValue(this)),void 0!==e.defaultValue&&(t=e.defaultValue)),this.getPropertyValue(n,t)},set:function(t){var i=o(this,t),r=this.getPropertyValue(n);i!==r&&(this.setPropertyValue(n,i),e&&e.onSet&&e.onSet(i,this,r))}})}}function m(e,t,n){e.ensureArray(n,function(n,o){var i=t?t.onPush:null;i&&i(n,o,e)},function(n,o){var i=t?t.onRemove:null;i&&i(n,o,e)})}function b(e){return function(t,n){Object.defineProperty(t,n,{get:function(){return m(this,e,n),this.getPropertyValue(n)},set:function(t){m(this,e,n);var o=this.getPropertyValue(n);t!==o&&(o?o.splice.apply(o,f([0,o.length],t||[],!1)):this.setPropertyValue(n,t),e&&e.onSet&&e.onSet(t,this))}})}}var v=function(){function e(t,n,o){void 0===o&&(o=!1),this.name=n,this.isRequiredValue=!1,this.isUniqueValue=!1,this.isSerializable=!0,this.isLightSerializable=!0,this.isCustom=!1,this.isDynamicChoices=!1,this.isBindable=!1,this.category="",this.categoryIndex=-1,this.visibleIndex=-1,this.maxLength=-1,this.isArray=!1,this.classInfoValue=t,this.isRequiredValue=o,this.idValue=e.Index++}return Object.defineProperty(e.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classInfo",{get:function(){return this.classInfoValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.typeValue?this.typeValue:"string"},set:function(e){"itemvalues"===e&&(e="itemvalue[]"),"textitems"===e&&(e="textitem[]"),this.typeValue=e,this.typeValue.indexOf("[]")===this.typeValue.length-2&&(this.isArray=!0,this.className=this.typeValue.substring(0,this.typeValue.length-2))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"locationInTable",{get:function(){return this.locationInTableValue||"column"},set:function(e){this.locationInTableValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showMode",{get:function(){var e=this.locationInTableValue;return"detail"===e?"form":"column"===e?"list":""},set:function(e){this.locationInTable="form"===e?"detail":"list"===e?"column":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRequired",{get:function(){return this.isRequiredValue},set:function(e){e!==this.isRequired&&(this.isRequiredValue=e,this.classInfo&&this.classInfo.resetAllProperties())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUnique",{get:function(){return this.isUniqueValue},set:function(e){this.isUniqueValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uniquePropertyName",{get:function(){return this.uniquePropertyValue},set:function(e){this.uniquePropertyValue=e},enumerable:!1,configurable:!0}),e.prototype.isPropertySerializable=function(e){return this.isSerializableFunc?this.isSerializableFunc(e):this.isSerializable},e.prototype.getDefaultValue=function(t){var n=this.defaultValueFunc?this.defaultValueFunc(t):this.defaultValueValue;return e.getItemValuesDefaultValue&&D.isDescendantOf(this.className,"itemvalue")&&(n=e.getItemValuesDefaultValue(this.defaultValueValue||[],this.className)),n},Object.defineProperty(e.prototype,"defaultValue",{get:function(){return this.getDefaultValue(void 0)},set:function(e){this.defaultValueValue=e,void 0!==e&&(this.defaultValueFunc=void 0)},enumerable:!1,configurable:!0}),e.prototype.isDefaultValue=function(e){return this.isDefaultValueByObj(void 0,e)},e.prototype.isDefaultValueByObj=function(e,t){if(this.isLocalizable)return null==t;var n=this.getDefaultValue(e);return void 0!==n?"object"!=typeof n?n===t:r.isTwoValueEquals(t,n,!1,!0,!1):!1===t&&this.isBooleanType&&!this.defaultValueFunc||""===t||r.isValueEmpty(t)},e.prototype.getSerializableValue=function(e,t){if(this.onSerializeValue)return this.onSerializeValue(e);var n=this.getValue(e);return null==n||!t&&this.isDefaultValueByObj(e,n)?void 0:n},e.prototype.getValue=function(e){return this.onGetValue?(e=this.getOriginalObj(e),this.onGetValue(e)):this.serializationProperty&&e[this.serializationProperty]?e[this.serializationProperty].getJson():e[this.name]},e.prototype.getPropertyValue=function(e){return this.isLocalizable?e[this.serializationProperty]?e[this.serializationProperty].text:null:this.getValue(e)},Object.defineProperty(e.prototype,"hasToUseSetValue",{get:function(){return this.onSetValue||this.serializationProperty},enumerable:!1,configurable:!0}),e.prototype.settingValue=function(e,t){return!this.onSettingValue||e.isLoadingFromJson?t:this.onSettingValue(e,t)},e.prototype.setValue=function(e,t,n){if(this.onSetValue)e=this.getOriginalObj(e),this.onSetValue(e,t,n);else if(this.serializationProperty&&e[this.serializationProperty])e[this.serializationProperty].setJson(t,!0);else{if(t&&"string"==typeof t&&("number"==this.type&&(t=parseInt(t)),this.isBooleanType)){var o=t.toLowerCase();"false"!==o&&"true"!==o||(t="true"===o)}e[this.name]=t}},Object.defineProperty(e.prototype,"isBooleanType",{get:function(){return"boolean"===this.type||"switch"===this.type},enumerable:!1,configurable:!0}),e.prototype.validateValue=function(e){var t=this.choices;return!Array.isArray(t)||0===t.length||t.indexOf(e)>-1},e.prototype.getObjType=function(e){return this.classNamePart?e.replace(this.classNamePart,""):e},Object.defineProperty(e.prototype,"choices",{get:function(){return this.getChoices(null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasChoices",{get:function(){return!!this.choicesValue||!!this.choicesfunc},enumerable:!1,configurable:!0}),e.prototype.getChoices=function(e,t){return void 0===t&&(t=null),null!=this.choicesValue?this.choicesValue:null!=this.choicesfunc?this.choicesfunc(e,t):null},e.prototype.setChoices=function(e,t){void 0===t&&(t=null),this.choicesValue=e,this.choicesfunc=t},e.prototype.getBaseValue=function(){return this.baseValue?"function"==typeof this.baseValue?this.baseValue():this.baseValue:""},e.prototype.setBaseValue=function(e){this.baseValue=e},Object.defineProperty(e.prototype,"readOnly",{get:function(){return null!=this.readOnlyValue&&this.readOnlyValue},set:function(e){this.readOnlyValue=e},enumerable:!1,configurable:!0}),e.prototype.isEnable=function(e){return!this.readOnly&&(!e||!this.enableIf||this.enableIf(this.getOriginalObj(e)))},e.prototype.isVisible=function(e,t){void 0===t&&(t=null);var n=!this.layout||!e||this.layout===e;return!(!this.visible||!n)&&(!this.visibleIf||!t||this.visibleIf(this.getOriginalObj(t)))},e.prototype.getOriginalObj=function(e){if(e&&e.getOriginalObj){var t=e.getOriginalObj();if(t&&D.findProperty(t.getType(),this.name))return t}return e},Object.defineProperty(e.prototype,"visible",{get:function(){return null==this.visibleValue||this.visibleValue},set:function(e){this.visibleValue=e},enumerable:!1,configurable:!0}),e.prototype.isAvailableInVersion=function(e){return!(!this.alternativeName&&!this.oldName)||this.isAvailableInVersionCore(e)},e.prototype.getSerializedName=function(e){return this.alternativeName?this.isAvailableInVersionCore(e)?this.name:this.alternativeName||this.oldName:this.name},e.prototype.getSerializedProperty=function(e,t){return!this.oldName||this.isAvailableInVersionCore(t)?this:e&&e.getType?D.findProperty(e.getType(),this.oldName):null},e.prototype.isAvailableInVersionCore=function(e){return!e||!this.version||r.compareVerions(this.version,e)<=0},Object.defineProperty(e.prototype,"isLocalizable",{get:function(){return null!=this.isLocalizableValue&&this.isLocalizableValue},set:function(e){this.isLocalizableValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataList",{get:function(){return Array.isArray(this.dataListValue)?this.dataListValue:[]},set:function(e){this.dataListValue=e},enumerable:!1,configurable:!0}),e.prototype.mergeWith=function(t){for(var n=e.mergableValues,o=0;o<n.length;o++)this.mergeValue(t,n[o]);this.isArray=t.isArray},e.prototype.addDependedProperty=function(e){this.dependedProperties||(this.dependedProperties=[]),this.dependedProperties.indexOf(e)<0&&this.dependedProperties.push(e)},e.prototype.getDependedProperties=function(){return this.dependedProperties?this.dependedProperties:[]},e.prototype.schemaType=function(){if("choicesByUrl"!==this.className)return"string"===this.className?this.className:this.className||this.baseClassName?"array":"switch"==this.type?"boolean":"boolean"==this.type||"number"==this.type?this.type:"string"},e.prototype.schemaRef=function(){if(this.className)return this.className},e.prototype.mergeValue=function(e,t){null==this[t]&&null!=e[t]&&(this[t]=e[t])},e.Index=1,e.mergableValues=["typeValue","choicesValue","baseValue","readOnlyValue","visibleValue","isSerializable","isLightSerializable","isCustom","isBindable","isUnique","uniquePropertyName","isDynamicChoices","isLocalizableValue","className","alternativeName","oldName","layout","version","classNamePart","baseClassName","defaultValue","defaultValueFunc","serializationProperty","onGetValue","onSetValue","onSettingValue","displayName","category","categoryIndex","visibleIndex","nextToProperty","overridingProperty","locationInTable","dependedProperties","visibleIf","enableIf","onExecuteExpression","onPropertyEditorUpdate","maxLength","maxValue","minValue","dataListValue"],e}(),C=function(){function e(){}return e.addProperty=function(t,n){t=t.toLowerCase();var o=e.properties;o[t]||(o[t]=[]),o[t].push(n)},e.removeProperty=function(t,n){t=t.toLowerCase();var o=e.properties;if(o[t])for(var i=o[t],r=0;r<i.length;r++)if(i[r].name==n){o[t].splice(r,1);break}},e.removeAllProperties=function(t){t=t.toLowerCase(),delete e.properties[t]},e.addClass=function(t,n){t=t.toLowerCase(),n&&(n=n.toLowerCase()),e.parentClasses[t]=n},e.getProperties=function(t){t=t.toLowerCase();for(var n=[],o=e.properties;t;){var i=o[t];if(i)for(var r=0;r<i.length;r++)n.push(i[r]);t=e.parentClasses[t]}return n},e.createProperties=function(t){t&&t.getType&&e.createPropertiesCore(t,t.getType())},e.createPropertiesCore=function(t,n){var o=e.properties;o[n]&&e.createPropertiesInObj(t,o[n]);var i=e.parentClasses[n];i&&e.createPropertiesCore(t,i)},e.createPropertiesInObj=function(t,n){for(var o=0;o<n.length;o++)e.createPropertyInObj(t,n[o])},e.createPropertyInObj=function(t,n){if(!(e.checkIsPropertyExists(t,n.name)||n.serializationProperty&&e.checkIsPropertyExists(t,n.serializationProperty))){if(n.isLocalizable&&n.serializationProperty&&t.createCustomLocalizableObj){t.createCustomLocalizableObj(n.name).defaultValue=n.getDefaultValue(t);var o={get:function(){return t.getLocalizableString(n.name)}};Object.defineProperty(t,n.serializationProperty,o);var i={get:function(){return t.getLocalizableStringText(n.name)},set:function(e){t.setLocalizableStringText(n.name,e)}};Object.defineProperty(t,n.name,i)}else{var r=n.isArray||"multiplevalues"===n.type;if("function"==typeof t.createNewArray&&(D.isDescendantOf(n.className,"itemvalue")?(t.createNewArray(n.name,function(e){e.locOwner=t,e.ownerPropertyName=n.name}),r=!0):r&&t.createNewArray(n.name),r)){var s=n.getDefaultValue(t);Array.isArray(s)&&t.setPropertyValue(n.name,s)}t.getPropertyValue&&t.setPropertyValue&&(i={get:function(){return n.onGetValue?n.onGetValue(t):t.getPropertyValue(n.name,void 0)},set:function(e){n.onSetValue?n.onSetValue(t,e,null):t.setPropertyValue(n.name,e)}},Object.defineProperty(t,n.name,i))}"condition"!==n.type&&"expression"!==n.type||n.onExecuteExpression&&t.addExpressionProperty(n.name,n.onExecuteExpression)}},e.checkIsPropertyExists=function(e,t){return e.hasOwnProperty(t)||e[t]},e.properties={},e.parentClasses={},e}(),P=function(){function e(e,t,n,o){void 0===n&&(n=null),void 0===o&&(o=null),this.name=e,this.creator=n,this.parentName=o,e=e.toLowerCase(),this.isCustomValue=!n&&"survey"!==e,this.parentName&&(this.parentName=this.parentName.toLowerCase(),C.addClass(e,this.parentName),n&&this.makeParentRegularClass()),this.properties=new Array;for(var i=0;i<t.length;i++)this.createProperty(t[i],this.isCustom)}return e.prototype.find=function(e){for(var t=0;t<this.properties.length;t++)if(this.properties[t].name==e)return this.properties[t];return null},e.prototype.findProperty=function(e){return this.fillAllProperties(),this.hashProperties[e]},e.prototype.getAllProperties=function(){return this.fillAllProperties(),this.allProperties},e.prototype.getRequiredProperties=function(){if(this.requiredProperties)return this.requiredProperties;this.requiredProperties=[];for(var e=this.getAllProperties(),t=0;t<e.length;t++)e[t].isRequired&&this.requiredProperties.push(e[t]);return this.requiredProperties},e.prototype.resetAllProperties=function(){this.allProperties=void 0,this.requiredProperties=void 0,this.hashProperties=void 0;for(var e=D.getChildrenClasses(this.name),t=0;t<e.length;t++)e[t].resetAllProperties()},Object.defineProperty(e.prototype,"isCustom",{get:function(){return this.isCustomValue},enumerable:!1,configurable:!0}),e.prototype.fillAllProperties=function(){var e=this;if(!this.allProperties){this.allProperties=[],this.hashProperties={};var t={};this.properties.forEach(function(e){return t[e.name]=e});var n=this.parentName?D.findClass(this.parentName):null;n&&n.getAllProperties().forEach(function(n){var o=t[n.name];o?(o.mergeWith(n),e.addPropCore(o)):e.addPropCore(n)}),this.properties.forEach(function(t){e.hashProperties[t.name]||e.addPropCore(t)})}},e.prototype.addPropCore=function(e){this.allProperties.push(e),this.hashProperties[e.name]=e,e.alternativeName&&(this.hashProperties[e.alternativeName]=e)},e.prototype.isOverridedProp=function(e){return!!this.parentName&&!!D.findProperty(this.parentName,e)},e.prototype.hasRegularChildClass=function(){if(this.isCustom){this.isCustomValue=!1;for(var e=0;e<this.properties.length;e++)this.properties[e].isCustom=!1;C.removeAllProperties(this.name),this.makeParentRegularClass()}},e.prototype.makeParentRegularClass=function(){if(this.parentName){var e=D.findClass(this.parentName);e&&e.hasRegularChildClass()}},e.prototype.createProperty=function(t,n){void 0===n&&(n=!1);var o="string"==typeof t?t:t.name;if(o){var i=null,s=o.indexOf(e.typeSymbol);s>-1&&(i=o.substring(s+1),o=o.substring(0,s));var a=this.getIsPropertyNameRequired(o)||!!t.isRequired;o=this.getPropertyName(o);var l=new v(this,o,a);if(i&&(l.type=i),"object"==typeof t){if(t.type&&(l.type=t.type),void 0!==t.default&&(l.defaultValue=t.default),void 0!==t.defaultFunc&&(l.defaultValueFunc=t.defaultFunc),r.isValueEmpty(t.isSerializable)||(l.isSerializable=t.isSerializable),r.isValueEmpty(t.isSerializableFunc)||(l.isSerializableFunc=t.isSerializableFunc),r.isValueEmpty(t.isLightSerializable)||(l.isLightSerializable=t.isLightSerializable),r.isValueEmpty(t.maxLength)||(l.maxLength=t.maxLength),void 0!==t.displayName&&(l.displayName=t.displayName),r.isValueEmpty(t.category)||(l.category=t.category),r.isValueEmpty(t.categoryIndex)||(l.categoryIndex=t.categoryIndex),r.isValueEmpty(t.nextToProperty)||(l.nextToProperty=t.nextToProperty),r.isValueEmpty(t.overridingProperty)||(l.overridingProperty=t.overridingProperty),r.isValueEmpty(t.visibleIndex)||(l.visibleIndex=t.visibleIndex),r.isValueEmpty(t.showMode)||(l.showMode=t.showMode),r.isValueEmpty(t.locationInTable)||(l.locationInTable=t.locationInTable),r.isValueEmpty(t.maxValue)||(l.maxValue=t.maxValue),r.isValueEmpty(t.minValue)||(l.minValue=t.minValue),r.isValueEmpty(t.dataList)||(l.dataList=t.dataList),r.isValueEmpty(t.isDynamicChoices)||(l.isDynamicChoices=t.isDynamicChoices),r.isValueEmpty(t.isBindable)||(l.isBindable=t.isBindable),r.isValueEmpty(t.isUnique)||(l.isUnique=t.isUnique),r.isValueEmpty(t.uniqueProperty)||(l.uniquePropertyName=t.uniqueProperty),r.isValueEmpty(t.isArray)||(l.isArray=t.isArray),!0!==t.visible&&!1!==t.visible||(l.visible=t.visible),t.visibleIf&&(l.visibleIf=t.visibleIf),t.enableIf&&(l.enableIf=t.enableIf),t.onExecuteExpression&&(l.onExecuteExpression=t.onExecuteExpression),t.onPropertyEditorUpdate&&(l.onPropertyEditorUpdate=t.onPropertyEditorUpdate),!0===t.readOnly&&(l.readOnly=!0),!0===t.availableInMatrixColumn&&(l.availableInMatrixColumn=!0),t.choices){var u="function"==typeof t.choices?t.choices:null,c="function"!=typeof t.choices?t.choices:null;l.setChoices(c,u)}t.baseValue&&l.setBaseValue(t.baseValue),t.onSerializeValue&&(l.onSerializeValue=t.onSerializeValue),t.onGetValue&&(l.onGetValue=t.onGetValue),t.onSetValue&&(l.onSetValue=t.onSetValue),t.onSettingValue&&(l.onSettingValue=t.onSettingValue),t.isLocalizable&&(t.serializationProperty="loc"+l.name),t.serializationProperty&&(l.serializationProperty=t.serializationProperty,l.serializationProperty&&0==l.serializationProperty.indexOf("loc")&&(l.isLocalizable=!0)),t.isLocalizable&&(l.isLocalizable=t.isLocalizable),t.className&&(l.className=t.className),t.baseClassName&&(l.baseClassName=t.baseClassName,l.isArray=!0),!0===l.isArray&&(l.isArray=!0),t.classNamePart&&(l.classNamePart=t.classNamePart),t.alternativeName&&(l.alternativeName=t.alternativeName),t.oldName&&(l.oldName=t.oldName),t.layout&&(l.layout=t.layout),t.version&&(l.version=t.version),t.dependsOn&&this.addDependsOnProperties(l,t.dependsOn)}return this.properties.push(l),n&&!this.isOverridedProp(l.name)&&(l.isCustom=!0,C.addProperty(this.name,l)),l}},e.prototype.addDependsOnProperties=function(e,t){var n=Array.isArray(t)?t:[t];e.dependsOn=n;for(var o=0;o<n.length;o++)this.addDependsOnProperty(e,n[o])},e.prototype.addDependsOnProperty=function(e,t){var n=this.find(t);n||(n=D.findProperty(this.parentName,t)),n&&n.addDependedProperty(e.name)},e.prototype.getIsPropertyNameRequired=function(t){return t.length>0&&t[0]==e.requiredSymbol},e.prototype.getPropertyName=function(e){return this.getIsPropertyNameRequired(e)?e=e.slice(1):e},e.requiredSymbol="!",e.typeSymbol=":",e}(),w=function(){function e(){this.classes={},this.alternativeNames={},this.childrenClasses={},this.dynamicPropsCache={}}return e.prototype.getObjPropertyValue=function(e,t){if(this.isObjWrapper(e)&&this.isNeedUseObjWrapper(e,t)){var n=e.getOriginalObj(),o=D.findProperty(n.getType(),t);if(o)return this.getObjPropertyValueCore(n,o)}var i=D.findProperty(e.getType(),t);return i?this.getObjPropertyValueCore(e,i):e[t]},e.prototype.setObjPropertyValue=function(e,t,n){if(e[t]!==n)if(e[t]&&e[t].setJson)e[t].setJson(n,!0);else{if(Array.isArray(n)){for(var o=[],i=0;i<n.length;i++)o.push(n[i]);n=o}e[t]=n}},e.prototype.getObjPropertyValueCore=function(e,t){if(!t.isPropertySerializable(e))return e[t.name];if(t.isLocalizable){if(t.isArray)return e[t.name];var n=e.getLocalizableString(t.name);if(n)return n.isDefautlLocale?n.text:n.getValue(n.locale);if(t.serializationProperty)return e[t.serializationProperty].text}return e.getPropertyValue(t.name)},e.prototype.isObjWrapper=function(e){return!!e.getOriginalObj&&!!e.getOriginalObj()},e.prototype.isNeedUseObjWrapper=function(e,t){if(!e.getDynamicProperties)return!0;var n=e.getDynamicProperties();if(!Array.isArray(n))return!1;for(var o=0;o<n.length;o++)if(n[o].name===t)return!0;return!1},e.prototype.addClass=function(e,t,n,o){void 0===n&&(n=null),void 0===o&&(o=null),e=e.toLowerCase();var i=new P(e,t,n,o);return this.classes[e]=i,o&&(o=o.toLowerCase(),this.childrenClasses[o]||(this.childrenClasses[o]=[]),this.childrenClasses[o].push(i)),i},e.prototype.removeClass=function(e){var t=this.findClass(e);if(t&&(delete this.classes[t.name],t.parentName)){var n=this.childrenClasses[t.parentName].indexOf(t);n>-1&&this.childrenClasses[t.parentName].splice(n,1)}},e.prototype.overrideClassCreatore=function(e,t){this.overrideClassCreator(e,t)},e.prototype.overrideClassCreator=function(e,t){e=e.toLowerCase();var n=this.findClass(e);n&&(n.creator=t)},e.prototype.getProperties=function(e){var t=this.findClass(e);return t?t.getAllProperties():[]},e.prototype.getPropertiesByObj=function(e){var t=e&&e.getType?e.getType():void 0;if(!t)return[];for(var n=this.getProperties(t),o=this.getDynamicPropertiesByObj(e),i=o.length-1;i>=0;i--)this.findProperty(t,o[i].name)&&o.splice(i,1);return 0===o.length?n:[].concat(n).concat(o)},e.prototype.addDynamicPropertiesIntoObj=function(e,t,n){var o=this;n.forEach(function(n){o.addDynamicPropertyIntoObj(e,t,n.name,!1),n.serializationProperty&&o.addDynamicPropertyIntoObj(e,t,n.serializationProperty,!0),n.alternativeName&&o.addDynamicPropertyIntoObj(e,t,n.alternativeName,!1)})},e.prototype.addDynamicPropertyIntoObj=function(e,t,n,o){var i={configurable:!0,get:function(){return t[n]}};o||(i.set=function(e){t[n]=e}),Object.defineProperty(e,n,i)},e.prototype.getDynamicPropertiesByObj=function(e,t){if(void 0===t&&(t=null),!e||!e.getType)return[];if(e.getDynamicProperties)return e.getDynamicProperties();if(!e.getDynamicType&&!t)return[];var n=t||e.getDynamicType();return this.getDynamicPropertiesByTypes(e.getType(),n)},e.prototype.getDynamicPropertiesByTypes=function(e,t,n){if(!t)return[];var o=t+"-"+e;if(this.dynamicPropsCache[o])return this.dynamicPropsCache[o];var i=this.getProperties(t);if(!i||0==i.length)return[];for(var r={},s=this.getProperties(e),a=0;a<s.length;a++)r[s[a].name]=s[a];var l=[];n||(n=[]);for(var u=0;u<i.length;u++){var c=i[u];if(this.canAddDynamicProp(c,r[c.name])){if(n.indexOf(c.name)>-1){var p=new v(c.classInfo,c.name,c.isRequired);p.mergeWith(c),(c=p).visible=!1,c.isSerializable=!1}l.push(c)}}return this.dynamicPropsCache[o]=l,l},e.prototype.canAddDynamicProp=function(e,t){if(!t)return!0;if(e===t)return!1;for(var n=e.classInfo;n&&n.parentName;){if((e=this.findProperty(n.parentName,e.name))&&e===t)return!0;n=e?e.classInfo:void 0}return!1},e.prototype.hasOriginalProperty=function(e,t){return!!this.getOriginalProperty(e,t)},e.prototype.getOriginalProperty=function(e,t){return this.findProperty(e.getType(),t)||(this.isObjWrapper(e)?this.findProperty(e.getOriginalObj().getType(),t):null)},e.prototype.getProperty=function(e,t){var n=this.findProperty(e,t);if(!n)return n;var o=this.findClass(e);if(n.classInfo===o)return n;var i=new v(o,n.name,n.isRequired);return i.mergeWith(n),o.properties.push(i),o.resetAllProperties(),i},e.prototype.findProperty=function(e,t){var n=this.findClass(e);return n?n.findProperty(t):null},e.prototype.findProperties=function(e,t){var n=new Array,o=this.findClass(e);if(!o)return n;for(var i=0;i<t.length;i++){var r=o.findProperty(t[i]);r&&n.push(r)}return n},e.prototype.getAllPropertiesByName=function(e){for(var t=new Array,n=this.getAllClasses(),o=0;o<n.length;o++)for(var i=this.findClass(n[o]),r=0;r<i.properties.length;r++)if(i.properties[r].name==e){t.push(i.properties[r]);break}return t},e.prototype.getAllClasses=function(){var e=new Array;for(var t in this.classes)e.push(t);return e},e.prototype.createClass=function(e,t){void 0===t&&(t=void 0),e=e.toLowerCase();var n=this.findClass(e);if(!n)return null;if(n.creator)return n.creator(t);for(var o=n.parentName;o;){if(!(n=this.findClass(o)))return null;if(o=n.parentName,n.creator)return this.createCustomType(e,n.creator,t)}return null},e.prototype.createCustomType=function(e,t,n){void 0===n&&(n=void 0),e=e.toLowerCase();var o=t(n),i=e,r=o.getTemplate?o.getTemplate():o.getType();return o.getType=function(){return i},o.getTemplate=function(){return r},C.createProperties(o),o},e.prototype.getChildrenClasses=function(e,t){void 0===t&&(t=!1),e=e.toLowerCase();var n=[];return this.fillChildrenClasses(e,t,n),n},e.prototype.getRequiredProperties=function(e){var t=this.findClass(e);if(!t)return[];for(var n=t.getRequiredProperties(),o=[],i=0;i<n.length;i++)o.push(n[i].name);return o},e.prototype.addProperties=function(e,t){e=e.toLowerCase();for(var n=this.findClass(e),o=0;o<t.length;o++)this.addCustomPropertyCore(n,t[o])},e.prototype.addProperty=function(e,t){return this.addCustomPropertyCore(this.findClass(e),t)},e.prototype.addCustomPropertyCore=function(e,t){if(!e)return null;var n=e.createProperty(t,!0);return n&&(this.clearDynamicPropsCache(e),e.resetAllProperties()),n},e.prototype.removeProperty=function(e,t){var n=this.findClass(e);if(!n)return!1;var o=n.find(t);o&&(this.clearDynamicPropsCache(n),this.removePropertyFromClass(n,o),n.resetAllProperties(),C.removeProperty(n.name,t))},e.prototype.clearDynamicPropsCache=function(e){this.dynamicPropsCache={}},e.prototype.removePropertyFromClass=function(e,t){var n=e.properties.indexOf(t);n<0||e.properties.splice(n,1)},e.prototype.fillChildrenClasses=function(e,t,n){var o=this.childrenClasses[e];if(o)for(var i=0;i<o.length;i++)t&&!o[i].creator||n.push(o[i]),this.fillChildrenClasses(o[i].name,t,n)},e.prototype.findClass=function(e){e=e.toLowerCase();var t=this.classes[e];if(!t){var n=this.alternativeNames[e];if(n&&n!=e)return this.findClass(n)}return t},e.prototype.isDescendantOf=function(e,t){if(!e||!t)return!1;e=e.toLowerCase(),t=t.toLowerCase();var n=this.findClass(e);if(!n)return!1;var o=n;do{if(o.name===t)return!0;o=this.classes[o.parentName]}while(o);return!1},e.prototype.addAlterNativeClassName=function(e,t){this.alternativeNames[t.toLowerCase()]=e.toLowerCase()},e.prototype.generateSchema=function(e){void 0===e&&(e=void 0),e||(e="survey");var t=this.findClass(e);if(!t)return null;var n={$schema:"http://json-schema.org/draft-07/schema#",title:"SurveyJS Library json schema",type:"object",properties:{},definitions:{locstring:this.generateLocStrClass()}};return this.generateSchemaProperties(t,n,n.definitions,!0),n},e.prototype.generateLocStrClass=function(){var e={},t=D.findProperty("survey","locale");if(t){var n=t.getChoices(null);Array.isArray(n)&&(n.indexOf("en")<0&&n.splice(0,0,"en"),n.splice(0,0,"default"),n.forEach(function(t){t&&(e[t]={type:"string"})}))}return{$id:"locstring",type:"object",properties:e}},e.prototype.generateSchemaProperties=function(e,t,n,o){if(e){var i=t.properties,r=[];"question"===e.name&&(i.type={type:"string"},r.push("type"));for(var s=0;s<e.properties.length;s++){var a=e.properties[s];!1!==a.isSerializable&&(e.parentName&&D.findProperty(e.parentName,a.name)||(i[a.name]=this.generateSchemaProperty(a,n,o),a.isRequired&&r.push(a.name)))}r.length>0&&(t.required=r)}},e.prototype.generateSchemaProperty=function(e,t,n){if(e.isLocalizable)return{oneOf:[{type:"string"},{$ref:this.getChemeRefName("locstring",n)}]};var o=e.schemaType(),i=e.schemaRef(),r={};if(o&&(r.type=o),e.hasChoices){var s=e.getChoices(null);Array.isArray(s)&&s.length>0&&(r.enum=this.getChoicesValues(s))}if(i&&("array"===o?"string"===e.className?r.items={type:e.className}:r.items={$ref:this.getChemeRefName(e.className,n)}:r.$ref=this.getChemeRefName(i,n),this.generateChemaClass(e.className,t,!1)),e.baseClassName){var a=this.getChildrenClasses(e.baseClassName,!0);"question"==e.baseClassName&&a.push(this.findClass("panel")),r.items={anyOf:[]};for(var l=0;l<a.length;l++){var u=a[l].name;r.items.anyOf.push({$ref:this.getChemeRefName(u,n)}),this.generateChemaClass(u,t,!1)}}return r},e.prototype.getChemeRefName=function(e,t){return t?"#/definitions/"+e:e},e.prototype.generateChemaClass=function(e,t,n){if(!t[e]){var o=this.findClass(e);if(o){var i=!!o.parentName&&"base"!=o.parentName;i&&this.generateChemaClass(o.parentName,t,n);var r={type:"object",$id:e};t[e]=r;var s={properties:{}};this.generateSchemaProperties(o,s,t,n),i?r.allOf=[{$ref:this.getChemeRefName(o.parentName,n)},{properties:s.properties}]:r.properties=s.properties,Array.isArray(s.required)&&(r.required=s.required)}}},e.prototype.getChoicesValues=function(e){var t=new Array;return e.forEach(function(e){"object"==typeof e&&void 0!==e.value?t.push(e.value):t.push(e)}),t},e}(),V=function(){function e(e,t){this.type=e,this.message=t,this.description="",this.at=-1,this.end=-1}return e.prototype.getFullDescription=function(){return this.message+(this.description?"\n"+this.description:"")},e}(),x=function(e){function t(t,n){var o=e.call(this,"unknownproperty","Unknown property in class '"+n+"': '"+t+"'.")||this;return o.propertyName=t,o.className=n,o}return d(t,e),t}(V),O=function(e){function t(t,n,o){var i=e.call(this,n,o)||this;return i.baseClassName=t,i.type=n,i.message=o,i}return d(t,e),t}(V),S=function(e){function t(t,n){var o=e.call(this,n,"missingtypeproperty","The property type is missing in the object. Please take a look at property: '"+t+"'.")||this;return o.propertyName=t,o.baseClassName=n,o}return d(t,e),t}(O),I=function(e){function t(t,n){var o=e.call(this,n,"incorrecttypeproperty","The property type is incorrect in the object. Please take a look at property: '"+t+"'.")||this;return o.propertyName=t,o.baseClassName=n,o}return d(t,e),t}(O),T=function(e){function t(t,n){var o=e.call(this,"requiredproperty","The property '"+t+"' is required in class '"+n+"'.")||this;return o.propertyName=t,o.className=n,o}return d(t,e),t}(V),R=function(e){function t(t,n){var o=e.call(this,"arrayproperty","The property '"+t+"' should be an array in '"+n+"'.")||this;return o.propertyName=t,o.className=n,o}return d(t,e),t}(V),E=function(e){function t(t,n){var o=e.call(this,"incorrectvalue","The property value: '"+n+"' is incorrect for property '"+t.name+"'.")||this;return o.property=t,o.value=n,o}return d(t,e),t}(V),A=function(){function e(){this.errors=new Array,this.lightSerializing=!1}return Object.defineProperty(e,"metaData",{get:function(){return e.metaDataValue},enumerable:!1,configurable:!0}),e.prototype.toJsonObject=function(e,t){return this.toJsonObjectCore(e,null,t)},e.prototype.toObject=function(e,t,n){this.toObjectCore(e,t,n);var o=this.getRequiredError(t,e);o&&this.addNewError(o,e,t)},e.prototype.toObjectCore=function(t,n,o){if(t){var i=null,r=void 0,s=!0;if(n.getType&&(r=n.getType(),i=D.getProperties(r),s=!!r&&!D.isDescendantOf(r,"itemvalue")),i){n.startLoadingFromJson&&n.startLoadingFromJson(t),i=this.addDynamicProperties(n,t,i),this.options=o;var a={};a[e.typePropertyName]=!0;var l={};for(var u in t)this.setPropertyValueToObj(t,n,u,i,a,l,r,s,o);this.options=void 0,n.endLoadingFromJson&&n.endLoadingFromJson()}}},e.prototype.setPropertyValueToObj=function(t,n,o,i,r,s,a,l,u){var c=this;if(!r[o])if(o!==e.positionPropertyName){var p=this.findProperty(i,o);if(!p&&l&&this.addNewError(new x(o.toString(),a),t,n),p){var h=p.dependsOn;Array.isArray(h)&&(s[o]=!0,h.forEach(function(e){s[e]||c.setPropertyValueToObj(t,n,e,i,r,s,a,!1,u)})),this.valueToObj(t[o],n,p,t,u),r[o]=!0}}else n[o]=t[o]},e.prototype.toJsonObjectCore=function(t,n,o){if(!t||!t.getType)return t;if(!t.isSurvey&&"function"==typeof t.getData)return t.getData();var i={};null==n||n.className||(i[e.typePropertyName]=n.getObjType(t.getType()));var r=!0===o;return o&&!0!==o||(o={}),r&&(o.storeDefaults=r),this.propertiesToJson(t,D.getProperties(t.getType()),i,o),this.propertiesToJson(t,this.getDynamicProperties(t),i,o),i},e.prototype.getDynamicProperties=function(e){return D.getDynamicPropertiesByObj(e)},e.prototype.addDynamicProperties=function(e,t,n){if(!e.getDynamicPropertyName&&!e.getDynamicProperties)return n;if(e.getDynamicPropertyName){var o=e.getDynamicPropertyName();if(!o)return n;o&&t[o]&&(e[o]=t[o])}var i=this.getDynamicProperties(e);return 0===i.length?n:[].concat(n).concat(i)},e.prototype.propertiesToJson=function(e,t,n,o){for(var i=0;i<t.length;i++)this.valueToJson(e,n,t[i],o)},e.prototype.valueToJson=function(e,t,n,o){o||(o={}),!n.isPropertySerializable(e)||!1===n.isLightSerializable&&this.lightSerializing||o.version&&!n.isAvailableInVersion(o.version)||this.valueToJsonCore(e,t,n,o)},e.prototype.valueToJsonCore=function(e,t,n,o){var i=n.getSerializedProperty(e,o.version);if(i&&i!==n)this.valueToJsonCore(e,t,i,o);else{var r=n.getSerializableValue(e,o.storeDefaults);if(void 0!==r){if(this.isValueArray(r)){for(var s=[],a=0;a<r.length;a++)s.push(this.toJsonObjectCore(r[a],n,o));r=s.length>0?s:null}else r=this.toJsonObjectCore(r,n,o);if(null!=r){var l=n.getSerializedName(o.version),u="function"==typeof e.getPropertyValue&&null!==e.getPropertyValue(l,null);(o.storeDefaults&&u||!n.isDefaultValueByObj(e,r))&&(D.onSerializingProperty&&D.onSerializingProperty(e,n,r,t)||(t[l]=this.removePosOnValueToJson(n,r)))}}}},e.prototype.valueToObj=function(e,t,n,o,i){if(null!=e)if(this.removePos(n,e),null!=n&&n.hasToUseSetValue)n.setValue(t,e,this);else{if(n.isArray&&!Array.isArray(e)&&e){e=[e];var r=o&&n.alternativeName&&o[n.alternativeName]?n.alternativeName:n.name;this.addNewError(new R(r,t.getType()),o||e,t)}if(this.isValueArray(e))this.valueToArray(e,t,n.name,n,i);else{var s=this.createNewObj(e,n);s.newObj&&(this.toObjectCore(e,s.newObj,i),e=s.newObj),s.error||(null!=n?(n.setValue(t,e,this),i&&i.validatePropertyValues&&(n.validateValue(e)||this.addNewError(new E(n,e),o,t))):t[n.name]=e)}}},e.prototype.removePosOnValueToJson=function(e,t){return e.isCustom&&t?(this.removePosFromObj(t),t):t},e.prototype.removePos=function(e,t){!e||!e.type||e.type.indexOf("value")<0||this.removePosFromObj(t)},e.prototype.removePosFromObj=function(t){if(t&&"function"!=typeof t.getType){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.removePosFromObj(t[n]);if("object"==typeof t)for(var o in t[e.positionPropertyName]&&delete t[e.positionPropertyName],t)this.removePosFromObj(t[o])}},e.prototype.isValueArray=function(e){return e&&Array.isArray(e)},e.prototype.createNewObj=function(e,t){var n={newObj:null,error:null},o=this.getClassNameForNewObj(e,t);return n.newObj=o?D.createClass(o,e):null,n.error=this.checkNewObjectOnErrors(n.newObj,e,t,o),n},e.prototype.getClassNameForNewObj=function(t,n){var o=null!=n&&n.className?n.className:void 0;if(o||(o=t[e.typePropertyName]),!o)return o;o=o.toLowerCase();var i=n.classNamePart;return i&&o.indexOf(i)<0&&(o+=i),o},e.prototype.checkNewObjectOnErrors=function(e,t,n,o){var i=null;return e?i=this.getRequiredError(e,t):n.baseClassName&&(i=o?new I(n.name,n.baseClassName):new S(n.name,n.baseClassName)),i&&this.addNewError(i,t,e),i},e.prototype.getRequiredError=function(e,t){if(!e.getType||"function"==typeof e.getData)return null;var n=D.findClass(e.getType());if(!n)return null;var o=n.getRequiredProperties();if(!Array.isArray(o))return null;for(var i=0;i<o.length;i++){var s=o[i];if(r.isValueEmpty(s.defaultValue)&&!t[s.name])return new T(s.name,e.getType())}return null},e.prototype.addNewError=function(t,n,o){if(t.jsonObj=n,t.element=o,this.errors.push(t),n){var i=n[e.positionPropertyName];i&&(t.at=i.start,t.end=i.end)}},e.prototype.valueToArray=function(e,t,n,o,i){if(!t[n]||this.isValueArray(t[n])){t[n]&&e.length>0&&t[n].splice(0,t[n].length);var r=t[n]?t[n]:[];this.addValuesIntoArray(e,r,o,i),t[n]||(t[n]=r)}},e.prototype.addValuesIntoArray=function(e,t,n,o){for(var i=0;i<e.length;i++){var r=this.createNewObj(e[i],n);r.newObj?(e[i].name&&(r.newObj.name=e[i].name),e[i].valueName&&(r.newObj.valueName=e[i].valueName.toString()),t.push(r.newObj),this.toObjectCore(e[i],r.newObj,o)):r.error||t.push(e[i])}},e.prototype.findProperty=function(e,t){if(!e)return null;for(var n=0;n<e.length;n++){var o=e[n];if(o.name==t||o.alternativeName==t)return o}return null},e.typePropertyName="type",e.positionPropertyName="pos",e.metaDataValue=new w,e}(),D=A.metaData,L=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),j=function(){function e(){}return e.prototype.getValueInfo=function(e){var t=this.getValueInfoCore(e);return!t.isFound&&void 0===t.value&&e.name.endsWith(".length")&&(t.isFound=!0,t.value=0),t},e.prototype.getValueInfoCore=function(e){var t=e.name,n=e.context,o=this.run(e.name,n,e.createObjects);if((!o||!o.isFound)&&n&&n.getRootObj){var i=n.getRootObj();if(i)return e.context=i.getValueGetterContext(),this.getValueInfo(e)}var r={isFound:!1,value:void 0};return o&&o.isFound?(r.isFound=!0,r.value=o.value,r.strictCompare=o.requireStrictCompare,o.context&&(e.isText&&o.context.getTextValue&&(r.value=o.context.getTextValue(t,r.value,e.isDisplayValue)),o.context.getQuestion&&(r.question=o.context.getQuestion())),r):r},e.prototype.getValue=function(e,t,n,o){var i=this.getValueInfo({name:e,context:t,isText:n,isDisplayValue:o});return i.isFound?i.value:void 0},e.prototype.getDisplayValue=function(e,t,n){return void 0===n&&(n=!0),this.getValue(e,t,!0,n)},e.prototype.isAnyKeyChanged=function(e,t){for(var n=0;n<t.length;n++){var o=t[n];if(o){var i=o.toLowerCase();if(e.hasOwnProperty(o))return!0;if(o!==i&&e.hasOwnProperty(i))return!0;var s=this.getFirstNameByKeys(e,o);if(s){if(o===s)return!0;var a=e[s];if(null!=a){if(!a.hasOwnProperty("oldValue")||!a.hasOwnProperty("newValue"))return!0;var l={};l[s]=a.oldValue;var u=this.getValueFromObject(l,o);l[s]=a.newValue;var c=this.getValueFromObject(l,o);if(!r.isTwoValueEquals(u,c,!1,!1,!1))return!0}}}}return!1},e.prototype.getFirstNameByKeys=function(e,t){for(var n=this.getPath(t),o="",i=0;i<n.length;i++)if(o+=(i>0?".":"")+n[i].name,e.hasOwnProperty(o))return o;return""},e.prototype.getValueFromObject=function(e,t){var n=this.getValueInfo({name:t,context:new N(e)});return n.isFound?n.value:void 0},e.prototype.run=function(e,t,n){if(t){var o=this.getPath(e),i=t.getValue(o,!0,-1,n);return i&&i.isFound?i:void 0}},e.prototype.getPath=function(e){for(var t=[],n=e.split("."),o=0;o<n.length;o++)t.push(this.getValueItem(n[o]));return t},e.prototype.getValueItem=function(e){var t=void 0;if((e=e.trim()).lastIndexOf("]")===e.length-1){var n=e.lastIndexOf("[");if(n>-1){var o=e.substring(n+1,e.length-1);t=r.getNumber(o),(isNaN(t)||t<0)&&(t=void 0),void 0!==t&&(e=e.substring(0,n))}}var i={name:e};return void 0!==t&&(i.index=t),i},e}(),_=function(){function e(){}return e.prototype.getValue=function(e,t,n,o){for(var i=0,r={isFound:!1,value:this.getInitialvalue(),context:this};i<e.length;){if(i=this.checkValueByPath(e,i,r),!r.isFound)return;var s=e[i];if(i++,r.context!==this&&r.context)return r.context.getValue([].concat(e.slice(i)),!1,s.index,o);if(void 0!==s.index&&(this.updateItemByIndex(s.index,r),!r.isFound))return}return r},e.prototype.isSearchNameRevert=function(){return!1},e.prototype.checkValueByPath=function(e,t,n){var o=this.isSearchNameRevert(),i=t,r=this.getMaxIndexByPath(e,t);for(n.isFound=!1,o&&(t=r);!n.isFound&&t<=r&&t>=i;){var s=this.getNameByPath(e,i,t+1);if(this.updateValueByItem(s,n),n.isFound)break;t+=o?-1:1}return t},e.prototype.getNameByPath=function(e,t,n){for(var o="",i=t;i<n;i++)i>t&&(o+="."),o+=e[i].name;return o},e.prototype.getMaxIndexByPath=function(e,t){for(var n=t;n<e.length&&void 0===e[n].index;)n++;return n<e.length?n:e.length-1},e.prototype.getTextValue=function(e,t,n){return n?null==t?"":t.toString():t},e.prototype.getInitialvalue=function(){},e.prototype.updateValueByItem=function(e,t){},e.prototype.updateItemByIndex=function(e,t){},e}(),N=function(e){function t(t){var n=e.call(this)||this;return n.variables=t,n}return L(t,e),t.prototype.getInitialvalue=function(){return this.variables},t.prototype.isSearchNameRevert=function(){return!0},t.prototype.updateValueByItem=function(e,t){var n=this.getValueByItemCore(t.value,e);t.isFound=void 0!==n,t.isFound&&(t.value=n)},t.prototype.updateItemByIndex=function(e,t){var n=t.value;Array.isArray(n)&&e<n.length?(t.value=n[e],t.isFound=!0):t.isFound=!1},t.prototype.getValueByItemCore=function(e,t){if(e&&t){var n=t.toLowerCase();if("length"===t&&(Array.isArray(e)||"string"==typeof e))return e.length;var o=n[0],i=t[0].toLocaleUpperCase();for(var r in e){var s=r[0];if((s===o||s===i)&&r.toLowerCase()==n)return e[r]}}},t}(_),M=function(e){function t(t,n){var o=e.call(this,t)||this;return o.second=n,o}return L(t,e),t.prototype.getValue=function(t,n,o,i){var r=e.prototype.getValue.call(this,t,n,o,i);return!this.second||(null==r?void 0:r.isFound)?r:this.second.getValue(t,n,o,i)},t}(N),k=function(){function e(e){this.properties=null,this.asyncValues={},this.contextValue=e}return Object.defineProperty(e.prototype,"context",{get:function(){return this.contextValue},enumerable:!1,configurable:!0}),e.prototype.hasValue=function(e){return!!this.context&&this.getValueInfoByContext(e).isFound},e.prototype.getValue=function(e){if(this.context)return this.getValueInfoByContext(e).value},e.prototype.getValueInfoByContext=function(e){return(new j).getValueInfo({name:e,context:this.context,isText:!1})},e.prototype.getValueInfo=function(e){if(this.context){var t=this.getValueInfoByContext(e.name);return e.value=t.value,e.hasValue=t.isFound,void(e.strictCompare=t.strictCompare)}return{hasValue:!1}},e}(),F=function(){function e(){}return e.disposedObjectChangedProperty=function(t,n){e.warn('An attempt to set a property "'+t+'" of a disposed object "'+n+'"')},e.inCorrectQuestionValue=function(t,n){var o=JSON.stringify(n,null,3);e.warn("An attempt to assign an incorrect value"+o+' to the following question: "'+t+'"')},e.warn=function(e){console.warn(e)},e.error=function(e){console.error(e)},e}(),B=function(){function e(){this.functionHash={},this.isAsyncHash={}}return e.prototype.register=function(e,t,n){void 0===n&&(n=!1),this.functionHash[e]=t,n&&(this.isAsyncHash[e]=!0)},e.prototype.unregister=function(e){delete this.functionHash[e],delete this.isAsyncHash[e]},e.prototype.hasFunction=function(e){return!!this.functionHash[e]},e.prototype.isAsyncFunction=function(e){return!!this.isAsyncHash[e]},e.prototype.clear=function(){this.functionHash={}},e.prototype.getAll=function(){var e=[];for(var t in this.functionHash)e.push(t);return e.sort()},e.prototype.run=function(e,t,n,o){void 0===n&&(n=null);var i=this.functionHash[e];if(!i)return F.warn(this.getUnknownFunctionErrorText(e,n)),null;var r={func:i};if(n)for(var s in n)r[s]=n[s];return r.func(t,o)},e.prototype.getUnknownFunctionErrorText=function(e,t){return"Unknown function name: '"+e+"'."+ve.getQuestionErrorText(t)},e.Instance=new e,e}(),q=B.Instance.register;function Q(e,t){if(null!=e)if(Array.isArray(e))for(var n=0;n<e.length;n++)Q(e[n],t);else r.isNumber(e)&&(e=r.getNumber(e)),t.push(e)}function z(e){var t=[];Q(e,t);for(var n=0,o=0;o<t.length;o++)n=r.correctAfterPlusMinis(n,t[o],n+t[o]);return n}function H(e,t){var n=[];Q(e,n);for(var o=void 0,i=0;i<n.length;i++)void 0===o&&(o=n[i]),t?o>n[i]&&(o=n[i]):o<n[i]&&(o=n[i]);return o}function U(e,t,n,o,i,s,a){return!e||r.isValueEmpty(e[t])||s&&!s.runValues(e,a)?n:o(n,i?"string"==typeof(l=e[t])?r.isNumber(l)?r.getNumber(l):void 0:l:1);var l}function W(e,t,n,o,i){void 0===i&&(i=!0);var r=function(e,t){if(e.length<2||e.length>3)return null;var n=e[0];if(!n)return null;if(!Array.isArray(n)&&!Array.isArray(Object.keys(n)))return null;var o=e[1];if("string"!=typeof o&&!(o instanceof String))return null;var i=e.length>2?e[2]:void 0;if("string"==typeof i||i instanceof String||(i=void 0),!i){var r=Array.isArray(t)&&t.length>2?t[2]:void 0;r&&r.toString()&&(i=r.toString())}return{data:n,name:o,expression:i}}(t,n);if(r){var s=r.expression?new Pe(r.expression):void 0;s&&s.isAsync&&(s=void 0);var a=void 0;if(Array.isArray(r.data))for(var l=0;l<r.data.length;l++)a=U(r.data[l],r.name,a,o,i,s,e);else for(var u in r.data)a=U(r.data[u],r.name,a,o,i,s,e);return a}}function G(e){var t;return{survey:e.survey,question:e.question,context:null===(t=e.survey)||void 0===t?void 0:t.getValueGetterContext()}}function J(e,t,n){if("days"===n)return X([e,t]);var o=i("function-dateDiffMonths",e),r=i("function-dateDiffMonths",t);n=n||"years";var s=12*(r.getFullYear()-o.getFullYear())+r.getMonth()-o.getMonth();return r.getDate()<o.getDate()&&(s-=1),"months"===n?s:~~(s/12)}function K(e){if(!e)return!1;for(var t=e.questions,n=0;n<t.length;n++)if(!t[n].validate(!1))return!1;return!0}function Y(e){var t=i("function-today");return gn.localization.useLocalTimeZone?t.setHours(0,0,0,0):t.setUTCHours(0,0,0,0),Array.isArray(e)&&1==e.length&&t.setDate(t.getDate()+e[0]),t}function X(e){if(!Array.isArray(e)||2!==e.length)return 0;if(!e[0]||!e[1])return 0;var t=i("function-diffDays",e[0]),n=i("function-diffDays",e[1]),o=Math.abs(n-t);return Math.ceil(o/864e5)}function Z(e,t){var n=Y(void 0);return t&&t[0]&&(n=i("function-"+e,t[0])),n}function $(e,t){if(e&&t){for(var n=e.question;n&&n.parent;){if(r=n.parent.getQuestionByName(t))return r;n=n.parentQuestion}for(var o=["row","panel","survey"],i=0;i<o.length;i++){var r,s=e[o[i]];if(s&&s.getQuestionByName&&(r=s.getQuestionByName(t)))return r}return null}}function ee(e,t){return t.length>1&&!r.isValueEmpty(t[1])?e.getDisplayValue(!0,t[1]):e.displayValue}B.Instance.register("sum",z),B.Instance.register("min",function(e){return H(e,!0)}),B.Instance.register("max",function(e){return H(e,!1)}),B.Instance.register("count",function(e){var t=[];return Q(e,t),t.length}),B.Instance.register("avg",function(e){var t=[];Q(e,t);var n=z(e);return t.length>0?n/t.length:0}),B.Instance.register("round",function(e){var t=[];if(Q(e,t),t.length>0){var n=t[0],o=t[1]||0;if(r.isNumber(n)&&r.isNumber(o)){var i=Math.pow(10,o),s=n*i*(1+Number.EPSILON);return Math.round(s)/i}}return NaN}),B.Instance.register("trunc",function(e){var t=[];if(Q(e,t),t.length>0){var n=t[0],o=t[1]||-1;if(r.isNumber(n)&&r.isNumber(o)){var i=new RegExp("^-?\\d+(?:.\\d{0,"+o+"})?");return Number(n.toString().match(i)[0])}}return NaN}),B.Instance.register("sumInArray",function(e,t){var n=W(G(this),e,t,function(e,t){return null==e&&(e=0),null==t||null==t?e:r.correctAfterPlusMinis(e,t,e+t)});return void 0!==n?n:0}),B.Instance.register("minInArray",function(e,t){return W(G(this),e,t,function(e,t){return null==e?t:null==t||null==t||e<t?e:t})}),B.Instance.register("maxInArray",function(e,t){return W(G(this),e,t,function(e,t){return null==e?t:null==t||null==t||e>t?e:t})}),B.Instance.register("countInArray",function(e,t){var n=W(G(this),e,t,function(e,t){return null==e&&(e=0),null==t||null==t?e:e+1},!1);return void 0!==n?n:0}),B.Instance.register("avgInArray",function(e,t){var n=G(this),o=function(o){return B.Instance.run(o,e,n,t)},i=o("countInArray");return 0==i?0:o("sumInArray")/i}),B.Instance.register("iif",function(e){if(!Array.isArray(e)||e.length<2)return null;var t=e.length>2?e[2]:void 0;return e[0]?e[1]:t}),B.Instance.register("getDate",function(e){return!Array.isArray(e)||e.length<1||!e[0]?null:i("function-getDate",e[0])}),B.Instance.register("age",function(e){return!Array.isArray(e)||e.length<1||!e[0]?null:J(e[0],void 0,(e.length>1?e[1]:"")||"years")}),B.Instance.register("dateDiff",function(e){if(!Array.isArray(e)||e.length<2||!e[0]||!e[1])return null;var t=(e.length>2?e[2]:"")||"days",n="hours"===t||"minutes"===t||"seconds"===t,o=n?"days":t,r=J(e[0],e[1],o);if(n){var s=i("function-dateDiffMonths",e[0]),a=i("function-dateDiffMonths",e[1]);(a.getHours()>s.getHours()||"hours"!==t&&a.getHours()===s.getHours()&&a.getMinutes()>s.getMinutes())&&(r-=1);var l=24*r+a.getHours()-s.getHours();if("hours"===t)return l;a.getMinutes()<s.getMinutes()&&(l-=1);var u=60*l+a.getMinutes()-s.getMinutes();return"minutes"===t?u:60*u+a.getSeconds()-s.getSeconds()}return r}),B.Instance.register("dateAdd",function(e){if(!Array.isArray(e)||e.length<2||!e[0]||!e[1])return null;var t=i("function-dateAdd",e[0]),n=e[1],o=e[2]||"days";return"days"===o&&t.setDate(t.getDate()+n),"months"===o&&t.setMonth(t.getMonth()+n),"years"===o&&t.setFullYear(t.getFullYear()+n),t}),B.Instance.register("isContainerReady",function(e){if(!e&&e.length<1)return!1;if(!e[0]||!this.survey)return!1;var t=e[0],n=this.survey.getPageByName(t);if(n||(n=this.survey.getPanelByName(t)),!n){var o=this.survey.getQuestionByName(t);if(!o||!Array.isArray(o.panels))return!1;if(!(e.length>1)){for(var i=0;i<o.panels.length;i++)if(!K(o.panels[i]))return!1;return!0}e[1]<o.panels.length&&(n=o.panels[e[1]])}return K(n)}),B.Instance.register("isDisplayMode",function(){return this.survey&&this.survey.isDisplayMode}),B.Instance.register("currentDate",function(){return i("function-currentDate")}),B.Instance.register("today",Y),B.Instance.register("getYear",function(e){if(1===e.length&&e[0])return i("function-getYear",e[0]).getFullYear()}),B.Instance.register("currentYear",function(){return i("function-currentYear").getFullYear()}),B.Instance.register("diffDays",X),B.Instance.register("year",function(e){return Z("year",e).getFullYear()}),B.Instance.register("month",function(e){return Z("month",e).getMonth()+1}),B.Instance.register("day",function(e){return Z("day",e).getDate()}),B.Instance.register("weekday",function(e){return Z("weekday",e).getDay()}),B.Instance.register("displayValue",function(e){var t=this,n=$(this,e[0]);if(!n)return"";if(n.isReady)this.returnResult(ee(n,e));else{var o=function(n,i){n.isReady&&(n.onReadyChanged.remove(o),t.returnResult(ee(n,e)))};n.onReadyChanged.add(o)}},!0),B.Instance.register("propertyValue",function(e){if(2===e.length&&e[0]&&e[1]){var t=$(this,e[0]);return t?t[e[1]]:void 0}}),B.Instance.register("substring",function(e){if(e.length<2)return"";var t=e[0];if(!t||"string"!=typeof t)return"";var n=e[1];if(!r.isNumber(n))return"";var o=e.length>2?e[2]:void 0;return r.isNumber(o)?t.substring(n,o):t.substring(n)}),B.Instance.register("getComment",function(e){if(!(e.length<1)&&e[0]&&this.survey){var t=this.survey.getQuestionByName(e[0]);if(!t)return"";var n=e.length>1?e[1]:void 0;if(null!=n){var o=t.getItemByValue(n);return o?t.getCommentValue(o):void 0}return t.getCommentValue(t.otherItem)||t.comment}});var te,ne=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),oe=function(){function e(){this._id=e.counter++}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),e.prototype.toString=function(e){return void 0===e&&(e=void 0),""},e.prototype.hasFunction=function(){return!1},e.prototype.hasAsyncFunction=function(){return!1},e.prototype.addToAsyncList=function(e){},e.prototype.addOperandsToList=function(e){e.push(this),this.addChildrenToList(e)},e.prototype.isEqual=function(e){return!!e&&e.getType()===this.getType()&&this.isContentEqual(e)},e.prototype.areOperatorsEquals=function(e,t){return!e&&!t||!!e&&e.isEqual(t)},e.prototype.addChildrenToList=function(e){},e.counter=1,e}(),ie=function(e){function t(t,n,o,i){void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i=!1);var r=e.call(this)||this;return r.operatorName=t,r.left=n,r.right=o,r.isArithmeticValue=i,r.consumer=i?ce.binaryFunctions.arithmeticOp(t):ce.binaryFunctions[t],null==r.consumer&&ce.throwInvalidOperatorError(t),r}return ne(t,e),Object.defineProperty(t.prototype,"requireStrictCompare",{get:function(){return this.getIsOperandRequireStrict(this.left)||this.getIsOperandRequireStrict(this.right)},enumerable:!1,configurable:!0}),t.prototype.getIsOperandRequireStrict=function(e){return!!e&&e.requireStrictCompare},t.prototype.getType=function(){return"binary"},Object.defineProperty(t.prototype,"isArithmetic",{get:function(){return this.isArithmeticValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConjunction",{get:function(){return"or"==this.operatorName||"and"==this.operatorName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"conjunction",{get:function(){return this.isConjunction?this.operatorName:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"operator",{get:function(){return this.operatorName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftOperand",{get:function(){return this.left},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightOperand",{get:function(){return this.right},enumerable:!1,configurable:!0}),t.prototype.isContentEqual=function(e){var t=e;return t.operator===this.operator&&this.areOperatorsEquals(this.left,t.left)&&this.areOperatorsEquals(this.right,t.right)},t.prototype.evaluateParam=function(e,t){return null==e?null:e.evaluate(t)},t.prototype.evaluate=function(e){return this.consumer.call(this,this.evaluateParam(this.left,e),this.evaluateParam(this.right,e),this.requireStrictCompare)},t.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var t=e(this);if(t)return t}return"("+ce.safeToString(this.left,e)+" "+ce.operatorToString(this.operatorName)+" "+ce.safeToString(this.right,e)+")"},t.prototype.setVariables=function(e){null!=this.left&&this.left.setVariables(e),null!=this.right&&this.right.setVariables(e)},t.prototype.hasFunction=function(){return!!this.left&&this.left.hasFunction()||!!this.right&&this.right.hasFunction()},t.prototype.addChildrenToList=function(e){this.left&&this.left.addOperandsToList(e),this.right&&this.right.addOperandsToList(e)},t.prototype.hasAsyncFunction=function(){return!!this.left&&this.left.hasAsyncFunction()||!!this.right&&this.right.hasAsyncFunction()},t.prototype.addToAsyncList=function(e){this.left&&this.left.addToAsyncList(e),this.right&&this.right.addToAsyncList(e)},t}(oe),re=function(e){function t(t,n){var o=e.call(this)||this;return o.expressionValue=t,o.operatorName=n,o.consumer=ce.unaryFunctions[n],null==o.consumer&&ce.throwInvalidOperatorError(n),o}return ne(t,e),Object.defineProperty(t.prototype,"operator",{get:function(){return this.operatorName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expression",{get:function(){return this.expressionValue},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"unary"},t.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var t=e(this);if(t)return t}var n=ce.operatorToString(this.operator),o=this.expression.toString(e);return this.isRigtOperator?o+" "+n:n+" "+o},Object.defineProperty(t.prototype,"isRigtOperator",{get:function(){var e=this.operatorName.toLowerCase();return"notempty"===e||"empty"===e},enumerable:!1,configurable:!0}),t.prototype.isContentEqual=function(e){var t=e;return t.operator==this.operator&&this.areOperatorsEquals(this.expression,t.expression)},t.prototype.hasFunction=function(){return this.expression.hasFunction()},t.prototype.addChildrenToList=function(e){this.expression.addOperandsToList(e)},t.prototype.hasAsyncFunction=function(){return this.expression.hasAsyncFunction()},t.prototype.addToAsyncList=function(e){this.expression.addToAsyncList(e)},t.prototype.evaluate=function(e){var t=this.expression.evaluate(e);return this.consumer.call(this,t)},t.prototype.setVariables=function(e){this.expression.setVariables(e)},t}(oe),se=function(e){function t(t){var n=e.call(this)||this;return n.values=t,n}return ne(t,e),t.prototype.getType=function(){return"array"},t.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var t=e(this);if(t)return t}return"["+this.values.map(function(t){return t.toString(e)}).join(", ")+"]"},t.prototype.evaluate=function(e){return this.values.map(function(t){return t.evaluate(e)})},t.prototype.setVariables=function(e){this.values.forEach(function(t){t.setVariables(e)})},t.prototype.hasFunction=function(){return this.values.some(function(e){return e.hasFunction()})},t.prototype.addChildrenToList=function(e){this.values.forEach(function(t){t.addOperandsToList(e)})},t.prototype.hasAsyncFunction=function(){return this.values.some(function(e){return e.hasAsyncFunction()})},t.prototype.addToAsyncList=function(e){this.values.forEach(function(t){return t.addToAsyncList(e)})},t.prototype.isContentEqual=function(e){var t=e;if(t.values.length!==this.values.length)return!1;for(var n=0;n<this.values.length;n++)if(!t.values[n].isEqual(this.values[n]))return!1;return!0},t}(oe),ae=function(e){function t(t){var n=e.call(this)||this;return n.value=t,n}return ne(t,e),t.prototype.getType=function(){return"const"},t.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var t=e(this);if(t)return t}return this.value.toString()},Object.defineProperty(t.prototype,"correctValue",{get:function(){return this.getCorrectValue(this.value)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requireStrictCompare",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.evaluate=function(){return this.getCorrectValue(this.value)},t.prototype.setVariables=function(e){},t.prototype.getCorrectValue=function(e){if(!e||"string"!=typeof e)return e;if(ce.isBooleanValue(e))return"true"===e.toLowerCase();if(e.length>1&&this.isQuote(e[0])&&this.isQuote(e[e.length-1]))return e.substring(1,e.length-1);if(r.isNumber(e)){if("0"===e[0]&&0!=e.indexOf("0x")){var t=e.length,n=t>1&&("."===e[1]||","===e[1]);if(!n&&t>1||n&&t<2)return e}return r.getNumber(e)}return e},t.prototype.isContentEqual=function(e){return e.value==this.value},t.prototype.isQuote=function(e){return"'"==e||'"'==e},t}(oe),le=function(e){function t(n){var o=e.call(this,n)||this;return o.variableName=n,o.valueInfo={},o.useValueAsItIs=!1,o.variableName&&o.variableName.length>1&&o.variableName[0]===t.DisableConversionChar&&(o.variableName=o.variableName.substring(1),o.useValueAsItIs=!0),o}return ne(t,e),Object.defineProperty(t,"DisableConversionChar",{get:function(){return gn.expressionDisableConversionChar},set:function(e){gn.expressionDisableConversionChar=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requireStrictCompare",{get:function(){return!0===this.valueInfo.strictCompare},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"variable"},t.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var n=e(this);if(n)return n}return"{"+(this.useValueAsItIs?t.DisableConversionChar:"")+this.variableName+"}"},Object.defineProperty(t.prototype,"variable",{get:function(){return this.variableName},enumerable:!1,configurable:!0}),t.prototype.evaluate=function(e){if(this.valueInfo.name=this.variableName,e.getValueInfo(this.valueInfo),!this.valueInfo.hasValue)return this.returnJSONObject(this.variableName);var t=this.valueInfo.value;return this.valueInfo.onProcessValue&&(t=this.valueInfo.onProcessValue(t)),this.getCorrectValue(t)},t.prototype.setVariables=function(e){e.push(this.variableName)},t.prototype.getCorrectValue=function(t){return this.useValueAsItIs?t:e.prototype.getCorrectValue.call(this,t)},t.prototype.isContentEqual=function(e){return e.variable==this.variable},t.prototype.returnJSONObject=function(e){if(!e||e.length<2||e.indexOf(":")<1)return null;try{return JSON.parse("{"+e+"}")}catch(e){return null}},t}(ae),ue=function(e){function t(t,n){var o=e.call(this)||this;return o.originalValue=t,o.parameters=n,Array.isArray(n)&&0===n.length&&(o.parameters=new se([])),o}return ne(t,e),t.prototype.getType=function(){return"function"},t.prototype.evaluate=function(e){var t=this.getAsynValue(e);return t?t.value:this.evaluateCore(e)},t.prototype.evaluateCore=function(e){var t=e.properties;if(this.isAsyncFunction){t=r.createCopy(e.properties);var n=this.id,o=e.asyncValues,i=e.onCompleteAsyncFunc,s=this;t.returnResult=function(e){o[n]={value:e},i(s)}}return B.Instance.run(this.originalValue,this.parameters.evaluate(e),t,this.parameters.values)},t.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var t=e(this);if(t)return t}return this.originalValue+"("+this.parameters.toString(e)+")"},t.prototype.setVariables=function(e){this.parameters.setVariables(e)},t.prototype.isReady=function(e){return!!this.getAsynValue(e)},t.prototype.addChildrenToList=function(e){this.parameters.addOperandsToList(e)},t.prototype.getAsynValue=function(e){return e.asyncValues[this.id]},t.prototype.hasFunction=function(){return!0},t.prototype.hasAsyncFunction=function(){return this.isAsyncFunction()||this.parameters.hasAsyncFunction()},t.prototype.isAsyncFunction=function(){return B.Instance.isAsyncFunction(this.originalValue)},t.prototype.addToAsyncList=function(e){var t=void 0;if(this.isAsyncFunction()&&(t={operand:this}),this.parameters.hasAsyncFunction()){var n=new Array;this.parameters.addToAsyncList(n),n.forEach(function(e){return e.parent=t}),t||(t={}),t.children=n}t&&e.push(t)},t.prototype.isContentEqual=function(e){var t=e;return t.originalValue==this.originalValue&&this.areOperatorsEquals(t.parameters,this.parameters)},t}(oe),ce=function(){function e(){}return e.throwInvalidOperatorError=function(e){throw new Error("Invalid operator: '"+e+"'")},e.safeToString=function(e,t){return null==e?"":e.toString(t)},e.toOperandString=function(t){return!t||r.isNumber(t)||e.isBooleanValue(t)||(t="'"+t+"'"),t},e.isBooleanValue=function(e){return!!e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())},e.countDecimals=function(e){if(r.isNumber(e)&&Math.floor(e)!==e){var t=e.toString().split(".");return t.length>1&&t[1].length||0}return 0},e.plusMinus=function(t,n,o){var i=e.countDecimals(t),r=e.countDecimals(n);if(i>0||r>0){var s=Math.max(i,r);o=parseFloat(o.toFixed(s))}return o},e.isTwoValueEquals=function(e,t,n){return void 0===n&&(n=!0),"undefined"===e&&(e=void 0),"undefined"===t&&(t=void 0),r.isTwoValueEquals(e,t,n)},e.operatorToString=function(t){var n=e.signs[t];return null==n?t:n},e.convertValForDateCompare=function(e,t){if(t instanceof Date&&"string"==typeof e){var n=i("expression-operand",e);return n.setHours(0,0,0),n}return e},e.unaryFunctions={empty:function(e){return r.isValueEmpty(e)},notempty:function(t){return!e.unaryFunctions.empty(t)},negate:function(e){return!e}},e.binaryFunctions={arithmeticOp:function(t){var n=function(e,t){return r.isValueEmpty(e)?"number"==typeof t?0:"string"==typeof e?e:"string"==typeof t?"":Array.isArray(t)?[]:0:e};return function(o,i){o=n(o,i),i=n(i,o);var r=e.binaryFunctions[t];return null==r?null:r.call(this,o,i)}},and:function(e,t){return e&&t},or:function(e,t){return e||t},plus:function(e,t){return r.sumAnyValues(e,t)},minus:function(e,t){return r.correctAfterPlusMinis(e,t,e-t)},mul:function(e,t){return r.correctAfterMultiple(e,t,e*t)},div:function(e,t){return t?e/t:null},mod:function(e,t){return t?e%t:null},power:function(e,t){return Math.pow(e,t)},greater:function(t,n){return null!=t&&null!=n&&(t=e.convertValForDateCompare(t,n))>e.convertValForDateCompare(n,t)},less:function(t,n){return null!=t&&null!=n&&(t=e.convertValForDateCompare(t,n))<e.convertValForDateCompare(n,t)},greaterorequal:function(t,n){return!!e.binaryFunctions.equal(t,n)||e.binaryFunctions.greater(t,n)},lessorequal:function(t,n){return!!e.binaryFunctions.equal(t,n)||e.binaryFunctions.less(t,n)},equal:function(t,n,o){return t=e.convertValForDateCompare(t,n),n=e.convertValForDateCompare(n,t),e.isTwoValueEquals(t,n,!0!==o)},notequal:function(t,n,o){return!e.binaryFunctions.equal(t,n,o)},contains:function(t,n){return e.binaryFunctions.containsCore(t,n,!0)},notcontains:function(t,n){return!t&&!r.isValueEmpty(n)||e.binaryFunctions.containsCore(t,n,!1)},anyof:function(t,n){if(r.isValueEmpty(t)&&r.isValueEmpty(n))return!0;if(r.isValueEmpty(t)||!Array.isArray(t)&&0===t.length)return!1;if(r.isValueEmpty(n))return!0;if(!Array.isArray(t))return e.binaryFunctions.contains(n,t);if(!Array.isArray(n))return e.binaryFunctions.contains(t,n);for(var o=0;o<n.length;o++)if(e.binaryFunctions.contains(t,n[o]))return!0;return!1},allof:function(t,n){if(!t&&!r.isValueEmpty(n))return!1;if(!Array.isArray(n))return e.binaryFunctions.contains(t,n);for(var o=0;o<n.length;o++)if(!e.binaryFunctions.contains(t,n[o]))return!1;return!0},containsCore:function(t,n,o){if(!t&&0!==t&&!1!==t)return!1;if(t.length||(t=t.toString(),("string"==typeof n||n instanceof String)&&(t=t.toUpperCase(),n=n.toUpperCase())),"string"==typeof t||t instanceof String){if(!n)return!1;n=n.toString();var i=t.indexOf(n)>-1;return o?i:!i}for(var r=Array.isArray(n)?n:[n],s=0;s<r.length;s++){var a=0;for(n=r[s];a<t.length&&!e.isTwoValueEquals(t[a],n);a++);if(a==t.length)return!o}return o}},e.signs={less:"<",lessorequal:"<=",greater:">",greaterorequal:">=",equal:"==",notequal:"!=",plus:"+",minus:"-",mul:"*",div:"/",and:"and",or:"or",power:"^",mod:"%",negate:"!"},e}(),pe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),he={StartRules:["Expression"],SyntaxError:te=function(e){function t(t,n,o,i){var r=e.call(this,t)||this;return r.expected=n,r.found=o,r.location=i,r.name="SyntaxError",r}return pe(t,e),t.prototype.format=function(e){var t=this,n="Error: "+this.message;if(this.location){var o=null,i=e.find(function(e){return e.source===t.location.source});i&&(o=i.text.split(/\r\n|\n|\r/g));var r=this.location.start,s=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(r):r,a=this.location.source+":"+s.line+":"+s.column;if(o){var l=this.location.end,u="".padEnd(s.line.toString().length," "),c=o[r.line-1],p=(r.line===l.line?l.column:c.length+1)-r.column||1;n+="\n --\x3e "+a+"\n"+u+" |\n"+s.line+" | "+c+"\n"+u+" | "+"".padEnd(r.column-1," ")+"".padEnd(p,"^")}else n+="\n at "+a}return n},t.buildMessage=function(e,t){function n(e){return e.codePointAt(0).toString(16).toUpperCase()}var o=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function i(e){return o?e.replace(o,function(e){return"\\u{"+n(e)+"}"}):e}function r(e){return i(e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)}))}function s(e){return i(e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)}))}var a={literal:function(e){return'"'+r(e.text)+'"'},class:function(e){var t=e.parts.map(function(e){return Array.isArray(e)?s(e[0])+"-"+s(e[1]):s(e)});return"["+(e.inverted?"^":"")+t.join("")+"]"+(e.unicode?"u":"")},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function l(e){return a[e.type](e)}return"Expected "+function(e){var t=e.map(l);if(t.sort(),t.length>0){for(var n=1,o=1;o<t.length;o++)t[o-1]!==t[o]&&(t[n]=t[o],n++);t.length=n}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(e)+" but "+function(e){return e?'"'+r(e)+'"':"end of input"}(t)+" found."},t}(SyntaxError),parse:function(e,t){var n,o={},i=(t=void 0!==t?t:{}).grammarSource,r={Expression:zt},s=zt,a="||",l="or",u="&&",c="and",p="<=",h="lessorequal",d=">=",f="greaterorequal",g="==",y="equal",m="=",b="!=",v="notequal",C="<",P="less",w=">",V="greater",x="+",O="-",S="*",I="/",T="%",R="^",E="power",A="*=",D="contains",L="contain",j="notcontains",_="notcontain",N="anyof",M="allof",k="(",F=")",B="!",q="negate",Q="empty",z="notempty",H="undefined",U="null",W="{",G="}",J="''",K='""',Y="'",X='"',Z="[",$="]",ee=",",ne="true",oe="false",ce="0x",pe=".",he="0",de="\\'",fe='\\"',ge=/^[\-]/,ye=/^[^"']/,me=/^[^{}]/,be=/^[0-9]/,ve=/^[1-9]/,Ce=/^[a-zA-Z_]/,Pe=/^[ \t\n\r]/,we=kt("||",!1),Ve=kt("or",!0),xe=kt("&&",!1),Oe=kt("and",!0),Se=kt("<=",!1),Ie=kt("lessorequal",!0),Te=kt(">=",!1),Re=kt("greaterorequal",!0),Ee=kt("==",!1),Ae=kt("equal",!0),De=kt("=",!1),Le=kt("!=",!1),je=kt("notequal",!0),_e=kt("<",!1),Ne=kt("less",!0),Me=kt(">",!1),ke=kt("greater",!0),Fe=kt("+",!1),Be=kt("-",!1),qe=kt("*",!1),Qe=kt("/",!1),ze=kt("%",!1),He=kt("^",!1),Ue=kt("power",!0),We=kt("*=",!1),Ge=kt("contains",!0),Je=kt("contain",!0),Ke=kt("notcontains",!0),Ye=kt("notcontain",!0),Xe=kt("anyof",!0),Ze=kt("allof",!0),$e=kt("(",!1),et=kt(")",!1),tt=kt("!",!1),nt=kt("negate",!0),ot=kt("empty",!0),it=kt("notempty",!0),rt=kt("undefined",!1),st=kt("null",!1),at=kt("{",!1),lt=kt("}",!1),ut=kt("''",!1),ct=kt('""',!1),pt=kt("'",!1),ht=kt('"',!1),dt=kt("[",!1),ft=kt("]",!1),gt=kt(",",!1),yt=kt("true",!0),mt=kt("false",!0),bt=kt("0x",!1),vt=Ft(["-"],!1,!1,!1),Ct=kt(".",!1),Pt=kt("0",!1),wt=kt("\\'",!1),Vt=kt('\\"',!1),xt=Ft(['"',"'"],!0,!1,!1),Ot=Ft(["{","}"],!0,!1,!1),St=Ft([["0","9"]],!1,!1,!1),It=Ft([["1","9"]],!1,!1,!1),Tt=Ft([["a","z"],["A","Z"],"_"],!1,!1,!1),Rt=Ft([" ","\t","\n","\r"],!1,!1,!1),Et=0|t.peg$currPos,At=Et,Dt=[{line:1,column:1}],Lt=Et,jt=t.peg$maxFailExpected||[],_t=0|t.peg$silentFails,Nt={};if(t.startRule){if(!(t.startRule in r))throw new Error("Can't start parsing from rule \""+t.startRule+'".');s=r[t.startRule]}function Mt(){return e.substring(At,Et)}function kt(e,t){return{type:"literal",text:e,ignoreCase:t}}function Ft(e,t,n,o){return{type:"class",parts:e,inverted:t,ignoreCase:n,unicode:o}}function Bt(t){var n,o=Dt[t];if(o)return o;if(t>=Dt.length)n=Dt.length-1;else for(n=t;!Dt[--n];);for(o={line:(o=Dt[n]).line,column:o.column};n<t;)10===e.charCodeAt(n)?(o.line++,o.column=1):o.column++,n++;return Dt[t]=o,o}function qt(e,t,n){var o=Bt(e),r=Bt(t),s={source:i,start:{offset:e,line:o.line,column:o.column},end:{offset:t,line:r.line,column:r.column}};return n&&i&&"function"==typeof i.offset&&(s.start=i.offset(s.start),s.end=i.offset(s.end)),s}function Qt(e){Et<Lt||(Et>Lt&&(Lt=Et,jt=[]),jt.push(e))}function zt(){var e,t,n,i,r,s,a,l,u=34*Et+0,c=Nt[u];if(c)return Et=c.nextPos,c.result;if(e=Et,dn(),(t=Ut())!==o){for(n=[],i=Et,r=dn(),(s=Ht())!==o?(a=dn(),(l=Ut())!==o?i=r=[r,s,a,l]:(Et=i,i=o)):(Et=i,i=o);i!==o;)n.push(i),i=Et,r=dn(),(s=Ht())!==o?(a=dn(),(l=Ut())!==o?i=r=[r,s,a,l]:(Et=i,i=o)):(Et=i,i=o);i=dn(),At=e,e=fn(t,n,!0)}else Et=e,e=o;return Nt[u]={nextPos:Et,result:e},e}function Ht(){var t,n,i=34*Et+1,r=Nt[i];return r?(Et=r.nextPos,r.result):(t=Et,e.substr(Et,2)===a?(n=a,Et+=2):(n=o,0===_t&&Qt(we)),n===o&&((n=e.substr(Et,2)).toLowerCase()===l?Et+=2:(n=o,0===_t&&Qt(Ve))),n!==o&&(At=t,n="or"),t=n,Nt[i]={nextPos:Et,result:t},t)}function Ut(){var e,t,n,i,r,s,a,l,u=34*Et+2,c=Nt[u];if(c)return Et=c.nextPos,c.result;if(e=Et,(t=Gt())!==o){for(n=[],i=Et,r=dn(),(s=Wt())!==o?(a=dn(),(l=Gt())!==o?i=r=[r,s,a,l]:(Et=i,i=o)):(Et=i,i=o);i!==o;)n.push(i),i=Et,r=dn(),(s=Wt())!==o?(a=dn(),(l=Gt())!==o?i=r=[r,s,a,l]:(Et=i,i=o)):(Et=i,i=o);At=e,e=fn(t,n,!0)}else Et=e,e=o;return Nt[u]={nextPos:Et,result:e},e}function Wt(){var t,n,i=34*Et+3,r=Nt[i];return r?(Et=r.nextPos,r.result):(t=Et,e.substr(Et,2)===u?(n=u,Et+=2):(n=o,0===_t&&Qt(xe)),n===o&&((n=e.substr(Et,3)).toLowerCase()===c?Et+=3:(n=o,0===_t&&Qt(Oe))),n!==o&&(At=t,n="and"),t=n,Nt[i]={nextPos:Et,result:t},t)}function Gt(){var e,t,n,i,r,s,a,l,u=34*Et+4,c=Nt[u];if(c)return Et=c.nextPos,c.result;if(e=Et,(t=Kt())!==o){for(n=[],i=Et,r=dn(),(s=Jt())!==o?(a=dn(),(l=Kt())!==o?i=r=[r,s,a,l]:(Et=i,i=o)):(Et=i,i=o);i!==o;)n.push(i),i=Et,r=dn(),(s=Jt())!==o?(a=dn(),(l=Kt())!==o?i=r=[r,s,a,l]:(Et=i,i=o)):(Et=i,i=o);At=e,e=fn(t,n)}else Et=e,e=o;return Nt[u]={nextPos:Et,result:e},e}function Jt(){var t,n,i=34*Et+5,r=Nt[i];return r?(Et=r.nextPos,r.result):(t=Et,e.substr(Et,2)===p?(n=p,Et+=2):(n=o,0===_t&&Qt(Se)),n===o&&((n=e.substr(Et,11)).toLowerCase()===h?Et+=11:(n=o,0===_t&&Qt(Ie))),n!==o&&(At=t,n="lessorequal"),(t=n)===o&&(t=Et,e.substr(Et,2)===d?(n=d,Et+=2):(n=o,0===_t&&Qt(Te)),n===o&&((n=e.substr(Et,14)).toLowerCase()===f?Et+=14:(n=o,0===_t&&Qt(Re))),n!==o&&(At=t,n="greaterorequal"),(t=n)===o&&(t=Et,e.substr(Et,2)===g?(n=g,Et+=2):(n=o,0===_t&&Qt(Ee)),n===o&&((n=e.substr(Et,5)).toLowerCase()===y?Et+=5:(n=o,0===_t&&Qt(Ae))),n!==o&&(At=t,n="equal"),(t=n)===o&&(t=Et,61===e.charCodeAt(Et)?(n=m,Et++):(n=o,0===_t&&Qt(De)),n===o&&((n=e.substr(Et,5)).toLowerCase()===y?Et+=5:(n=o,0===_t&&Qt(Ae))),n!==o&&(At=t,n="equal"),(t=n)===o&&(t=Et,e.substr(Et,2)===b?(n=b,Et+=2):(n=o,0===_t&&Qt(Le)),n===o&&((n=e.substr(Et,8)).toLowerCase()===v?Et+=8:(n=o,0===_t&&Qt(je))),n!==o&&(At=t,n="notequal"),(t=n)===o&&(t=Et,60===e.charCodeAt(Et)?(n=C,Et++):(n=o,0===_t&&Qt(_e)),n===o&&((n=e.substr(Et,4)).toLowerCase()===P?Et+=4:(n=o,0===_t&&Qt(Ne))),n!==o&&(At=t,n="less"),(t=n)===o&&(t=Et,62===e.charCodeAt(Et)?(n=w,Et++):(n=o,0===_t&&Qt(Me)),n===o&&((n=e.substr(Et,7)).toLowerCase()===V?Et+=7:(n=o,0===_t&&Qt(ke))),n!==o&&(At=t,n="greater"),t=n)))))),Nt[i]={nextPos:Et,result:t},t)}function Kt(){var e,t,n,i,r,s,a,l,u=34*Et+6,c=Nt[u];if(c)return Et=c.nextPos,c.result;if(e=Et,(t=Xt())!==o){for(n=[],i=Et,r=dn(),(s=Yt())!==o?(a=dn(),(l=Xt())!==o?i=r=[r,s,a,l]:(Et=i,i=o)):(Et=i,i=o);i!==o;)n.push(i),i=Et,r=dn(),(s=Yt())!==o?(a=dn(),(l=Xt())!==o?i=r=[r,s,a,l]:(Et=i,i=o)):(Et=i,i=o);At=e,e=fn(t,n,!0)}else Et=e,e=o;return Nt[u]={nextPos:Et,result:e},e}function Yt(){var t,n,i=34*Et+7,r=Nt[i];return r?(Et=r.nextPos,r.result):(t=Et,43===e.charCodeAt(Et)?(n=x,Et++):(n=o,0===_t&&Qt(Fe)),n!==o&&(At=t,n="plus"),(t=n)===o&&(t=Et,45===e.charCodeAt(Et)?(n=O,Et++):(n=o,0===_t&&Qt(Be)),n!==o&&(At=t,n="minus"),t=n),Nt[i]={nextPos:Et,result:t},t)}function Xt(){var e,t,n,i,r,s,a,l,u=34*Et+8,c=Nt[u];if(c)return Et=c.nextPos,c.result;if(e=Et,(t=$t())!==o){for(n=[],i=Et,r=dn(),(s=Zt())!==o?(a=dn(),(l=$t())!==o?i=r=[r,s,a,l]:(Et=i,i=o)):(Et=i,i=o);i!==o;)n.push(i),i=Et,r=dn(),(s=Zt())!==o?(a=dn(),(l=$t())!==o?i=r=[r,s,a,l]:(Et=i,i=o)):(Et=i,i=o);At=e,e=fn(t,n,!0)}else Et=e,e=o;return Nt[u]={nextPos:Et,result:e},e}function Zt(){var t,n,i=34*Et+9,r=Nt[i];return r?(Et=r.nextPos,r.result):(t=Et,42===e.charCodeAt(Et)?(n=S,Et++):(n=o,0===_t&&Qt(qe)),n!==o&&(At=t,n="mul"),(t=n)===o&&(t=Et,47===e.charCodeAt(Et)?(n=I,Et++):(n=o,0===_t&&Qt(Qe)),n!==o&&(At=t,n="div"),(t=n)===o&&(t=Et,37===e.charCodeAt(Et)?(n=T,Et++):(n=o,0===_t&&Qt(ze)),n!==o&&(At=t,n="mod"),t=n)),Nt[i]={nextPos:Et,result:t},t)}function $t(){var e,t,n,i,r,s,a,l,u=34*Et+10,c=Nt[u];if(c)return Et=c.nextPos,c.result;if(e=Et,(t=tn())!==o){for(n=[],i=Et,r=dn(),(s=en())!==o?(a=dn(),(l=tn())!==o?i=r=[r,s,a,l]:(Et=i,i=o)):(Et=i,i=o);i!==o;)n.push(i),i=Et,r=dn(),(s=en())!==o?(a=dn(),(l=tn())!==o?i=r=[r,s,a,l]:(Et=i,i=o)):(Et=i,i=o);At=e,e=fn(t,n,!0)}else Et=e,e=o;return Nt[u]={nextPos:Et,result:e},e}function en(){var t,n,i=34*Et+11,r=Nt[i];return r?(Et=r.nextPos,r.result):(t=Et,94===e.charCodeAt(Et)?(n=R,Et++):(n=o,0===_t&&Qt(He)),n===o&&((n=e.substr(Et,5)).toLowerCase()===E?Et+=5:(n=o,0===_t&&Qt(Ue))),n!==o&&(At=t,n="power"),t=n,Nt[i]={nextPos:Et,result:t},t)}function tn(){var e,t,n,i,r,s,a,l,u=34*Et+12,c=Nt[u];if(c)return Et=c.nextPos,c.result;if(e=Et,(t=on())!==o){for(n=[],i=Et,r=dn(),(s=nn())!==o?(a=dn(),(l=on())===o&&(l=null),i=r=[r,s,a,l]):(Et=i,i=o);i!==o;)n.push(i),i=Et,r=dn(),(s=nn())!==o?(a=dn(),(l=on())===o&&(l=null),i=r=[r,s,a,l]):(Et=i,i=o);At=e,e=fn(t,n)}else Et=e,e=o;return Nt[u]={nextPos:Et,result:e},e}function nn(){var t,n,i=34*Et+13,r=Nt[i];return r?(Et=r.nextPos,r.result):(t=Et,e.substr(Et,2)===A?(n=A,Et+=2):(n=o,0===_t&&Qt(We)),n===o&&((n=e.substr(Et,8)).toLowerCase()===D?Et+=8:(n=o,0===_t&&Qt(Ge)),n===o&&((n=e.substr(Et,7)).toLowerCase()===L?Et+=7:(n=o,0===_t&&Qt(Je)))),n!==o&&(At=t,n="contains"),(t=n)===o&&(t=Et,(n=e.substr(Et,11)).toLowerCase()===j?Et+=11:(n=o,0===_t&&Qt(Ke)),n===o&&((n=e.substr(Et,10)).toLowerCase()===_?Et+=10:(n=o,0===_t&&Qt(Ye))),n!==o&&(At=t,n="notcontains"),(t=n)===o&&(t=Et,(n=e.substr(Et,5)).toLowerCase()===N?Et+=5:(n=o,0===_t&&Qt(Xe)),n!==o&&(At=t,n="anyof"),(t=n)===o&&(t=Et,(n=e.substr(Et,5)).toLowerCase()===M?Et+=5:(n=o,0===_t&&Qt(Ze)),n!==o&&(At=t,n="allof"),t=n))),Nt[i]={nextPos:Et,result:t},t)}function on(){var t,n,i,r,s=34*Et+14,a=Nt[s];return a?(Et=a.nextPos,a.result):(t=Et,40===e.charCodeAt(Et)?(n=k,Et++):(n=o,0===_t&&Qt($e)),n!==o?(dn(),(i=zt())!==o?(dn(),41===e.charCodeAt(Et)?(r=F,Et++):(r=o,0===_t&&Qt(et)),r===o&&(r=null),At=t,t=i):(Et=t,t=o)):(Et=t,t=o),t===o&&(t=function(){var t,n,i,r,s,a=34*Et+15,l=Nt[a];return l?(Et=l.nextPos,l.result):(t=Et,(n=cn())!==o?(40===e.charCodeAt(Et)?(i=k,Et++):(i=o,0===_t&&Qt($e)),i!==o?(r=sn(),41===e.charCodeAt(Et)?(s=F,Et++):(s=o,0===_t&&Qt(et)),s===o&&(s=null),At=t,t=new ue(n,r)):(Et=t,t=o)):(Et=t,t=o),Nt[a]={nextPos:Et,result:t},t)}(),t===o&&(t=function(){var t,n,i,r=34*Et+16,s=Nt[r];return s?(Et=s.nextPos,s.result):(t=Et,33===e.charCodeAt(Et)?(n=B,Et++):(n=o,0===_t&&Qt(tt)),n===o&&((n=e.substr(Et,6)).toLowerCase()===q?Et+=6:(n=o,0===_t&&Qt(nt))),n!==o?(dn(),(i=on())!==o?(At=t,t=new re(i,"negate")):(Et=t,t=o)):(Et=t,t=o),t===o&&(t=Et,(n=rn())!==o?(dn(),i=function(){var t,n,i=34*Et+17,r=Nt[i];return r?(Et=r.nextPos,r.result):(t=Et,(n=e.substr(Et,5)).toLowerCase()===Q?Et+=5:(n=o,0===_t&&Qt(ot)),n!==o&&(At=t,n="empty"),(t=n)===o&&(t=Et,(n=e.substr(Et,8)).toLowerCase()===z?Et+=8:(n=o,0===_t&&Qt(it)),n!==o&&(At=t,n="notempty"),t=n),Nt[i]={nextPos:Et,result:t},t)}(),i!==o?(At=t,t=new re(n,i)):(Et=t,t=o)):(Et=t,t=o)),Nt[r]={nextPos:Et,result:t},t)}(),t===o&&(t=rn())===o&&(t=function(){var t,n,i,r,s=34*Et+20,a=Nt[s];return a?(Et=a.nextPos,a.result):(t=Et,91===e.charCodeAt(Et)?(n=Z,Et++):(n=o,0===_t&&Qt(dt)),n!==o?(i=sn(),93===e.charCodeAt(Et)?(r=$,Et++):(r=o,0===_t&&Qt(ft)),r!==o?(At=t,t=i):(Et=t,t=o)):(Et=t,t=o),Nt[s]={nextPos:Et,result:t},t)}()))),Nt[s]={nextPos:Et,result:t},t)}function rn(){var t,n,i,r,s=34*Et+18,a=Nt[s];return a?(Et=a.nextPos,a.result):(t=Et,dn(),e.substr(Et,9)===H?(n=H,Et+=9):(n=o,0===_t&&Qt(rt)),n===o&&(e.substr(Et,4)===U?(n=U,Et+=4):(n=o,0===_t&&Qt(st))),n!==o?(At=t,t=null):(Et=t,t=o),t===o&&(t=Et,dn(),n=function(){var t,n,i,r,s=34*Et+19,a=Nt[s];return a?(Et=a.nextPos,a.result):(t=Et,n=function(){var t,n,i=34*Et+22,r=Nt[i];return r?(Et=r.nextPos,r.result):(t=Et,(n=e.substr(Et,4)).toLowerCase()===ne?Et+=4:(n=o,0===_t&&Qt(yt)),n!==o&&(At=t,n=!0),(t=n)===o&&(t=Et,(n=e.substr(Et,5)).toLowerCase()===oe?Et+=5:(n=o,0===_t&&Qt(mt)),n!==o&&(At=t,n=!1),t=n),Nt[i]={nextPos:Et,result:t},t)}(),n!==o&&(At=t),(t=n)===o&&(t=Et,n=function(){var t,n,i,r,s=34*Et+23,a=Nt[s];return a?(Et=a.nextPos,a.result):(t=Et,e.substr(Et,2)===ce?(n=ce,Et+=2):(n=o,0===_t&&Qt(bt)),n!==o&&(i=pn())!==o?(At=t,t=parseInt(Mt(),16)):(Et=t,t=o),t===o&&(t=Et,n=e.charAt(Et),ge.test(n)?Et++:(n=o,0===_t&&Qt(vt)),n===o&&(n=null),i=function(){var t,n,i,r=34*Et+24,s=Nt[r];return s?(Et=s.nextPos,s.result):(t=Et,(n=pn())!==o?(46===e.charCodeAt(Et)?(i=pe,Et++):(i=o,0===_t&&Qt(Ct)),i!==o&&pn()!==o?(At=t,t=parseFloat(Mt())):(Et=t,t=o)):(Et=t,t=o),t===o&&(t=Et,n=function(){var t,n,i=34*Et+31,r=Nt[i];if(r)return Et=r.nextPos,r.result;if(t=[],n=e.charAt(Et),ve.test(n)?Et++:(n=o,0===_t&&Qt(It)),n!==o)for(;n!==o;)t.push(n),n=e.charAt(Et),ve.test(n)?Et++:(n=o,0===_t&&Qt(It));else t=o;return Nt[i]={nextPos:Et,result:t},t}(),n!==o?((i=pn())===o&&(i=null),At=t,t=parseInt(Mt(),10)):(Et=t,t=o),t===o&&(t=Et,48===e.charCodeAt(Et)?(n=he,Et++):(n=o,0===_t&&Qt(Pt)),n!==o&&(At=t,n=0),t=n)),Nt[r]={nextPos:Et,result:t},t)}(),i!==o?(At=t,r=i,t=null==n?r:-r):(Et=t,t=o)),Nt[s]={nextPos:Et,result:t},t)}(),n!==o&&(At=t),(t=n)===o&&(t=Et,(n=cn())!==o&&(At=t),(t=n)===o&&(t=Et,e.substr(Et,2)===J?(n=J,Et+=2):(n=o,0===_t&&Qt(ut)),n!==o&&(At=t,n=""),(t=n)===o&&(t=Et,e.substr(Et,2)===K?(n=K,Et+=2):(n=o,0===_t&&Qt(ct)),n!==o&&(At=t,n=""),(t=n)===o&&(t=Et,39===e.charCodeAt(Et)?(n=Y,Et++):(n=o,0===_t&&Qt(pt)),n!==o&&(i=an())!==o?(39===e.charCodeAt(Et)?(r=Y,Et++):(r=o,0===_t&&Qt(pt)),r!==o?(At=t,t="'"+i+"'"):(Et=t,t=o)):(Et=t,t=o),t===o&&(t=Et,34===e.charCodeAt(Et)?(n=X,Et++):(n=o,0===_t&&Qt(ht)),n!==o&&(i=an())!==o?(34===e.charCodeAt(Et)?(r=X,Et++):(r=o,0===_t&&Qt(ht)),r!==o?(At=t,t="'"+i+"'"):(Et=t,t=o)):(Et=t,t=o))))))),Nt[s]={nextPos:Et,result:t},t)}(),n!==o?(At=t,t=new ae(n)):(Et=t,t=o),t===o&&(t=Et,dn(),123===e.charCodeAt(Et)?(n=W,Et++):(n=o,0===_t&&Qt(at)),n!==o?(i=function(){var e,t,n,i=34*Et+25,r=Nt[i];if(r)return Et=r.nextPos,r.result;if(e=Et,t=[],(n=un())!==o)for(;n!==o;)t.push(n),n=un();else t=o;return t!==o&&(At=e,t=t.join("")),e=t,Nt[i]={nextPos:Et,result:e},e}(),i!==o?(125===e.charCodeAt(Et)?(r=G,Et++):(r=o,0===_t&&Qt(lt)),r!==o?(At=t,t=new le(i)):(Et=t,t=o)):(Et=t,t=o)):(Et=t,t=o))),Nt[s]={nextPos:Et,result:t},t)}function sn(){var t,n,i,r,s,a,l,u,c=34*Et+21,p=Nt[c];if(p)return Et=p.nextPos,p.result;for(t=Et,(n=zt())===o&&(n=null),i=[],r=Et,s=dn(),44===e.charCodeAt(Et)?(a=ee,Et++):(a=o,0===_t&&Qt(gt)),a!==o?(l=dn(),(u=zt())!==o?r=s=[s,a,l,u]:(Et=r,r=o)):(Et=r,r=o);r!==o;)i.push(r),r=Et,s=dn(),44===e.charCodeAt(Et)?(a=ee,Et++):(a=o,0===_t&&Qt(gt)),a!==o?(l=dn(),(u=zt())!==o?r=s=[s,a,l,u]:(Et=r,r=o)):(Et=r,r=o);return At=t,t=function(e,t){if(null==e)return new se([]);var n=[e];if(Array.isArray(t))for(var o=function(e){return[].concat.apply([],e)}(t),i=3;i<o.length;i+=4)n.push(o[i]);return new se(n)}(n,i),Nt[c]={nextPos:Et,result:t},t}function an(){var e,t,n,i=34*Et+26,r=Nt[i];if(r)return Et=r.nextPos,r.result;if(e=Et,t=[],(n=ln())!==o)for(;n!==o;)t.push(n),n=ln();else t=o;return t!==o&&(At=e,t=t.join("")),e=t,Nt[i]={nextPos:Et,result:e},e}function ln(){var t,n,i=34*Et+27,r=Nt[i];return r?(Et=r.nextPos,r.result):(t=Et,e.substr(Et,2)===de?(n=de,Et+=2):(n=o,0===_t&&Qt(wt)),n!==o&&(At=t,n="'"),(t=n)===o&&(t=Et,e.substr(Et,2)===fe?(n=fe,Et+=2):(n=o,0===_t&&Qt(Vt)),n!==o&&(At=t,n='"'),(t=n)===o&&(t=Et,n=e.charAt(Et),ye.test(n)?Et++:(n=o,0===_t&&Qt(xt)),n!==o&&(At=t,n=Mt()),t=n)),Nt[i]={nextPos:Et,result:t},t)}function un(){var t,n,i=34*Et+28,r=Nt[i];return r?(Et=r.nextPos,r.result):(t=Et,n=e.charAt(Et),me.test(n)?Et++:(n=o,0===_t&&Qt(Ot)),n!==o&&(At=t,n=Mt()),t=n,Nt[i]={nextPos:Et,result:t},t)}function cn(){var e,t,n,i,r,s,a=34*Et+29,l=Nt[a];if(l)return Et=l.nextPos,l.result;if(e=Et,hn()!==o){if(t=[],n=Et,(i=pn())!==o){for(r=[],s=hn();s!==o;)r.push(s),s=hn();n=i=[i,r]}else Et=n,n=o;for(;n!==o;)if(t.push(n),n=Et,(i=pn())!==o){for(r=[],s=hn();s!==o;)r.push(s),s=hn();n=i=[i,r]}else Et=n,n=o;At=e,e=Mt()}else Et=e,e=o;return Nt[a]={nextPos:Et,result:e},e}function pn(){var t,n,i=34*Et+30,r=Nt[i];if(r)return Et=r.nextPos,r.result;if(t=[],n=e.charAt(Et),be.test(n)?Et++:(n=o,0===_t&&Qt(St)),n!==o)for(;n!==o;)t.push(n),n=e.charAt(Et),be.test(n)?Et++:(n=o,0===_t&&Qt(St));else t=o;return Nt[i]={nextPos:Et,result:t},t}function hn(){var t,n,i=34*Et+32,r=Nt[i];if(r)return Et=r.nextPos,r.result;if(t=[],n=e.charAt(Et),Ce.test(n)?Et++:(n=o,0===_t&&Qt(Tt)),n!==o)for(;n!==o;)t.push(n),n=e.charAt(Et),Ce.test(n)?Et++:(n=o,0===_t&&Qt(Tt));else t=o;return Nt[i]={nextPos:Et,result:t},t}function dn(){var t,n,i=34*Et+33,r=Nt[i];if(r)return Et=r.nextPos,r.result;for(_t++,t=[],n=e.charAt(Et),Pe.test(n)?Et++:(n=o,0===_t&&Qt(Rt));n!==o;)t.push(n),n=e.charAt(Et),Pe.test(n)?Et++:(n=o,0===_t&&Qt(Rt));return _t--,Nt[i]={nextPos:Et,result:t},t}function fn(e,t,n){return void 0===n&&(n=!1),t.reduce(function(e,t){return new ie(t[1],e,t[3],n)},e)}var gn=(n=s())!==o&&Et===e.length;function yn(){throw n!==o&&Et<e.length&&Qt({type:"end"}),t=jt,i=Lt<e.length?function(t){void 0===t&&(t=Et);var n=e.codePointAt(t);return void 0===n?"":String.fromCodePoint(n)}(Lt):null,r=Lt<e.length?qt(Lt,Lt+1):qt(Lt,Lt),new te(te.buildMessage(t,i),t,i,r);var t,i,r}return t.peg$library?{peg$result:n,peg$currPos:Et,peg$FAILED:o,peg$maxFailExpected:jt,peg$maxFailPos:Lt,peg$success:gn,peg$throw:gn?void 0:yn}:gn?n:void yn()}};he.SyntaxError.prototype.name="PeggySyntaxError";var de=he.parse,fe=he.SyntaxError,ge=function(e,t){this.at=e,this.code=t},ye=function(){function e(){}return e.prototype.patchExpression=function(e){return e.replace(/=>/g,">=").replace(/=</g,"<=").replace(/<>/g,"!=").replace(/equals/g,"equal ").replace(/notequals/g,"notequal ")},e.prototype.createCondition=function(e){return this.parseExpression(e)},e.prototype.parseExpression=function(e){try{return de(this.patchExpression(e))}catch(e){e instanceof fe&&(this.conditionError=new ge(e.location.start.offset,e.message))}},Object.defineProperty(e.prototype,"error",{get:function(){return this.conditionError},enumerable:!1,configurable:!0}),e}(),me=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),be=function(){function e(e,t,n,o,i){this.operand=e,this.id=t,this.onComplete=n,this.processValue=new k(i),this.processValue.properties=o}return e.prototype.run=function(e){var t=this;if(!e)return this.runValues();this.processValue.onCompleteAsyncFunc=function(e){var n=t.getAsyncItemByOperand(e,t.asyncFuncList);n&&t.doAsyncFunctionReady(n)},this.asyncFuncList=new Array,this.operand.addToAsyncList(this.asyncFuncList);for(var n=0;n<this.asyncFuncList.length;n++)this.runAsyncItem(this.asyncFuncList[n]);return!1},e.prototype.getAsyncItemByOperand=function(e,t){if(!Array.isArray(t))return null;for(var n=0;n<t.length;n++){if(t[n].operand===e)return t[n];var o=this.getAsyncItemByOperand(e,t[n].children);if(o)return o}return null},e.prototype.runAsyncItem=function(e){var t=this;e.children?e.children.forEach(function(e){return t.runAsyncItem(e)}):this.runAsyncItemCore(e)},e.prototype.runAsyncItemCore=function(e){e.operand?e.operand.evaluate(this.processValue):this.doAsyncFunctionReady(e)},e.prototype.doAsyncFunctionReady=function(e){if(e.parent&&this.isAsyncChildrenReady(e))this.runAsyncItemCore(e.parent);else{for(var t=0;t<this.asyncFuncList.length;t++)if(!this.isAsyncFuncReady(this.asyncFuncList[t]))return;this.runValues()}},e.prototype.isAsyncFuncReady=function(e){return!(e.operand&&!e.operand.isReady(this.processValue))&&this.isAsyncChildrenReady(e)},e.prototype.isAsyncChildrenReady=function(e){if(e.children)for(var t=0;t<e.children.length;t++)if(!this.isAsyncFuncReady(e.children[t]))return!1;return!0},e.prototype.runValues=function(){var e=this.operand.evaluate(this.processValue);return this.onComplete&&this.onComplete(e,this.id),e},e}(),ve=function(){function e(e){this.parser=new ye,this.isAsyncValue=!1,this.hasFunctionValue=!1,this.setExpression(e)}return e.getQuestionErrorText=function(e){if(e){var t=e.question;if(t&&t.name)return" It is used in the question: '"+t.name+"'."}return""},Object.defineProperty(e.prototype,"expression",{get:function(){return this.expressionValue},enumerable:!1,configurable:!0}),e.prototype.setExpression=function(e){this.expression!==e&&(this.expressionValue=e,this.operand=this.parser.parseExpression(e),this.hasFunctionValue=!!this.canRun()&&this.operand.hasFunction(),this.isAsyncValue=!!this.hasFunction()&&this.operand.hasAsyncFunction())},e.prototype.getVariables=function(){if(!this.operand)return[];var e=[];return this.operand.setVariables(e),e},e.prototype.hasFunction=function(){return this.hasFunctionValue},Object.defineProperty(e.prototype,"isAsync",{get:function(){return this.isAsyncValue},enumerable:!1,configurable:!0}),e.prototype.canRun=function(){return!!this.operand},e.prototype.run=function(e,t,n){return this.runContext(new M(e,null==t?void 0:t.context),t,n)},e.prototype.runContext=function(t,n,o){return void 0===n&&(n=null),this.operand?new be(this.operand,o,this.onComplete,n,t).run(this.isAsync):(this.expression&&F.warn("Invalid expression: '"+this.expression+"'."+e.getQuestionErrorText(n)),null)},e.createExpressionExecutor=function(t){return new e(t)},e}(),Ce=function(){function e(e){this.expression=e}return Object.defineProperty(e.prototype,"expression",{get:function(){return this.expressionExecutor?this.expressionExecutor.expression:""},set:function(e){var t=this;this.expressionExecutor&&e===this.expression||(this.expressionExecutor=ve.createExpressionExecutor(e),this.expressionExecutor.onComplete=function(e,n){t.doOnComplete(e,n)},this.variables=void 0,this.containsFunc=void 0)},enumerable:!1,configurable:!0}),e.prototype.getVariables=function(){return void 0===this.variables&&(this.variables=this.expressionExecutor.getVariables()),this.variables},e.prototype.hasFunction=function(){return void 0===this.containsFunc&&(this.containsFunc=this.expressionExecutor.hasFunction()),this.containsFunc},Object.defineProperty(e.prototype,"isAsync",{get:function(){return this.expressionExecutor.isAsync},enumerable:!1,configurable:!0}),e.prototype.canRun=function(){return this.expressionExecutor.canRun()},e.prototype.runContextCore=function(t,n){var o=e.IdRunnerCounter++;return this.onBeforeAsyncRun&&this.isAsync&&this.onBeforeAsyncRun(o),this.expressionExecutor.runContext(t,n,o)},e.prototype.doOnComplete=function(e,t){this.onAfterAsyncRun&&this.isAsync&&this.onAfterAsyncRun(t)},e.IdRunnerCounter=1,e}(),Pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return me(t,e),t.prototype.runValues=function(e,t){return this.runContext(new M(e,null==t?void 0:t.context),t)},t.prototype.runContext=function(e,t){return 1==this.runContextCore(e,t)},t.prototype.doOnComplete=function(t,n){this.onRunComplete&&this.onRunComplete(1==t),e.prototype.doOnComplete.call(this,t,n)},t}(Ce),we=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return me(t,e),t.prototype.runValues=function(e,t){return this.runContext(new M(e,null==t?void 0:t.context),t)},t.prototype.runContext=function(e,t){return this.runContextCore(e,t)},t.prototype.doOnComplete=function(t,n){this.onRunComplete&&this.onRunComplete(t),e.prototype.doOnComplete.call(this,t,n)},t}(Ce),Ve=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xe=function(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))},Oe=function(){function e(e){this.obj=e,this.properties=null,this.values=null}return e.prototype.getType=function(){return"bindings"},Object.defineProperty(e.prototype,"isSurveyObj",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.getNames=function(){var e=[];this.fillProperties();for(var t=0;t<this.properties.length;t++)this.properties[t].isVisible("",this.obj)&&e.push(this.properties[t].name);return e},e.prototype.getProperties=function(){var e=[];this.fillProperties();for(var t=0;t<this.properties.length;t++)e.push(this.properties[t]);return e},e.prototype.setBinding=function(e,t){this.values||(this.values={});var n=this.getJson();n!==t&&(t?this.values[e]=t:(delete this.values[e],0==Object.keys(this.values).length&&(this.values=null)),this.onChangedJSON(n))},e.prototype.clearBinding=function(e){this.setBinding(e,"")},e.prototype.isEmpty=function(){if(!this.values)return!0;for(var e in this.values)return!1;return!0},e.prototype.getValueNameByPropertyName=function(e){if(this.values)return this.values[e]},e.prototype.getPropertiesByValueName=function(e){if(!this.values)return[];var t=[];for(var n in this.values)this.values[n]==e&&t.push(n);return t},e.prototype.getJson=function(){var e=this;if(!this.isEmpty()){var t={};return this.getNames().forEach(function(n){void 0!==e.values[n]&&(t[n]=e.values[n])}),t}},e.prototype.setJson=function(e,t){var n=this,o=this.getJson();this.values=null,e&&this.getNames().forEach(function(t){void 0!==e[t]&&(n.values||(n.values={}),n.values[t]=e[t])}),t||r.isTwoValueEquals(o,this.values)||this.onChangedJSON(o)},e.prototype.fillProperties=function(){if(null===this.properties){this.properties=[];for(var e=D.getPropertiesByObj(this.obj),t=0;t<e.length;t++)e[t].isBindable&&this.properties.push(e[t])}},e.prototype.onChangedJSON=function(e){this.obj&&this.obj.onBindingChanged(e,this.getJson())},e}(),Se=function(){function e(t,n,o){this.currentDependency=t,this.target=n,this.property=o,this.dependencies=[],this.id=""+ ++e.DependenciesCount}return e.prototype.addDependency=function(e,t){this.target===e&&this.property===t||this.dependencies.some(function(n){return n.obj===e&&n.prop===t})||(this.dependencies.push({obj:e,prop:t,id:this.id}),e.registerPropertyChangedHandlers([t],this.currentDependency,this.id))},e.prototype.dispose=function(){this.dependencies.forEach(function(e){e.obj.unregisterPropertyChangedHandlers([e.prop],e.id)})},e.DependenciesCount=0,e}(),Ie=function(){function e(t){this._updater=t,this.dependencies=void 0,this.type=e.ComputedUpdaterType}return Object.defineProperty(e.prototype,"updater",{get:function(){return this._updater},enumerable:!1,configurable:!0}),e.prototype.setDependencies=function(e){this.clearDependencies(),this.dependencies=e},e.prototype.getDependencies=function(){return this.dependencies},e.prototype.clearDependencies=function(){this.dependencies&&(this.dependencies.dispose(),this.dependencies=void 0)},e.prototype.dispose=function(){this.clearDependencies(),this._updater=void 0},e.ComputedUpdaterType="__dependency_computed",e}(),Te=function(){function e(){this.uniqueIdValue=e.UniqueId++,this.dependencies={},this.propertyHash=e.createPropertiesHash(),this.eventList=[],this.isLoadingFromJsonValue=!1,this.loadingOwner=null,this.onPropertyChanged=this.addEvent(),this.onNestedPropertyChanged=this.addEvent(),this.onItemValuePropertyChanged=this.addEvent(),this.isCreating=!0,this.animationAllowedLock=0,this.supportOnElementRerenderedEvent=!0,this.onElementRerenderedEventEnabled=!1,this._onElementRerendered=new Ae,C.createProperties(this),this.onBaseCreating(),this.isCreating=!1}return e.finishCollectDependencies=function(){var t=e.currentDependencis;return e.currentDependencis=void 0,t},e.startCollectDependencies=function(t,n,o){if(void 0!==e.currentDependencis)throw new Error("Attempt to collect nested dependencies. Nested dependencies are not supported.");e.currentDependencis=new Se(t,n,o)},e.collectDependency=function(t,n){void 0!==e.currentDependencis&&e.currentDependencis.addDependency(t,n)},Object.defineProperty(e,"commentSuffix",{get:function(){return gn.commentSuffix},set:function(e){gn.commentSuffix=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"commentPrefix",{get:function(){return e.commentSuffix},set:function(t){e.commentSuffix=t},enumerable:!1,configurable:!0}),e.prototype.isValueEmpty=function(e,t){return void 0===t&&(t=!0),t&&(e=this.trimValue(e)),r.isValueEmpty(e)},e.prototype.equals=function(e){return!!e&&!this.isDisposed&&!e.isDisposed&&this.getType()==e.getType()&&this.equalsCore(e)},e.prototype.equalsCore=function(e){return this.name===e.name&&r.isTwoValueEquals(this.toJSON(),e.toJSON(),!1,!0,!1)},e.prototype.trimValue=function(e){return e&&("string"==typeof e||e instanceof String)?e.trim():e},e.createPropertiesHash=function(){return{}},e.prototype.dispose=function(){for(var e=this,t=0;t<this.eventList.length;t++)this.eventList[t].clear();this.onPropertyValueChangedCallback=void 0,this.isDisposedValue=!0,Object.keys(this.dependencies).forEach(function(t){return e.dependencies[t].dispose()}),Object.keys(this.propertyHash).forEach(function(t){var n=e.getPropertyValueCore(e.propertyHash,t);n&&n.type==Ie.ComputedUpdaterType&&n.dispose()})},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return!0===this.isDisposedValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uniqueId",{get:function(){return this.uniqueIdValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSurveyObj",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.addEvent=function(){var e=new Ae;return this.eventList.push(e),e},e.prototype.onBaseCreating=function(){},e.prototype.getType=function(){return"base"},e.prototype.isDescendantOf=function(e){return D.isDescendantOf(this.getType(),e)},e.prototype.getSurvey=function(e){return void 0===e&&(e=!1),null},e.prototype.getValueGetterContext=function(){var e=this.getSurvey();return e?e.getValueGetterContext():new N({})},Object.defineProperty(e.prototype,"isDesignMode",{get:function(){var e=this.getSurvey();return!!e&&e.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inSurvey",{get:function(){return!!this.getSurvey(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bindings",{get:function(){return this.bindingsValue||(this.bindingsValue=new Oe(this)),this.bindingsValue},enumerable:!1,configurable:!0}),e.prototype.isBindingEmpty=function(){return!this.bindingsValue||this.bindingsValue.isEmpty()},e.prototype.checkBindings=function(e,t){},e.prototype.canUpdateBindings=function(){return!0},e.prototype.updateBindings=function(e,t){if(this.bindingsValue&&this.canUpdateBindings()){var n=this.bindings.getValueNameByPropertyName(e);n&&this.updateBindingValue(n,t)}},e.prototype.updateBindingValue=function(e,t){},e.prototype.getTemplate=function(){return this.getType()},Object.defineProperty(e.prototype,"isLoadingFromJson",{get:function(){return this.isLoadingFromJsonValue||this.getIsLoadingFromJson()},enumerable:!1,configurable:!0}),e.prototype.getIsLoadingFromJson=function(){return!(!this.loadingOwner||!this.loadingOwner.isLoadingFromJson)||this.isLoadingFromJsonValue},e.prototype.startLoadingFromJson=function(e){this.isLoadingFromJsonValue=!0,this.jsonObj=e},e.prototype.endLoadingFromJson=function(){this.isLoadingFromJsonValue=!1},e.prototype.toJSON=function(e){return(new A).toJsonObject(this,e)},e.prototype.fromJSON=function(e,t){(new A).toObject(e,this,t),this.onSurveyLoad()},e.prototype.onSurveyLoad=function(){},e.prototype.clone=function(){var e=D.createClass(this.getType());return e.fromJSON(this.toJSON()),e},e.prototype.getPropertyByName=function(e){var t=this.getType();return this.classMetaData&&this.classMetaData.name===t||(this.classMetaData=D.findClass(t)),this.classMetaData?this.classMetaData.findProperty(e):null},e.prototype.isPropertyVisible=function(e){var t=this.getPropertyByName(e);return!!t&&t.isVisible("",this)},e.createProgressInfo=function(){return{questionCount:0,answeredQuestionCount:0,requiredQuestionCount:0,requiredAnsweredQuestionCount:0}},e.prototype.getProgressInfo=function(){return e.createProgressInfo()},e.prototype.localeChanged=function(){},e.prototype.locStrsChanged=function(){if(this.arraysInfo)for(var t in this.arraysInfo)if((o=this.arraysInfo[t])&&o.isItemValues){var n=this.getPropertyValue(t);n&&e.itemValueLocStrChanged&&e.itemValueLocStrChanged(n)}if(this.localizableStrings)for(var t in this.localizableStrings){var o;(o=this.getLocalizableString(t))&&o.strChanged()}},e.prototype.getPropertyValue=function(e,t,n){var o=this.getPropertyValueWithoutDefault(e);if(n&&Array.isArray(o)&&0===o.length&&!0===o.isReset)return delete o.isReset,this.setArrayPropertyDirectly(e,n(),!1),o;if(this.isValueUndefined(o)){var i=this.localizableStrings?this.localizableStrings[e]:void 0;if(i)return i.text;if(!this.isValueUndefined(t))return t;if(n){var r=n();if(void 0!==r){if(Array.isArray(r)){var s=this.createNewArray(e);return s.splice.apply(s,xe([0,0],r,!1)),s}return this.setPropertyValueDirectly(e,r),r}}var a=this.getDefaultPropertyValue(e);if(void 0!==a)return a}return o},e.prototype.isValueUndefined=function(e){return r.isValueUndefined(e)},e.prototype.getDefaultPropertyValue=function(e){var t=this.getPropertyByName(e);if(!(!t||t.isCustom&&this.isCreating)){if(t.defaultValueFunc)return t.defaultValueFunc(this);var n=t.getDefaultValue(this);if(!this.isValueUndefined(n)&&!Array.isArray(n))return n;var o=this.localizableStrings?this.localizableStrings[e]:void 0;return o&&o.localizationName?this.getLocalizationString(o.localizationName):"boolean"!=t.type&&"switch"!=t.type&&(t.isCustom&&t.onGetValue?t.onGetValue(this):void 0)}},e.prototype.hasDefaultPropertyValue=function(e){return void 0!==this.getDefaultPropertyValue(e)},e.prototype.resetPropertyValue=function(e){var t=this.localizableStrings?this.localizableStrings[e]:void 0;t?(this.setLocalizableStringText(e,void 0),t.clear()):this.setPropertyValue(e,void 0)},e.prototype.getPropertyValueWithoutDefault=function(e){return this.getPropertyValueCore(this.propertyHash,e)},e.prototype.getPropertyValueCore=function(t,n){return this.isLoadingFromJson||e.collectDependency(this,n),this.getPropertyValueCoreHandler?this.getPropertyValueCoreHandler(t,n):t[n]},e.prototype.geValueFromHash=function(){return this.propertyHash.value},e.prototype.setPropertyValueCore=function(e,t,n){this.setPropertyValueCoreHandler?this.isDisposedValue?F.disposedObjectChangedProperty(t,this.getType()):this.setPropertyValueCoreHandler(e,t,n):e[t]=n},Object.defineProperty(e.prototype,"isEditingSurveyElement",{get:function(){var e=this.getSurvey();return!!e&&e.isEditingSurveyElement},enumerable:!1,configurable:!0}),e.prototype.iteratePropertiesHash=function(e){var t=this,n=[];for(var o in this.propertyHash)n.push(o);n.forEach(function(n){return e(t.propertyHash,n)})},e.prototype.setPropertyValue=function(e,t){if(!this.isDisposedValue){if(!this.isLoadingFromJson){var n=this.getPropertyByName(e);n&&(t=n.settingValue(this,t))}var o=this.getPropertyValue(e);o&&Array.isArray(o)&&this.arraysInfo&&(!t||Array.isArray(t))?this.isTwoValueEquals(o,t)||this.setArrayPropertyDirectly(e,t):t!==o&&(this.setPropertyValueDirectly(e,t),this.isTwoValueEquals(o,t)||this.propertyValueChanged(e,o,t))}},e.prototype.setArrayPropertyDirectly=function(e,t,n){void 0===n&&(n=!0);var o=this.arraysInfo[e];this.setArray(e,this.getPropertyValue(e),t,!!o&&o.isItemValues,o?n&&o.onPush:null)},e.prototype.setPropertyValueDirectly=function(e,t){this.setPropertyValueCore(this.propertyHash,e,t)},e.prototype.clearPropertyValue=function(e){this.setPropertyValueCore(this.propertyHash,e,null),delete this.propertyHash[e]},e.prototype.onPropertyValueChangedCallback=function(e,t,n,o,i){},e.prototype.itemValuePropertyChanged=function(e,t,n,o){this.onItemValuePropertyChanged.fire(this,{obj:e,name:t,oldValue:n,newValue:o,propertyName:e.ownerPropertyName})},e.prototype.onPropertyValueChanged=function(e,t,n){},e.prototype.propertyValueChanged=function(e,t,n,o,i){if(!this.isLoadingFromJson&&(this.updateBindings(e,n),this.onPropertyValueChanged(e,t,n),this.onPropertyChanged.fire(this,{name:e,oldValue:t,newValue:n,arrayChanges:o,target:i}),this.doPropertyValueChangedCallback(e,t,n,o,this),this.checkConditionPropertyChanged(e),this.onPropChangeFunctions))for(var r=0;r<this.onPropChangeFunctions.length;r++)this.onPropChangeFunctions[r].name==e&&this.onPropChangeFunctions[r].func(n,o)},e.prototype.onBindingChanged=function(e,t){this.isLoadingFromJson||this.doPropertyValueChangedCallback("bindings",e,t)},Object.defineProperty(e.prototype,"isInternal",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.doPropertyValueChangedCallback=function(e,t,n,o,i){var r=function(r){r&&r.onPropertyValueChangedCallback&&r.onPropertyValueChangedCallback(e,t,n,i,o)};if(this.isInternal)r(this);else{i||(i=this);var s=this.getSurvey();s||(s=this),r(s),s!==this&&r(this)}},e.prototype.addExpressionProperty=function(e,t,n){this.expressionInfo||(this.expressionInfo={}),this.expressionInfo[e]={onExecute:t,canRun:n}},e.prototype.getDataFilteredProperties=function(){return{}},e.prototype.runConditionCore=function(e){if(this.expressionInfo)for(var t in this.expressionInfo)this.runConditionItemCore(t,e)},e.prototype.canRunConditions=function(){return!this.isDesignMode},e.prototype.checkConditionPropertyChanged=function(e){this.expressionInfo&&this.expressionInfo[e]&&this.canRunConditions()&&this.runConditionItemCore(e,this.getDataFilteredProperties())},e.prototype.runConditionItemCore=function(e,t){var n=this,o=this.expressionInfo[e];this.getPropertyValue(e)&&(o.canRun&&!o.canRun(this)||this.runExpressionByProperty(e,t,function(e){o.onExecute(n,e)}))},e.prototype.doBeforeAsynRun=function(e){this.asynExpressionHash||(this.asynExpressionHash={});var t=!this.isAsyncExpressionRunning;this.asynExpressionHash[e]=!0,t&&this.onAsyncRunningChanged()},e.prototype.doAfterAsynRun=function(e){this.asynExpressionHash&&(delete this.asynExpressionHash[e],this.isAsyncExpressionRunning||this.onAsyncRunningChanged())},e.prototype.onAsyncRunningChanged=function(){},Object.defineProperty(e.prototype,"isAsyncExpressionRunning",{get:function(){return!!this.asynExpressionHash&&Object.keys(this.asynExpressionHash).length>0},enumerable:!1,configurable:!0}),e.prototype.createExpressionRunner=function(e){var t=this,n=new we(e);return n.onBeforeAsyncRun=function(e){t.doBeforeAsynRun(e)},n.onAfterAsyncRun=function(e){t.doAfterAsynRun(e)},n},e.prototype.getExpressionFromSurvey=function(e){var t=this[e];if(!t)return"";var n=this.getSurvey();return n?n.beforeExpressionRunning(this,e,t):t},e.prototype.runExpressionByProperty=function(e,t,n,o){if(!this[e])return!1;var i=this.getExpressionFromSurvey(e);if(i){var r=this.getExpressionInfoByProperty(e,i),s=r.runner;r.isRunning||o&&!o(s)||(r.isRunning=!0,s.onRunComplete=function(e){n(e),r.isRunning=!1},s.runContext(this.getValueGetterContext(),this.getPropertiesCopy(t,e)))}return!0},e.prototype.getPropertiesCopy=function(e,t){var n={};for(var o in e)n[o]=e[o];return t&&(n.propertyName=t),n},e.prototype.getExpressionByProperty=function(e){var t=this.getExpressionFromSurvey(e);return t?this.getExpressionInfoByProperty(e,t).runner:null},e.prototype.getExpressionInfoByProperty=function(e,t){this.runExpressionHash||(this.runExpressionHash={});var n=this.runExpressionHash[e];return n?n.runner.expression=t:(n={runner:this.createExpressionRunner(t)},this.runExpressionHash[e]=n),n},e.prototype.registerPropertyChangedHandlers=function(e,t,n){void 0===n&&(n=null);for(var o=0;o<e.length;o++)this.registerFunctionOnPropertyValueChanged(e[o],t,n)},e.prototype.unregisterPropertyChangedHandlers=function(e,t){void 0===t&&(t=null);for(var n=0;n<e.length;n++)this.unRegisterFunctionOnPropertyValueChanged(e[n],t)},e.prototype.registerFunctionOnPropertyValueChanged=function(e,t,n){if(void 0===n&&(n=null),this.onPropChangeFunctions||(this.onPropChangeFunctions=[]),n)for(var o=0;o<this.onPropChangeFunctions.length;o++){var i=this.onPropChangeFunctions[o];if(i.name==e&&i.key==n)return void(i.func=t)}this.onPropChangeFunctions.push({name:e,func:t,key:n})},e.prototype.registerFunctionOnPropertiesValueChanged=function(e,t,n){void 0===n&&(n=null),this.registerPropertyChangedHandlers(e,t,n)},e.prototype.unRegisterFunctionOnPropertyValueChanged=function(e,t){if(void 0===t&&(t=null),this.onPropChangeFunctions)for(var n=0;n<this.onPropChangeFunctions.length;n++){var o=this.onPropChangeFunctions[n];if(o.name==e&&o.key==t)return this.onPropChangeFunctions.splice(n,1)}},e.prototype.unRegisterFunctionOnPropertiesValueChanged=function(e,t){void 0===t&&(t=null),this.unregisterPropertyChangedHandlers(e,t)},e.prototype.createCustomLocalizableObj=function(e){return this.getLocalizableString(e)||this.createLocalizableString(e,this,!1,!0)},e.prototype.getLocale=function(){var e=this.getSurvey();return e?e.getLocale():""},e.prototype.getLocalizationString=function(e){return l(e,this.getLocale())},e.prototype.getLocalizationFormatString=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=this.getLocalizationString(e);return o&&o.format?o.format.apply(o,t):""},e.prototype.createLocalizableString=function(e,t,n,o){var i=this;void 0===n&&(n=!1),void 0===o&&(o=!1);var r=void 0;o&&(r=!0===o?e:o);var s=new Et(t,n,e,r);s.onStrChanged=function(t,n){i.propertyValueChanged(e,t,n)},this.localizableStrings||(this.localizableStrings={}),this.localizableStrings[e]=s;var a=this.getPropertyByName(e);return s.disableLocalization=a&&!1===a.isLocalizable,s},e.prototype.removeLocalizableString=function(e){this.localizableStrings&&delete this.localizableStrings[e]},e.prototype.getLocalizableString=function(e){return this.localizableStrings?this.localizableStrings[e]:null},e.prototype.getLocalizableStringText=function(t,n){void 0===n&&(n=""),e.collectDependency(this,t);var o=this.getLocalizableString(t);return o?o.text||n:""},e.prototype.setLocalizableStringText=function(e,t){var n=this.getLocalizableString(e);n&&n.text!=t&&(n.text=t)},e.prototype.addUsedLocales=function(e){if(this.localizableStrings)for(var t in this.localizableStrings)(r=this.getLocalizableString(t))&&this.AddLocStringToUsedLocales(r,e);if(this.arraysInfo)for(var t in this.arraysInfo){var n=this.getPropertyByName(t);if(n&&n.isPropertySerializable(this)){var o=this.getPropertyValue(t);if(o&&o.length)for(var i=0;i<o.length;i++){var r;(r=o[i])&&r.addUsedLocales&&r.addUsedLocales(e)}}}},e.prototype.searchText=function(e,t){var n=[];this.getSearchableLocalizedStrings(n);for(var o=0;o<n.length;o++)n[o].setFindText(e)&&t.push({element:this,str:n[o]})},e.prototype.getSearchableLocalizedStrings=function(e){if(this.localizableStrings){var t=[];this.getSearchableLocKeys(t);for(var n=0;n<t.length;n++){var o=this.getLocalizableString(t[n]);o&&e.push(o)}}if(this.arraysInfo){var i=[];for(this.getSearchableItemValueKeys(i),n=0;n<i.length;n++){var r=this.getPropertyValue(i[n]);if(r)for(var s=0;s<r.length;s++)e.push(r[s].locText)}}},e.prototype.getSearchableLocKeys=function(e){},e.prototype.getSearchableItemValueKeys=function(e){},e.prototype.AddLocStringToUsedLocales=function(e,t){for(var n=e.getLocales(),o=0;o<n.length;o++)t.indexOf(n[o])<0&&t.push(n[o])},e.prototype.createItemValues=function(e){var t=this,n=this.createNewArray(e,function(n){if(n.locOwner=t,n.ownerPropertyName=e,"function"==typeof n.getSurvey){var o=n.getSurvey();o&&"function"==typeof o.makeReactive&&o.makeReactive(n)}});return this.arraysInfo[e].isItemValues=!0,n},e.prototype.addOnArrayChangedCallback=function(e,t){e.onArrayChanged||(e.onArrayChanged=new Ae),e.onArrayChanged.add(t)},e.prototype.removeOnArrayChangedCallback=function(e,t){e.onArrayChanged&&(e.onArrayChanged.remove(t),e.onArrayChanged.isEmpty&&(e.onArrayChanged=void 0))},e.prototype.notifyArrayChanged=function(e,t,n){t.onArrayChanged&&t.onArrayChanged.fire(this,{arrayChanges:n,name:e,newValue:t})},e.prototype.createNewArrayCore=function(e){var t=null;return this.createArrayCoreHandler&&(t=this.createArrayCoreHandler(this.propertyHash,e)),t||(t=new Array,this.setPropertyValueCore(this.propertyHash,e,t)),t},e.prototype.ensureArray=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),!this.arraysInfo||!this.arraysInfo[e])return this.createNewArray(e,t,n)},e.prototype.createNewArray=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var o=this.createNewArrayCore(e);this.arraysInfo||(this.arraysInfo={}),this.arraysInfo[e]={onPush:t,isItemValues:!1};var i=this;return o.push=function(n){var r=Object.getPrototypeOf(o).push.call(o,n);if(!i.isDisposedValue){t&&t(n,o.length-1);var s=new Re(o.length-1,0,[n],[]);i.propertyValueChanged(e,o,o,s),i.notifyArrayChanged(e,o,s)}return r},o.shift=function(){var t=Object.getPrototypeOf(o).shift.call(o);if(!i.isDisposedValue&&t){n&&n(t);var r=new Re(o.length-1,1,[],[]);i.propertyValueChanged(e,o,o,r),i.notifyArrayChanged(e,o,r)}return t},o.unshift=function(n){var r=Object.getPrototypeOf(o).unshift.call(o,n);if(!i.isDisposedValue){t&&t(n,o.length-1);var s=new Re(0,0,[n],[]);i.propertyValueChanged(e,o,o,s),i.notifyArrayChanged(e,o,s)}return r},o.pop=function(){var t=Object.getPrototypeOf(o).pop.call(o);if(!i.isDisposedValue){n&&n(t);var r=new Re(o.length-1,1,[],[]);i.propertyValueChanged(e,o,o,r),i.notifyArrayChanged(e,o,r)}return t},o.splice=function(r,s){for(var a,l=[],u=2;u<arguments.length;u++)l[u-2]=arguments[u];r||(r=0),s||(s=0);var c=(a=Object.getPrototypeOf(o).splice).call.apply(a,xe([o,r,s],l,!1));if(l||(l=[]),!i.isDisposedValue){if(n&&c)for(var p=0;p<c.length;p++)n(c[p]);if(t)for(p=0;p<l.length;p++)t(l[p],r+p);var h=new Re(r,s,l,c);i.propertyValueChanged(e,o,o,h),i.notifyArrayChanged(e,o,h)}return c},o},e.prototype.getItemValueType=function(){},e.prototype.setArray=function(t,n,o,i,r){var s=[].concat(n);if(Object.getPrototypeOf(n).splice.call(n,0,n.length),o){for(var a=0;a<o.length;a++){var l=o[a];i&&e.createItemValue&&(l=e.createItemValue(l,this.getItemValueType())),Object.getPrototypeOf(n).push.call(n,l),r&&r(n[a])}delete n.isReset}else n.isReset=!0;var u=new Re(0,s.length,n,s);this.propertyValueChanged(t,s,n,u),this.notifyArrayChanged(t,n,u)},e.prototype.isTwoValueEquals=function(e,t,n,o){return void 0===n&&(n=!1),void 0===o&&(o=!1),r.checkIfValuesEqual(e,t,{ignoreOrder:!1,caseSensitive:!n,trimStrings:o,doNotConvertNumbers:!0})},e.copyObject=function(e,t){for(var n in t){var o=t[n];"object"==typeof o&&(o={},this.copyObject(o,t[n])),e[n]=o}},e.prototype.copyCssClasses=function(t,n){n&&("string"==typeof n||n instanceof String?t.root=n:e.copyObject(t,n))},e.prototype.getValueInLowCase=function(e){return e&&"string"==typeof e?e.toLowerCase():e},e.prototype.getElementsInDesign=function(e){return void 0===e&&(e=!1),[]},Object.defineProperty(e.prototype,"animationAllowed",{get:function(){return this.getIsAnimationAllowed()},enumerable:!1,configurable:!0}),e.prototype.getIsAnimationAllowed=function(){return gn.animationEnabled&&this.animationAllowedLock>=0&&!this.isLoadingFromJson&&!this.isDisposed&&(!!this.onElementRerendered||!this.supportOnElementRerenderedEvent)},e.prototype.blockAnimations=function(){this.animationAllowedLock--},e.prototype.releaseAnimations=function(){this.animationAllowedLock++},e.prototype.enableOnElementRerenderedEvent=function(){this.onElementRerenderedEventEnabled=!0},e.prototype.disableOnElementRerenderedEvent=function(){var e;null===(e=this.onElementRerendered)||void 0===e||e.fire(this,{isCancel:!0}),this.onElementRerenderedEventEnabled=!1},Object.defineProperty(e.prototype,"onElementRerendered",{get:function(){return this.supportOnElementRerenderedEvent&&this.onElementRerenderedEventEnabled?this._onElementRerendered:void 0},enumerable:!1,configurable:!0}),e.prototype.afterRerender=function(){var e;null===(e=this.onElementRerendered)||void 0===e||e.fire(this,{isCancel:!1})},e.UniqueId=0,e.currentDependencis=void 0,e}(),Re=function(e,t,n,o){this.index=e,this.deleteCount=t,this.itemsToAdd=n,this.deletedItems=o},Ee=function(){function e(){}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.callbacks?this.callbacks.length:0},enumerable:!1,configurable:!0}),e.prototype.fireByCreatingOptions=function(e,t){if(this.callbacks)for(var n=0;n<this.callbacks.length;n++)if(this.callbacks[n](e,t()),!this.callbacks)return},e.prototype.fire=function(e,t){if(this.callbacks)for(var n=[].concat(this.callbacks),o=0;o<n.length;o++)if(n[o](e,t),!this.callbacks)return},e.prototype.clear=function(){this.callbacks=void 0},e.prototype.add=function(e){this.hasFunc(e)||(this.callbacks||(this.callbacks=new Array),this.callbacks.push(e),this.fireCallbackChanged())},e.prototype.remove=function(e){if(this.hasFunc(e)){var t=this.callbacks.indexOf(e,0);this.callbacks.splice(t,1),this.fireCallbackChanged()}},e.prototype.hasFunc=function(e){return null!=this.callbacks&&this.callbacks.indexOf(e,0)>-1},e.prototype.fireCallbackChanged=function(){this.onCallbacksChanged&&this.onCallbacksChanged()},e}(),Ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ve(t,e),t}(Ee),De=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Le=function(){function e(e,t,i){var r=this;this.container=e,this.model=t,this.afterInitializeCallback=i,this.resizeObserver=void 0,this.isInitialized=!1,this.isResizeObserverStarted=!1,this.getComputedStyle=function(e){return o.getComputedStyle(e)},this.isDisposed=!1,"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(function(e){n.requestAnimationFrame(function(){r.isResizeObserverStarted=!0,r.process()})}),this.resizeObserver.observe(this.container.parentElement))}return e.prototype.getDimensions=function(e){return{scroll:e.scrollWidth,offset:e.offsetWidth}},e.prototype.getAvailableSpace=function(){var e=this.getComputedStyle(this.container),t=this.container.offsetWidth;return"border-box"===e.boxSizing&&(t-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)),t},e.prototype.getGap=function(){var e=this.getComputedStyle(this.container);if("flex"==e.display){var t=parseFloat(e.rowGap);return isNaN(t)?0:t}return 0},e.prototype.calcItemSize=function(e){return e.offsetWidth||e.getBoundingClientRect().width},e.prototype.updateItemsDimensions=function(e){var t=this;if(this.container){var n=this.isInitialized?this.model.renderedActions.filter(function(e){return e.needUpdateMaxDimension||e.needUpdateMinDimension}):this.model.renderedActions,o=n.length;0==o&&e(),n.forEach(function(n){var i=!t.isInitialized||n.needUpdateMaxDimension,r=!t.isInitialized||n.needUpdateMinDimension?i?void 0:"small":"large";n.updateDimensions(function(e){return t.calcItemSize(e)},function(){n.needUpdateMaxDimension=!1,n.needUpdateMinDimension=!1,--o<=0&&e()},r)})}},Object.defineProperty(e.prototype,"isContainerVisible",{get:function(){return!!this.container&&on(this.container)},enumerable:!1,configurable:!0}),e.prototype.shouldProcessResponsiveness=function(){return this.isContainerVisible&&!this.model.isResponsivenessDisabled&&!this.isDisposed},e.prototype.process=function(){var e=this;this.shouldProcessResponsiveness()&&this.updateItemsDimensions(function(){e.shouldProcessResponsiveness()&&e.model.fit({availableSpace:e.getAvailableSpace(),gap:e.getGap()}),e.isInitialized||(e.isInitialized=!0,e.afterInitializeCallback&&e.afterInitializeCallback())})},e.prototype.update=function(e){this.isResizeObserverStarted&&(this.model.isResponsivenessDisabled||(e&&(this.isInitialized=!1),this.process()))},e.prototype.dispose=function(){this.isDisposed=!0,this.resizeObserver&&this.resizeObserver.disconnect(),this.isResizeObserverStarted=!1,this.resizeObserver=void 0,this.container=void 0},e}(),je=function(e){function t(t,n){return e.call(this,t,n)||this}return De(t,e),t.prototype.getDimensions=function(){return{scroll:this.container.scrollHeight,offset:this.container.offsetHeight}},t.prototype.getAvailableSpace=function(){var e=this.getComputedStyle(this.container),t=this.container.offsetHeight;return"border-box"===e.boxSizing&&(t-=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)),t},t.prototype.calcItemSize=function(e){return e.offsetHeight},t}(Le),_e=function(){function e(){this.classes=[]}return e.prototype.isEmpty=function(){return""===this.toString()},e.prototype.append=function(e,t){return void 0===t&&(t=!0),e&&t&&("string"==typeof e&&(e=e.trim()),this.classes.push(e)),this},e.prototype.toString=function(){return this.classes.join(" ")},e}();function Ne(e){var t,n=this,o=!1,i=!1,r=function(){i=!0,t=void 0};return{run:function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];i=!1,t=r,o||(o=!0,queueMicrotask(function(){i||e.apply(n,t),t=void 0,i=!1,o=!1}))},cancel:r,getLastArguments:function(){return t},flushSync:function(){!i&&o&&(e.apply(n,t),r())}}}(function(){function e(e,t){void 0===t&&(t=!1);var n=this;this.func=e,this.isMultiple=t,this._isCompleted=!1,this.execute=function(){n._isCompleted||(n.func(),n._isCompleted=!n.isMultiple)}}e.prototype.discard=function(){this._isCompleted=!0},Object.defineProperty(e.prototype,"isCompleted",{get:function(){return this._isCompleted},enumerable:!1,configurable:!0})})(),function(){function e(t){void 0===t&&(t=100),this.interval=t,setTimeout(e.Instance().tick,t)}e.Instance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.tick=function(){try{for(var t=[],n=0;n<e.tasks.length;n++){var o=e.tasks[n];o.execute(),o.isCompleted?"function"==typeof o.dispose&&o.dispose():t.push(o)}e.tasks=t}finally{setTimeout(e.Instance().tick,this.interval)}},e.schedule=function(t){e.tasks.push(t)},e.instance=void 0,e.tasks=[]}();var Me,ke=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fe=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Be={root:"sv-action-bar",defaultSizeMode:"sv-action-bar--default-size-mode",smallSizeMode:"sv-action-bar--small-size-mode",item:"sv-action-bar-item",itemWithTitle:"",itemAsIcon:"sv-action-bar-item--icon",itemActive:"sv-action-bar-item--active",itemPressed:"sv-action-bar-item--pressed",itemIcon:"sv-action-bar-item__icon",itemTitle:"sv-action-bar-item__title",itemTitleWithIcon:"sv-action-bar-item__title--with-icon"},qe=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.id=t.ContainerID++,n.visibleActions=[],n.sizeMode="default",n.raiseUpdateCallback=Ne(function(e){n.update(e)}),n.onActionPropertyChangedCallback=n.onActionPropertyChanged.bind(n),n}return ke(t,e),t.prototype.getMarkdownHtml=function(e,t,n){return this.locOwner?this.locOwner.getMarkdownHtml(e,t,n):void 0},t.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.locOwner?this.locOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e){return this.locOwner?this.locOwner.getProcessedText(e):e},t.prototype.getLocale=function(){return this.locOwner?this.locOwner.getLocale():""},t.prototype.getRenderedActions=function(){return this.visibleActions},t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.actions.forEach(function(e){e.locTitle&&e.locTitle.strChanged(),e.locStrsChanged()})},t.prototype.flushUpdates=function(){this.raiseUpdateCallback.flushSync()},t.prototype.raiseUpdate=function(e){var t,n=this.raiseUpdateCallback.getLastArguments(),o=null!==(t=n&&n[0])&&void 0!==t?t:{};this.raiseUpdateCallback.run(this.mergeUpdateOptions(e,o))},t.prototype.mergeUpdateOptions=function(e,t){var n=Object.assign({},e);return n.needUpdateActions=!!n.needUpdateActions||!!t.needUpdateActions,n.needUpdateIsEmpty=!!n.needUpdateIsEmpty||!!t.needUpdateIsEmpty,n},t.prototype.update=function(e){(null==e?void 0:e.needUpdateActions)&&this.updateVisibleActions(),(null==e?void 0:e.needUpdateIsEmpty)&&this.updateIsEmpty()},t.prototype.updateVisibleActions=function(){this.visibleActions=this.getVisibleActions()},t.prototype.updateIsEmpty=function(){this.isEmpty=this.getIsEmpty()},t.prototype.getIsEmpty=function(){return this.visibleActions.length<=0},t.prototype.getVisibleActions=function(){return this.actions.filter(function(e){return!1!==e.visible})},t.prototype.onSet=function(){var e=this;this.actions.forEach(function(t){e.patchAction(t)})},t.prototype.onPush=function(e){this.patchAction(e),this.raiseUpdate({needUpdateActions:!0,needUpdateIsEmpty:!0})},t.prototype.onRemove=function(e){this.unPatchAction(e),this.raiseUpdate({needUpdateActions:!0,needUpdateIsEmpty:!0})},t.prototype.onActionPropertyChanged=function(e,t){"_visible"==t.name&&this.raiseUpdate({needUpdateActions:!0,needUpdateIsEmpty:!0})},t.prototype.patchAction=function(e){this.setActionCssClasses(e),e.owner=this,e.onPropertyChanged.add(this.onActionPropertyChangedCallback)},t.prototype.unPatchAction=function(e){e.owner=null,e.onPropertyChanged.remove(this.onActionPropertyChangedCallback)},t.prototype.setActionCssClasses=function(e){e.cssClasses=this.cssClasses},Object.defineProperty(t.prototype,"hasActions",{get:function(){return(this.actions||[]).length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasVisibleActions",{get:function(){return!this.isEmpty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedActions",{get:function(){return this.getRenderedActions()},enumerable:!1,configurable:!0}),t.prototype.getRootStyle=function(){},t.prototype.getRootCss=function(){var e="small"===this.sizeMode?this.cssClasses.smallSizeMode:this.cssClasses.defaultSizeMode;return(new _e).append(this.cssClasses.root+(e?" "+e:"")+(this.containerCss?" "+this.containerCss:"")).append(this.cssClasses.root+"--empty",this.isEmpty).toString()},t.prototype.getDefaultCssClasses=function(){return Be},t.prototype.getAllActions=function(){return this.actions},t.prototype.setCssClasses=function(e,t){var n=this;void 0===t&&(t=!0),this.cssClassesValue={},t&&this.copyCssClasses(this.cssClassesValue,this.getDefaultCssClasses()),sn(e,this.cssClasses),this.getAllActions().forEach(function(e){n.setActionCssClasses(e)})},Object.defineProperty(t.prototype,"cssClasses",{get:function(){return this.cssClassesValue||(this.cssClassesValue=this.getDefaultCssClasses()),this.cssClassesValue},set:function(e){this.setCssClasses(e)},enumerable:!1,configurable:!0}),t.prototype.createAction=function(e){return e instanceof ht?e:new dt(e)},t.prototype.addAction=function(e,t){void 0===t&&(t=!0);var n=this.createAction(e);if(t&&!this.isActionVisible(n))return n;var o=[].concat(this.actions,n);return this.sortItems(o),this.actions=o,n},t.prototype.setItems=function(e,t){var n=this;void 0===t&&(t=!0);var o=[];e.forEach(function(e){t&&!n.isActionVisible(e)||o.push(n.createAction(e))}),t&&this.sortItems(o),this.actions=o},t.prototype.sortItems=function(e){this.hasSetVisibleIndex(e)&&e.sort(this.compareByVisibleIndex)},t.prototype.hasSetVisibleIndex=function(e){for(var t=0;t<e.length;t++){var n=e[t].visibleIndex;if(void 0!==n&&n>=0)return!0}return!1},t.prototype.compareByVisibleIndex=function(e,t){return e.visibleIndex-t.visibleIndex},t.prototype.isActionVisible=function(e){return e.visibleIndex>=0||void 0===e.visibleIndex},t.prototype.popupAfterShowCallback=function(e){},t.prototype.mouseOverHandler=function(e){e.isHovered=!0;var t=!1,n=!1;if(this.actions.forEach(function(o){o===e&&e.popupModel&&(t=!0),o.popupModel&&o.popupModel.isVisible&&(n=!0)}),t){var o=n?Math.max(this.subItemsShowDelay,this.subItemsHideDelay):this.subItemsShowDelay;e.showPopupDelayed(o),this.popupAfterShowCallback(e)}},t.prototype.initResponsivityManager=function(e,t){},t.prototype.resetResponsivityManager=function(){},t.prototype.getActionById=function(e){for(var t=0;t<this.actions.length;t++)if(this.actions[t].id===e)return this.actions[t];return null},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.resetResponsivityManager(),this.actions.forEach(function(e){return e.dispose()}),this.actions.length=0},t.ContainerID=1,Fe([b({})],t.prototype,"visibleActions",void 0),Fe([b({onSet:function(e,t){t.onSet()},onPush:function(e,t,n){n.onPush(e)},onRemove:function(e,t,n){n.onRemove(e)}})],t.prototype,"actions",void 0),Fe([y({})],t.prototype,"containerCss",void 0),Fe([y({defaultValue:!0})],t.prototype,"isEmpty",void 0),Fe([y({defaultValue:300})],t.prototype,"subItemsShowDelay",void 0),Fe([y({defaultValue:300})],t.prototype,"subItemsHideDelay",void 0),t}(Te),Qe=function(){function e(){}return e.focusElement=function(e){e&&e.focus()},e.visibility=function(e){var t=o.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&(!e.parentElement||this.visibility(e.parentElement))},e.getNextElementPreorder=function(e){var t=e.nextElementSibling?e.nextElementSibling:e.parentElement.firstElementChild;return this.visibility(t)?t:this.getNextElementPreorder(t)},e.getNextElementPostorder=function(e){var t=e.previousElementSibling?e.previousElementSibling:e.parentElement.lastElementChild;return this.visibility(t)?t:this.getNextElementPostorder(t)},e.hasHorizontalScroller=function(e){return!!e&&e.scrollWidth>e.offsetWidth},e.hasVerticalScroller=function(e){return!!e&&e.scrollHeight>e.offsetHeight},e}(),ze=!1,He=null;"undefined"!=typeof navigator&&navigator&&n.isAvailable()&&(He=navigator.userAgent||navigator.vendor||n.hasOwn("opera")),(Me=He)&&("MacIntel"===navigator.platform&&navigator.maxTouchPoints>0||"iPad"===navigator.platform||/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(Me)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(Me.substring(0,4)))&&(ze=!0);var Ue=ze||!1,We={get isTouch(){return!this.hasMouse&&this.hasTouchEvent},get hasTouchEvent(){return n.isAvailable()&&(n.hasOwn("ontouchstart")||navigator.maxTouchPoints>0)},hasMouse:!0},Ge=n.matchMedia;We.hasMouse=function(e){if(!e)return!1;if(Ue)return!1;var t=e("(pointer:fine)"),n=e("(any-hover:hover)");return!!t&&t.matches||!!n&&n.matches}(Ge);var Je=We.isTouch;function Ke(e){Je=e}var Ye=void 0;function Xe(e){Ye=e}var Ze=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$e=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},et={root:"sv-list__container",item:"sv-list__item",searchClearButtonIcon:"sv-list__filter-clear-button",loadingIndicator:"sv-list__loading-indicator",itemSelected:"sv-list__item--selected",itemGroup:"sv-list__item--group",itemGroupSelected:"sv-list__item--group-selected",itemWithIcon:"sv-list__item--with-icon",itemDisabled:"sv-list__item--disabled",itemFocused:"sv-list__item--focused",itemHovered:"sv-list__item--hovered",itemTextWrap:"sv-list__item-text--wrap",itemIcon:"sv-list__item-icon",itemMarkerIcon:"sv-list-item__marker-icon",itemSeparator:"sv-list__item-separator",itemBody:"sv-list__item-body",itemsContainer:"sv-list",itemsContainerFiltering:"sv-list--filtering",filter:"sv-list__filter",filterIcon:"sv-list__filter-icon",filterInput:"sv-list__input",emptyContainer:"sv-list__empty-container",emptyText:"sv-list__empty-text"},tt=function(e){function t(t,n,o,i,r){var s=e.call(this)||this;if(s.onSelectionChanged=n,s.allowSelection=o,s.elementId=r,s.onItemClick=function(e){if(!s.isItemDisabled(e)){s.isExpanded=!1,s.allowSelection&&(s.selectedItem=e),s.onSelectionChanged&&s.onSelectionChanged(e);var t=e.action;t&&t(e)}},s.onItemHover=function(e){s.mouseOverHandler(e)},s.isItemDisabled=function(e){return void 0!==e.enabled&&!e.enabled},s.getA11yItemAriaSelected=function(e){if("option"==s.listItemRole)return s.isItemSelected(e)?"true":"false"},s.getA11yItemAriaChecked=function(e){if("menuitemradio"==s.listItemRole)return s.isItemSelected(e)?"true":"false"},s.isItemSelected=function(e){return s.areSameItems(s.selectedItem,e)},s.isItemFocused=function(e){return s.areSameItems(s.focusedItem,e)},s.getListClass=function(){return(new _e).append(s.cssClasses.itemsContainer).append(s.cssClasses.itemsContainerFiltering,!!s.filterString&&s.visibleActions.length!==s.visibleItems.length).toString()},s.getItemClass=function(e){var t=s.isItemSelected(e);return(new _e).append(s.cssClasses.item).append(s.cssClasses.itemWithIcon,!!e.iconName).append(s.cssClasses.itemDisabled,s.isItemDisabled(e)).append(s.cssClasses.itemFocused,s.isItemFocused(e)).append(s.cssClasses.itemSelected,!e.hasSubItems&&t).append(s.cssClasses.itemGroup,e.hasSubItems).append(s.cssClasses.itemGroupSelected,e.hasSubItems&&t).append(s.cssClasses.itemHovered,e.isHovered).append(s.cssClasses.itemTextWrap,s.textWrapEnabled).append(e.css).toString()},s.getItemStyle=function(e){return{"--sjs-list-item-level":(e.level||0)+1}},-1!==Object.keys(t).indexOf("items")){var a=t;Object.keys(a).forEach(function(e){switch(e){case"items":s.setItems(a.items);break;case"onFilterStringChangedCallback":s.setOnFilterStringChangedCallback(a.onFilterStringChangedCallback);break;case"onTextSearchCallback":s.setOnTextSearchCallback(a.onTextSearchCallback);break;default:s[e]=a[e]}}),s.updateActionsIds()}else s.setItems(t),s.selectedItem=i;return s}return Ze(t,e),t.prototype.hasText=function(e,t){if(!t)return!0;var n=e.title||"";if(this.onTextSearchCallback)return this.onTextSearchCallback(e,t);var o=n.toLocaleLowerCase();return(o=gn.comparator.normalizeTextCallback(o,"filter")).indexOf(t.toLocaleLowerCase())>-1},t.prototype.isItemVisible=function(e){return e.id===this.loadingIndicator.id||this.disableSearch?e.visible:e.visible&&this.hasText(e,this.filterString)},t.prototype.getRenderedActions=function(){var t=e.prototype.getRenderedActions.call(this);if(this.filterString){var n=[];return t.forEach(function(e){n.push(e),e.items&&e.items.forEach(function(t){var o=new dt(t);o.iconName||(o.iconName=e.iconName),n.push(o)})}),n}return t},Object.defineProperty(t.prototype,"visibleItems",{get:function(){var e=this;return this.actions.filter(function(t){return e.isItemVisible(t)})},enumerable:!1,configurable:!0}),t.prototype.onFilterStringChanged=function(e){this.onFilterStringChangedCallback&&this.onFilterStringChangedCallback(e),this.raiseUpdate({needUpdateIsEmpty:!0})},t.prototype.getIsEmpty=function(){var e=this;return!this.renderedActions.some(function(t){return e.isItemVisible(t)})},t.prototype.scrollToItem=function(e,t){var n=this;void 0===t&&(t=0),setTimeout(function(){if(n.listContainerHtmlElement){var o=n.listContainerHtmlElement.querySelector(tn(e));o&&setTimeout(function(){o.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})},t)}},t)},t.prototype.setOnFilterStringChangedCallback=function(e){this.onFilterStringChangedCallback=e},t.prototype.setOnTextSearchCallback=function(e){this.onTextSearchCallback=e},t.prototype.setItems=function(t,n){void 0===n&&(n=!0),e.prototype.setItems.call(this,t,n),this.updateActionsIds(),!this.isAllDataLoaded&&this.actions.length&&this.actions.push(this.loadingIndicator)},t.prototype.updateActionsIds=function(){var e=this;this.elementId&&this.actions.forEach(function(t){t.elementId=e.elementId+t.id})},t.prototype.setSearchEnabled=function(e){this.searchEnabled=e,this.showSearchClearButton=e},t.prototype.onSet=function(){this.showFilter=this.searchEnabled&&(this.forceShowFilter||(this.actions||[]).length>t.MINELEMENTCOUNT),e.prototype.onSet.call(this)},t.prototype.getDefaultCssClasses=function(){return et},t.prototype.popupAfterShowCallback=function(e){this.addScrollEventListener(function(){e.hidePopup()})},t.prototype.onItemLeave=function(e){e.hidePopupDelayed(this.subItemsHideDelay)},t.prototype.areSameItems=function(e,t){return this.areSameItemsCallback?this.areSameItemsCallback(e,t):!!e&&!!t&&e.id==t.id},Object.defineProperty(t.prototype,"a11ya11y_input_ariaLabel",{get:function(){return this.listAriaLabel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filterStringPlaceholder",{get:function(){return this.getLocalizationString("filterStringPlaceholder")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emptyMessage",{get:function(){return this.isAllDataLoaded?this.getLocalizationString("emptyMessage"):this.getLocalizationString("loadingData")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollableContainer",{get:function(){return this.listContainerHtmlElement.querySelector(tn(this.cssClasses.itemsContainer))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadingIndicator",{get:function(){if(!this.loadingIndicatorValue){var e=new dt({id:"loadingIndicator",title:this.getLocalizationString("loadingPage"),action:function(){},css:this.cssClasses.loadingIndicator});e.initLoadingIndicatorVisibilityObserver(this.loadingIndicatorVisibilityObserver),this.loadingIndicatorValue=e}return this.loadingIndicatorValue},enumerable:!1,configurable:!0}),t.prototype.goToItems=function(e){if("ArrowDown"===e.key||40===e.keyCode){var t=e.target.parentElement.parentElement.querySelector("ul"),n=function(e){for(var t,n=0;n<e.children.length;n++)t||"none"===getComputedStyle(e.children[n]).display||(t=e.children[n]);return t}(t);t&&n&&(Qe.focusElement(n),e.preventDefault())}},t.prototype.onMouseMove=function(e){this.resetFocusedItem()},t.prototype.onKeyDown=function(e){var t=e.target;"ArrowDown"===e.key||40===e.keyCode?(Qe.focusElement(Qe.getNextElementPreorder(t)),e.preventDefault()):"ArrowUp"!==e.key&&38!==e.keyCode||(Qe.focusElement(Qe.getNextElementPostorder(t)),e.preventDefault())},t.prototype.onPointerDown=function(e,t){},t.prototype.refresh=function(){""==this.filterString&&this.raiseUpdate({needUpdateIsEmpty:!0}),this.resetFocusedItem()},t.prototype.onClickSearchClearButton=function(e){e.currentTarget.parentElement.querySelector("input").focus(),this.refresh()},t.prototype.resetFocusedItem=function(){this.focusedItem=void 0},t.prototype.focusFirstVisibleItem=function(){Je||(this.focusedItem=this.visibleItems[0])},t.prototype.focusLastVisibleItem=function(){this.focusedItem=this.visibleItems[this.visibleItems.length-1]},t.prototype.initFocusedItem=function(){var e=this;this.focusedItem=this.visibleItems.filter(function(t){return t.visible&&e.isItemSelected(t)})[0],this.focusedItem||this.focusFirstVisibleItem()},t.prototype.focusNextVisibleItem=function(){if(this.focusedItem){var e=this.visibleItems,t=e.indexOf(this.focusedItem),n=e[t+1];n?this.focusedItem=n:this.focusFirstVisibleItem()}else this.initFocusedItem()},t.prototype.focusPrevVisibleItem=function(){if(this.focusedItem){var e=this.visibleItems,t=e.indexOf(this.focusedItem),n=e[t-1];n?this.focusedItem=n:this.focusLastVisibleItem()}else this.initFocusedItem()},t.prototype.selectFocusedItem=function(){this.focusedItem&&this.onItemClick(this.focusedItem)},t.prototype.initListContainerHtmlElement=function(e){this.listContainerHtmlElement=e},t.prototype.onItemRended=function(e,t){this.isAllDataLoaded||(e===this.actions[this.actions.length-1]&&this.listContainerHtmlElement&&(this.hasVerticalScroller=Qe.hasVerticalScroller(this.scrollableContainer)),e.id===this.loadingIndicator.id&&t&&this.loadingIndicator.intersectionVisibilityObserver&&this.loadingIndicator.intersectionVisibilityObserver.observe(t))},t.prototype.scrollToFocusedItem=function(){this.scrollToItem(this.cssClasses.itemFocused)},t.prototype.scrollToSelectedItem=function(){this.selectedItem&&this.selectedItem.items&&this.selectedItem.items.length>0?this.scrollToItem(this.cssClasses.itemGroupSelected,110):this.scrollToItem(this.cssClasses.itemSelected,110)},t.prototype.setLoadingIndicatorVisibilityObserver=function(e){e&&(this.loadingIndicatorVisibilityObserver=e)},t.prototype.addScrollEventListener=function(e){e&&(this.removeScrollEventListener(),this.scrollHandler=e),this.scrollHandler&&this.scrollableContainer.addEventListener("scroll",this.scrollHandler)},t.prototype.removeScrollEventListener=function(){this.scrollHandler&&this.scrollableContainer.removeEventListener("scroll",this.scrollHandler)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.loadingIndicatorValue&&this.loadingIndicatorValue.dispose(),this.listContainerHtmlElement=void 0},t.INDENT=16,t.MINELEMENTCOUNT=10,$e([y({defaultValue:!0,onSet:function(e,t){t.onSet()}})],t.prototype,"searchEnabled",void 0),$e([y({defaultValue:!1})],t.prototype,"showFilter",void 0),$e([y({defaultValue:!1})],t.prototype,"forceShowFilter",void 0),$e([y({defaultValue:!1})],t.prototype,"isExpanded",void 0),$e([y({})],t.prototype,"selectedItem",void 0),$e([y()],t.prototype,"focusedItem",void 0),$e([y({onSet:function(e,t){t.onFilterStringChanged(t.filterString)}})],t.prototype,"filterString",void 0),$e([y({defaultValue:!1})],t.prototype,"hasVerticalScroller",void 0),$e([y({defaultValue:!0})],t.prototype,"isAllDataLoaded",void 0),$e([y({defaultValue:!1})],t.prototype,"showSearchClearButton",void 0),$e([y({defaultValue:!0})],t.prototype,"renderElements",void 0),$e([y({defaultValue:!1})],t.prototype,"textWrapEnabled",void 0),$e([y({defaultValue:"sv-list-item-content"})],t.prototype,"itemComponent",void 0),$e([y({defaultValue:"listbox"})],t.prototype,"listRole",void 0),$e([y({defaultValue:"option"})],t.prototype,"listItemRole",void 0),$e([y()],t.prototype,"listAriaLabel",void 0),$e([y({defaultValue:!1})],t.prototype,"disableSearch",void 0),t}(qe),nt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ot=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},it=function(e){function t(t,n,o){var i=e.call(this)||this;if(i.focusFirstInputSelector="",i.onCancel=function(){},i.onApply=function(){return!0},i.onHide=function(){},i.onShow=function(){},i.onBlur=function(){},i.onDispose=function(){},i.onVisibilityChanged=i.addEvent(),i.onFooterActionsCreated=i.addEvent(),i.onRecalculatePosition=i.addEvent(),i.contentComponentName=t,i.contentComponentData=n,o)for(var r in o)i[r]=o[r];return i}return nt(t,e),t.prototype.refreshInnerModel=function(){var e=this.contentComponentData.model;e&&e.refresh&&e.refresh()},Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.getPropertyValue("isVisible",!1)},set:function(e){this.isVisible!==e&&(this.setPropertyValue("isVisible",e),this.onVisibilityChanged.fire(this,{model:this,isVisible:e}))},enumerable:!1,configurable:!0}),t.prototype.toggleVisibility=function(){this.isVisible=!this.isVisible},t.prototype.show=function(){this.isVisible||(this.isVisible=!0)},t.prototype.hide=function(){this.isVisible&&(this.isVisible=!1)},t.prototype.recalculatePosition=function(e){this.onRecalculatePosition.fire(this,{isResetHeight:e})},t.prototype.updateFooterActions=function(e){var t={actions:e};return this.onFooterActionsCreated.fire(this,t),t.actions},t.prototype.getDisplayMode=function(){if(this.isModal)return"popup"===this.displayMode?"modal-popup":"modal-overlay";if("popup"===this.displayMode)return"menu-popup";var e=void 0;switch(this.overlayDisplayMode){case"plain":e="menu-popup";break;case"dropdown-overlay":e="menu-overlay";break;case"tablet-dropdown-overlay":e="menu-popup-overlay";break;case"auto":e=Je?"menu-popup-overlay":"menu-popup"}return e},t.prototype.updateDisplayMode=function(e){var t,n;switch(e){case"dropdown":t="popup",n="auto";break;case"popup":t="overlay",n="tablet-dropdown-overlay";break;case"overlay":t="overlay",n="dropdown-overlay"}if(this.displayMode!==t){var o="dropdown"===e;this.setWidthByTarget=o,this.isFocusedContent=!o}return(this.displayMode!==t||this.overlayDisplayMode!==n)&&(this.displayMode=t,this.overlayDisplayMode=n,!0)},t.prototype.onHiding=function(){this.refreshInnerModel(),this.onHide()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.onDispose()},ot([y()],t.prototype,"contentComponentName",void 0),ot([y()],t.prototype,"contentComponentData",void 0),ot([y({defaultValue:"bottom"})],t.prototype,"verticalPosition",void 0),ot([y({defaultValue:"left"})],t.prototype,"horizontalPosition",void 0),ot([y({defaultValue:!0})],t.prototype,"showPointer",void 0),ot([y({defaultValue:!1})],t.prototype,"isModal",void 0),ot([y({defaultValue:!0})],t.prototype,"canShrink",void 0),ot([y({defaultValue:!0})],t.prototype,"isFocusedContent",void 0),ot([y({defaultValue:!0})],t.prototype,"isFocusedContainer",void 0),ot([y({defaultValue:""})],t.prototype,"cssClass",void 0),ot([y({defaultValue:""})],t.prototype,"title",void 0),ot([y({defaultValue:"auto"})],t.prototype,"overlayDisplayMode",void 0),ot([y({defaultValue:"popup"})],t.prototype,"displayMode",void 0),ot([y({defaultValue:"flex"})],t.prototype,"positionMode",void 0),t}(Te),rt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),st=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};function at(e,t,n){return t.locOwner=n,lt(e,t,t)}function lt(e,t,n){var o,i=t.onSelectionChanged;t.onSelectionChanged=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.hasTitle&&(a.title=e.title),i&&i(e,t)};var r=ut(t,n);r.getTargetCallback=ct;var s=Object.assign({},e,{component:"sv-action-bar-item-dropdown",popupModel:r,action:function(t,n){e.action&&e.action(),r.isFocusedContent=r.isFocusedContent||!n,r.show()}}),a=new dt(s);return a.data=null===(o=r.contentComponentData)||void 0===o?void 0:o.model,a}function ut(e,t){e.listRole||(e.listRole="menu"),e.listItemRole||(e.listItemRole=e.allowSelection?"menuitemradio":"menuitem");var n=new tt(e);n.onSelectionChanged=function(t){e.onSelectionChanged&&e.onSelectionChanged(t),i.hide()};var o=t||{};o.onDispose=function(){n.dispose()};var i=new it("sv-list",{model:n},o);return i.isFocusedContent=n.showFilter,i.onShow=function(){o.onShow&&o.onShow(),n.scrollToSelectedItem()},i.onHide=function(){o.onHide&&o.onHide(),n.filterString=""},i}function ct(e){return null==e?void 0:e.previousElementSibling}var pt,ht=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.rendredIdValue=t.getNextRendredId(),n}return rt(t,e),t.getNextRendredId=function(){return t.renderedId++},Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),t.prototype.addVisibilityChangedCallback=function(e){},t.prototype.removeVisibilityChangedCallback=function(e){},Object.defineProperty(t.prototype,"renderedId",{get:function(){return this.rendredIdValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"owner",{get:function(){return this.ownerValue},set:function(e){e!==this.owner&&(this.ownerValue=e,this.locStrsChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.getVisible()},set:function(e){this.setVisible(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this.getEnabled()},set:function(e){this.setEnabled(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.getComponent()},set:function(e){this.setComponent(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.getLocTitle()},set:function(e){this.setLocTitle(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.getTitle()},set:function(e){this.setTitle(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssClasses",{get:function(){return this.cssClassesValue||Be},set:function(e){this.cssClassesValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.visible&&"popup"!==this.mode&&"removed"!==this.mode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return void 0!==this.enabled&&!this.enabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canShrink",{get:function(){return!this.disableShrink&&!!this.iconName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitle",{get:function(){return("small"!=this.mode&&(this.showTitle||void 0===this.showTitle)||!this.iconName)&&!!this.title},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSubItems",{get:function(){return!!this.items&&this.items.length>0},enumerable:!1,configurable:!0}),t.prototype.getActionBarItemTitleCss=function(){return(new _e).append(this.cssClasses.itemTitle).append(this.cssClasses.itemTitleWithIcon,!!this.iconName).toString()},t.prototype.getActionBarItemCss=function(){var e=this.hasTitle;return(new _e).append(this.cssClasses.item).append(this.cssClasses.itemWithTitle,e).append(this.cssClasses.itemAsIcon,!e).append(this.cssClasses.itemActive,!!this.active).append(this.cssClasses.itemPressed,!!this.pressed).append(this.innerCss).toString()},t.prototype.getActionRootCss=function(){return(new _e).append("sv-action").append(this.css).append("sv-action--space",this.needSpace).append("sv-action--hidden",!this.isVisible).toString()},t.prototype.getTooltip=function(){return this.tooltip||this.title},t.prototype.getIsTrusted=function(e){return e.originalEvent?e.originalEvent.isTrusted:e.isTrusted},t.prototype.showPopup=function(){this.popupModel&&this.popupModel.show()},t.prototype.hidePopup=function(){this.popupModel&&this.popupModel.hide()},t.prototype.clearPopupTimeouts=function(){this.showPopupTimeout&&clearTimeout(this.showPopupTimeout),this.hidePopupTimeout&&clearTimeout(this.hidePopupTimeout)},t.prototype.showPopupDelayed=function(e){var t=this;this.clearPopupTimeouts(),this.showPopupTimeout=setTimeout(function(){t.clearPopupTimeouts(),t.showPopup()},e)},t.prototype.hidePopupDelayed=function(e){var t,n=this;(null===(t=this.popupModel)||void 0===t?void 0:t.isVisible)?(this.clearPopupTimeouts(),this.hidePopupTimeout=setTimeout(function(){n.clearPopupTimeouts(),n.hidePopup(),n.isHovered=!1},e)):(this.clearPopupTimeouts(),this.isHovered=!1)},t.renderedId=1,st([y()],t.prototype,"tooltip",void 0),st([y()],t.prototype,"showTitle",void 0),st([y()],t.prototype,"innerCss",void 0),st([y()],t.prototype,"active",void 0),st([y()],t.prototype,"pressed",void 0),st([y()],t.prototype,"popupModel",void 0),st([y()],t.prototype,"needSeparator",void 0),st([y()],t.prototype,"template",void 0),st([y({defaultValue:"large"})],t.prototype,"mode",void 0),st([y()],t.prototype,"visibleIndex",void 0),st([y()],t.prototype,"disableTabStop",void 0),st([y()],t.prototype,"disableShrink",void 0),st([y()],t.prototype,"disableHide",void 0),st([y({defaultValue:!1})],t.prototype,"needSpace",void 0),st([y()],t.prototype,"ariaChecked",void 0),st([y()],t.prototype,"ariaExpanded",void 0),st([y({defaultValue:"button"})],t.prototype,"ariaRole",void 0),st([y()],t.prototype,"iconName",void 0),st([y({defaultValue:24})],t.prototype,"iconSize",void 0),st([y()],t.prototype,"markerIconName",void 0),st([y()],t.prototype,"css",void 0),st([y({defaultValue:!1})],t.prototype,"isPressed",void 0),st([y({defaultValue:!1})],t.prototype,"isHovered",void 0),t}(Te),dt=function(e){function t(n){var o=e.call(this)||this;o.locTitleChanged=function(){var e=o.locTitle.renderedHtml;o.setPropertyValue("_title",e||void 0)},o.needUpdateMaxDimension=!1,o.needUpdateMinDimension=!1;var i=n instanceof t?n.innerItem:n;if(o.innerItem=i,o.locTitle=i?i.locTitle:null,i)for(var r in i)"locTitle"===r||"title"===r&&o.locTitle&&o.title||(o[r]=i[r]);return o.locTitleName&&o.locTitleChanged(),o.locStrChangedInPopupModel(),o}return rt(t,e),t.prototype.createLocTitle=function(){return this.createLocalizableString("title",this,!0)},t.prototype.setSubItems=function(e){this.markerIconName="icon-next_16x16",this.items=function(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}([],e.items,!0),this.popupModel?this.popupModel.contentComponentData.model.setItems(this.items):this.createPopupForSubitems(e),this.component=this.getGroupComponentName()},t.prototype.createPopupForSubitems=function(e){var t=Object.assign({},e);t.searchEnabled=!1;var n=ut(t,{horizontalPosition:"right",showPointer:!1,canShrink:!1});n.cssClass="sv-popup-inner",this.popupModel=n},t.prototype.getLocTitle=function(){return this.locTitleValue},t.prototype.setLocTitle=function(e){e||this.locTitleValue||(e=this.createLocTitle()),this.locTitleValue&&this.locTitleValue.onStringChanged.remove(this.locTitleChanged),this.locTitleValue=e,this.locTitleValue.onStringChanged.add(this.locTitleChanged),this.locTitleChanged()},t.prototype.getTitle=function(){return this._title},t.prototype.setTitle=function(e){this._title=e},Object.defineProperty(t.prototype,"locTitleName",{get:function(){return this.locTitle.localizationName},set:function(e){this.locTitle.localizationName=e},enumerable:!1,configurable:!0}),t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.locTooltipChanged(),this.locStrChangedInPopupModel()},t.prototype.doAction=function(e){var t=e.originalEvent?e.originalEvent:e;return this.action(this,t.isTrusted),t.preventDefault(),t.stopPropagation(),!0},t.prototype.doMouseDown=function(e){this.isMouseDown=!0},t.prototype.doFocus=function(e){if(this.onFocus){var t=e.originalEvent?e.originalEvent:e;this.onFocus(this.isMouseDown,t)}this.isMouseDown=!1},t.prototype.locStrChangedInPopupModel=function(){if(this.popupModel&&this.popupModel.contentComponentData&&this.popupModel.contentComponentData.model){var e=this.popupModel.contentComponentData.model;Array.isArray(e.actions)&&e.actions.forEach(function(e){e.locStrsChanged&&e.locStrsChanged()})}},t.prototype.locTooltipChanged=function(){this.locTooltipName&&(this.tooltip=l(this.locTooltipName,this.locTitle.locale))},t.prototype.getLocale=function(){return this.owner?this.owner.getLocale():""},t.prototype.getMarkdownHtml=function(e,t,n){return this.owner?this.owner.getMarkdownHtml(e,t,n):void 0},t.prototype.getProcessedText=function(e){return this.owner?this.owner.getProcessedText(e):e},t.prototype.getRenderer=function(e){return this.owner?this.owner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.owner?this.owner.getRendererContext(e):e},t.prototype.setVisible=function(e){this.visible!==e&&(this._visible=e)},t.prototype.getVisible=function(){return this._visible},t.prototype.setEnabled=function(e){this._enabled=e},t.prototype.getEnabled=function(){return this.enabledIf?this.enabledIf():this._enabled},t.prototype.setComponent=function(e){this._component=e},t.prototype.getComponent=function(){return this._component},t.prototype.getGroupComponentName=function(){return"sv-list-item-group"},t.prototype.initLoadingIndicatorVisibilityObserver=function(e){"undefined"!=typeof IntersectionObserver&&(this.intersectionVisibilityObserver=new IntersectionObserver(function(t){t.forEach(function(t){var n=t.isIntersecting;e(n)})},{trackVisibility:!0,delay:100}))},t.prototype.dispose=function(){this.locTitleValue&&this.locTitleValue.onStringChanged.remove(this.locTitleChanged),this.locTitleChanged=void 0,this.action=void 0,e.prototype.dispose.call(this),this.popupModel&&this.popupModel.dispose(),this.intersectionVisibilityObserver&&(this.intersectionVisibilityObserver.disconnect(),this.intersectionVisibilityObserver=void 0)},t.prototype.updateDimension=function(e,t,n){var o="small"==e?"minDimension":"maxDimension";if(t){var i=t;i.classList.contains("sv-action--hidden")?(i.classList.remove("sv-action--hidden"),this[o]=n(t),i.classList.add("sv-action--hidden")):this[o]=n(t)}},t.prototype.afterRender=function(){this.afterRenderCallback&&this.afterRenderCallback()},t.prototype.updateMode=function(e,t){var n=this;this.updateModeCallback?this.updateModeCallback(e,t):this.afterRenderCallback=function(){n.updateModeCallback(e,t),n.afterRenderCallback=void 0}},t.prototype.updateDimensions=function(e,t,n){var o=this,i=!n||"large"==n&&"small"!==this.mode?this.mode:n;this.updateMode(i,function(i,r){o.updateDimension(i,r,e),n?t():o.updateMode("small"!==i?"small":"large",function(n,i){o.updateDimension(n,i,e),t()})})},st([y()],t.prototype,"id",void 0),st([y({defaultValue:!0})],t.prototype,"_visible",void 0),st([y({onSet:function(e,t){t.locTooltipChanged()}})],t.prototype,"locTooltipName",void 0),st([y()],t.prototype,"_enabled",void 0),st([y()],t.prototype,"action",void 0),st([y()],t.prototype,"onFocus",void 0),st([y()],t.prototype,"_component",void 0),st([y()],t.prototype,"items",void 0),st([y({onSet:function(e,t){t.locTitleValue.text!==e&&(t.locTitleValue.text=e)}})],t.prototype,"_title",void 0),t}(ht),ft=function(){function e(e){this.item=e,this.funcKey="sv-dropdown-action",this.setupPopupCallbacks()}return e.prototype.setupPopupCallbacks=function(){var e=this,t=this.popupModel=this.item.popupModel;t&&t.registerPropertyChangedHandlers(["isVisible"],function(){t.isVisible?e.item.pressed=!0:e.item.pressed=!1},this.funcKey)},e.prototype.removePopupCallbacks=function(){this.popupModel&&this.popupModel.unregisterPropertyChangedHandlers(["isVisible"],this.funcKey)},e.prototype.dispose=function(){this.removePopupCallbacks()},e}(),gt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();!function(e){e[e.None=0]="None",e[e.Light=1]="Light",e[e.Hard=3]="Hard"}(pt||(pt={}));var yt=function(e){function t(){var t=e.call(this)||this;return t.minVisibleItemsCount=0,t.isResponsivenessDisabled=!1,t.isInitialized=!1,t.dotsItem=lt({id:"dotsItem-id"+t.id++,css:"sv-dots",innerCss:"sv-dots__item",iconName:"icon-more",visible:!1,tooltip:l("more")},{items:[],allowSelection:!1}),t}return gt(t,e),t.prototype.hideItemsGreaterN=function(e){var t=this.getActionsToHide();e=Math.max(e,this.minVisibleItemsCount-(this.visibleActions.length-t.length));var n=[];t.forEach(function(t){e<=0&&(t.mode="popup",n.push(t.innerItem)),e--}),this.hiddenItemsListModel.setItems(n)},t.prototype.getActionsToHide=function(){return this.visibleActions.filter(function(e){return!e.disableHide})},t.prototype.updateItemMode=function(e,t){for(var n=this.visibleActions,o=n.length-1;o>=0;o--)t>e&&!n[o].disableShrink?(t-=n[o].maxDimension-n[o].minDimension,n[o].mode="small"):n[o].mode="large"},Object.defineProperty(t.prototype,"hiddenItemsListModel",{get:function(){return this.dotsItem.data},enumerable:!1,configurable:!0}),t.prototype.onSet=function(){e.prototype.onSet.call(this),this.raiseUpdate({updateResponsivenessMode:pt.Hard})},t.prototype.onPush=function(t){e.prototype.onPush.call(this,t),this.raiseUpdate({updateResponsivenessMode:pt.Hard})},t.prototype.onRemove=function(t){e.prototype.onRemove.call(this,t),this.raiseUpdate({updateResponsivenessMode:pt.Hard})},t.prototype.onActionPropertyChanged=function(t,n){e.prototype.onActionPropertyChanged.call(this,t,n),"_visible"!=n.name&&"_title"!=n.name||(t.needUpdateMaxDimension=t.visible,t.needUpdateMinDimension=t.visible,this.raiseUpdate({updateResponsivenessMode:pt.Light})),"disableHide"==n.name&&n.newValue&&"popup"==t.mode&&this.raiseUpdate({updateResponsivenessMode:pt.Light})},t.prototype.getRenderedActions=function(){var t=e.prototype.getRenderedActions.call(this);return 0==t.length||1===t.length&&t[0].iconName?t:t.concat([this.dotsItem])},t.prototype.getAllActions=function(){return this.actions.concat(this.dotsItem)},t.prototype.getActionMinDimension=function(e){return e.disableShrink?e.maxDimension:e.minDimension},t.prototype.getVisibleItemsCount=function(e){var t=this,n=e.availableSpace,o=e.gap;n-=this.dotsItem.minDimension+o;var i=0;this.visibleActions[0].disableHide?n+=o:i-=o,this.visibleActions.filter(function(e){return e.disableHide}).forEach(function(e){return n-=t.getActionMinDimension(e)+o});var r=this.getActionsToHide();if(1===r.length&&r[0].iconName)return 1;for(var s=0;s<r.length;s++)if((i+=this.getActionMinDimension(r[s])+o)>n)return s},t.prototype.fit=function(e){var t,n=this;if(!(e.availableSpace<=0)){e.gap=null!==(t=e.gap)&&void 0!==t?t:0;var o=e.availableSpace,i=e.gap;this.dotsItem.visible=!1;var r=this.visibleActions,s=-1*e.gap,a=-1*e.gap;r.forEach(function(e){s+=n.getActionMinDimension(e)+i,a+=e.maxDimension+i}),o>=a?this.setActionsMode("large"):o<s?(this.setActionsMode("small"),this.hideItemsGreaterN(this.getVisibleItemsCount(e)),this.dotsItem.visible=!!this.hiddenItemsListModel.actions.length):this.updateItemMode(e.availableSpace,a)}},t.prototype.createResponsivityManager=function(e){return new Le(e,this)},t.prototype.mergeUpdateOptions=function(t,n){var o=e.prototype.mergeUpdateOptions.call(this,t,n);return o.updateResponsivenessMode=o.updateResponsivenessMode|n.updateResponsivenessMode,o},t.prototype.raiseUpdate=function(t){e.prototype.raiseUpdate.call(this,t)},t.prototype.update=function(t){var n;e.prototype.update.call(this,t),t.updateResponsivenessMode&&(null===(n=this.responsivityManager)||void 0===n||n.update(t.updateResponsivenessMode==pt.Hard))},t.prototype.initResponsivityManager=function(e){var t=this;if(this.responsivityManager){if(this.responsivityManager.container==e)return;this.responsivityManager.dispose()}this.isInitialized=!1,this.responsivityManager=this.createResponsivityManager(e),this.responsivityManager.afterInitializeCallback=function(){t.isInitialized=!0}},t.prototype.resetResponsivityManager=function(){this.responsivityManager&&(this.responsivityManager.dispose(),this.responsivityManager=void 0)},t.prototype.getRootStyle=function(){return this.isInitialized||this.isResponsivenessDisabled?void 0:{opacity:0}},t.prototype.setActionsMode=function(e){this.actions.forEach(function(t){"small"==e&&t.disableShrink?t.mode="large":t.mode=e})},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.dotsItem.data.dispose(),this.dotsItem.dispose(),this.resetResponsivityManager()},function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([y()],t.prototype,"isInitialized",void 0),t}(qe),mt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bt=function(){function e(){this.cancelQueue=[]}return e.prototype.getMsFromRule=function(e){return"auto"===e?0:1e3*Number(e.slice(0,-1).replace(",","."))},e.prototype.reflow=function(e){return e.offsetHeight},e.prototype.getAnimationsCount=function(e){var t="";return getComputedStyle&&(t=getComputedStyle(e).animationName),t&&"none"!=t?t.split(", ").length:0},e.prototype.getAnimationDuration=function(e){for(var t=getComputedStyle(e),n=t.animationDelay.split(", "),o=t.animationDuration.split(", "),i=0,r=0;r<Math.max(o.length,n.length);r++)i=Math.max(i,this.getMsFromRule(o[r%o.length])+this.getMsFromRule(n[r%n.length]));return i},e.prototype.addCancelCallback=function(e){this.cancelQueue.push(e)},e.prototype.removeCancelCallback=function(e){this.cancelQueue.indexOf(e)>=0&&this.cancelQueue.splice(this.cancelQueue.indexOf(e),1)},e.prototype.onAnimationEnd=function(e,t,n){var o,i=this,r=this.getAnimationsCount(e),s=function(n){void 0===n&&(n=!0),t(n),clearTimeout(o),i.removeCancelCallback(s),e.removeEventListener("animationend",a)},a=function(e){e.target==e.currentTarget&&--r<=0&&s(!1)};r>0?(e.addEventListener("animationend",a),this.addCancelCallback(s),o=setTimeout(function(){s(!1)},this.getAnimationDuration(e)+10)):t(!0)},e.prototype.afterAnimationRun=function(e,t){e&&t&&t.onAfterRunAnimation&&t.onAfterRunAnimation(e)},e.prototype.beforeAnimationRun=function(e,t){e&&t&&t.onBeforeRunAnimation&&t.onBeforeRunAnimation(e)},e.prototype.getCssClasses=function(e){return e.cssClass.replace(/\s+$/,"").split(/\s+/)},e.prototype.runAnimation=function(e,t,n){e&&(null==t?void 0:t.cssClass)?(this.reflow(e),this.getCssClasses(t).forEach(function(t){e.classList.add(t)}),this.onAnimationEnd(e,n,t)):n(!0)},e.prototype.clearHtmlElement=function(e,t){e&&t.cssClass&&this.getCssClasses(t).forEach(function(t){e.classList.remove(t)}),this.afterAnimationRun(e,t)},e.prototype.onNextRender=function(e,t){var o=this;if(void 0===t&&(t=!1),!t&&n.isAvailable()){var i,r=function(){e(!0),cancelAnimationFrame(i)};i=n.requestAnimationFrame(function(){i=n.requestAnimationFrame(function(){e(!1),o.removeCancelCallback(r)})}),this.addCancelCallback(r)}else e(!0)},e.prototype.cancel=function(){[].concat(this.cancelQueue).forEach(function(e){return e()}),this.cancelQueue=[]},e}(),vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mt(t,e),t.prototype.onEnter=function(e){var t=this,n=e.getAnimatedElement(),o=e.getEnterOptions?e.getEnterOptions():{};this.beforeAnimationRun(n,o),this.runAnimation(n,o,function(){t.clearHtmlElement(n,o)})},t.prototype.onLeave=function(e,t){var n=this,o=e.getAnimatedElement(),i=e.getLeaveOptions?e.getLeaveOptions():{};this.beforeAnimationRun(o,i),this.runAnimation(o,i,function(e){t(),n.onNextRender(function(){n.clearHtmlElement(o,i)},e)})},t}(bt),Ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mt(t,e),t.prototype.runGroupAnimation=function(e,t,n,o,i){var r=this,s={isAddingRunning:t.length>0,isDeletingRunning:n.length>0,isReorderingRunning:o.length>0},a=t.map(function(t){return e.getAnimatedElement(t)}),l=t.map(function(t){return e.getEnterOptions?e.getEnterOptions(t,s):{}}),u=n.map(function(t){return e.getAnimatedElement(t)}),c=n.map(function(t){return e.getLeaveOptions?e.getLeaveOptions(t,s):{}}),p=o.map(function(t){return e.getAnimatedElement(t.item)}),h=o.map(function(t){return e.getReorderOptions?e.getReorderOptions(t.item,t.movedForward,s):{}});t.forEach(function(e,t){r.beforeAnimationRun(a[t],l[t])}),n.forEach(function(e,t){r.beforeAnimationRun(u[t],c[t])}),o.forEach(function(e,t){r.beforeAnimationRun(p[t],h[t])});var d=t.length+n.length+p.length,f=function(e){--d<=0&&(i&&i(),r.onNextRender(function(){t.forEach(function(e,t){r.clearHtmlElement(a[t],l[t])}),n.forEach(function(e,t){r.clearHtmlElement(u[t],c[t])}),o.forEach(function(e,t){r.clearHtmlElement(p[t],h[t])})},e))};t.forEach(function(e,t){r.runAnimation(a[t],l[t],f)}),n.forEach(function(e,t){r.runAnimation(u[t],c[t],f)}),o.forEach(function(e,t){r.runAnimation(p[t],h[t],f)})},t}(bt),Pt=function(){function e(e,t,n){var o=this;this.animationOptions=e,this.update=t,this.getCurrentValue=n,this._debouncedSync=Ne(function(e){o.cancelAnimations();try{o._sync(e)}catch(t){o.update(e)}})}return e.prototype.onNextRender=function(e,t){var o=this,i=this.animationOptions.getRerenderEvent();if(i){var r=function(){i.remove(s),o.cancelCallback=void 0},s=function(n,o){o.isCancel?t&&t():e(),r()};this.cancelCallback=function(){t&&t(),r()},i.add(s)}else{if(!n.isAvailable())throw new Error("Can't get next render");var a=n.requestAnimationFrame(function(){e(),o.cancelCallback=void 0});this.cancelCallback=function(){t&&t(),cancelAnimationFrame(a),o.cancelCallback=void 0}}},e.prototype.sync=function(e){this.animationOptions.isAnimationEnabled()?this._debouncedSync.run(e):(this.cancel(),this.update(e))},e.prototype.cancel=function(){this._debouncedSync.cancel(),this.cancelAnimations()},e.prototype.cancelAnimations=function(){this.cancelCallback&&this.cancelCallback(),this.animation.cancel()},e}(),wt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animation=new vt,t}return mt(t,e),t.prototype._sync=function(e){var t=this;e!==this.getCurrentValue()?e?(this.onNextRender(function(){t.animation.onEnter(t.animationOptions)}),this.update(e)):this.animation.onLeave(this.animationOptions,function(){t.update(e)}):this.update(e)},t}(Pt),Vt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animation=new Ct,t}return mt(t,e),t.prototype._sync=function(e){var t,n,o=this;e=[].concat(e);var i=[].concat(this.getCurrentValue()),r=null===(t=this.animationOptions.allowSyncRemovalAddition)||void 0===t||t,s=function(e,t,n){var o=new Map,i=new Map,r=new Map,s=new Map;e.forEach(function(e){var t=n(e);if(o.has(t))throw new Error("keys must be unique");o.set(n(e),e)}),t.forEach(function(e){var t=n(e);if(i.has(t))throw new Error("keys must be unique");i.set(t,e)});var a=[],l=[];i.forEach(function(e,t){o.has(t)?r.set(t,r.size):a.push(e)}),o.forEach(function(e,t){i.has(t)?s.set(t,s.size):l.push(e)});var u=[];r.forEach(function(e,t){var n=s.get(t),o=i.get(t);n!==e&&u.push({item:o,movedForward:n<e})});var c=new Array(e.length),p=0,h=Array.from(r.keys());e.forEach(function(e,t){r.has(n(e))?(c[t]=i.get(h[p]),p++):c[t]=e});var d=new Map,f=[];c.forEach(function(e){var t=n(e);i.has(t)?f.length>0&&(d.set(t,f),f=[]):f.push(e)});var g=new Array;return i.forEach(function(e,t){d.has(t)&&d.get(t).forEach(function(e){g.push(e)}),g.push(e)}),f.forEach(function(e){g.push(e)}),{reorderedItems:u,deletedItems:l,addedItems:a,mergedItems:g}}(i,e,null!==(n=this.animationOptions.getKey)&&void 0!==n?n:function(e){return e});!r&&(s.reorderedItems.length>0||s.addedItems.length>0)&&(s.deletedItems=[],s.mergedItems=e),this.animationOptions.onCompareArrays&&this.animationOptions.onCompareArrays(s);var a=s.addedItems,l=s.reorderedItems,u=s.deletedItems,c=s.mergedItems,p=function(){o.animation.runGroupAnimation(o.animationOptions,a,u,l,function(){u.length>0&&o.update(e)})};[a,u,l].some(function(e){return e.length>0})?u.length<=0||l.length>0||a.length>0?(this.onNextRender(p,function(){o.update(e)}),this.update(c)):p():this.update(e)},t}(Pt),xt=function(e){function t(t,n,o,i){var r=e.call(this,t,n,o)||this;return r.mergeValues=i,r.animation=new Ct,r}return mt(t,e),t.prototype._sync=function(e){var t=this,n=[].concat(this.getCurrentValue());if(n[0]!==e[0]){var o=this.mergeValues?this.mergeValues(e,n):[].concat(n,e);this.onNextRender(function(){t.animation.runGroupAnimation(t.animationOptions,e,n,[],function(){t.update(e)})},function(){return t.update(e)}),this.update(o,!0)}else this.update(e)},t}(Pt),Ot=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),St=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},It=function(e){function t(){var t=e.call(this)||this;return t.createLocTitleProperty(),t}return Ot(t,e),t.prototype.createLocTitleProperty=function(){return this.createLocalizableString("title",this,!0)},Object.defineProperty(t.prototype,"isPage",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPanel",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSurvey",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.getLocalizableStringText("title",this.getDefaultTitleValue())},set:function(e){this.setTitleValue(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.getLocalizableString("title")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRenderedTitle",{get:function(){return this.locTitle},enumerable:!1,configurable:!0}),t.prototype.getDefaultTitleValue=function(){},t.prototype.setTitleValue=function(e){this.setLocalizableStringText("title",e)},Object.defineProperty(t.prototype,"hasDescription",{get:function(){var e=this;return this.getPropertyValue("hasDescription",void 0,function(){return e.calcDescriptionVisibility()})},set:function(e){this.setPropertyValue("hasDescription",e)},enumerable:!1,configurable:!0}),t.prototype.calcDescriptionVisibility=function(){var e=this.description,t=!1;if(this.isDesignMode){var n=D.findProperty(this.getType(),"description");t=!!(null==n?void 0:n.placeholder)}return!!e||t&&this.isDesignMode},t.prototype.resetDescriptionVisibility=function(){this.resetPropertyValue("hasDescription")},Object.defineProperty(t.prototype,"locDescription",{get:function(){return this.getLocalizableString("description")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleTagName",{get:function(){var e=this.getDefaultTitleTagName(),t=this.getSurvey();return t?t.getElementTitleTagName(this,e):e},enumerable:!1,configurable:!0}),t.prototype.getDefaultTitleTagName=function(){return gn.titleTags[this.getType()]},Object.defineProperty(t.prototype,"hasTitle",{get:function(){return this.title.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleActions",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleEvents",{get:function(){return this.hasTitleActions},enumerable:!1,configurable:!0}),t.prototype.getTitleToolbar=function(){return null},t.prototype.getTitleOwner=function(){},Object.defineProperty(t.prototype,"isTitleOwner",{get:function(){return!!this.getTitleOwner()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTitleRenderedAsString",{get:function(){return this.getIsTitleRenderedAsString()},enumerable:!1,configurable:!0}),t.prototype.toggleState=function(){},Object.defineProperty(t.prototype,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssTitle",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaTitleId",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaDescriptionId",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleTabIndex",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleAriaExpanded",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleAriaRole",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleAriaLabel",{get:function(){return this.ariaLabel},enumerable:!1,configurable:!0}),t.prototype.getIsTitleRenderedAsString=function(){return!this.isTitleOwner},St([y({localizable:!0,onSet:function(e,t){t.resetDescriptionVisibility()}})],t.prototype,"description",void 0),t}(Te),Tt=function(e){function t(n){var o=e.call(this)||this;return o.selectedElementInDesignValue=o,o.disableDesignActions=t.CreateDisabledDesignElements,o.parentQuestionValue=null,o.isContentElement=!1,o.isEditableTemplateElement=!1,o.isInteractiveDesignElement=!0,o.isSingleInRow=!0,o._renderedIsExpanded=!0,o._isAnimatingCollapseExpand=!1,o.animationCollapsed=new wt(o.getExpandCollapseAnimationOptions(),function(e){o._renderedIsExpanded=e,o.animationAllowed&&(e?o.isAnimatingCollapseExpand=!0:o.updateElementCss(!1))},function(){return o.renderedIsExpanded}),o.onAfterRenderElement=o.addEvent(),o.setPropertyValueDirectly("name",o.getValidName(n)),o.createNewArray("errors"),o.createNewArray("renderedErrors"),o.createNewArray("titleActions"),o.registerPropertyChangedHandlers(["isReadOnly"],function(){o.onReadOnlyChanged()}),o.registerPropertyChangedHandlers(["errors"],function(){o.updateVisibleErrors()}),o.registerPropertyChangedHandlers(["isSingleInRow"],function(){o.updateElementCss(!1)}),o.registerPropertyChangedHandlers(["minWidth","maxWidth","renderWidth","allowRootStyle","parent"],function(){o.updateRootStyle()}),o.registerPropertyChangedHandlers(["effectiveColSpan"],function(e){o.colSpan=e}),o}return Ot(t,e),t.getProgressInfoByElements=function(e,t){for(var n=Te.createProgressInfo(),o=0;o<e.length;o++)if(e[o].isVisible){var i=e[o].getProgressInfo();n.questionCount+=i.questionCount,n.answeredQuestionCount+=i.answeredQuestionCount,n.requiredQuestionCount+=i.requiredQuestionCount,n.requiredAnsweredQuestionCount+=i.requiredAnsweredQuestionCount}return t&&n.questionCount>0&&(0==n.requiredQuestionCount&&(n.requiredQuestionCount=1),n.answeredQuestionCount>0&&(n.requiredAnsweredQuestionCount=1)),n},t.IsNeedScrollIntoView=function(e,t,o){var i=o?-1:e.getBoundingClientRect().top,r=i<0,s=-1;if(!r&&t&&(r=(s=e.getBoundingClientRect().left)<0),!r&&n.isAvailable()){var a=n.getInnerHeight();if(!(r=a>0&&a<i)&&t){var l=n.getInnerWidth();r=l>0&&l<s}}return r},t.ScrollIntoView=function(e,t,o){if(e.scrollIntoView(t),"function"==typeof o){var i=null,r=0,s=function(){var t=e.getBoundingClientRect().top;if(t===i){if(r++>2)return void o()}else i=t,r=0;requestAnimationFrame(s)};n.requestAnimationFrame(s)}},t.ScrollElementToTop=function(e,n,o,i){return t.ScrollElementToViewCore(e,!1,n,o,i)},t.ScrollElementToViewCore=function(e,n,o,i,r){if(!e||!e.scrollIntoView)return r&&r(),!1;var s=t.IsNeedScrollIntoView(e,n,o);return s?t.ScrollIntoView(e,i,r):r&&r(),s},t.GetFirstNonTextElement=function(e,t){if(void 0===t&&(t=!1),!e||!e.length||0==e.length)return null;if(t){var n=e[0];"#text"===n.nodeName&&(n.data=""),"#text"===(n=e[e.length-1]).nodeName&&(n.data="")}for(var o=0;o<e.length;o++)if("#text"!=e[o].nodeName&&"#comment"!=e[o].nodeName)return e[o];return null},t.FocusElement=function(e,n,i){if(!e||!o.isAvailable())return!1;var r=!n&&t.focusElementCore(e,i);return r||setTimeout(function(){t.focusElementCore(e,i)},n?100:10),r},t.focusElementCore=function(e,n){var o=gn.environment.root;if(!o&&!n)return!1;var i=n?n.querySelector("#".concat(CSS.escape(e))):o.getElementById(e);return!(!i||i.disabled||"none"===i.style.display||null===i.offsetParent||(t.ScrollElementToViewCore(i,!0,!1),i.focus(),0))},Object.defineProperty(t.prototype,"effectiveColSpan",{get:function(){var e=this.getPropertyValueWithoutDefault("effectiveColSpan");return void 0!==e?e:(this.setRootStyle(),this.getPropertyValue("effectiveColSpan"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"colSpan",{get:function(){return this.getPropertyValue("colSpan",1)},set:function(e){this.setPropertyValue("colSpan",e)},enumerable:!1,configurable:!0}),t.prototype.onPropertyValueChanged=function(t,n,o){e.prototype.onPropertyValueChanged.call(this,t,n,o),"state"===t&&(this.updateElementCss(!1),this.notifyStateChanged(n),this.stateChangedCallback&&this.stateChangedCallback())},t.prototype.getSkeletonComponentNameCore=function(){return this.survey?this.survey.getSkeletonComponentName(this):"sv-skeleton"},t.prototype.canUpdateValueOnVisibleChanged=function(){return!this.isLoadingFromJson&&!!this.survey&&!this.survey.isSettingData()},Object.defineProperty(t.prototype,"parentQuestion",{get:function(){return this.parentQuestionValue},enumerable:!1,configurable:!0}),t.prototype.setParentQuestion=function(e){this.parentQuestionValue=e,this.onParentQuestionChanged()},t.prototype.onParentQuestionChanged=function(){},t.prototype.updateElementVisibility=function(){this.setPropertyValue("isVisible",this.isVisible)},Object.defineProperty(t.prototype,"skeletonComponentName",{get:function(){return this.getSkeletonComponentNameCore()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.getPropertyValue("state")},set:function(e){this.setPropertyValue("state",e),this.renderedIsExpanded=!this.isCollapsed},enumerable:!1,configurable:!0}),t.prototype.notifyStateChanged=function(e){this.survey&&this.survey.elementContentVisibilityChanged(this)},Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return"collapsed"===this.state&&!this.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isExpanded",{get:function(){return"expanded"===this.state},enumerable:!1,configurable:!0}),t.prototype.collapse=function(){this.isDesignMode||(this.state="collapsed")},t.prototype.expand=function(){this.state="expanded"},t.prototype.toggleState=function(){return this.isCollapsed?(this.expand(),!0):!this.isExpanded||(this.collapse(),!1)},Object.defineProperty(t.prototype,"hasStateButton",{get:function(){return this.isExpanded||this.isCollapsed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shortcutText",{get:function(){return this.title||this.name},enumerable:!1,configurable:!0}),t.prototype.getTitleToolbar=function(){return this.titleToolbarValue||(this.titleToolbarValue=this.createActionContainer(!0),this.titleToolbarValue.locOwner=this,this.titleToolbarValue.containerCss=(this.isPanel?this.cssClasses.panel.titleBar:this.cssClasses.titleBar)||"sv-action-title-bar",this.titleToolbarValue.setItems(this.getTitleActions()),this.titleToolbarValue.flushUpdates()),this.titleToolbarValue},t.prototype.createActionContainer=function(e){var t=e?new yt:new qe;return this.survey&&this.survey.getCss().actionBar&&(t.cssClasses=this.survey.getCss().actionBar),t},Object.defineProperty(t.prototype,"titleActions",{get:function(){return this.getPropertyValue("titleActions")},enumerable:!1,configurable:!0}),t.prototype.getTitleActions=function(){return this.isTitleActionRequested||(this.updateTitleActions(),this.isTitleActionRequested=!0),this.titleActions},t.prototype.getDefaultTitleActions=function(){return[]},t.prototype.updateTitleActions=function(){var e=this.getDefaultTitleActions();this.survey&&(e=this.survey.getUpdatedElementTitleActions(this,e)),this.setPropertyValue("titleActions",e)},t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.titleToolbarValue&&this.titleToolbarValue.locStrsChanged()},Object.defineProperty(t.prototype,"hasTitleActions",{get:function(){return this.getTitleActions().length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleEvents",{get:function(){return void 0!==this.state&&"default"!==this.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleTabIndex",{get:function(){return this.isPage||"default"===this.state?void 0:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleAriaExpanded",{get:function(){if(!this.isPage&&"default"!==this.state)return"expanded"===this.state?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleAriaRole",{get:function(){if(!this.isPage&&"default"!==this.state)return"button"},enumerable:!1,configurable:!0}),t.prototype.setSurveyImpl=function(e,t){this.surveyImplValue=e,this.surveyImplValue?(this.surveyDataValue=this.surveyImplValue.getSurveyData(),this.setSurveyCore(this.surveyImplValue.getSurvey()),this.textProcessorValue=this.createTextProcessor(),this.onSetData()):(this.setSurveyCore(null),this.surveyDataValue=null,this.textProcessorValue=null),this.survey&&(this.resetDescriptionVisibility(),this.clearCssClasses()),this.blockAnimations(),this.renderedIsExpanded=!this.isCollapsed,this.releaseAnimations()},t.prototype.getValueGetterContext=function(){var t=this.data;return t?t.getValueGetterContext():e.prototype.getValueGetterContext.call(this)},t.prototype.createTextProcessor=function(){return this.surveyImplValue.getTextProcessor()},t.prototype.canRunConditions=function(){return e.prototype.canRunConditions.call(this)&&!!this.data},t.prototype.getDataFilteredProperties=function(){var e=this.data?this.data.getFilteredProperties():{};return e.question=this,e},Object.defineProperty(t.prototype,"surveyImpl",{get:function(){return this.surveyImplValue},enumerable:!1,configurable:!0}),t.prototype.__setData=function(e){this.surveyDataValue=e},Object.defineProperty(t.prototype,"data",{get:function(){return this.surveyDataValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"survey",{get:function(){return this.getSurvey()},enumerable:!1,configurable:!0}),t.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.surveyValue||this.surveyImplValue&&this.setSurveyCore(this.surveyImplValue.getSurvey()),this.surveyValue},t.prototype.setSurveyCore=function(e){this.surveyValue=e,this.surveyChangedCallback&&this.surveyChangedCallback()},Object.defineProperty(t.prototype,"skeletonHeight",{get:function(){var e=void 0;return this.survey&&this.survey.skeletonHeight&&(e=this.survey.skeletonHeight+"px"),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInternal",{get:function(){return this.isContentElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"areInvisibleElementsShowing",{get:function(){var e=this.parentQuestion;return(!e||!1!==e.areInvisibleElementsShowing)&&!!this.survey&&this.survey.areInvisibleElementsShowing&&!this.isContentElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this.readOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this.getPropertyValue("readOnly")},set:function(e){this.readOnly!=e&&(this.setPropertyValue("readOnly",e),this.isLoadingFromJson||this.setPropertyValue("isReadOnly",this.isReadOnly))},enumerable:!1,configurable:!0}),t.prototype.onReadOnlyChanged=function(){this.readOnlyChangedCallback&&this.readOnlyChangedCallback()},Object.defineProperty(t.prototype,"css",{get:function(){return this.survey?this.survey.getCss():{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssClassesValue",{get:function(){var e=this.getPropertyValueWithoutDefault("cssClassesValue");return e||this.isCssValueCalculating||(this.isCssValueCalculating=!0,e=this.createCssClassesValue(),this.isCssValueCalculating=!1),e},enumerable:!1,configurable:!0}),t.prototype.createCssClassesValue=function(){var e=this.calcCssClasses(this.css);return this.setPropertyValue("cssClassesValue",e),this.onCalcCssClasses(e),this.updateElementCssCore(this.cssClassesValue),e},t.prototype.onCalcCssClasses=function(e){},Object.defineProperty(t.prototype,"cssClasses",{get:function(){return this.cssClassesValue,this.survey?(this.cssClassesValue||this.createCssClassesValue(),this.cssClassesValue):this.calcCssClasses(this.css)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssTitleNumber",{get:function(){var e=this.cssClasses;return e.number?e.number:e.panel?e.panel.number:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssRequiredMark",{get:function(){var e=this.cssClasses;return e.requiredMark||e.panel&&e.panel.requiredMark},enumerable:!1,configurable:!0}),t.prototype.getCssTitleExpandableSvg=function(){return"default"===this.state?null:this.cssClasses.titleExpandableSvg},t.prototype.calcCssClasses=function(e){},t.prototype.updateElementCssCore=function(e){},Object.defineProperty(t.prototype,"cssError",{get:function(){return""},enumerable:!1,configurable:!0}),t.prototype.updateElementCss=function(e){this.clearCssClasses()},t.prototype.clearCssClasses=function(){this.resetPropertyValue("cssClassesValue")},t.prototype.getIsLoadingFromJson=function(){return!!e.prototype.getIsLoadingFromJson.call(this)||!!this.surveyValue&&this.surveyValue.isLoadingFromJson},Object.defineProperty(t.prototype,"name",{get:function(){return this.getPropertyValue("name","")},set:function(e){var t=this.name;this.setPropertyValue("name",this.getValidName(e)),!this.isLoadingFromJson&&t&&this.onNameChanged(t)},enumerable:!1,configurable:!0}),t.prototype.getValidName=function(e){if(e){e=e.trim();var t=gn.itemValueSeparator;t&&e.indexOf(t)>-1&&(e=e.replace(t,""))}return e},t.prototype.onNameChanged=function(e){},t.prototype.updateBindingValue=function(e,t){this.data&&!this.isTwoValueEquals(t,this.data.getValue(e))&&this.data.setValue(e,t,!1)},Object.defineProperty(t.prototype,"errors",{get:function(){return this.getPropertyValue("errors")},set:function(e){this.setPropertyValue("errors",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedErrors",{get:function(){return this.getPropertyValue("renderedErrors")},set:function(e){this.setPropertyValue("renderedErrors",e)},enumerable:!1,configurable:!0}),t.prototype.calcRenderedErrors=function(){var e=this.currentNotificationType;return this.errors.filter(function(t){return t.visible&&t.notificationType===e})},Object.defineProperty(t.prototype,"currentNotificationType",{get:function(){var e=this;return this.getPropertyValue("currentNotificationType",void 0,function(){return e.calcCurrentNotificationType()})},enumerable:!1,configurable:!0}),t.prototype.calcCurrentNotificationType=function(){for(var e="",t=["info","warning","error"],n=0;n<this.errors.length;n++){var o=this.errors[n];if(o.visible){var i=o.notificationType;e?t.indexOf(i)>t.indexOf(e)&&(e=i):e=i}}return e},t.prototype.updateVisibleErrors=function(){this.resetPropertyValue("currentNotificationType");for(var e=0,t=0;t<this.errors.length;t++)this.errors[t].visible&&e++;this.hasVisibleErrors=e>0,this.renderedErrors=this.calcRenderedErrors()},Object.defineProperty(t.prototype,"containsErrors",{get:function(){return this.getPropertyValue("containsErrors",!1)},enumerable:!1,configurable:!0}),t.prototype.updateContainsErrors=function(){this.setPropertyValue("containsErrors",this.getContainsErrors())},t.prototype.getContainsErrors=function(){return this.errors.length>0},Object.defineProperty(t.prototype,"selectedElementInDesign",{get:function(){return this.selectedElementInDesignValue},set:function(e){this.selectedElementInDesignValue=e},enumerable:!1,configurable:!0}),t.prototype.updateCustomWidgets=function(){},t.prototype.onSurveyLoad=function(){},Object.defineProperty(t.prototype,"wasRendered",{get:function(){return!!this.wasRenderedValue},enumerable:!1,configurable:!0}),t.prototype.resetWasRendered=function(){this.wasRenderedValue=!1},t.prototype.onFirstRendering=function(){this.wasRendered||(this.wasRenderedValue=!0,this.onFirstRenderingCore())},t.prototype.onFirstRenderingCore=function(){},t.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.survey||this.onSurveyLoad()},t.prototype.setVisibleIndex=function(e){return 0},t.prototype.getStartIndex=function(){return this.parent?this.parent.getQuestionStartIndex():this.survey?this.survey.questionStartIndex:""},t.prototype.delete=function(e){},t.prototype.getLocale=function(){return this.survey?this.survey.getLocale():this.locOwner?this.locOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,t,n){return this.survey?this.survey.getSurveyMarkdownHtml(this,e,t,n):this.locOwner?this.locOwner.getMarkdownHtml(e,t,n):void 0},t.prototype.getRenderer=function(e,t){return this.survey&&"function"==typeof this.survey.getRendererForString?this.survey.getRendererForString(this,e,t):this.locOwner&&"function"==typeof this.locOwner.getRenderer?this.locOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e,t){return this.survey&&"function"==typeof this.survey.getRendererContextForString?this.survey.getRendererContextForString(this,e,t):this.locOwner&&"function"==typeof this.locOwner.getRendererContext?this.locOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e){return this.isLoadingFromJson?e:this.textProcessor?this.textProcessor.processText(e,this.getUseDisplayValuesInDynamicTexts()):this.locOwner?this.locOwner.getProcessedText(e):e},t.prototype.getUseDisplayValuesInDynamicTexts=function(){return!0},t.prototype.removeSelfFromList=function(e){if(e&&Array.isArray(e)){var t=e.indexOf(this);t>-1&&e.splice(t,1)}},Object.defineProperty(t.prototype,"textProcessor",{get:function(){return this.textProcessorValue},enumerable:!1,configurable:!0}),t.prototype.getProcessedHtml=function(e){return e&&this.textProcessor?this.textProcessor.processText(e,!0):e},t.prototype.onSetData=function(){},Object.defineProperty(t.prototype,"parent",{get:function(){return this.getPropertyValue("parent",null)},set:function(e){this.setPropertyValue("parent",e)},enumerable:!1,configurable:!0}),t.prototype.getPage=function(e){for(;e&&e.parent;)e=e.parent;return e&&e.isPage?e:null},t.prototype.moveToBase=function(e,t,n){if(void 0===n&&(n=null),!t)return!1;e.removeElement(this);var o=-1;return r.isNumber(n)&&(o=parseInt(n)),-1==o&&n&&n.getType&&(o=t.indexOf(n)),t.addElement(this,o),!0},t.prototype.setPage=function(e,t){var n=this.getPage(e);this.prevSurvey=this.survey,"string"==typeof t&&this.getSurvey().pages.forEach(function(e){t===e.name&&(t=e)}),n!==t&&(e&&e.removeElement(this),t&&t.addElement(this,-1),this.prevSurvey=void 0)},t.prototype.getSearchableLocKeys=function(e){e.push("title"),e.push("description")},Object.defineProperty(t.prototype,"hasParent",{get:function(){return this.parent&&!this.parent.isPage||void 0===this.parent},enumerable:!1,configurable:!0}),t.prototype.shouldAddRunnerStyles=function(){return!this.isDesignMode},Object.defineProperty(t.prototype,"isCompact",{get:function(){return this.survey&&this.survey.isCompact},enumerable:!1,configurable:!0}),t.prototype.canHaveFrameStyles=function(){var e;return(null===(e=this.survey)||void 0===e?void 0:e.currentSingleElement)===this||!0!==this.isInternalNested&&void 0!==this.parent&&(!this.hasParent||this.parent&&this.parent.showPanelAsPage)},t.prototype.getHasFrameV2=function(){return this.shouldAddRunnerStyles()&&this.canHaveFrameStyles()},t.prototype.getIsNested=function(){return this.shouldAddRunnerStyles()&&!this.canHaveFrameStyles()},t.prototype.getCssRoot=function(e){var t=!!this.isCollapsed||!!this.isExpanded;return(new _e).append(e.withFrame,this.getHasFrameV2()&&!this.isCompact).append(e.compact,this.isCompact&&this.getHasFrameV2()).append(e.collapsed,!!this.isCollapsed).append(e.expandableAnimating,t&&this.isAnimatingCollapseExpand).append(e.expanded,!!this.isExpanded&&this.renderedIsExpanded).append(e.expandable,t).append(e.nested,this.getIsNested()).toString()},Object.defineProperty(t.prototype,"width",{get:function(){return this.getPropertyValue("width","")},set:function(e){this.setPropertyValue("width",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(e){this.setPropertyValue("minWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this.getPropertyValue("maxWidth")},set:function(e){this.setPropertyValue("maxWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderWidth",{get:function(){return this.getPropertyValue("renderWidth","")},set:function(e){this.setPropertyValue("renderWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"indent",{get:function(){return this.getPropertyValue("indent")},set:function(e){this.setPropertyValue("indent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightIndent",{get:function(){return this.getPropertyValue("rightIndent",0)},set:function(e){this.setPropertyValue("rightIndent",e)},enumerable:!1,configurable:!0}),t.prototype.getRootStyle=function(){var e={};return this.paddingLeft&&(e["--sv-element-add-padding-left"]=this.paddingLeft),this.paddingRight&&(e["--sv-element-add-padding-right"]=this.paddingRight),e},Object.defineProperty(t.prototype,"paddingLeft",{get:function(){var e=this;return this.getPropertyValue("paddingLeft",void 0,function(){return e.calcPaddingLeft()})},enumerable:!1,configurable:!0}),t.prototype.calcPaddingLeft=function(){return""},Object.defineProperty(t.prototype,"paddingRight",{get:function(){var e=this;return this.getPropertyValue("paddingRight",void 0,function(){return e.calcPaddingRight()})},set:function(e){this.setPropertyValue("paddingRight",e)},enumerable:!1,configurable:!0}),t.prototype.calcPaddingRight=function(){return""},t.prototype.resetIndents=function(){this.resetPropertyValue("paddingLeft"),this.resetPropertyValue("paddingRight")},Object.defineProperty(t.prototype,"rootStyle",{get:function(){var e=this;return this.getPropertyValue("rootStyle",void 0,function(){return e.calcRootStyle()})},set:function(e){this.setPropertyValue("rootStyle",e)},enumerable:!1,configurable:!0}),t.prototype.updateRootStyle=function(){this.getPropertyValueWithoutDefault("rootStyle")?this.setRootStyle():this.resetPropertyValue("effectiveColSpan")},t.prototype.setRootStyle=function(){this.rootStyle=this.calcRootStyle()},t.prototype.calcRootStyle=function(){var e,t={};if(this.parent&&(e=this.parent.getColumsForElement(this).reduce(function(e,t){return t.effectiveWidth+e},0),e&&100!==e&&(t.flexGrow=1,t.flexShrink=0,t.flexBasis=e+"%",t.minWidth=void 0,t.maxWidth=this.maxWidth)),0==Object.keys(t).length){var n=""+this.minWidth;if(n&&"auto"!=n){if(-1!=n.indexOf("px")&&this.survey){n=n.replace("px","");var o=parseFloat(n);isNaN(o)||(n=o*this.survey.widthScale/100,n+="px")}n="min(100%, "+n+")"}this.allowRootStyle&&this.renderWidth&&(t.flexGrow=1,t.flexShrink=1,t.flexBasis=this.renderWidth,t.minWidth=n,t.maxWidth=this.maxWidth)}return t},t.prototype.isContainsSelection=function(e){var t=void 0,i=o.getDocument();if(o.isAvailable()&&i&&i.selection)t=i.selection.createRange().parentElement();else{var r=n.getSelection();if(r&&r.rangeCount>0){var s=r.getRangeAt(0);s.startOffset!==s.endOffset&&(t=s.startContainer.parentNode)}}return t==e},Object.defineProperty(t.prototype,"clickTitleFunction",{get:function(){var e=this;if(this.needClickTitleFunction())return function(t){if(!t||!e.isContainsSelection(t.target))return e.processTitleClick()}},enumerable:!1,configurable:!0}),t.prototype.needClickTitleFunction=function(){return"default"!==this.state},t.prototype.processTitleClick=function(){"default"!==this.state&&this.toggleState()},Object.defineProperty(t.prototype,"hasAdditionalTitleToolbar",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"additionalTitleToolbar",{get:function(){return this.getAdditionalTitleToolbar()},enumerable:!1,configurable:!0}),t.prototype.getAdditionalTitleToolbar=function(){return null},t.prototype.getCssTitle=function(e){if(!e)return"";var t="default"!==this.state;return(new _e).append(e.title).append(e.titleNumInline,(this.no||"").length>4||t).append(e.titleExpandable,t).append(e.titleExpanded,this.isExpanded).append(e.titleCollapsed,this.isCollapsed).append(e.titleDisabled,this.isDisabledStyle).append(e.titleReadOnly,this.isReadOnly).append(e.titleOnError,this.containsErrors).toString()},Object.defineProperty(t.prototype,"isDisabledStyle",{get:function(){return this.getIsDisableAndReadOnlyStyles(!1)[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnlyStyle",{get:function(){return this.getIsDisableAndReadOnlyStyles(!1)[0]},enumerable:!1,configurable:!0}),t.prototype.getIsDisableAndReadOnlyStyles=function(e){var t=this.isPreviewStyle;return[(e||this.isReadOnly)&&!t,!1]},Object.defineProperty(t.prototype,"isPreviewStyle",{get:function(){return!!this.survey&&"preview"===this.survey.state},enumerable:!1,configurable:!0}),t.prototype.localeChanged=function(){e.prototype.localeChanged.call(this),this.resetDescriptionVisibility(),this.errors.length>0&&this.errors.forEach(function(e){e.updateText()})},t.prototype.setWrapperElement=function(e){this.wrapperElement=e},t.prototype.getWrapperElement=function(){return this.wrapperElement},Object.defineProperty(t.prototype,"isAnimatingCollapseExpand",{get:function(){return this._isAnimatingCollapseExpand||this._renderedIsExpanded!=this.isExpanded},set:function(e){e!==this._isAnimatingCollapseExpand&&(this._isAnimatingCollapseExpand=e,this.updateElementCss(!1))},enumerable:!1,configurable:!0}),t.prototype.onElementExpanded=function(e){},t.prototype.getExpandCollapseAnimationOptions=function(){var e=this,t=function(t){e.isAnimatingCollapseExpand=!0,pn(t)},n=function(t){e.isAnimatingCollapseExpand=!1,hn(t)};return{getRerenderEvent:function(){return e.onElementRerendered},getEnterOptions:function(){return{cssClass:(e.isPanel?e.cssClasses.panel:e.cssClasses).contentEnter,onBeforeRunAnimation:t,onAfterRunAnimation:function(t){n(t),e.onElementExpanded(!0)}}},getLeaveOptions:function(){return{cssClass:(e.isPanel?e.cssClasses.panel:e.cssClasses).contentLeave,onBeforeRunAnimation:t,onAfterRunAnimation:n}},getAnimatedElement:function(){var t,n=e.isPanel?e.cssClasses.panel:e.cssClasses;if(n.content){var o=tn(n.content);if(o)return null===(t=e.getWrapperElement())||void 0===t?void 0:t.querySelector(":scope ".concat(o))}},isAnimationEnabled:function(){return e.isExpandCollapseAnimationEnabled}}},Object.defineProperty(t.prototype,"isExpandCollapseAnimationEnabled",{get:function(){return this.animationAllowed&&!this.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedIsExpanded",{get:function(){return!!this._renderedIsExpanded},set:function(e){var t=this._renderedIsExpanded;this.animationCollapsed.sync(e),this.isExpandCollapseAnimationEnabled||t||!this.renderedIsExpanded||this.onElementExpanded(!1)},enumerable:!1,configurable:!0}),t.prototype.getIsAnimationAllowed=function(){return e.prototype.getIsAnimationAllowed.call(this)&&!!this.survey&&!this.survey.isEndLoadingFromJson},t.prototype.afterRenderCore=function(e){this.onAfterRenderElement.fire(this,{htmlElement:e})},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.titleToolbarValue&&this.titleToolbarValue.dispose()},t.CreateDisabledDesignElements=!1,St([y({defaultValue:!1})],t.prototype,"hasVisibleErrors",void 0),St([y({defaultValue:!0})],t.prototype,"isSingleInRow",void 0),St([y({defaultValue:!0})],t.prototype,"allowRootStyle",void 0),St([y()],t.prototype,"_renderedIsExpanded",void 0),t}(It),Rt=function(){function e(e,t,n){void 0===n&&(n=100);var o=this;this._elements=e,this._renderedHandler=t,this._elementsToRenderCount=0,this._elementsToRenderTimer=void 0,this._elementRenderedHandler=function(e,t){var n;null===(n=e.onAfterRenderElement)||void 0===n||n.remove(o._elementRenderedHandler),o._elementsToRenderCount--,o._elementsToRenderCount<=0&&o.visibleElementsRendered()},this._elements.forEach(function(e){e.onAfterRenderElement&&(e.onAfterRenderElement.add(o._elementRenderedHandler),o._elementsToRenderCount++)}),this._elementsToRenderCount>0?this._elementsToRenderTimer=setTimeout(function(){o._elementsToRenderCount>0&&o.visibleElementsRendered()},n):this.visibleElementsRendered()}return e.prototype.stopWaitingForElementsRendering=function(){var e=this;this._elementsToRenderTimer&&(clearTimeout(this._elementsToRenderTimer),this._elementsToRenderTimer=void 0),this._elements.forEach(function(t){var n;null===(n=t.onAfterRenderElement)||void 0===n||n.remove(e._elementRenderedHandler)}),this._elementsToRenderCount=0},e.prototype.visibleElementsRendered=function(){var e=this._renderedHandler;this.dispose(),"function"==typeof e&&e()},e.prototype.dispose=function(){this.stopWaitingForElementsRendering(),this._elements=void 0,this._renderedHandler=void 0},e}(),Et=function(){function e(e,t,n,o){void 0===t&&(t=!1),this.owner=e,this.useMarkdown=t,this.name=n,this.values={},this.htmlValues={},this.onStringChanged=new Ae,this._localizationName=o,this.onCreating()}return Object.defineProperty(e,"defaultLocale",{get:function(){return gn.localization.defaultLocaleName},set:function(e){gn.localization.defaultLocaleName=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localizationName",{get:function(){return this._localizationName},set:function(e){this._localizationName!=e&&(this._localizationName=e,this.strChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allowLineBreaks",{get:function(){var e;return void 0===this._allowLineBreaks&&(this._allowLineBreaks=!1,this.name&&this.owner instanceof It&&(this._allowLineBreaks="text"==(null===(e=D.findProperty(this.owner.getType(),this.name))||void 0===e?void 0:e.type))),this._allowLineBreaks},enumerable:!1,configurable:!0}),e.prototype.getIsMultiple=function(){return!1},Object.defineProperty(e.prototype,"locale",{get:function(){if(this.owner&&this.owner.getLocale){var e=this.owner.getLocale();if(e||!this.sharedData)return e}return this.sharedData?this.sharedData.locale:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDefautlLocale",{get:function(){var e=this.locale;return!e||e===gn.defaultLocaleName},enumerable:!1,configurable:!0}),e.prototype.strChanged=function(){this.isTextRequested&&(this.searchableText=void 0,(void 0!==this.renderedText||!this.isEmpty||this.onGetTextCallback||this.localizationName)&&(this.calculatedTextValue=this.calcText(),this.renderedText!==this.calculatedTextValue&&(this.renderedText=void 0,this.calculatedTextValue=void 0),this.htmlValues={},this.onChanged(),this.onStringChanged.fire(this,{})))},Object.defineProperty(e.prototype,"text",{get:function(){return this.pureText},set:function(e){this.setLocaleText(this.locale,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"calculatedText",{get:function(){return this.renderedText=void 0!==this.calculatedTextValue?this.calculatedTextValue:this.calcText(),this.calculatedTextValue=void 0,this.renderedText},enumerable:!1,configurable:!0}),e.prototype.getPlaceholder=function(){var e="";if(!this.isDefautlLocale){var t=this.getRootDialect(this.locale);e=this.getLocaleText(t||gn.defaultLocaleName)}return!e&&this.onGetTextCallback&&(e=this.onGetTextCallback("","")),e},e.prototype.calcText=function(){var e=this.pureText,t=e;return t&&this.owner&&this.owner.getProcessedText&&t.indexOf("{")>-1&&(t=this.owner.getProcessedText(t)),this.onGetTextCallback&&(t=this.onGetTextCallback(t,e)),t},Object.defineProperty(e.prototype,"pureText",{get:function(){this.isTextRequested=!0;var e=this.locale;e||(e=this.defaultLoc);var t=this.getValue(e);if(this.isValueEmpty(t)&&e===this.defaultLoc&&(t=this.getValue(a.defaultLocale)),this.isValueEmpty(t)){var n=this.getRootDialect(e);n&&(t=this.getValue(n))}return this.isValueEmpty(t)&&e!==this.defaultLoc&&(t=this.getValue(this.defaultLoc)),this.isValueEmpty(t)&&this.getLocalizationName()&&(t=this.getLocalizationStr()),t||(t=this.defaultValue||""),t},enumerable:!1,configurable:!0}),e.prototype.getRootDialect=function(e){if(!e)return e;var t=e.indexOf("-");return t>-1?e.substring(0,t):""},e.prototype.getLocalizationName=function(){return this.sharedData?this.sharedData.localizationName:this.localizationName},e.prototype.getLocalizationStr=function(){var e=this.getLocalizationName();return e?l(e,this.locale):""},Object.defineProperty(e.prototype,"hasHtml",{get:function(){return this.hasHtmlValue()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"html",{get:function(){return this.hasHtml?this.getHtmlValue():""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0==this.getValuesKeys().length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textOrHtml",{get:function(){return this.hasHtml?this.getHtmlValue():this.calculatedText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderedHtml",{get:function(){return this.textOrHtml},enumerable:!1,configurable:!0}),e.prototype.getLocaleText=function(e){return this.getLocaleTextCore(e)||""},e.prototype.getLocaleTextCore=function(e){return e||(e=this.defaultLoc),this.getValue(e)},e.prototype.isLocaleTextEqualsWithDefault=function(e,t){var n=this.getLocaleTextCore(e);return n===t||this.isValueEmpty(n)&&this.isValueEmpty(t)},e.prototype.clear=function(){this.setJson(void 0)},e.prototype.clearLocale=function(e){this.setLocaleText(e,void 0)},e.prototype.setLocaleText=function(e,t){if(e=this.getValueLoc(e),this.lastChangedLoc=e,e&&void 0===t){var n=this.getValue(e);void 0!==n&&(this.deleteValue(e),this.fireStrChanged(e,n))}else if(this.storeDefaultText||!this.isLocaleTextEqualsWithDefault(e,t)){if(gn.localization.storeDuplicatedTranslations||this.isValueEmpty(t)||!e||e==this.defaultLoc||this.getValue(e)||t!=this.getLocaleText(this.defaultLoc)){var o=this.curLocale;e||(e=this.defaultLoc);var i=this.onStrChanged&&e===o?this.pureText:void 0;delete this.htmlValues[e],this.isValueEmpty(t)?this.deleteValue(e):"string"==typeof t&&(this.canRemoveLocValue(e,t)?this.setLocaleText(e,null):(this.setValue(e,t),e==this.defaultLoc&&this.deleteValuesEqualsToDefault(t))),this.fireStrChanged(e,i)}}else{if(!this.isValueEmpty(t)||e&&e!==this.defaultLoc)return;var r=a.defaultLocale,s=this.getValue(r);r&&!this.isValueEmpty(s)&&(this.setValue(r,t),this.fireStrChanged(r,s))}},e.prototype.isValueEmpty=function(e){return null==e||!this.localizationName&&""===e},Object.defineProperty(e.prototype,"curLocale",{get:function(){return this.locale?this.locale:this.defaultLoc},enumerable:!1,configurable:!0}),e.prototype.canRemoveLocValue=function(e,t){if(gn.localization.storeDuplicatedTranslations)return!1;if(e===this.defaultLoc)return!1;var n=this.getRootDialect(e);if(n){var o=this.getLocaleText(n);return o?o==t:this.canRemoveLocValue(n,t)}return t==this.getLocaleText(this.defaultLoc)},e.prototype.fireStrChanged=function(e,t){if(this.strChanged(),this.onStrChanged){var n=this.pureText;e===this.curLocale&&t===n||this.onStrChanged(t,n)}},e.prototype.hasNonDefaultText=function(){var e=this.getValuesKeys();return 0!=e.length&&(e.length>1||e[0]!=this.defaultLoc)},e.prototype.getLocales=function(){var e=this.getValuesKeys();return 0==e.length?[]:e},e.prototype.getJson=function(){if(this.sharedData)return this.sharedData.getJson();var e=this.getValuesKeys();if(0==e.length){if(this.serializeCallBackText){var t=this.calcText();if(t)return t}return null}if(1==e.length&&e[0]==gn.localization.defaultLocaleName&&!gn.serialization.localizableStringSerializeAsObject)return this.values[e[0]];var n={};for(var o in this.values)n[o]=this.values[o];return n},e.prototype.setJson=function(e,t){if(this.sharedData)this.sharedData.setJson(e,t);else if(this.lastChangedLoc=void 0,this.values={},this.htmlValues={},null!=e)if(t)"string"==typeof e?this.values[gn.defaultLocaleName]=e:(this.values=e,delete this.values.pos);else{if("string"==typeof e)this.setLocaleText(null,e);else for(var n in e)this.setLocaleText(n,e[n]);this.strChanged()}},Object.defineProperty(e.prototype,"renderAs",{get:function(){return this.owner&&"function"==typeof this.owner.getRenderer&&this.owner.getRenderer(this.name)||e.defaultRenderer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderAsData",{get:function(){return this.owner&&"function"==typeof this.owner.getRendererContext&&this.owner.getRendererContext(this)||this},enumerable:!1,configurable:!0}),e.prototype.equals=function(e){return this.sharedData?this.sharedData.equals(e):!(!e||!e.values)&&r.isTwoValueEquals(this.values,e.values,!1,!0,!1)},e.prototype.setFindText=function(e){if(this.searchText!=e){if(this.searchText=e,!this.searchableText){var t=this.textOrHtml;this.searchableText=t?t.toLowerCase():""}var n=this.searchableText,o=n&&e?n.indexOf(e):void 0;return o<0&&(o=void 0),null==o&&this.searchIndex==o||(this.searchIndex=o,this.onSearchChanged&&this.onSearchChanged()),null!=this.searchIndex}},e.prototype.onChanged=function(){},e.prototype.onCreating=function(){},e.prototype.hasHtmlValue=function(){if(!this.owner||!this.useMarkdown)return!1;var e=this.locale;if(e||(e=this.defaultLoc),void 0!==this.htmlValues[e])return!!this.htmlValues[e];var t=this.calculatedText;if(!t)return this.setHtmlValue(e,""),!1;if(this.getLocalizationName()&&t===this.getLocalizationStr())return this.setHtmlValue(e,""),!1;var n=this.owner.getMarkdownHtml(t,this.name);return this.setHtmlValue(e,n),!!n},e.prototype.setHtmlValue=function(e,t){this.htmlValues[e]=t},e.prototype.getHtmlValue=function(){var e=this.locale;return e||(e=this.defaultLoc),this.htmlValues[e]},e.prototype.deleteValuesEqualsToDefault=function(e){if(!gn.localization.storeDuplicatedTranslations)for(var t=this.getValuesKeys(),n=0;n<t.length;n++)t[n]!=this.defaultLoc&&this.getValue(t[n])==e&&this.deleteValue(t[n])},e.prototype.getValue=function(e){return this.sharedData?this.sharedData.getValue(e):this.values[this.getValueLoc(e)]},e.prototype.setValue=function(e,t){this.sharedData?this.sharedData.setValue(e,t):this.values[this.getValueLoc(e)]=t},e.prototype.deleteValue=function(e){this.sharedData?this.sharedData.deleteValue(e):delete this.values[this.getValueLoc(e)]},e.prototype.getValueLoc=function(e){return this.disableLocalization?gn.localization.defaultLocaleName:e},e.prototype.getValuesKeys=function(){return this.sharedData?this.sharedData.getValuesKeys():Object.keys(this.values)},Object.defineProperty(e.prototype,"defaultLoc",{get:function(){return gn.localization.defaultLocaleName},enumerable:!1,configurable:!0}),e.SerializeAsObject=!1,e.defaultRenderer="sv-string-viewer",e.editableRenderer="sv-string-editor",e}(),At=function(){function e(e){this.owner=e,this.values={}}return e.prototype.getIsMultiple=function(){return!0},Object.defineProperty(e.prototype,"locale",{get:function(){return this.owner&&this.owner.getLocale?this.owner.getLocale():""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue("")},set:function(e){this.setValue("",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return Array.isArray(this.value)?this.value.join("\n"):""},set:function(e){this.value=e?e.split("\n"):[]},enumerable:!1,configurable:!0}),e.prototype.getLocaleText=function(e){var t=this.getValueCore(e,!e||e===this.locale);return t&&Array.isArray(t)&&0!=t.length?t.join("\n"):""},e.prototype.setLocaleText=function(e,t){var n=t?t.split("\n"):null;this.setValue(e,n)},e.prototype.getValue=function(e){return this.getValueCore(e)},e.prototype.getValueCore=function(e,t){if(void 0===t&&(t=!0),e=this.getLocale(e),this.values[e])return this.values[e];if(t){var n=gn.localization.defaultLocaleName;if(e!==n&&this.values[n])return this.values[n]}return[]},e.prototype.setValue=function(e,t){e=this.getLocale(e);var n=r.createCopy(this.values);t&&0!=t.length?this.values[e]=t:delete this.values[e],this.onValueChanged&&this.onValueChanged(n,this.values)},e.prototype.hasValue=function(e){return void 0===e&&(e=""),!this.isEmpty&&this.getValue(e).length>0},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0==this.getValuesKeys().length},enumerable:!1,configurable:!0}),e.prototype.getLocale=function(e){return e||(e=this.locale)||gn.localization.defaultLocaleName},e.prototype.getLocales=function(){var e=this.getValuesKeys();return 0==e.length?[]:e},e.prototype.getJson=function(){var e=this.getValuesKeys();return 0==e.length?null:1!=e.length||e[0]!=gn.localization.defaultLocaleName||gn.serialization.localizableStringSerializeAsObject?r.createCopy(this.values):this.values[e[0]]},e.prototype.setJson=function(e){if(this.values={},e)if(Array.isArray(e))this.setValue(null,e);else for(var t in e)this.setValue(t,e[t])},e.prototype.getValuesKeys=function(){return Object.keys(this.values)},e}();function Dt(e){return gn&&gn.confirmActionFunc?gn.confirmActionFunc(e):confirm(e)}function Lt(e){var t=function(t){t?e.funcOnYes():e.funcOnNo&&e.funcOnNo()};gn&&gn.confirmActionFunc?t(Dt(e.message)):gn&&gn.confirmActionAsync?gn.confirmActionAsync(e.message,t,e):ln(e.message,t,e)}function jt(){if(void 0===jt.isIEOrEdge){var e=navigator.userAgent,t=e.indexOf("MSIE "),n=e.indexOf("Trident/"),o=e.indexOf("Edge/");jt.isIEOrEdge=o>0||n>0||t>0}return jt.isIEOrEdge}function _t(e,t){try{for(var n=atob(e.split(",")[1]),o=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(n.length),r=new Uint8Array(i),s=0;s<n.length;s++)r[s]=n.charCodeAt(s);var a=new Blob([i],{type:o});navigator&&navigator.msSaveBlob&&navigator.msSaveOrOpenBlob(a,t)}catch(e){}}var Nt=function(e){return!!e&&!(!("host"in e)||!e.host)},Mt=function(e){var t=gn.environment.root;return"string"==typeof e?t.getElementById(e):e};function kt(e){if(!e)return o.isAvailable()?o.getDocument().documentElement:void 0;if(e.scrollHeight>e.clientHeight&&("scroll"===getComputedStyle(e).overflowY||"auto"===getComputedStyle(e).overflowY))return e;if(e.scrollWidth>e.clientWidth&&("scroll"===getComputedStyle(e).overflowX||"auto"===getComputedStyle(e).overflowX))return e;if(!e.parentElement){var t=e.getRootNode();if(t instanceof Document||t instanceof ShadowRoot)return Nt(t)?t.host:t.documentElement}return kt(e.parentElement)}function Ft(e){if(e){var t=kt(e);t&&setTimeout(function(){return t.dispatchEvent(new CustomEvent("scroll"))},10)}}function Bt(e){return e?["url(",e,")"].join(""):""}var qt={changecamera:"flip-24x24",clear:"clear-24x24",cancel:"cancel-24x24",closecamera:"close-24x24",defaultfile:"file-72x72",choosefile:"folder-24x24",file:"toolbox-file-24x24",left:"chevronleft-16x16",modernbooleancheckchecked:"plus-32x32",modernbooleancheckunchecked:"minus-32x32",more:"more-24x24",navmenu_24x24:"navmenu-24x24",removefile:"error-24x24",takepicture:"camera-32x32",takepicture_24x24:"camera-24x24",v2check:"check-16x16",checked:"check-16x16",v2check_24x24:"check-24x24","back-to-panel_16x16":"restoredown-16x16",clear_16x16:"clear-16x16",close_16x16:"close-16x16",collapsedetail:"collapsedetails-16x16",expanddetail:"expanddetails-16x16","full-screen_16x16":"maximize-16x16",loading:"loading-48x48",minimize_16x16:"minimize-16x16",next_16x16:"chevronright-16x16",previous_16x16:"chevronleft-16x16","no-image":"noimage-48x48","ranking-dash":"rankingundefined-16x16","drag-n-drop":"drag-24x24","ranking-arrows":"reorder-24x24",restore_16x16:"fullsize-16x16",reset:"restore-24x24",search:"search-24x24",average:"smiley-rate5-24x24",excellent:"smiley-rate9-24x24",good:"smiley-rate7-24x24",normal:"smiley-rate6-24x24","not-good":"smiley-rate4-24x24",perfect:"smiley-rate10-24x24",poor:"smiley-rate3-24x24",terrible:"smiley-rate1-24x24","very-good":"smiley-rate8-24x24","very-poor":"smiley-rate2-24x24",add_16x16:"add-16x16",add_24x24:"add-24x24",alert_24x24:"warning-24x24",apply:"apply-24x24","arrow-down":"arrowdown-24x24","arrow-left":"arrowleft-24x24","arrow-left_16x16":"arrowleft-16x16",arrowleft:"arrowleft-16x16","arrow-right":"arrowright-24x24","arrow-right_16x16":"arrowright-16x16",arrowright:"arrowright-16x16","arrow-up":"arrowup-24x24",boolean:"toolbox-boolean-24x24","change-question-type_16x16":"speechbubble-16x16",checkbox:"toolbox-checkbox-24x24","collapse-detail_16x16":"minusbox-16x16","collapse-panel":"collapse-pg-24x24",collapse_16x16:"collapse-16x16","color-picker":"dropper-16x16",comment:"toolbox-longtext-24x24",config:"wrench-24x24",copy:"copy-24x24",default:"toolbox-customquestion-24x24",delete_16x16:"delete-16x16",delete_24x24:"delete-24x24",delete:"delete-24x24","description-hide":"hidehint-16x16",description:"hint-16x16","device-desktop":"desktop-24x24","device-phone":"phone-24x24","device-rotate":"rotate-24x24","device-tablet":"tablet-24x24",download:"download-24x24","drag-area-indicator":"drag-24x24","drag-area-indicator_24x16":"draghorizontal-24x16",v2dragelement_16x16:"draghorizontal-24x16","drop-down-arrow":"chevrondown-24x24","drop-down-arrow_16x16":"chevrondown-16x16",chevron_16x16:"chevrondown-16x16",dropdown:"toolbox-dropdown-24x24",duplicate_16x16:"copy-16x16",edit:"edit-24x24",edit_16x16:"edit-16x16","editing-finish":"finishedit-24x24",error:"error-16x16","expand-detail_16x16":"plusbox-16x16","expand-panel":"expand-pg-24x24",expand_16x16:"expand-16x16",expression:"toolbox-expression-24x24","fast-entry":"textedit-24x24",fix:"fix-24x24",html:"toolbox-html-24x24",image:"toolbox-image-24x24",imagepicker:"toolbox-imagepicker-24x24",import:"import-24x24","invisible-items":"invisible-24x24",language:"language-24x24",load:"import-24x24","logic-collapse":"collapse-24x24","logic-expand":"expand-24x24",logo:"image-48x48",matrix:"toolbox-matrix-24x24",matrixdropdown:"toolbox-multimatrix-24x24",matrixdynamic:"toolbox-dynamicmatrix-24x24",multipletext:"toolbox-multipletext-24x24",panel:"toolbox-panel-24x24",paneldynamic:"toolbox-dynamicpanel-24x24",preview:"preview-24x24",radiogroup:"toolbox-radiogroup-24x24",ranking:"toolbox-ranking-24x24",rating:"toolbox-rating-24x24",slider:"toolbox-slider-24x24",redo:"redo-24x24",remove_16x16:"remove-16x16",required:"required-16x16",save:"save-24x24","select-page":"selectpage-24x24",settings:"settings-24x24",settings_16x16:"settings-16x16",signaturepad:"toolbox-signature-24x24","switch-active_16x16":"switchon-16x16","switch-inactive_16x16":"switchoff-16x16",tagbox:"toolbox-tagbox-24x24",text:"toolbox-singleline-24x24",theme:"theme-24x24",toolbox:"toolbox-24x24",undo:"undo-24x24",visible:"visible-24x24",wizard:"wand-24x24",searchclear:"clear-16x16","chevron-16x16":"chevrondown-16x16",chevron:"chevrondown-24x24",progressbuttonv2:"arrowleft-16x16",right:"chevronright-16x16","add-lg":"add-24x24",add:"add-24x24"};function Qt(e){var t=function(e){var t=gn.customIcons[e];return t?zt(t):(e=zt(e),(t=gn.customIcons[e])||null)}(e);return t||zt(e)}function zt(e){var t="icon-",n=e.replace(t,"");return t+(qt[n]||n)}function Ht(e,t,n,i,r,s){if(r){"auto"!==e&&(r.style.width=(e||t||16)+"px",r.style.height=(e||n||16)+"px");var a=r.childNodes[0],l=Qt(i);a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+l);var u=r.getElementsByTagName("title")[0];s?(u||(u=o.getDocument().createElementNS("http://www.w3.org/2000/svg","title"),r.appendChild(u)),u.textContent=s):u&&r.removeChild(u)}}function Ut(e){return"function"!=typeof e?e:e()}function Wt(e){if("string"==typeof e){if(!isNaN(Number(e)))return Number(e);if(e.includes("px"))return parseFloat(e)}if("number"==typeof e)return e}function Gt(e){if(void 0===Wt(e))return e}var Jt="sv-focused--by-key";function Kt(e){var t=e.target;t&&t.classList&&t.classList.remove(Jt)}function Yt(e,t){if(!e.target||"true"!==e.target.contentEditable){var n=e.target;if(n){var o=e.which||e.keyCode;if(9!==o){if(t){if(!t.__keyDownReceived)return;t.__keyDownReceived=!1}13===o||32===o?n.click&&n.click():t&&!t.processEsc||27!==o||n.blur&&n.blur()}else n.classList&&!n.classList.contains(Jt)&&n.classList.add(Jt)}}}function Xt(e,t){if(void 0===t&&(t={processEsc:!0}),t&&(t.__keyDownReceived=!0),!e.target||"true"!==e.target.contentEditable){var n=e.which||e.keyCode,o=[13,32];t.processEsc&&o.push(27),-1!==o.indexOf(n)&&e.preventDefault()}}function Zt(e,t){if(e){t||(t=function(e){return o.getComputedStyle(e)});var n=parseFloat(e.getAttribute("rows")||"2"),i=t(e),r=i.overflowY,s=parseFloat(i.lineHeight);if(e.scrollHeight){var a=parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth)+parseFloat(i.paddingBottom)+parseFloat(i.paddingTop),l=(e.scrollHeight-a)/s,u=function(t){e.style.height=t*s+a+"px"};for(u(l),e.style.overflowY="hidden";e.scrollHeight<=e.offsetHeight&&l>n;)u(--l);e.style.overflowY=r,e.scrollHeight>e.offsetHeight&&u(++l)}else e.style.height="auto"}}function $t(e){return e.originalEvent||e}function en(e){e.preventDefault(),e.stopPropagation()}function tn(e){return e?e.replace(/\s*?([\w-]+)\s*?/g,".$1"):e}function nn(e){return getComputedStyle?Number.parseFloat(getComputedStyle(e).width):e.offsetWidth}function on(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function rn(e,t){if(void 0===t&&(t=!0),n.isAvailable()&&o.isAvailable()&&e.childNodes.length>0){var i=n.getSelection();if(0==i.rangeCount)return;var r=i.getRangeAt(0);r.setStart(r.endContainer,r.endOffset),r.setEndAfter(e.lastChild),i.removeAllRanges(),i.addRange(r);var s=i.toString(),a=e.innerText;s=s.replace(/\r/g,""),t&&(s=s.replace(/\n/g,""),a=a.replace(/\n/g,""));var l=s.length;for(e.innerText=a,(r=o.getDocument().createRange()).setStart(e.firstChild,0),r.setEnd(e.firstChild,0),i.removeAllRanges(),i.addRange(r);i.toString().length<a.length-l;){var u=i.toString().length;if(i.modify("extend","forward","character"),i.toString().length==u)break}(r=i.getRangeAt(0)).setStart(r.endContainer,r.endOffset)}}function sn(e,t){if(t&&e&&"object"==typeof t)for(var n in e){var o=e[n];!Array.isArray(o)&&o&&"object"==typeof o?(t[n]&&"object"==typeof t[n]||(t[n]={}),sn(o,t[n])):t[n]=o}}function an(e,t){var n={};sn(t.list,n),sn(e.list,n),e.list=n}function ln(e,t,n){void 0===n&&(n={});var o=new Et(void 0,!1);o.defaultValue=e||n.message;var i=gn.showDialog({componentName:"sv-string-viewer",data:{locStr:o,locString:o,model:o},onApply:function(){return t(!0),!0},onCancel:function(){return t(!1),!1},displayMode:"popup",isFocusedContent:!1,cssClass:n.cssClass||"sv-popup--confirm"},n.rootElement),r=i.footerToolbar,s=r.getActionById("apply");return r.getActionById("cancel").title=l("cancel",n.locale),s.title=n.applyTitle||l("ok",n.locale),s.innerCss="sd-btn--danger",function(e){e.width="min-content"}(i),!0}function un(e,t){n.isFileReaderAvailable()&&(e.value="",e.onchange=function(o){if(n.isFileReaderAvailable()&&e&&e.files&&!(e.files.length<1)){for(var i=[],r=0;r<e.files.length;r++)i.push(e.files[r]);t(i)}},e.click())}function cn(e,t,n){var o;void 0===n&&(n="--animation-"),e.__sv_created_properties=null!==(o=e.__sv_created_properties)&&void 0!==o?o:[],Object.keys(t).forEach(function(o){var i="".concat(n).concat(o.split(/\.?(?=[A-Z])/).join("-").toLowerCase());e.style.setProperty(i,t[o]),e.__sv_created_properties.push(i)})}function pn(e){cn(e,function(e){if(o.isAvailable()){var t=o.getComputedStyle(e),n=t.paddingTop,i=t.paddingBottom,r=t.borderTopWidth,s=t.borderBottomWidth,a=t.marginTop,l=t.marginBottom,u=t.boxSizing,c=e.offsetHeight+"px";if("content-box"==u){var p=e.offsetHeight;[s,r,i,n].forEach(function(e){p-=parseFloat(e)}),c=p+"px"}return{paddingTop:n,paddingBottom:i,borderTopWidth:r,borderBottomWidth:s,marginTop:a,marginBottom:l,heightFrom:"0px",heightTo:c}}}(e))}function hn(e){Array.isArray(e.__sv_created_properties)&&(e.__sv_created_properties.forEach(function(t){e.style.removeProperty(t)}),delete e.__sv_created_properties)}!function(){function e(){this._result=""}e.prototype.log=function(e){this._result+="->"+e},Object.defineProperty(e.prototype,"result",{get:function(){return this._result},enumerable:!1,configurable:!0})}();var dn="undefined"!=typeof globalThis?globalThis.document:(void 0).document,fn=dn?{root:dn,_rootElement:o.getBody(),get rootElement(){var e;return null!==(e=this._rootElement)&&void 0!==e?e:o.getBody()},set rootElement(e){this._rootElement=e},_popupMountContainer:o.getBody(),get popupMountContainer(){var e;return null!==(e=this._popupMountContainer)&&void 0!==e?e:o.getBody()},set popupMountContainer(e){this._popupMountContainer=e},svgMountContainer:dn.head,stylesSheetsMountContainer:dn.head}:void 0,gn={version:"",designMode:{showEmptyDescriptions:!0,showEmptyTitles:!0},get allowShowEmptyDescriptionInDesignMode(){return this.designMode.showEmptyDescriptions},set allowShowEmptyDescriptionInDesignMode(e){this.designMode.showEmptyDescriptions=e},get allowShowEmptyTitleInDesignMode(){return this.designMode.showEmptyTitles},set allowShowEmptyTitleInDesignMode(e){this.designMode.showEmptyTitles=e},localization:{useLocalTimeZone:!0,storeDuplicatedTranslations:!1,defaultLocaleName:"default"},get useLocalTimeZone(){return this.localization.useLocalTimeZone},set useLocalTimeZone(e){this.localization.useLocalTimeZone=e},get storeDuplicatedTranslations(){return this.localization.storeDuplicatedTranslations},set storeDuplicatedTranslations(e){this.localization.storeDuplicatedTranslations=e},get defaultLocaleName(){return this.localization.defaultLocaleName},set defaultLocaleName(e){this.localization.defaultLocaleName=e},web:{onBeforeRequestChoices:function(e,t){},encodeUrlParams:!0,cacheLoadedChoices:!0,disableQuestionWhileLoadingChoices:!1},get webserviceEncodeParameters(){return this.web.encodeUrlParams},set webserviceEncodeParameters(e){this.web.encodeUrlParams=e},get useCachingForChoicesRestful(){return this.web.cacheLoadedChoices},set useCachingForChoicesRestful(e){this.web.cacheLoadedChoices=e},get useCachingForChoicesRestfull(){return this.web.cacheLoadedChoices},set useCachingForChoicesRestfull(e){this.web.cacheLoadedChoices=e},get disableOnGettingChoicesFromWeb(){return this.web.disableQuestionWhileLoadingChoices},set disableOnGettingChoicesFromWeb(e){this.web.disableQuestionWhileLoadingChoices=e},triggers:{changeNavigationButtonsOnComplete:!0,executeCompleteOnValueChanged:!1,executeSkipOnValueChanged:!0},get executeCompleteTriggerOnValueChanged(){return this.triggers.executeCompleteOnValueChanged},set executeCompleteTriggerOnValueChanged(e){this.triggers.executeCompleteOnValueChanged=e},get changeNavigationButtonsOnCompleteTrigger(){return this.triggers.changeNavigationButtonsOnComplete},set changeNavigationButtonsOnCompleteTrigger(e){this.triggers.changeNavigationButtonsOnComplete=e},get executeSkipTriggerOnValueChanged(){return this.triggers.executeSkipOnValueChanged},set executeSkipTriggerOnValueChanged(e){this.triggers.executeSkipOnValueChanged=e},serialization:{itemValueSerializeAsObject:!1,itemValueSerializeDisplayText:!1,localizableStringSerializeAsObject:!1,matrixDropdownColumnSerializeTitle:!1},get itemValueAlwaysSerializeAsObject(){return this.serialization.itemValueSerializeAsObject},set itemValueAlwaysSerializeAsObject(e){this.serialization.itemValueSerializeAsObject=e},get itemValueAlwaysSerializeText(){return this.serialization.itemValueSerializeDisplayText},set itemValueAlwaysSerializeText(e){this.serialization.itemValueSerializeDisplayText=e},get serializeLocalizableStringAsObject(){return this.serialization.localizableStringSerializeAsObject},set serializeLocalizableStringAsObject(e){this.serialization.localizableStringSerializeAsObject=e},lazyRender:{enabled:!1,firstBatchSize:3},get lazyRowsRendering(){return this.lazyRender.enabled},set lazyRowsRendering(e){this.lazyRender.enabled=e},get lazyRowsRenderingStartRow(){return this.lazyRender.firstBatchSize},set lazyRowsRenderingStartRow(e){this.lazyRender.firstBatchSize=e},matrix:{defaultCellType:"dropdown",defaultRowName:"default",totalsSuffix:"-total",maxRowCount:1e3,maxRowCountInCondition:1,renderRemoveAsIcon:!0,columnWidthsByType:{file:{minWidth:"240px"},comment:{minWidth:"200px"}},rateSize:"small"},get matrixDefaultRowName(){return this.matrix.defaultRowName},set matrixDefaultRowName(e){this.matrix.defaultRowName=e},get matrixDefaultCellType(){return this.matrix.defaultCellType},set matrixDefaultCellType(e){this.matrix.defaultCellType=e},get matrixTotalValuePostFix(){return this.matrix.totalsSuffix},set matrixTotalValuePostFix(e){this.matrix.totalsSuffix=e},get matrixMaximumRowCount(){return this.matrix.maxRowCount},set matrixMaximumRowCount(e){this.matrix.maxRowCount=e},get matrixMaxRowCountInCondition(){return this.matrix.maxRowCountInCondition},set matrixMaxRowCountInCondition(e){this.matrix.maxRowCountInCondition=e},get matrixRenderRemoveAsIcon(){return this.matrix.renderRemoveAsIcon},set matrixRenderRemoveAsIcon(e){this.matrix.renderRemoveAsIcon=e},panel:{maxPanelCount:100,maxPanelCountInCondition:1},get panelDynamicMaxPanelCountInCondition(){return this.panel.maxPanelCountInCondition},set panelDynamicMaxPanelCountInCondition(e){this.panel.maxPanelCountInCondition=e},get panelMaximumPanelCount(){return this.panel.maxPanelCount},set panelMaximumPanelCount(e){this.panel.maxPanelCount=e},readOnly:{enableValidation:!1,commentRenderMode:"textarea",textRenderMode:"input"},get readOnlyCommentRenderMode(){return this.readOnly.commentRenderMode},set readOnlyCommentRenderMode(e){this.readOnly.commentRenderMode=e},get readOnlyTextRenderMode(){return this.readOnly.textRenderMode},set readOnlyTextRenderMode(e){this.readOnly.textRenderMode=e},numbering:{includeQuestionsWithHiddenNumber:!1,includeQuestionsWithHiddenTitle:!1},get setQuestionVisibleIndexForHiddenTitle(){return this.numbering.includeQuestionsWithHiddenTitle},set setQuestionVisibleIndexForHiddenTitle(e){this.numbering.includeQuestionsWithHiddenTitle=e},get setQuestionVisibleIndexForHiddenNumber(){return this.numbering.includeQuestionsWithHiddenNumber},set setQuestionVisibleIndexForHiddenNumber(e){this.numbering.includeQuestionsWithHiddenNumber=e},enterKeyAction:"default",comparator:{trimStrings:!0,caseSensitive:!1,normalizeTextCallback:function(e,t){return e}},expressionDisableConversionChar:"#",get commentPrefix(){return gn.commentSuffix},set commentPrefix(e){gn.commentSuffix=e},commentSuffix:"-Comment",itemValueSeparator:"|",ratingMaximumRateValueCount:20,tagboxCloseOnSelect:!1,dropdownSearchDelay:500,confirmActionFunc:void 0,confirmActionAsync:function(e,t,n){ln(e,t,n)},minWidth:"300px",maxWidth:"100%",maxConditionRunCountOnValueChanged:10,notifications:{lifetime:2e3},autoAdvanceDelay:300,itemFlowDirection:"column",get showItemsInOrder(){return gn.itemFlowDirection},set showItemsInOrder(e){gn.itemFlowDirection=e},noneItemValue:"none",refuseItemValue:"refused",dontKnowItemValue:"dontknow",specialChoicesOrder:{selectAllItem:[-1],noneItem:[1],refuseItem:[2],dontKnowItem:[3],otherItem:[4]},choicesSeparator:", ",supportedValidators:{question:["expression"],comment:["text","regex"],text:["numeric","text","regex","email"],checkbox:["answercount"],imagepicker:["answercount"]},expressionVariables:{question:"self",matrix:"matrix",composite:"composite",item:"item",choice:"choice",row:"row",totalRow:"totalRow",rowIndex:"rowIndex",visibleRowIndex:"visibleRowIndex",rowValue:"rowValue",rowName:"rowName",rowTitle:"rowTitle",panel:"panel",parentPanel:"parentPanel",panelIndex:"panelIndex",visiblePanelIndex:"visiblePanelIndex",unwrapPostfix:"-unwrapped"},minDate:"",maxDate:"2999-12-31",showDialog:void 0,showDefaultItemsInCreator:!0,customIcons:{},rankingDragHandleArea:"entireItem",environment:fn,showMaxLengthIndicator:!0,animationEnabled:!0,titleTags:{survey:"div",page:"div",panel:"div",question:"div"},questions:{inputTypes:["color","date","datetime-local","email","month","number","password","range","tel","text","time","url","week"],dataList:["","name","honorific-prefix","given-name","additional-name","family-name","honorific-suffix","nickname","organization-title","username","new-password","current-password","organization","street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code","cc-name","cc-given-name","cc-additional-name","cc-family-name","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc","cc-type","transaction-currency","transaction-amount","language","bday","bday-day","bday-month","bday-year","sex","url","photo","tel","tel-country-code","tel-national","tel-area-code","tel-local","tel-local-prefix","tel-local-suffix","tel-extension","email","impp"]},legacyProgressBarView:!1,maskSettings:{patternPlaceholderChar:"_",patternEscapeChar:"\\",patternDefinitions:{9:/[0-9]/,a:/[a-zA-Z]/,"#":/[a-zA-Z0-9]/}},storeUtcDates:!1,onDateCreated:function(e,t,n){return e},parseNumber:function(e,t){return t}},yn=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.text=e,this.errorOwner=t,this.visible=!0,this.onUpdateErrorTextCallback=void 0}return e.prototype.equals=function(e){return!(!e||!e.getErrorType)&&this.getErrorType()===e.getErrorType()&&this.text===e.text&&this.visible===e.visible},Object.defineProperty(e.prototype,"locText",{get:function(){return this.locTextValue||(this.locTextValue=new Et(this.errorOwner,!0),this.locTextValue.storeDefaultText=!0,this.locTextValue.text=this.getText()),this.locTextValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"notificationType",{get:function(){return this.notificationTypeValue||"error"},set:function(e){this.notificationTypeValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isWarning",{get:function(){return"warning"===this.notificationTypeValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInfo",{get:function(){return"info"===this.notificationTypeValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isError",{get:function(){return!this.isInfo&&!this.isWarning},enumerable:!1,configurable:!0}),e.prototype.getCssIcon=function(e){var t=this.getCssError(e);return(this.isWarning?t.warningIcon:this.isInfo?t.infoIcon:t.icon)||t.icon||void 0},e.prototype.getCssError=function(e){return(e=e||{}).error||{}},e.prototype.getText=function(){var e=this.text;return e||(e=this.getDefaultText()),this.errorOwner&&(e=this.errorOwner.getErrorCustomText(e,this)),e},e.prototype.getErrorType=function(){return"base"},e.prototype.getDefaultText=function(){return""},e.prototype.getLocale=function(){return this.errorOwner?this.errorOwner.getLocale():""},e.prototype.getLocalizationString=function(e){return l(e,this.getLocale())},e.prototype.updateText=function(){this.onUpdateErrorTextCallback&&this.onUpdateErrorTextCallback(this),this.locText.text=this.getText()},e}(),mn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bn=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var o=e.call(this,t,n)||this;return o.text=t,o}return mn(t,e),t.prototype.getErrorType=function(){return"required"},t.prototype.getDefaultText=function(){return this.getLocalizationString("requiredError")},t}(yn),vn=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var o=e.call(this,t,n)||this;return o.text=t,o}return mn(t,e),t.prototype.getErrorType=function(){return"requireoneanswer"},t.prototype.getDefaultText=function(){return this.getLocalizationString("requiredErrorInPanel")},t}(yn),Cn=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var o=e.call(this,t,n)||this;return o.text=t,o}return mn(t,e),t.prototype.getErrorType=function(){return"requirenumeric"},t.prototype.getDefaultText=function(){return this.getLocalizationString("numericError")},t}(yn),Pn=function(e){function t(t,n){void 0===n&&(n=null);var o=e.call(this,null,n)||this;return o.maxSize=t,o.locText.text=o.getText(),o}return mn(t,e),t.prototype.getErrorType=function(){return"exceedsize"},t.prototype.getDefaultText=function(){return this.getLocalizationString("exceedMaxSize").format(this.getTextSize())},t.prototype.getTextSize=function(){if(0===this.maxSize)return"0 Byte";var e=Math.floor(Math.log(this.maxSize)/Math.log(1024));return(this.maxSize/Math.pow(1024,e)).toFixed([0,0,2,3,3][e])+" "+["Bytes","KB","MB","GB","TB"][e]},t}(yn),wn=function(e){function t(t,n,o){void 0===o&&(o=null);var i=e.call(this,null,o)||this;return i.status=t,i.response=n,i}return mn(t,e),t.prototype.getErrorType=function(){return"webrequest"},t.prototype.getDefaultText=function(){var e=this.getLocalizationString("urlRequestError");return e?e.format(this.status,this.response):""},t}(yn),Vn=function(e){function t(t,n){void 0===n&&(n=null);var o=e.call(this,t,n)||this;return o.text=t,o}return mn(t,e),t.prototype.getErrorType=function(){return"webrequestempty"},t.prototype.getDefaultText=function(){return this.getLocalizationString("urlGetChoicesError")},t}(yn),xn=function(e){function t(t,n){void 0===n&&(n=null);var o=e.call(this,t,n)||this;return o.text=t,o}return mn(t,e),t.prototype.getErrorType=function(){return"otherempty"},t.prototype.getDefaultText=function(){return this.getLocalizationString("otherRequiredError")},t}(yn),On=function(e){function t(t,n){void 0===n&&(n=null);var o=e.call(this,t,n)||this;return o.text=t,o}return mn(t,e),t.prototype.getErrorType=function(){return"uploadingfile"},t.prototype.getDefaultText=function(){return this.getLocalizationString("uploadingFile")},t}(yn),Sn=function(e){function t(t,n){void 0===n&&(n=null);var o=e.call(this,t,n)||this;return o.text=t,o}return mn(t,e),t.prototype.getErrorType=function(){return"requiredinallrowserror"},t.prototype.getDefaultText=function(){return this.getLocalizationString("requiredInAllRowsError")},t}(yn),In=function(e){function t(t,n){void 0===n&&(n=null);var o=e.call(this,t,n)||this;return o.text=t,o}return mn(t,e),t.prototype.getErrorType=function(){return"eachrowuniqueeerror"},t.prototype.getDefaultText=function(){return this.getLocalizationString("eachRowUniqueError")},t}(yn),Tn=function(e){function t(t,n){void 0===n&&(n=null);var o=e.call(this,null,n)||this;return o.minRowCount=t,o}return mn(t,e),t.prototype.getErrorType=function(){return"minrowcounterror"},t.prototype.getDefaultText=function(){return this.getLocalizationString("minRowCountError").format(this.minRowCount)},t}(yn),Rn=function(e){function t(t,n){void 0===n&&(n=null);var o=e.call(this,t,n)||this;return o.text=t,o}return mn(t,e),t.prototype.getErrorType=function(){return"keyduplicationerror"},t.prototype.getDefaultText=function(){return this.getLocalizationString("keyDuplicationError")},t}(yn),En=function(e){function t(t,n){void 0===n&&(n=null);var o=e.call(this,t,n)||this;return o.text=t,o}return mn(t,e),t.prototype.getErrorType=function(){return"custom"},t}(yn),An=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Dn=function(){function e(e){this.onCompleted=e,this.asyncElements={},this.isRunningValue=!0}return e.prototype.addElement=function(e){this.asyncElements[e]=!0},e.prototype.removeElement=function(e){delete this.asyncElements[e],this.tryComplete()},e.prototype.finish=function(){this.isRunningValue=!1,this.tryComplete()},Object.defineProperty(e.prototype,"isRunning",{get:function(){return this.isRunningValue||Object.keys(this.asyncElements).length>0},enumerable:!1,configurable:!0}),e.prototype.doCompleted=function(){this.onCompleted&&this.onCompleted()},e.prototype.tryComplete=function(){this.isRunning||this.doCompleted()},e}(),Ln=function(e,t){void 0===t&&(t=null),this.value=e,this.error=t},jn=function(e){function t(){var t=e.call(this)||this;return t.createLocalizableString("text",t,!0),t}return An(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return"svd"+this.uniqueId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValidator",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.errorOwner&&this.errorOwner.getSurvey?this.errorOwner.getSurvey():null},Object.defineProperty(t.prototype,"notificationType",{get:function(){return this.getPropertyValue("notificationType")},set:function(e){this.setPropertyValue("notificationType",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.getLocalizableStringText("text")},set:function(e){this.setLocalizableStringText("text",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locText",{get:function(){return this.getLocalizableString("text")},enumerable:!1,configurable:!0}),t.prototype.getErrorText=function(e){return this.text?this.text:this.getDefaultErrorText(e)},t.prototype.getDefaultErrorText=function(e){return""},t.prototype.validateOnCallback=function(e,t,n,o){var i=this.validate(e,n,o);return t&&t(i),i},t.prototype.validate=function(e,t,n){return null},t.prototype.getLocale=function(){return this.errorOwner?this.errorOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,t,n){return this.errorOwner?this.errorOwner.getMarkdownHtml(e,t,n):void 0},t.prototype.getRenderer=function(e){return this.errorOwner?this.errorOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.errorOwner?this.errorOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e){return this.errorOwner?this.errorOwner.getProcessedText(e):e},t.prototype.createCustomError=function(e){var t=this,n=new En(this.getErrorText(e),this.errorOwner);return n.onUpdateErrorTextCallback=function(n){return n.text=t.getErrorText(e)},n},t.prototype.toString=function(){var e=this.getType().replace("validator","");return this.text&&(e+=", "+this.text),e},t}(Te),_n=function(){function e(){}return e.prototype.run=function(e){var t=this,n=e.getValidators(),o=new Array,i=new Dn(function(){t.onAsyncCompleted&&t.onAsyncCompleted(o)});if(n.length>0){var r=e.getDataFilteredProperties(),s=e.validatedValue,a=e.getValidatorTitle();n.forEach(function(e){i.addElement(e.id),e.validateOnCallback(s,function(t){t&&t.error&&(t.error.notificationType=e.notificationType,o.push(t.error)),i.removeElement(e.id)},a,r)})}var l=[].concat.apply([],o);return o.length=0,i.finish(),l},e}(),Nn=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var o=e.call(this)||this;return o.minValue=t,o.maxValue=n,o}return An(t,e),t.prototype.getType=function(){return"numericvalidator"},t.prototype.validate=function(e,t,n){if(this.isValueEmpty(e))return null;if(!r.isNumber(e))return new Ln(null,new Cn(this.text,this.errorOwner));var o=new Ln(r.getNumber(e));return null!==this.minValue&&this.minValue>o.value||null!==this.maxValue&&this.maxValue<o.value?(o.error=this.createCustomError(t),o):"number"==typeof e?null:o},t.prototype.getDefaultErrorText=function(e){var t=e||this.getLocalizationString("value");return null!==this.minValue&&null!==this.maxValue?this.getLocalizationFormatString("numericMinMax",t,this.minValue,this.maxValue):null!==this.minValue?this.getLocalizationFormatString("numericMin",t,this.minValue):this.getLocalizationFormatString("numericMax",t,this.maxValue)},Object.defineProperty(t.prototype,"minValue",{get:function(){return this.getPropertyValue("minValue")},set:function(e){this.setPropertyValue("minValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.getPropertyValue("maxValue")},set:function(e){this.setPropertyValue("maxValue",e)},enumerable:!1,configurable:!0}),t}(jn),Mn=function(e){function t(){return e.call(this)||this}return An(t,e),t.prototype.getType=function(){return"textvalidator"},t.prototype.validate=function(e,t,n){return this.isValueEmpty(e)?null:!this.allowDigits&&/\d+$/.test(e)?new Ln(null,this.createCustomError("textNoDigitsAllow")):this.minLength>0&&e.length<this.minLength||this.maxLength>0&&e.length>this.maxLength?new Ln(null,this.createCustomError(t)):null},t.prototype.getDefaultErrorText=function(e){return"textNoDigitsAllow"===e?this.getLocalizationString(e):this.minLength>0&&this.maxLength>0?this.getLocalizationFormatString("textMinMaxLength",this.minLength,this.maxLength):this.minLength>0?this.getLocalizationFormatString("textMinLength",this.minLength):this.getLocalizationFormatString("textMaxLength",this.maxLength)},Object.defineProperty(t.prototype,"minLength",{get:function(){return this.getPropertyValue("minLength")},set:function(e){this.setPropertyValue("minLength",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.getPropertyValue("maxLength")},set:function(e){this.setPropertyValue("maxLength",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowDigits",{get:function(){return this.getPropertyValue("allowDigits")},set:function(e){this.setPropertyValue("allowDigits",e)},enumerable:!1,configurable:!0}),t}(jn),kn=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var o=e.call(this)||this;return o.minCount=t,o.maxCount=n,o}return An(t,e),t.prototype.getType=function(){return"answercountvalidator"},t.prototype.validate=function(e,t,n){if(null==e||e.constructor!=Array)return null;var o=e.length;return 0==o?null:this.minCount&&o<this.minCount?new Ln(null,this.createCustomError(this.getLocalizationFormatString("minSelectError",this.minCount))):this.maxCount&&o>this.maxCount?new Ln(null,this.createCustomError(this.getLocalizationFormatString("maxSelectError",this.maxCount))):null},t.prototype.getDefaultErrorText=function(e){return e},Object.defineProperty(t.prototype,"minCount",{get:function(){return this.getPropertyValue("minCount")},set:function(e){this.setPropertyValue("minCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxCount",{get:function(){return this.getPropertyValue("maxCount")},set:function(e){this.setPropertyValue("maxCount",e)},enumerable:!1,configurable:!0}),t}(jn),Fn=function(e){function t(t){void 0===t&&(t=null);var n=e.call(this)||this;return n.regex=t,n}return An(t,e),t.prototype.getType=function(){return"regexvalidator"},t.prototype.validate=function(e,t,n){if(!this.regex||this.isValueEmpty(e))return null;var o=this.createRegExp();if(Array.isArray(e))for(var i=0;i<e.length;i++){var r=this.hasError(o,e[i],t);if(r)return r}return this.hasError(o,e,t)},t.prototype.hasError=function(e,t,n){return e.test(t)?null:new Ln(t,this.createCustomError(n))},Object.defineProperty(t.prototype,"regex",{get:function(){return this.getPropertyValue("regex")},set:function(e){this.setPropertyValue("regex",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"caseInsensitive",{get:function(){return this.getPropertyValue("caseInsensitive")},set:function(e){this.setPropertyValue("caseInsensitive",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"insensitive",{get:function(){return this.caseInsensitive},set:function(e){this.caseInsensitive=e},enumerable:!1,configurable:!0}),t.prototype.createRegExp=function(){return new RegExp(this.regex,this.caseInsensitive?"i":"")},t}(jn),Bn=function(e){function t(){var t=e.call(this)||this;return t.re=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()=[\]\.,;:\s@\"]+\.)+[^<>()=[\]\.,;:\s@\"]{2,})$/i,t}return An(t,e),t.prototype.getType=function(){return"emailvalidator"},t.prototype.validate=function(e,t,n){return e?this.re.test(e)?null:new Ln(e,this.createCustomError(t)):null},t.prototype.getDefaultErrorText=function(e){return this.getLocalizationString("invalidEmail")},t}(jn),qn=function(e){function t(t){void 0===t&&(t=null);var n=e.call(this)||this;return n.conditionRunner=null,n.expression=t,n}return An(t,e),t.prototype.getType=function(){return"expressionvalidator"},t.prototype.validateOnCallback=function(e,t,n,o){var i=this;this.conditionRunner&&(this.conditionRunner.onRunComplete=null);var r=null,s=function(o){r=i.generateError(o,e,n),t&&t(r)};if(!this.ensureConditionRunner())return s(!0),null;if(this.conditionRunner.onRunComplete=function(e){s(e)},!this.conditionRunner.canRun())return s(a),r;var a=this.conditionRunner.runContext(this.getValueGetterContext(),this.getPropertiesCopy(o,"expression"));return r||this.generateError(a,e,n)},t.prototype.generateError=function(e,t,n){return e?null:new Ln(t,this.createCustomError(n))},t.prototype.getDefaultErrorText=function(e){return this.getLocalizationFormatString("invalidExpression",this.expression)},t.prototype.ensureConditionRunner=function(){var e=this.getExpressionFromSurvey("expression");return!!e&&(this.conditionRunner=new Pe(e),!0)},Object.defineProperty(t.prototype,"expression",{get:function(){return this.getPropertyValue("expression")},set:function(e){this.setPropertyValue("expression",e)},enumerable:!1,configurable:!0}),t.prototype.getValueGetterContext=function(){var t=this.errorOwner;return t&&t.getValueGetterContext?t.getValueGetterContext():e.prototype.getValueGetterContext.call(this)},t}(jn);D.addClass("surveyvalidator",[{name:"text",serializationProperty:"locText"},{name:"notificationType",choices:["error","warning","info"],default:"error",visible:!0,category:"general",visibleIndex:100}]),D.addClass("numericvalidator",["minValue:number","maxValue:number"],function(){return new Nn},"surveyvalidator"),D.addClass("textvalidator",[{name:"minLength:number",default:0},{name:"maxLength:number",default:0},{name:"allowDigits:boolean",default:!0}],function(){return new Mn},"surveyvalidator"),D.addClass("answercountvalidator",["minCount:number","maxCount:number"],function(){return new kn},"surveyvalidator"),D.addClass("regexvalidator",["regex",{name:"caseInsensitive:boolean",alternativeName:"insensitive"}],function(){return new Fn},"surveyvalidator"),D.addClass("emailvalidator",[],function(){return new Bn},"surveyvalidator"),D.addClass("expressionvalidator",["expression:condition"],function(){return new qn},"surveyvalidator");var Qn=function(){function e(e,t){this.name=e,this.widgetJson=t,this.htmlTemplate=t.htmlTemplate?t.htmlTemplate:""}return e.prototype.afterRender=function(e,t){var n=this;this.widgetJson.afterRender&&(e.localeChangedCallback=function(){n.widgetJson.willUnmount&&n.widgetJson.willUnmount(e,t),n.widgetJson.afterRender(e,t)},this.widgetJson.afterRender(e,t))},e.prototype.willUnmount=function(e,t){this.widgetJson.willUnmount&&this.widgetJson.willUnmount(e,t)},e.prototype.getDisplayValue=function(e,t){return void 0===t&&(t=void 0),this.widgetJson.getDisplayValue?this.widgetJson.getDisplayValue(e,t):null},e.prototype.validate=function(e){if(this.widgetJson.validate)return this.widgetJson.validate(e)},e.prototype.isFit=function(e){return!(!this.isLibraryLoaded()||!this.widgetJson.isFit)&&this.widgetJson.isFit(e)},Object.defineProperty(e.prototype,"canShowInToolbox",{get:function(){return!1!==this.widgetJson.showInToolbox&&"customtype"==zn.Instance.getActivatedBy(this.name)&&(!this.widgetJson.widgetIsLoaded||this.widgetJson.widgetIsLoaded())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showInToolbox",{get:function(){return!1!==this.widgetJson.showInToolbox},set:function(e){this.widgetJson.showInToolbox=e},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.widgetJson.init&&this.widgetJson.init()},e.prototype.activatedByChanged=function(e){this.isLibraryLoaded()&&this.widgetJson.activatedByChanged&&this.widgetJson.activatedByChanged(e)},e.prototype.isLibraryLoaded=function(){return!this.widgetJson.widgetIsLoaded||1==this.widgetJson.widgetIsLoaded()},Object.defineProperty(e.prototype,"isDefaultRender",{get:function(){return this.widgetJson.isDefaultRender},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pdfQuestionType",{get:function(){return this.widgetJson.pdfQuestionType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pdfRender",{get:function(){return this.widgetJson.pdfRender},enumerable:!1,configurable:!0}),e}(),zn=function(){function e(){this.widgetsValues=[],this.widgetsActivatedBy={},this.onCustomWidgetAdded=new Ee}return Object.defineProperty(e.prototype,"widgets",{get:function(){return this.widgetsValues},enumerable:!1,configurable:!0}),e.prototype.add=function(e,t){void 0===t&&(t="property"),this.addCustomWidget(e,t)},e.prototype.addCustomWidget=function(e,t){void 0===t&&(t="property");var n=e.name;n||(n="widget_"+this.widgets.length+1);var o=new Qn(n,e);return this.widgetsValues.push(o),o.init(),this.widgetsActivatedBy[n]=t,o.activatedByChanged(t),this.onCustomWidgetAdded.fire(o,null),o},e.prototype.getActivatedBy=function(e){return this.widgetsActivatedBy[e]||"property"},e.prototype.setActivatedBy=function(e,t){if(e&&t){var n=this.getCustomWidgetByName(e);n&&(this.widgetsActivatedBy[e]=t,n.activatedByChanged(t))}},e.prototype.clear=function(){this.widgetsValues=[]},e.prototype.getCustomWidgetByName=function(e){for(var t=0;t<this.widgets.length;t++)if(this.widgets[t].name==e)return this.widgets[t];return null},e.prototype.getCustomWidget=function(e){for(var t=0;t<this.widgetsValues.length;t++)if(this.widgetsValues[t].isFit(e))return this.widgetsValues[t];return null},e.Instance=new e,e}(),Hn=function(){function e(){this.renderersHash={},this.defaultHash={}}return e.prototype.unregisterRenderer=function(e,t){delete this.renderersHash[e][t],this.defaultHash[e]===t&&delete this.defaultHash[e]},e.prototype.registerRenderer=function(e,t,n,o){void 0===o&&(o=!1),this.renderersHash[e]||(this.renderersHash[e]={}),this.renderersHash[e][t]=n,o&&(this.defaultHash[e]=t)},e.prototype.getRenderer=function(e,t){var n=this.renderersHash[e];if(n){if(t&&n[t])return n[t];var o=this.defaultHash[e];if(o&&n[o])return n[o]}return"default"},e.prototype.getRendererByQuestion=function(e){return this.getRenderer(e.getType(),e.renderAs)},e.prototype.clear=function(){this.renderersHash={}},e.Instance=new e,e}(),Un=function(){function e(e){var t=this;this.options=e,this.onPropertyChangedCallback=function(){t.element&&(t.element.value=t.getTextValue(),t.updateElement())},this.question.registerFunctionOnPropertiesValueChanged(this.options.propertyNames,this.onPropertyChangedCallback,"__textarea")}return e.prototype.updateElement=function(){var e=this;this.element&&this.autoGrow&&setTimeout(function(){return Zt(e.element)},1)},e.prototype.setElement=function(e){e&&(this.element=e,this.updateElement())},e.prototype.resetElement=function(){this.element=void 0},e.prototype.getTextValue=function(){return this.options.getTextValue&&this.options.getTextValue()||""},e.prototype.onTextAreaChange=function(e){this.options.onTextAreaChange&&this.options.onTextAreaChange(e)},e.prototype.onTextAreaInput=function(e){this.options.onTextAreaInput&&this.options.onTextAreaInput(e),this.element&&this.autoGrow&&Zt(this.element)},e.prototype.onTextAreaKeyDown=function(e){this.options.onTextAreaKeyDown&&this.options.onTextAreaKeyDown(e)},e.prototype.onTextAreaBlur=function(e){this.onTextAreaChange(e),this.options.onTextAreaBlur&&this.options.onTextAreaBlur(e)},e.prototype.onTextAreaFocus=function(e){var t;this.options.onTextAreaFocus&&this.options.onTextAreaFocus(e),this.isReadOnlyAttr&&(null===(t=null==e?void 0:e.target)||void 0===t||t.select())},Object.defineProperty(e.prototype,"question",{get:function(){return this.options.question},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.options.id()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this.options.placeholder()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this.options.className()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLength",{get:function(){if(this.options.maxLength)return this.options.maxLength()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoGrow",{get:function(){if(this.options.autoGrow)return this.options.autoGrow()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){if(this.options.rows)return this.options.rows()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){if(this.options.cols)return this.options.cols()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDisabledAttr",{get:function(){return this.options.isDisabledAttr()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReadOnlyAttr",{get:function(){if(this.options.isReadOnlyAttr)return this.options.isReadOnlyAttr()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ariaRequired",{get:function(){if(this.options.ariaRequired)return this.options.ariaRequired()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ariaLabel",{get:function(){if(this.options.ariaLabel)return this.options.ariaLabel()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ariaInvalid",{get:function(){if(this.options.ariaInvalid)return this.options.ariaInvalid()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ariaLabelledBy",{get:function(){if(this.options.ariaLabelledBy)return this.options.ariaLabelledBy()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ariaDescribedBy",{get:function(){if(this.options.ariaDescribedBy)return this.options.ariaDescribedBy()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ariaErrormessage",{get:function(){if(this.options.ariaErrormessage)return this.options.ariaErrormessage()},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this.question&&this.question.unRegisterFunctionOnPropertiesValueChanged(this.options.propertyNames,"__textarea"),this.resetElement()},e}(),Wn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Gn=function(){function e(e,t){this.question=e,this.isUnwrapped=t}return e.prototype.getValue=function(e,t,n,o){var i=gn.expressionVariables;if(0===e.length||1===e.length&&e[0].name===i.question)return this.getQuestionValue(n);if(e.length>1&&e[0].name===i.panel){var r=this.question.parent;if(r&&r.isPanel)return e.shift(),new Kn(r.questions).getValue(e,!1,n,o)}if(!this.question.isEmpty()){var s=this.question.value;if(n>=0){if(!Array.isArray(s||n>=s.length))return;s=s[n]}return new N(s).getValue(e,!1,n,o)}},e.prototype.getTextValue=function(e,t,n){return n?this.question.getDisplayValue(!0,t):t},e.prototype.getRootObj=function(){return this.question.data},e.prototype.getQuestion=function(){return this.question},e.prototype.getSurveyValue=function(e,t){var n=this.question.getSurvey();if(n)return n.getValueGetterContext().getValue(e,!1,t,!1)},e.prototype.getQuestionValue=function(e){var t=this.question,n=t.getFilteredValue(this.isUnwrapped);return e>-1&&Array.isArray(n)&&(n=e<n.length?n[e]:void 0),{isFound:!0,context:this,value:n,requireStrictCompare:t.requireStrictCompare}},e}(),Jn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wn(t,e),t.prototype.getValueFromBindedQuestions=function(e,t){"object"!=typeof t&&(t=void 0);for(var n=1===e.length?e[0].name:"",o=this.getQuestionsBySameValueNames(),i=0;i<o.length;i++){var r=o[i];if(n&&r.valuePropertyName===n&&t&&t.hasOwnProperty(n))return{isFound:!0,value:t[n],context:r.getValueGetterContext()};var s=r.getValueGetterContext().getValue(e,!1,this.getIndex(),!1);if(s&&s.isFound)return s}},t.prototype.getQuestionsBySameValueNames=function(){var e=new Array,t=this.getQuestionData();return t&&t.isQuestion?(t.parent&&t.parent.isPanel&&this.fillQuestions(t.parent.getQuestionsByValueName(t.getValueName()),t,e),0===e.length&&t.survey&&this.fillQuestions(t.survey.getQuestionsByValueName(t.getValueName()),t,e),e):e},t.prototype.fillQuestions=function(e,t,n){Array.isArray(e)&&e.forEach(function(e){e!==t&&n.push(e)})},t.prototype.getRootObj=function(){return this.getQuestionData()},t}(_),Kn=function(e){function t(t){var n=e.call(this)||this;return n.questions=t,n}return Wn(t,e),t.prototype.isSearchNameRevert=function(){return!0},t.prototype.updateValueByItem=function(e,t){for(var n=e.toLocaleLowerCase(),o=gn.expressionVariables.unwrapPostfix,i=0;i<this.questions.length;i++){var r=this.questions[i],s=r.getFilteredName().toLocaleLowerCase();if(s.toLocaleLowerCase()===n){t.isFound=!0,t.context=r.getValueGetterContext(s.endsWith(o));break}}},t}(_),Yn=function(e){function t(t){var n=e.call(this,function(){n.setCallbackResult()})||this;return n.res=!0,n.errorCountValue=0,t||(t={fireCallback:!0}),n.fireCallbackValue=t.fireCallback||!1,n.isOnValueChangedValue=t.isOnValueChanged||!1,n.focusOnFirstErrorValue=t.focusOnFirstError||!1,n.callbackResult=t.callbackResult||null,n.changeCurrentPage=t.changeCurrentPage||!1,n}return Wn(t,e),Object.defineProperty(t.prototype,"fireCallback",{get:function(){return this.fireCallbackValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOnValueChanged",{get:function(){return this.isOnValueChangedValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusOnFirstError",{get:function(){return this.focusOnFirstErrorValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"result",{get:function(){return this.res},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"runningResult",{get:function(){return this.res&&this.isRunning&&this.callbackResult?void 0:this.res},enumerable:!1,configurable:!0}),t.prototype.setErrorElement=function(e,t){Array.isArray(t)&&this.isWarningOnlyOrEmpty(t)||(this.errorCountValue++,this.res=!1,e&&(e.isQuestion?this.setQuestionError(e):e.isCollapsed&&e.expand()))},t.prototype.isWarningOnlyOrEmpty=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.isError&&n.visible)return!1}return!0},Object.defineProperty(t.prototype,"firstErrorQuestion",{get:function(){return this.firstErrorQuestionValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorCount",{get:function(){return this.errorCountValue},enumerable:!1,configurable:!0}),t.prototype.setCallbackResult=function(){this.callbackResult&&!this.isCallbackFired&&(this.isCallbackFired=!0,this.callbackResult(this.res,this.firstErrorQuestion))},t.prototype.setQuestionError=function(e){if(e.expandAllParents(),!this.firstErrorQuestionValue){if(this.firstErrorQuestionValue=e,this.focusOnFirstError||this.changeCurrentPage)if(this.focusOnFirstError)e.focus(!0);else{var t=e.getSurvey();t&&e.page&&(t.currentPage=e.page)}this.setCallbackResult()}},t}(Dn),Xn=function(e){function t(t){var n=e.call(this,t)||this;return n.customWidgetData={isNeedRender:!0},n.hasCssErrorCallback=function(){return!1},n.triggersInfo=[],n.isReadyValue=!0,n.dependedQuestions=[],n.onReadyChanged=n.addEvent(),n.isValueChangedInSurvey=!1,n.allowNotifyValueChanged=!0,n._syncPropertiesChanging=!1,n.setPropertyValueDirectly("id","sq_"+n.uniqueId),n.onCreating(),n.createNewArray("validators",function(e){e.errorOwner=n}),n.addExpressionProperty("visibleIf",function(e,t){n.visible=!0===t}),n.addExpressionProperty("enableIf",function(e,t){n.readOnly=!1===t}),n.addExpressionProperty("requiredIf",function(e,t){n.isRequired=!0===t}),n.createLocalizableString("commentText",n,!0,!0),n.createLocalizableString("requiredErrorText",n),n.createLocalizableString("commentPlaceholder",n),n.createLocalizableString("defaultDisplayValue",n),n.addTriggersInfo(),n.registerPropertyChangedHandlers(["width"],function(){n.updateQuestionCss(),n.parent&&n.parent.elementWidthChanged(n)}),n.registerPropertyChangedHandlers(["isRequired"],function(){!n.isRequired&&n.errors.length>0&&n.validate(),n.locTitle.strChanged(),n.clearCssClasses()}),n.registerPropertyChangedHandlers(["indent","rightIndent"],function(){n.resetIndents()}),n.registerPropertyChangedHandlers(["showCommentArea","showOtherItem"],function(){n.initCommentFromSurvey()}),n.registerPropertyChangedHandlers(["commentPlaceholder"],function(){n.resetRenderedCommentPlaceholder()}),n.registerFunctionOnPropertiesValueChanged(["no","readOnly","hasVisibleErrors","containsErrors"],function(){n.updateQuestionCss()}),n.registerPropertyChangedHandlers(["_isMobile"],function(){n.onMobileChanged()}),n.registerPropertyChangedHandlers(["colSpan"],function(){var e;null===(e=n.parent)||void 0===e||e.updateColumns()}),n}return Wn(t,e),t.prototype.isReadOnlyRenderDiv=function(){return this.isReadOnly&&"div"===gn.readOnly.commentRenderMode},t.prototype.allowMobileInDesignMode=function(){return!1},t.prototype.updateIsMobileFromSurvey=function(){this.setIsMobile(this.survey._isMobile)},t.prototype.setIsMobile=function(e){var t=e&&(this.allowMobileInDesignMode()||!this.isDesignMode);this.isMobile=t},t.prototype.getIsMobile=function(){return this._isMobile},Object.defineProperty(t.prototype,"isMobile",{get:function(){return this.getIsMobile()},set:function(e){this._isMobile=e},enumerable:!1,configurable:!0}),t.prototype.themeChanged=function(e){},Object.defineProperty(t.prototype,"_isMobile",{get:function(){return this.getPropertyValue("_isMobile",!1)},set:function(e){this.setPropertyValue("_isMobile",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"forceIsInputReadOnly",{get:function(){return this.getPropertyValue("forceIsInputReadOnly")},set:function(e){this.setPropertyValue("forceIsInputReadOnly",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaExpanded",{get:function(){return this.isNewA11yStructure?null:this.getPropertyValue("ariaExpanded")},set:function(e){this.setPropertyValue("ariaExpanded",e)},enumerable:!1,configurable:!0}),t.prototype.getDefaultTitle=function(){return this.name},t.prototype.createLocTitleProperty=function(){var t=this,n=e.prototype.createLocTitleProperty.call(this);return n.storeDefaultText=!0,n.onGetTextCallback=function(e,n){return e||n||(e=t.getDefaultTitle()),t.survey?t.survey.getUpdatedQuestionTitle(t,e):e},this.locProcessedTitle=new Et(this,!0),this.locProcessedTitle.sharedData=n,n},Object.defineProperty(t.prototype,"locRenderedTitle",{get:function(){return this.isSingleInputActive&&this.singleInputLocTitle?this.singleInputLocTitle:this.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentTextAreaModel",{get:function(){return this.commentTextAreaModelValue||(this.commentTextAreaModelValue=new Un(this.getCommentTextAreaOptions())),this.commentTextAreaModelValue},enumerable:!1,configurable:!0}),t.prototype.getCommentTextAreaOptions=function(){var e=this;return{question:this,id:function(){return e.commentId},propertyNames:["comment"],className:function(){return e.cssClasses.comment},placeholder:function(){return e.renderedCommentPlaceholder},isDisabledAttr:function(){return e.isInputReadOnly||!1},rows:function(){return e.commentAreaRows},autoGrow:function(){return e.autoGrowComment},maxLength:function(){return e.getOthersMaxLength()},ariaRequired:function(){return e.a11y_input_ariaRequired},ariaLabel:function(){return e.a11y_input_ariaLabel},getTextValue:function(){return e.comment},onTextAreaChange:function(t){e.onCommentChange(t)},onTextAreaInput:function(t){e.onCommentInput(t)}}},t.prototype.getSurvey=function(t){return void 0===t&&(t=!1),t?this.parent?this.parent.getSurvey(t):null:this.onGetSurvey?this.onGetSurvey():e.prototype.getSurvey.call(this)},t.prototype.getValueName=function(){return this.valueName?this.valueName.toString():this.name},Object.defineProperty(t.prototype,"valueName",{get:function(){return this.getPropertyValue("valueName","")},set:function(e){var t=this.getValueName();this.setPropertyValue("valueName",e),this.onValueNameChanged(t)},enumerable:!1,configurable:!0}),t.prototype.onValueNameChanged=function(e){this.survey&&(this.survey.questionRenamed(this,this.name,e||this.name),this.initDataFromSurvey())},t.prototype.onNameChanged=function(e){this.locTitle.strChanged(),this.survey&&this.survey.questionRenamed(this,e,this.valueName?this.valueName:e)},Object.defineProperty(t.prototype,"isReady",{get:function(){return this.isReadyValue},enumerable:!1,configurable:!0}),t.prototype.onAsyncRunningChanged=function(){this.updateIsReady()},t.prototype.ensureQuestionIsReady=function(){this.displayValue},t.prototype.waitForQuestionIsReady=function(e){var t=this;return new Promise(function(n){if(t.ensureQuestionIsReady(),t.isReady)n(),e&&e();else{var o=function(i,r){r.isReady&&(t.onReadyChanged.remove(o),n(),e&&e())};t.onReadyChanged.add(o)}})},t.prototype.updateIsReady=function(){var e=this.getIsQuestionReady();if(e)for(var t=this.getIsReadyDependsOn(),n=0;n<t.length;n++)if(!t[n].getIsQuestionReady()){e=!1;break}this.setIsReady(e)},t.prototype.getIsQuestionReady=function(){return!this.isAsyncExpressionRunning&&this.getAreNestedQuestionsReady()},t.prototype.getAreNestedQuestionsReady=function(){var e=this.getIsReadyNestedQuestions();if(!Array.isArray(e))return!0;for(var t=0;t<e.length;t++)if(!e[t].isReady)return!1;return!0},t.prototype.getIsReadyNestedQuestions=function(){return this.getNestedQuestions()},t.prototype.setIsReady=function(e){var t=this.isReadyValue;this.isReadyValue=e,t!=e&&(this.getIsReadyDependends().forEach(function(e){return e.updateIsReady()}),this.onReadyChanged.fire(this,{question:this,isReady:e,oldIsReady:t}))},t.prototype.getIsReadyDependsOn=function(){return this.getIsReadyDependendCore(!0)},t.prototype.getIsReadyDependends=function(){return this.getIsReadyDependendCore(!1)},t.prototype.getDependedQuestionsByValueName=function(e){return this.survey.questionsByValueName(this.getValueName())},t.prototype.getIsReadyDependendCore=function(e){var t=this;if(!this.survey)return[];var n=this.getDependedQuestionsByValueName(e),o=new Array;return n.forEach(function(e){e!==t&&o.push(e)}),e||(this.parentQuestion&&o.push(this.parentQuestion),this.dependedQuestions.length>0&&this.dependedQuestions.forEach(function(e){return o.push(e)})),o},t.prototype.choicesLoaded=function(){},Object.defineProperty(t.prototype,"page",{get:function(){return this.parentQuestion?this.parentQuestion.page:this.getPage(this.parent)},set:function(e){this.setPage(this.parent,e)},enumerable:!1,configurable:!0}),t.prototype.getPanels=function(){return null},t.prototype.delete=function(e){void 0===e&&(e=!0),this.removeFromParent(),e?this.dispose():this.resetDependedQuestions()},t.prototype.removeFromParent=function(){this.parent&&this.removeSelfFromList(this.parent.elements)},t.prototype.addDependedQuestion=function(e){!e||this.dependedQuestions.indexOf(e)>-1||this.dependedQuestions.push(e)},t.prototype.removeDependedQuestion=function(e){if(e){var t=this.dependedQuestions.indexOf(e);t>-1&&this.dependedQuestions.splice(t,1)}},t.prototype.updateDependedQuestions=function(){for(var e=0;e<this.dependedQuestions.length;e++)this.dependedQuestions[e].updateDependedQuestion()},t.prototype.updateDependedQuestion=function(){},t.prototype.resetDependedQuestion=function(){},Object.defineProperty(t.prototype,"isFlowLayout",{get:function(){return"flow"===this.getLayoutType()},enumerable:!1,configurable:!0}),t.prototype.getLayoutType=function(){return this.parent?this.parent.getChildrenLayoutType():"row"},t.prototype.isLayoutTypeSupported=function(e){return"flow"!==e},Object.defineProperty(t.prototype,"visible",{get:function(){return this.getPropertyValue("visible")},set:function(e){e!=this.visible&&(this.setPropertyValue("visible",e),this.onVisibleChangedCore(),this.notifySurveyVisibilityChanged())},enumerable:!1,configurable:!0}),t.prototype.onVisibleChanged=function(){var e=this.getPropertyValue("isVisible");this.onVisibleChangedCore();var t=this.getPropertyValue("isVisible");void 0!==e&&e!==t&&this.notifySurveyVisibilityChanged()},t.prototype.onVisibleChangedCore=function(){this.updateIsVisibleProp(),!this.isVisible&&this.errors&&this.errors.length>0&&(this.errors=[])},t.prototype.notifyStateChanged=function(t){e.prototype.notifyStateChanged.call(this,t),this.isCollapsed&&this.onHidingContent()},t.prototype.updateElementVisibility=function(){this.updateIsVisibleProp()},t.prototype.updateIsVisibleProp=function(){var e=this.getPropertyValue("isVisible"),t=this.isVisible;e!==t&&(this.setPropertyValue("isVisible",t),t||this.onHidingContent()),t!==this.visible&&this.areInvisibleElementsShowing&&this.updateQuestionCss(!0)},Object.defineProperty(t.prototype,"useDisplayValuesInDynamicTexts",{get:function(){return this.getPropertyValue("useDisplayValuesInDynamicTexts")},set:function(e){this.setPropertyValue("useDisplayValuesInDynamicTexts",e)},enumerable:!1,configurable:!0}),t.prototype.getUseDisplayValuesInDynamicTexts=function(){return this.useDisplayValuesInDynamicTexts},Object.defineProperty(t.prototype,"visibleIf",{get:function(){return this.getPropertyValue("visibleIf","")},set:function(e){this.setPropertyValue("visibleIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return!(this.survey&&this.survey.areEmptyElementsHidden&&this.isEmpty())&&(!!this.areInvisibleElementsShowing||this.isVisibleCore())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisibleInSurvey",{get:function(){return this.isVisible&&this.isParentVisible},enumerable:!1,configurable:!0}),t.prototype.isVisibleCore=function(){return this.visible},Object.defineProperty(t.prototype,"visibleIndex",{get:function(){return this.getPropertyValue("visibleIndex",-1)},enumerable:!1,configurable:!0}),t.prototype.onHidingContent=function(){},Object.defineProperty(t.prototype,"showNumber",{get:function(){return this.getPropertyValue("showNumber")},set:function(e){this.setPropertyValue("showNumber",e),this.notifySurveyVisibilityChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideNumber",{get:function(){return!this.showNumber},set:function(e){this.showNumber=!e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAllowTitleLeft",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"question"},Object.defineProperty(t.prototype,"isQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.moveTo=function(e,t){return void 0===t&&(t=null),this.moveToBase(this.parent,e,t)},t.prototype.getProgressInfo=function(){return this.hasInput?{questionCount:1,answeredQuestionCount:this.isEmpty()?0:1,requiredQuestionCount:this.isRequired?1:0,requiredAnsweredQuestionCount:!this.isEmpty()&&this.isRequired?1:0}:e.prototype.getProgressInfo.call(this)},t.prototype.runTriggerInfo=function(e,t,n){var o=this;this.runExpressionByProperty(e.name,n,function(t){e.doComplete(t,n)},function(n){return!!e.canRun()&&(!t||o.canExecuteTriggerByKeys(t,n,o.getExpressionByProperty(e.secondName)))})},t.prototype.canExecuteTriggerByKeys=function(e,t,n){!t&&n&&(t=n,n=void 0);var o=this.canExecuteTriggerByKeysCore(e,t);return"var"===o||(n?""!==this.canExecuteTriggerByKeysCore(e,n):"func"===o||"const"===o)},t.prototype.canExecuteTriggerByKeysCore=function(e,t){if(!t.expression)return"";var n=t.getVariables();return Array.isArray(n)&&0!==n.length?(new j).isAnyKeyChanged(e,n)?"var":"":t.hasFunction()?"func":"const"},t.prototype.getValueGetterContext=function(e){return new Gn(this,e)},t.prototype.addTriggersInfo=function(){var e=this;this.addTriggerInfo({name:"resetValueIf",canRun:function(){return!e.isEmpty()},doComplete:function(t,n){!0===t&&(e.startSetValueOnExpression(),e.updateValueWithDefaultsOrClear(),e.finishSetValueOnExpression())}}),this.addTriggerInfo({name:"setValueIf",secondName:"setValueExpression",canRun:function(){return!0},doComplete:function(t,n){if(t)if(e.setValueExpression){var o={name:"setValueExpression",canRun:function(){return!0},doComplete:function(t,n){return e.runExpressionSetValue(t)}};e.runTriggerInfo(o,void 0,n)}else e.clearValue()}}),this.addTriggerInfo({name:"setValueExpression",canRun:function(){return!e.setValueIf},doComplete:function(t,n){return e.runExpressionSetValue(t)}})},t.prototype.addTriggerInfo=function(e){this.triggersInfo.push(e)},t.prototype.runTriggers=function(e,t,n){var o=this;if(!(this.isSettingQuestionValue||this.parentQuestion&&this.parentQuestion.getValueName()===e)){n||((n={})[e]=t);var i=this.getDataFilteredProperties();this.triggersInfo.forEach(function(e){o.runTriggerInfo(e,n,i)})}},t.prototype.runConditions=function(){this.data&&!this.isLoadingFromJson&&(this.isDesignMode||this.runCondition(this.getDataFilteredProperties()),this.locStrsChanged())},t.prototype.setSurveyImpl=function(t,n){e.prototype.setSurveyImpl.call(this,t),this.survey&&(this.survey.questionCreated(this),!0!==n&&this.runConditions(),this.visible||this.updateIsVisibleProp(),this.updateIsMobileFromSurvey())},Object.defineProperty(t.prototype,"parent",{get:function(){return this.getPropertyValue("parent",null)},set:function(e){this.parent!==e&&(this.removeFromParent(),this.setPropertyValue("parent",e),e&&this.updateQuestionCss(),this.onParentChanged())},enumerable:!1,configurable:!0}),t.prototype.onParentChanged=function(){},t.prototype.calculateSingleInputQuestion=function(){if(this.isSingleInputActive){var e=this.getSingleInputQuestions();if(Array.isArray(e)&&e.length>0){var t=e[0];return this.onBeforeSetSingleInputQuestion(t),t}}},Object.defineProperty(t.prototype,"singleInputQuestion",{get:function(){var e=this,t=this.survey;if(t&&t.isSingleVisibleInput)return this.getPropertyValue("singleInputQuestion",void 0,function(){return e.calculateSingleInputQuestion()})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentSingleInputQuestion",{get:function(){for(var e=this.singleInputQuestion;e&&e.singleInputQuestion&&e.singleInputQuestion!==e;)e=e.singleInputQuestion;return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentSingleInputParentQuestion",{get:function(){var e=this.currentSingleInputQuestion;return e?e.singleInputQuestion===e?e:e.parentQuestion||this:this},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"singleInputSummary",{get:function(){var e=this;return this.getPropertyValue("singleInputSummary",void 0,function(){if(e.supportNestedSingleInput()){var t=e.singleInputQuestion;if(t&&t===e){var n=e.createSingleInputSummary();return n&&(e.calcSingleInputActions(),e.resetPropertyValue("singleInputLocTitle")),n}}})},enumerable:!1,configurable:!0}),t.prototype.createSingleInputSummary=function(){},Object.defineProperty(t.prototype,"rootParentQuestion",{get:function(){for(var e=this;e.parentQuestion;)e=e.parentQuestion;return e},enumerable:!1,configurable:!0}),t.prototype.getParentQuestions=function(){for(var e=new Array,t=this;t.parentQuestion;)e.push(t.parentQuestion),t=t.parentQuestion;return e},t.prototype.resetSingleInput=function(){this.resetSingleInputCore()},t.prototype.resetSingleInputCore=function(){var e=this.getPropertyValue("singleInputQuestion");this.resetPropertyValue("singleInputQuestion"),e&&this.onSingleInputChanged()},t.prototype.onSingleInputChanged=function(e){var t,n;void 0===e&&(e=!0),e&&this.resetSingleInputSummary(),null===(t=this.singleInputLocTitle)||void 0===t||t.strChanged(),this.resetPropertyValue("singleInputLocTitle"),this.calcSingleInputActions(),null===(n=this.survey)||void 0===n||n.updateNavigationElements()},t.prototype.resetSingleInputSummary=function(){var e;null===(e=this.singleInputSummary)||void 0===e||e.dispose(),this.resetPropertyValue("singleInputSummary")},t.prototype.validateSingleInput=function(){var e=this.currentSingleInputQuestion;return!e||e.validate(!0,!0)},t.prototype.getSingleInputElementPos=function(){if(this.singleInputQuestion===this)return 0;var e=this.currentSingleInputParentQuestion;if(e!==this&&2===e.getSingleInputElementPos())return 2;var t=this.singleInputQuestion,n=this.getSingleInputQuestions();if(n.length<2)return 0;var o=n.indexOf(t);return 0===o?-1:o>=n.length-1?1:2},Object.defineProperty(t.prototype,"isSingleInputActive",{get:function(){var e=this.survey;if(!e||!e.isSingleVisibleInput)return!1;var t=e.currentSingleQuestion;return!!t&&t===this.rootParentQuestion},enumerable:!1,configurable:!0}),t.prototype.singleInputOnAddItem=function(e){this.isSingleInputActive&&(e&&this.singleInputSummary?this.resetSingleInputSummary():this.setSingleQuestionOnChange(Number.MAX_VALUE))},t.prototype.singleInputOnRemoveItem=function(e){this.isSingleInputActive&&(this.singleInputSummary?this.onSingleInputChanged():this.setSingleQuestionOnChange(e))},t.prototype.getSingleQuestionOnChange=function(e){return null},t.prototype.setSingleQuestionOnChange=function(e){var t=this.getSingleQuestionOnChange(e);t?this.setSingleInputQuestion(t):this.resetSingleInput()},t.prototype.onSetAsSingleInput=function(){this.isSingleInputSummaryShown=!1;var e=!this.wasRendered||this.singleInputSummary;this.onFirstRendering(),e&&(this.resetSingleInputSummary(),this.resetPropertyValue("singleInputQuestion"),this.resetPropertyValue("singleInputLocTitle"))},t.prototype.nextSingleInput=function(){return this.nextPrevSingleInput(1)},t.prototype.prevSingleInput=function(){return this.nextPrevSingleInput(-1)},t.prototype.getSingleInputAddText=function(){var e=this.currentSingleInputQuestion;if(e){if(e.singleInputSummary)return e.getSingleInputAddTextCore();var t=this.getSingleInputQuestions(),n=Array.isArray(t)?t.length:0;return n>0&&t[n-1]===e?this.getSingleInputAddTextCore():void 0}},t.prototype.singleInputAddItem=function(e){e&&!this.validateSingleInput()||this.currentSingleInputQuestion.singleInputAddItemCore()},t.prototype.singleInputRemoveItem=function(){var e=this.singleInputQuestion;e&&e!==this.singleInputParentQuestion&&this.singleInputRemoveItemCore(e)},Object.defineProperty(t.prototype,"singleInputLocTitle",{get:function(){var e=this;return this.getPropertyValue("singleInputLocTitle",void 0,function(){return e.getSingleQuestionLocTitle()})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"singleInputActions",{get:function(){var e=this;return this.getPropertyValue("singleInputActions",void 0,function(){return e.createSingleInputActions()})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"singleInputHasActions",{get:function(){var e=this;return this.getPropertyValue("singleInputHasActions",void 0,function(){return e.createSingleInputActions()})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"singleInputHideHeader",{get:function(){var e;return!!(null===(e=this.singleInputQuestion)||void 0===e?void 0:e.singleInputQuestion)&&this.singleInputQuestion!==this},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sinleInputHasActions",{set:function(e){this.setPropertyValue("singleInputHasActions",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"singleInputParentQuestion",{get:function(){var e;return(null===(e=this.singleInputQuestion)||void 0===e?void 0:e.parentQuestion)||this},enumerable:!1,configurable:!0}),t.prototype.createSingleInputActions=function(){var e;if((null===(e=this.survey)||void 0===e?void 0:e.currentSingleQuestion)===this){var t=new qe;return t.actions=this.getSingleQuestionActions(),t}},t.prototype.calcSingleInputActions=function(){if(this.parentQuestion)this.parentQuestion.calcSingleInputActions();else{var e=this.getSingleQuestionActions();this.singleInputActions&&(this.singleInputActions.actions=e),this.sinleInputHasActions=e.length>0||void 0}},t.prototype.getSingleQuestionActions=function(){var e=new Array,t=this.currentSingleInputParentQuestion;if(!t||t===this)return e;var n=t.getSingleInputQuestions(),o=new Array,i=void 0;n.length>1&&n[0]===t&&(i=t,o.push(t));for(var r=t.parentQuestion;r;)o.push(r),r=r.parentQuestion;for(var s=function(t){var n=o[t];if(n!==i){var r=n.singleInputLocTitle,s=new dt({id:"single-action"+n.id,locTitle:r,css:a.cssClasses.breadcrumbsItem,innerCss:a.cssClasses.breadcrumbsItemButton,action:function(){n.singleInputMoveToFirst()}});s.cssClasses={},e.push(s)}},a=this,l=o.length-1;l>=0;l--)s(l);return e},t.prototype.singleInputMoveToFirst=function(){var e=this.singleInputQuestion;e&&e!==this&&e.singleInputMoveToFirst(),this.singleInputMoveToFirstCore()},t.prototype.singleInputMoveToFirstCore=function(){},t.prototype.getSingleQuestionLocTitle=function(){return this.singleInputSummary?void 0:this.getSingleQuestionLocTitleCore()},t.prototype.getSingleQuestionLocTitleCore=function(){},t.prototype.supportNestedSingleInput=function(){var e;return null===(e=this.survey)||void 0===e?void 0:e.supportsNestedSingleInput(this)},t.prototype.getSingleInputQuestions=function(){var e=this;if(!this.supportNestedSingleInput())return[];var t=this.getPropertyValue("singleInputQuestion");if(t===this)return[this];var n=this.getSingleInputQuestionsCore(t,!t||!this.isSingleInputSummaryShown);return this.survey&&this.survey.updateNestedSingleQuestions(this,n),n.forEach(function(t){t!==e&&e.onSingleInputQuestionAdded(t)}),n},t.prototype.getSingleInputQuestionsCore=function(e,t){return this.getNestedQuestions(!0,!1)},t.prototype.onSingleInputQuestionAdded=function(e){},t.prototype.fillSingleInputQuestionsInContainer=function(e,t){},t.prototype.getSingleInputQuestionsForDynamic=function(e,t){var n=new Array;return e&&e!==this&&t.indexOf(e)<0&&this.fillSingleInputQuestionsInContainer(n,e),t.forEach(function(e){return n.push(e)}),this.isSingleInputSummaryShown&&n.length>0&&n.unshift(this),n.push(this),n},t.prototype.getSingleInputAddTextCore=function(){},t.prototype.singleInputAddItemCore=function(){},t.prototype.singleInputRemoveItemCore=function(e){},t.prototype.setSingleInputQuestionCore=function(e){this.onBeforeSetSingleInputQuestion(e),this.setPropertyValue("singleInputQuestion",e)},t.prototype.onBeforeSetSingleInputQuestion=function(e){e.onFirstRendering(),e===this&&(this.isSingleInputSummaryShown=!0)},t.prototype.setSingleInputQuestion=function(e,t){this.singleInputQuestion!==e&&(this.setSingleInputQuestionCore(e),this.onSingleInputChanged(!t||e!==this))},t.prototype.nextPrevSingleInput=function(e){for(var t=this.currentSingleInputParentQuestion;t&&t!==this;){if(t.nextPrevSingleInput(e))return!0;t=t.parentQuestion}var n=this.singleInputQuestion;if(!n)return!1;var o=this.getSingleInputQuestions(),i=o.indexOf(n);if(i<0){if(0===o.length)return!1;i=0,e=0}return!((i+=e)<0||i>=o.length||(this.setSingleInputQuestion(o[i],e<0),0))},Object.defineProperty(t.prototype,"hasTitle",{get:function(){return"hidden"!==this.getTitleLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleLocation",{get:function(){return this.getPropertyValue("titleLocation")},set:function(e){var t="hidden"==this.titleLocation||"hidden"==e;this.setPropertyValue("titleLocation",e.toLowerCase()),this.updateQuestionCss(),t&&this.notifySurveyVisibilityChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTitle",{get:function(){return"hidden"!==this.getTitleLocation()},set:function(e){this.titleLocation=e?"default":"hidden"},enumerable:!1,configurable:!0}),t.prototype.getTitleOwner=function(){return this},t.prototype.getIsTitleRenderedAsString=function(){return"hidden"===this.titleLocation},t.prototype.notifySurveyOnChildrenVisibilityChanged=function(){return!1},t.prototype.notifySurveyVisibilityChanged=function(){if(this.canUpdateValueOnVisibleChanged()){this.survey.questionVisibilityChanged(this,this.isVisible,!this.parentQuestion||this.parentQuestion.notifySurveyOnChildrenVisibilityChanged());var e=this.isClearValueOnHidden;this.visible||this.clearValueOnHidding(e),e&&this.isVisibleInSurvey&&this.updateValueWithDefaults()}},t.prototype.clearValueOnHidding=function(e){e&&this.clearValueIfInvisible()},Object.defineProperty(t.prototype,"titleWidth",{get:function(){if(this.parent&&"left"===this.getTitleLocation()){var e=this.parent.getColumsForElement(this),t=e.length;if(0!==t&&e[0].questionTitleWidth)return e[0].questionTitleWidth;var n=this.getQuestionParentTitleWidth(),o=this.getPercentQuestionTitleWidth(n);if(!o&&this.parent){var i=n;return i&&!isNaN(i)&&(i+="px"),i}return o/(t||1)+"%"}},enumerable:!1,configurable:!0}),t.prototype.getQuestionParentTitleWidth=function(){if(this.parent){var e=this.parent.getQuestionTitleWidth();return!e&&this.parentQuestion?this.parentQuestion.getQuestionParentTitleWidth():e}},t.prototype.getPercentQuestionTitleWidth=function(e){if(e&&"%"===e[e.length-1])return parseInt(e)},t.prototype.getTitleLocation=function(){if(this.isFlowLayout)return"hidden";var e=this.getTitleLocationCore();return"left"!==e||this.isAllowTitleLeft||(e="top"),e},t.prototype.getTitleLocationCore=function(){return"default"!==this.titleLocation?this.titleLocation:this.getParentTitleLocation()},t.prototype.getParentTitleLocation=function(){return this.parent?this.parent.getQuestionTitleLocation():this.survey?this.survey.questionTitleLocation:"top"},Object.defineProperty(t.prototype,"hasTitleOnLeft",{get:function(){return this.hasTitle&&"left"===this.getTitleLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleOnTop",{get:function(){return this.hasTitle&&"top"===this.getTitleLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleOnBottom",{get:function(){return this.hasTitle&&"bottom"===this.getTitleLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleOnLeftTop",{get:function(){if(!this.hasTitle)return!1;var e=this.getTitleLocation();return"left"===e||"top"===e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorLocation",{get:function(){return this.getPropertyValue("errorLocation")},set:function(e){this.setPropertyValue("errorLocation",e)},enumerable:!1,configurable:!0}),t.prototype.getErrorLocation=function(){return"default"!==this.errorLocation?this.errorLocation:this.parentQuestion?this.parentQuestion.getChildErrorLocation(this):this.parent?this.parent.getQuestionErrorLocation():this.survey?this.survey.questionErrorLocation:"top"},t.prototype.getChildErrorLocation=function(e){return this.getErrorLocation()},Object.defineProperty(t.prototype,"hasInput",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return this.hasInput},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputId",{get:function(){return this.id+"i"},enumerable:!1,configurable:!0}),t.prototype.getDefaultTitleValue=function(){return this.name},t.prototype.getDefaultTitleTagName=function(){return gn.titleTags.question},Object.defineProperty(t.prototype,"descriptionLocation",{get:function(){return this.getPropertyValue("descriptionLocation")},set:function(e){this.setPropertyValue("descriptionLocation",e),this.updateQuestionCss()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasDescriptionUnderTitle",{get:function(){return"underTitle"==this.getDescriptionLocation()&&this.hasDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasDescriptionUnderInput",{get:function(){return"underInput"==this.getDescriptionLocation()&&this.hasDescription},enumerable:!1,configurable:!0}),t.prototype.getDescriptionLocation=function(){return"default"!==this.descriptionLocation?this.descriptionLocation:this.survey?this.survey.questionDescriptionLocation:"underTitle"},t.prototype.needClickTitleFunction=function(){return e.prototype.needClickTitleFunction.call(this)||this.hasInput},t.prototype.processTitleClick=function(){var t=this;if(e.prototype.processTitleClick.call(this),!this.isCollapsed)return setTimeout(function(){t.focus()},1),!0},Object.defineProperty(t.prototype,"requiredErrorText",{get:function(){return this.getLocalizableStringText("requiredErrorText")},set:function(e){this.setLocalizableStringText("requiredErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRequiredErrorText",{get:function(){return this.getLocalizableString("requiredErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentText",{get:function(){return this.getLocalizableStringText("commentText")},set:function(e){this.setLocalizableStringText("commentText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCommentText",{get:function(){return this.getLocalizableString("commentText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentPlaceholder",{get:function(){return this.getLocalizableStringText("commentPlaceholder")},set:function(e){this.setLocalizableStringText("commentPlaceholder",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCommentPlaceholder",{get:function(){return this.getLocalizableString("commentPlaceholder")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentPlaceHolder",{get:function(){return this.commentPlaceholder},set:function(e){this.commentPlaceholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedCommentPlaceholder",{get:function(){var e;return null!==(e=this.getPropertyValue("renderedCommentPlaceholder"))&&void 0!==e?e:this.isReadOnly?void 0:this.commentPlaceholder},enumerable:!1,configurable:!0}),t.prototype.resetRenderedCommentPlaceholder=function(){this.resetPropertyValue("renderedCommentPlaceholder")},Object.defineProperty(t.prototype,"defaultDisplayValue",{get:function(){return this.getLocalizableStringText("defaultDisplayValue")},set:function(e){this.setLocalizableStringText("defaultDisplayValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locDefaultDisplayValue",{get:function(){return this.getLocalizableString("defaultDisplayValue")},enumerable:!1,configurable:!0}),t.prototype.getAllErrors=function(){return this.errors.slice()},t.prototype.getErrorByType=function(e){for(var t=0;t<this.errors.length;t++)if(this.errors[t].getErrorType()===e)return this.errors[t];return null},Object.defineProperty(t.prototype,"customWidget",{get:function(){return this.isCustomWidgetRequested||this.customWidgetValue||(this.isCustomWidgetRequested=!0,this.updateCustomWidget()),this.customWidgetValue},enumerable:!1,configurable:!0}),t.prototype.updateCustomWidget=function(){this.customWidgetValue=zn.Instance.getCustomWidget(this)},t.prototype.localeChanged=function(){e.prototype.localeChanged.call(this),this.resetRenderedCommentPlaceholder(),this.localeChangedCallback&&this.localeChangedCallback()},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isContainer",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.onCommentInput=function(e){this.isInputTextUpdate&&e.target&&(this.comment=e.target.value)},t.prototype.onCommentChange=function(e){this.comment=e.target.value,this.comment!==e.target.value&&(e.target.value=this.comment)},t.prototype.afterRenderQuestionElement=function(e){this.survey&&this.hasSingleInput&&this.survey.afterRenderQuestionInput(this,e)},t.prototype.afterRender=function(e){var t=this;this.afterRenderCore(e),this.survey&&(this.survey.afterRenderQuestion(this,e),this.afterRenderQuestionCallback&&this.afterRenderQuestionCallback(this,e),(this.supportComment()||this.supportOther())&&(this.commentElements=[],this.getCommentElementsId().forEach(function(n){var o=null==e?void 0:e.querySelector("#".concat(n));o&&t.commentElements.push(o)})),this.checkForResponsiveness(e))},t.prototype.afterRenderCore=function(t){e.prototype.afterRenderCore.call(this,t)},t.prototype.getCommentElementsId=function(){return[this.commentId]},t.prototype.beforeDestroyQuestionElement=function(e){this.commentElements=void 0},Object.defineProperty(t.prototype,"processedTitle",{get:function(){return this.locProcessedTitle.textOrHtml||this.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullTitle",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titlePattern",{get:function(){return this.survey?this.survey.questionTitlePattern:"numTitleRequire"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextOnStart",{get:function(){return this.isRequired&&"requireNumTitle"==this.titlePattern},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextBeforeTitle",{get:function(){return this.isRequired&&"numRequireTitle"==this.titlePattern&&""!==this.requiredMark},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextAfterTitle",{get:function(){return this.isRequired&&"numTitleRequire"==this.titlePattern&&""!==this.requiredMark},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startWithNewLine",{get:function(){return this.getPropertyValue("startWithNewLine")},set:function(e){this.startWithNewLine!=e&&this.setPropertyValue("startWithNewLine",e)},enumerable:!1,configurable:!0}),t.prototype.calcCssClasses=function(e){var t={error:{}};return this.copyCssClasses(t,e.question),this.copyCssClasses(t.error,e.error),this.updateCssClasses(t,e),t},t.prototype.onCalcCssClasses=function(t){e.prototype.onCalcCssClasses.call(this,t),this.survey&&this.survey.updateQuestionCssClasses(this,t),this.onUpdateCssClassesCallback&&this.onUpdateCssClassesCallback(t)},Object.defineProperty(t.prototype,"cssRoot",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssRoot","")},enumerable:!1,configurable:!0}),t.prototype.setCssRoot=function(e){this.setPropertyValue("cssRoot",e)},t.prototype.getCssRoot=function(t){var n=this.hasCssError(!0);return(new _e).append(e.prototype.getCssRoot.call(this,t)).append(this.isFlowLayout&&!this.isDesignMode?t.flowRoot:t.mainRoot).append(t.titleLeftRoot,!this.isFlowLayout&&this.hasTitleOnLeft).append(t.titleTopRoot,!this.isFlowLayout&&this.hasTitleOnTop).append(t.titleBottomRoot,!this.isFlowLayout&&this.hasTitleOnBottom).append(t.descriptionUnderInputRoot,!this.isFlowLayout&&this.hasDescriptionUnderInput).append(t.hasError,n).append(t.hasErrorTop,n&&"top"==this.getErrorLocation()).append(t.hasErrorBottom,n&&"bottom"==this.getErrorLocation()).append(t.small,!this.width).append(t.answered,this.isAnswered).append(t.noPointerEventsMode,this.isReadOnlyAttr).toString()},Object.defineProperty(t.prototype,"cssHeader",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssHeader","")},enumerable:!1,configurable:!0}),t.prototype.setCssHeader=function(e){this.setPropertyValue("cssHeader",e)},t.prototype.getCssHeader=function(e){return(new _e).append(e.header).append(e.headerTop,this.hasTitleOnTop).append(e.headerLeft,this.hasTitleOnLeft).append(e.headerBottom,this.hasTitleOnBottom).toString()},t.prototype.supportContainerQueries=function(){return!1},Object.defineProperty(t.prototype,"cssContent",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssContent","")},enumerable:!1,configurable:!0}),t.prototype.setCssContent=function(e){this.setPropertyValue("cssContent",e)},t.prototype.getCssContent=function(e){return(new _e).append(e.content).append(e.contentSupportContainerQueries,this.supportContainerQueries()).append(e.contentLeft,this.hasTitleOnLeft).toString()},Object.defineProperty(t.prototype,"cssTitle",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssTitle","")},enumerable:!1,configurable:!0}),t.prototype.setCssTitle=function(e){this.setPropertyValue("cssTitle",e)},t.prototype.getCssTitle=function(t){return(new _e).append(e.prototype.getCssTitle.call(this,t)).append(t.singleInputTitle,!!this.singleInputQuestion).append(t.titleOnAnswer,!this.containsErrors&&this.isAnswered).append(t.titleEmpty,!this.title.trim()).toString()},Object.defineProperty(t.prototype,"cssDescription",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssDescription","")},enumerable:!1,configurable:!0}),t.prototype.setCssDescription=function(e){this.setPropertyValue("cssDescription",e)},t.prototype.getCssDescription=function(e){return(new _e).append(e.description).append(e.descriptionUnderInput,"underInput"==this.getDescriptionLocation()).toString()},Object.defineProperty(t.prototype,"showErrorsAboveQuestion",{get:function(){return"top"===this.getErrorLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showErrorsBelowQuestion",{get:function(){return"bottom"===this.getErrorLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssError",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssError","")},enumerable:!1,configurable:!0}),t.prototype.setCssError=function(e){this.setPropertyValue("cssError",e)},t.prototype.getCssError=function(e){return(new _e).append(e.error.root).append(e.error.warningMode,"warning"===this.currentNotificationType).append(e.error.infoMode,"info"===this.currentNotificationType).append(e.errorsContainer).append(e.errorsContainerTop,this.showErrorsAboveQuestion).append(e.errorsContainerBottom,this.showErrorsBelowQuestion).toString()},t.prototype.hasCssError=function(e){for(var t=this.errors,n=0;n<t.length;n++){var o=t[n];if(o.visible&&(e||o.isError))return!0}return this.hasCssErrorCallback()},t.prototype.updateVisibleErrors=function(){e.prototype.updateVisibleErrors.call(this),this.updateQuestionCss()},Object.defineProperty(t.prototype,"isSingleInputQuestionMode",{get:function(){var e;return!!this.parentQuestion&&(null===(e=this.survey)||void 0===e?void 0:e.isSingleVisibleInput)},enumerable:!1,configurable:!0}),t.prototype.getIsNested=function(){return!this.isSingleInputQuestionMode&&e.prototype.getIsNested.call(this)},t.prototype.getHasFrameV2=function(){return!!this.isSingleInputQuestionMode||e.prototype.getHasFrameV2.call(this)},t.prototype.getRootCss=function(){return(new _e).append(this.cssRoot,!this.singleInputQuestion).append(this.cssClasses.mobile,this.isMobile).append(this.cssClasses.readOnly,this.isReadOnlyStyle).append(this.cssClasses.disabled,this.isDisabledStyle).append(this.cssClasses.preview,this.isPreviewStyle).append(this.cssClasses.invisible,!this.isDesignMode&&this.areInvisibleElementsShowing&&!this.visible).toString()},t.prototype.getQuestionRootCss=function(){return(new _e).append(this.cssClasses.root).append(this.cssClasses.rootMobile,this.isMobile).toString()},t.prototype.updateElementCss=function(t){this.wasRendered?(e.prototype.updateElementCss.call(this,t),t&&this.updateQuestionCss(!0)):this.clearCssClasses(),this.resetIndents()},t.prototype.updateQuestionCss=function(e){!this.isLoadingFromJson&&this.survey&&(this.wasRendered?this.updateElementCssCore(this.cssClasses):this.isRequireUpdateElements=!0)},t.prototype.ensureElementCss=function(){this.cssClassesValue||this.updateQuestionCss(!0)},t.prototype.updateElementCssCore=function(e){this.setCssRoot(this.getCssRoot(e)),this.setCssHeader(this.getCssHeader(e)),this.setCssContent(this.getCssContent(e)),this.setCssTitle(this.getCssTitle(e)),this.setCssDescription(this.getCssDescription(e)),this.setCssError(this.getCssError(e))},t.prototype.updateCssClasses=function(e,t){if(t.question){var n=t[this.getCssType()],o=(new _e).append(e.title).append(t.question.titleRequired,this.isRequired);e.title=o.toString();var i=(new _e).append(e.root).append(n,this.isRequired&&!!t.question.required);if(null==n)e.root=i.toString();else if("string"==typeof n||n instanceof String)e.root=i.append(n.toString()).toString();else for(var r in e.root=i.toString(),n)e[r]=n[r]}},t.prototype.getCssType=function(){return this.getType()},Object.defineProperty(t.prototype,"renderCssRoot",{get:function(){return this.cssClasses.root||void 0},enumerable:!1,configurable:!0}),t.prototype.calcPaddingLeft=function(){return this.getIndentSize(this.indent)},t.prototype.calcPaddingRight=function(){return this.getIndentSize(this.rightIndent)},t.prototype.getIndentSize=function(e){return e<1||!this.getSurvey()||!this.cssClasses||!this.cssClasses.indent?"":e*this.cssClasses.indent+"px"},t.prototype.focus=function(e,t){var n=this;if(void 0===e&&(e=!1),!this.isDesignMode&&this.isVisible&&!this.isReadOnly&&this.survey){var o=this.page,i=!!o&&this.survey.activePage!==o,r=this.survey.isSingleVisibleInput;if(i&&!r)this.survey.focusQuestionByInstance(this,e);else if(r){this.survey.currentSingleQuestion=this.rootParentQuestion;for(var s=this.getParentQuestions(),a=s.length-1;a>=1;a--)a===s.length-1&&s[a].setSingleInputQuestion(s[a-1]);s.length>0&&s[0].setSingleInputQuestion(this),this.focusInputElement(e)}else{this.expandAllParents();var l=this.survey.isSmoothScrollEnabled?{behavior:"smooth"}:void 0;this.survey.scrollElementToTop(this,this,null,this.id,t,l,void 0,function(){n.focusInputElement(e)})}}},t.prototype.focusInputElement=function(e){var t,n=e?this.getFirstErrorInputElementId():this.getFirstInputElementId(),o=null===(t=this.survey)||void 0===t?void 0:t.rootElement;(Tt.FocusElement(n,!1,o)||this.customWidget)&&this.fireCallback(this.focusCallback)},Object.defineProperty(t.prototype,"isValidateVisitedEmptyFields",{get:function(){return this.supportEmptyValidation()&&!!this.survey&&this.survey.getValidateVisitedEmptyFields()&&this.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.supportEmptyValidation=function(){return!1},t.prototype.onBlur=function(e){this.onBlurCore(e)},t.prototype.onFocus=function(e){this.onFocusCore(e)},t.prototype.onBlurCore=function(e){this.isFocusEmpty&&this.isEmpty()&&this.validate(!0)},t.prototype.onFocusCore=function(e){this.isFocusEmpty=this.isValidateVisitedEmptyFields},t.prototype.expandAllParents=function(){this.expandAllParentsCore(this)},t.prototype.expandAllParentsCore=function(e){e&&(e.isCollapsed&&e.expand(),this.expandAllParentsCore(e.parent),this.expandAllParentsCore(e.parentQuestion))},t.prototype.focusIn=function(){!this.survey||this.isDisposed||this.isContainer||this.survey.whenQuestionFocusIn(this)},t.prototype.fireCallback=function(e){e&&e()},t.prototype.getOthersMaxLength=function(){return this.survey&&this.survey.maxCommentLength>0?this.survey.maxCommentLength:null},t.prototype.onCreating=function(){},t.prototype.getFirstQuestionToFocus=function(e){return this.hasInput&&(!e||this.currentErrorCount>0)?this:null},t.prototype.getFirstInputElementId=function(){return this.inputId},t.prototype.getFirstErrorInputElementId=function(){return this.getFirstInputElementId()},t.prototype.supportComment=function(){var e=this.getPropertyByName("showCommentArea");return!e||e.visible},t.prototype.supportOther=function(){return!1},Object.defineProperty(t.prototype,"isRequired",{get:function(){return this.getPropertyValue("isRequired")},set:function(e){this.setPropertyValue("isRequired",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredIf",{get:function(){return this.getPropertyValue("requiredIf","")},set:function(e){this.setPropertyValue("requiredIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCommentArea",{get:function(){return this.getPropertyValue("showCommentArea",!1)},set:function(e){this.supportComment()&&this.setPropertyValue("showCommentArea",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasComment",{get:function(){return this.showCommentArea},set:function(e){this.showCommentArea=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.getPropertyValue("id")},set:function(e){this.setPropertyValue("id",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaTitleId",{get:function(){return this.id+"_ariaTitle"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaDescriptionId",{get:function(){return this.id+"_ariaDescription"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentId",{get:function(){return this.id+"_comment"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requireUpdateCommentValue",{get:function(){return this.showCommentArea},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){var e=!!this.parent&&this.parent.isReadOnly,t=!!this.parentQuestion&&this.parentQuestion.isReadOnly,n=!!this.survey&&this.survey.isDisplayMode,o=!!this.readOnlyCallback&&this.readOnlyCallback();return this.readOnly||e||n||t||o},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInputReadOnly",{get:function(){return void 0!==this.forceIsInputReadOnly?this.forceIsInputReadOnly:this.isReadOnly||this.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedInputReadOnly",{get:function(){return this.isInputReadOnly?"":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedInputDisabled",{get:function(){return this.isInputReadOnly?"":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnlyAttr",{get:function(){return this.isReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDisabledAttr",{get:function(){return this.isDesignMode||!!this.readOnlyCallback&&this.readOnlyCallback()},enumerable:!1,configurable:!0}),t.prototype.onReadOnlyChanged=function(){this.setPropertyValue("isInputReadOnly",this.isInputReadOnly),e.prototype.onReadOnlyChanged.call(this),this.isReadOnly&&this.clearErrors(),this.updateQuestionCss(),this.resetRenderedCommentPlaceholder()},Object.defineProperty(t.prototype,"enableIf",{get:function(){return this.getPropertyValue("enableIf","")},set:function(e){this.setPropertyValue("enableIf",e)},enumerable:!1,configurable:!0}),t.prototype.surveyChoiceItemVisibilityChange=function(){},t.prototype.runCondition=function(e){this.isDesignMode||(e||(e={}),e.question=this,this.runConditionCore(e),this.isValueChangedDirectly||this.isClearValueOnHidden&&!this.isVisibleInSurvey||this.runDefaultValueExpression(e))},Object.defineProperty(t.prototype,"isInDesignMode",{get:function(){return!this.isContentElement&&this.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"no",{get:function(){return this.getPropertyValue("no")},enumerable:!1,configurable:!0}),t.prototype.calcNo=function(){if(!this.hasTitle||!this.showNumber)return"";var e=r.getNumberByIndex(this.visibleIndex,this.getStartIndex());return this.parent&&(e=this.parent.addNoFromChild(e)),this.survey&&(e=this.survey.getUpdatedQuestionNo(this,e)),e},t.prototype.onSurveyLoad=function(){this.isCustomWidgetRequested=!1,this.fireCallback(this.surveyLoadCallback),this.updateValueWithDefaults(),this.isEmpty()&&this.initDataFromSurvey()},t.prototype.onSetData=function(){e.prototype.onSetData.call(this),this.isDesignMode||!this.survey||this.isLoadingFromJson||(this.initDataFromSurvey(),this.onSurveyValueChanged(this.value),this.updateValueWithDefaults(),this.updateIsAnswered())},t.prototype.initDataFromSurvey=function(){if(this.data){var e=this.data.getValue(this.getValueName());r.isValueEmpty(e)&&this.isLoadingFromJson||this.updateValueFromSurvey(e),this.initCommentFromSurvey()}},t.prototype.initCommentFromSurvey=function(){this.data&&this.requireUpdateCommentValue?this.updateCommentFromSurvey(this.data.getComment(this.getValueName())):this.updateCommentFromSurvey("")},t.prototype.runExpression=function(e){if(this.survey&&e)return this.survey.runExpression(e)},Object.defineProperty(t.prototype,"commentAreaRows",{get:function(){return this.survey&&this.survey.commentAreaRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoGrowComment",{get:function(){return this.survey&&this.survey.autoGrowComment},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowResizeComment",{get:function(){return this.survey&&this.survey.allowResizeComment},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionValue",{get:function(){return this.getPropertyValueWithoutDefault("value")},set:function(e){this.setPropertyValue("value",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionComment",{get:function(){return this.getPropertyValueWithoutDefault("comment")},set:function(e){this.setPropertyValue("comment",e),this.fireCallback(this.commentChangedCallback)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValueArray",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValueCore()},set:function(e){this.setNewValue(e)},enumerable:!1,configurable:!0}),t.prototype.getStructuredValue=function(e){return void 0===e&&(e=-1),this.value},Object.defineProperty(t.prototype,"hasFilteredValue",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getFilteredValue=function(e){return this.value},t.prototype.getFilteredName=function(){return this.getValueName()},Object.defineProperty(t.prototype,"valueForSurvey",{get:function(){return this.valueForSurveyCore(this.value)},enumerable:!1,configurable:!0}),t.prototype.valueForSurveyCore=function(e){return this.valueToDataCallback?this.valueToDataCallback(e):e},t.prototype.valueFromDataCore=function(e){return this.valueFromDataCallback?this.valueFromDataCallback(e):e},t.prototype.clearValue=function(e,t){void 0!==this.value&&(this.value=void 0),this.comment&&!0!==e&&(this.comment=void 0),this.setValueChangedDirectly(!0===t)},t.prototype.clearValueFromUI=function(){this.clearValue(!0,!0)},t.prototype.clearValueOnly=function(){this.clearValue(!0)},t.prototype.unbindValue=function(){this.clearValue()},t.prototype.createValueCopy=function(){return this.getUnbindValue(this.value)},t.prototype.initDataUI=function(){},t.prototype.getUnbindValue=function(e){return this.isValueSurveyElement(e)?e:r.getUnbindValue(e)},t.prototype.isValueSurveyElement=function(e){return!!e&&(Array.isArray(e)?e.length>0&&this.isValueSurveyElement(e[0]):!0===e.isSurveyObj)},t.prototype.canClearValueAsInvisible=function(e){return!(("onHiddenContainer"!==e||this.isParentVisible)&&(this.isVisibleInSurvey||this.page&&this.page.isStartPage||this.survey&&this.survey.hasVisibleQuestionByValueName(this)))},Object.defineProperty(t.prototype,"isParentVisible",{get:function(){if(this.parentQuestion&&!this.parentQuestion.isVisible)return!1;for(var e=this.parent;e;){if(!e.isVisible)return!1;e=e.parent}return!0},enumerable:!1,configurable:!0}),t.prototype.clearValueIfInvisible=function(e){void 0===e&&(e="onHidden");var t=this.getClearIfInvisible();"none"!==t&&("onHidden"===e&&"onComplete"===t||"onHiddenContainer"===e&&t!==e||this.clearValueIfInvisibleCore(e))},t.prototype.clearValueIfInvisibleCore=function(e){this.canClearValueAsInvisible(e)&&this.clearValue()},Object.defineProperty(t.prototype,"clearIfInvisible",{get:function(){return this.getPropertyValue("clearIfInvisible")},set:function(e){this.setPropertyValue("clearIfInvisible",e)},enumerable:!1,configurable:!0}),t.prototype.getClearIfInvisible=function(){var e=this.clearIfInvisible;return this.survey?this.survey.getQuestionClearIfInvisible(e):"default"!==e?e:"onComplete"},Object.defineProperty(t.prototype,"displayValue",{get:function(){return this.isLoadingFromJson?"":this.getDisplayValue(!0)},enumerable:!1,configurable:!0}),t.prototype.getDisplayValue=function(e,t){void 0===t&&(t=void 0);var n=this.calcDisplayValue(e,t);return this.survey&&(n=this.survey.getQuestionDisplayValue(this,n)),this.displayValueCallback?this.displayValueCallback(n):n},t.prototype.calcDisplayValue=function(e,t){if(void 0===t&&(t=void 0),this.customWidget){var n=this.customWidget.getDisplayValue(this,t);if(n)return n}return t=null==t?this.createValueCopy():t,this.isValueEmpty(t)&&!this.locDefaultDisplayValue.isEmpty&&(t=this.defaultDisplayValue),this.isValueEmpty(t,!this.allowSpaceAsAnswer)?this.getDisplayValueEmpty():this.getDisplayValueCore(e,t)},t.prototype.getDisplayValueCore=function(e,t){return t},t.prototype.getDisplayValueEmpty=function(){return""},Object.defineProperty(t.prototype,"defaultValue",{get:function(){return this.getPropertyValue("defaultValue")},set:function(e){this.isValueExpression(e)?this.defaultValueExpression=e.substring(1):(this.setPropertyValue("defaultValue",this.valueToData(e)),this.updateValueWithDefaults())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultValueExpression",{get:function(){return this.getPropertyValue("defaultValueExpression")},set:function(e){this.setPropertyValue("defaultValueExpression",e),this.defaultValueRunner=void 0,this.updateValueWithDefaults()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resetValueIf",{get:function(){return this.getPropertyValue("resetValueIf")},set:function(e){this.setPropertyValue("resetValueIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setValueIf",{get:function(){return this.getPropertyValue("setValueIf")},set:function(e){this.setPropertyValue("setValueIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setValueExpression",{get:function(){return this.getPropertyValue("setValueExpression")},set:function(e){this.setPropertyValue("setValueExpression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resizeStyle",{get:function(){return this.allowResizeComment?"both":"none"},enumerable:!1,configurable:!0}),t.prototype.getPlainData=function(e){var t=this;if(e||(e={includeEmpty:!0,includeQuestionTypes:!1}),e.includeEmpty||!this.isEmpty()){var n={name:this.name,title:this.locTitle.renderedHtml,value:this.value,displayValue:this.displayValue,isNode:!1,getString:function(e){return"object"==typeof e?JSON.stringify(e):e}};return!0===e.includeQuestionTypes&&(n.questionType=this.getType()),(e.calculations||[]).forEach(function(e){n[e.propertyName]=t.getPlainDataCalculatedValue(e.propertyName)}),this.showCommentArea&&(n.isNode=!0,n.data=[{name:0,isComment:!0,title:"Comment",value:gn.commentSuffix,displayValue:this.comment,getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!1}]),n}},t.prototype.getPlainDataCalculatedValue=function(e){return this[e]},Object.defineProperty(t.prototype,"correctAnswer",{get:function(){return this.getPropertyValue("correctAnswer")},set:function(e){this.setPropertyValue("correctAnswer",this.valueToData(e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quizQuestionCount",{get:function(){return this.isVisible&&this.hasInput&&!this.isValueEmpty(this.correctAnswer)?this.getQuizQuestionCount():0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"correctAnswerCount",{get:function(){return this.isEmpty()||this.isValueEmpty(this.correctAnswer)?0:this.getCorrectAnswerCount()},enumerable:!1,configurable:!0}),t.prototype.getQuizQuestionCount=function(){return 1},t.prototype.getCorrectAnswerCount=function(){return this.checkIfAnswerCorrect()?1:0},t.prototype.checkIfAnswerCorrect=function(){var e=r.isTwoValueEquals(this.value,this.correctAnswer,this.getAnswerCorrectIgnoreOrder(),gn.comparator.caseSensitive,!0),t=e?1:0,n=this.quizQuestionCount-t,o={result:e,correctAnswers:t,correctAnswerCount:t,incorrectAnswers:n,incorrectAnswerCount:n};return this.survey&&this.survey.onCorrectQuestionAnswer(this,o),o.result},t.prototype.getAnswerCorrectIgnoreOrder=function(){return!1},t.prototype.isAnswerCorrect=function(){return this.correctAnswerCount==this.quizQuestionCount},t.prototype.updateValueWithDefaults=function(){if(!(this.isLoadingFromJson||!this.isDesignMode&&this.isDefaultValueEmpty())){var e=this.isEmpty();(this.isDesignMode||e)&&(e&&this.isDefaultValueEmpty()||this.isClearValueOnHidden&&!this.isVisible||this.isDesignMode&&this.isContentElement&&this.isDefaultValueEmpty()||this.setDefaultValue())}},Object.defineProperty(t.prototype,"isValueDefault",{get:function(){return!this.isEmpty()&&(this.isTwoValueEquals(this.defaultValue,this.value)||!this.isValueChangedDirectly&&!!this.defaultValueExpression)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClearValueOnHidden",{get:function(){var e=this.getClearIfInvisible();return"none"!==e&&"onComplete"!==e&&("onHidden"===e||"onHiddenContainer"===e)},enumerable:!1,configurable:!0}),t.prototype.getQuestionFromArray=function(e,t){return null},t.prototype.getDefaultValue=function(){return this.defaultValue},t.prototype.isDefaultValueEmpty=function(){return!this.defaultValueExpression&&this.isValueEmpty(this.defaultValue,!this.allowSpaceAsAnswer)},t.prototype.setDefaultValue=function(){var e=this;this.setDefaultValueCore(function(t){t=e.convertToCorrectValue(t),e.isTwoValueEquals(e.value,t)||e.setDefaultIntoValue(t)})},t.prototype.setDefaultIntoValue=function(e){this.value=e},t.prototype.setDefaultValueCore=function(e){var t=this,n=function(n){t.runExpressionSetValueCore(n,e)};this.runDefaultValueExpression(void 0,n)||n(this.getUnbindValue(this.defaultValue))},t.prototype.updateValueWithDefaultsOrClear=function(){this.isDesignMode||this.isLoadingFromJson||(this.isDefaultValueEmpty()?this.clearValue():this.setDefaultValue())},t.prototype.isValueExpression=function(e){return!!e&&"string"==typeof e&&e.length>0&&"="==e[0]},t.prototype.convertFuncValuetoQuestionValue=function(e){return r.convertValToQuestionVal(e)},t.prototype.runExpressionSetValueCore=function(e,t){t(this.convertFuncValuetoQuestionValue(e))},t.prototype.runExpressionSetValue=function(e){var t=this;this.runExpressionSetValueCore(e,function(e){t.isTwoValueEquals(t.value,e)||(t.startSetValueOnExpression(),t.value=e,t.finishSetValueOnExpression())})},t.prototype.startSetValueOnExpression=function(){var e;null===(e=this.survey)||void 0===e||e.startSetValueOnExpression()},t.prototype.finishSetValueOnExpression=function(){var e;null===(e=this.survey)||void 0===e||e.finishSetValueOnExpression()},t.prototype.runDefaultValueExpression=function(e,t){var n=this;return void 0===e&&(e=null),!!this.data&&(t||(t=function(e){n.runExpressionSetValue(e)}),e||((e=this.defaultValueExpression?this.data.getFilteredProperties():{}).question=this),this.runExpressionByProperty("defaultValueExpression",e,function(e){null==e&&(e=n.defaultValue),n.isChangingViaDefaultValue=!0,t(e),n.isChangingViaDefaultValue=!1}))},Object.defineProperty(t.prototype,"comment",{get:function(){return this.getQuestionComment()},set:function(e){if(e&&e!==this.comment){var t=e.toString().trim();t!==e&&(e=t)===this.comment&&this.setPropertyValueDirectly("comment",e)}this.comment!=e&&this.setNewComment(e)},enumerable:!1,configurable:!0}),t.prototype.getCommentAreaCss=function(e){return void 0===e&&(e=!1),(new _e).append("form-group",e).append(this.cssClasses.formGroup,!e).append(this.cssClasses.commentArea).append(this.cssClasses.otherArea,e).toString()},t.prototype.getQuestionComment=function(){return this.questionComment},t.prototype.isEmpty=function(){return this.isValueEmpty(this.value,!this.allowSpaceAsAnswer)},Object.defineProperty(t.prototype,"isAnswered",{get:function(){return this.getPropertyValue("isAnswered")||!1},set:function(e){this.setPropertyValue("isAnswered",e)},enumerable:!1,configurable:!0}),t.prototype.updateIsAnswered=function(){var e=this.isAnswered;this.setPropertyValue("isAnswered",this.getIsAnswered()),e!==this.isAnswered&&this.updateQuestionCss()},t.prototype.getIsAnswered=function(){return!this.isEmpty()},Object.defineProperty(t.prototype,"validators",{get:function(){return this.getPropertyValue("validators")},set:function(e){this.setPropertyValue("validators",e)},enumerable:!1,configurable:!0}),t.prototype.getValidators=function(){return this.validators},t.prototype.getSupportedValidators=function(){for(var e=[],t=this.getType();t;){var n=gn.supportedValidators[t];if(n)for(var o=n.length-1;o>=0;o--)e.splice(0,0,n[o]);t=D.findClass(t).parentName}return e},t.prototype.addConditionObjectsByContext=function(e,t){e.push({name:this.getFilteredName(),text:this.processedTitle,question:this})},t.prototype.getNestedQuestions=function(e,t,n){void 0===e&&(e=!1),void 0===t&&(t=!0),void 0===n&&(n=!1);var o=[];return this.collectNestedQuestions(o,e,t,n),n||1!==o.length||o[0]!==this?o:[]},t.prototype.collectNestedQuestions=function(e,t,n,o){void 0===t&&(t=!1),void 0===n&&(n=!0),void 0===o&&(o=!1),t&&!this.isVisible||this.collectNestedQuestionsCore(e,t,n,o)},t.prototype.collectNestedQuestionsCore=function(e,t,n,o){e.push(this)},t.prototype.addNestedQuestion=function(e,t,n,o){n?this.collectNestedQuestions(e,t,n,o):t&&!this.isVisible||e.push(this)},t.prototype.getConditionJson=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var n=(new A).toJsonObject(this);return n.type=this.getType(),n},t.prototype.hasErrors=function(e,t){return void 0===e&&(e=!0),void 0===t&&(t=!1),!this.validateCore(e,!1,t)},t.prototype.validate=function(e,t,n,o){return void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===n&&(n=!1),this.validateCore(e,!0,t,n,o)},t.prototype.validateCore=function(e,t,n,o,i){void 0===n&&(n=!1),void 0===o&&(o=!1),t&&o&&this.parent&&this.parent.validateContainerOnly();var r=new Yn({isOnValueChanged:o,focusOnFirstError:n,fireCallback:e,callbackResult:i});return this.validateElement(r),r.finish(),r.runningResult},t.prototype.validateElement=function(e){return this.validateElementCore(e)},t.prototype.validateElementCore=function(e){var t=this.checkForErrors(e);return e.fireCallback&&(this.errors=t,this.errors!==t&&this.errors.forEach(function(e){return e.locText.strChanged()})),e.setErrorElement(this,t),this.updateContainsErrors(),this.isCollapsed&&e.fireCallback&&t.length>0&&this.expand(),0===t.length},Object.defineProperty(t.prototype,"currentErrorCount",{get:function(){return this.errors.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredMark",{get:function(){return null!=this.survey&&this.isRequired?this.survey.requiredMark:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredText",{get:function(){return this.requiredMark},enumerable:!1,configurable:!0}),t.prototype.addError=function(e){if(e){var t;t="string"==typeof e||e instanceof String?this.addCustomError(e):e,this.errors.push(t)}},t.prototype.addCustomError=function(e){return new En(e,this.survey)},t.prototype.removeError=function(e){if(!e)return!1;var t=this.errors,n=t.indexOf(e);return-1!==n&&t.splice(n,1),-1!==n},t.prototype.checkForErrors=function(e){var t=new Array;if(this.isVisible&&this.canCollectErrors()&&this.collectErrors(t,e),this.survey){if(this.validateValueCallback&&0===t.length){var n=this.validateValueCallback();n&&t.push(n)}this.survey.validateQuestion(this,t,e.fireCallback)}return t},t.prototype.canCollectErrors=function(){return!this.isReadOnly||gn.readOnly.enableValidation},t.prototype.collectErrors=function(e,t){if(this.onCheckForErrors(e,t.isOnValueChanged,t.fireCallback),!(e.length>0)&&this.canRunValidators(t.isOnValueChanged)){var n=this.runValidators(t);if(n.length>0){e.length=0;for(var o=0;o<n.length;o++)e.push(n[o])}}},t.prototype.canRunValidators=function(e){return!0},t.prototype.onCheckForErrors=function(e,t,n){var o=this;if((!t||this.isOldAnswered)&&this.hasRequiredError()){var i=new bn(this.requiredErrorText,this);i.onUpdateErrorTextCallback=function(e){e.text=o.requiredErrorText},e.push(i)}if(!this.isEmpty()&&this.customWidget){var r=this.customWidget.validate(this);r&&e.push(this.addCustomError(r))}},t.prototype.hasRequiredError=function(){return this.isRequired&&this.isEmpty()},Object.defineProperty(t.prototype,"isRunningValidators",{get:function(){return this.getIsRunningValidators()},enumerable:!1,configurable:!0}),t.prototype.getIsRunningValidators=function(){return!!this.validatorRunner},t.prototype.runValidators=function(e){var t=this;return this.validatorRunner&&(this.validatorRunner.onAsyncCompleted=null),this.validatorRunner=new _n,this.validatorRunner.onAsyncCompleted=function(n){t.doOnAsyncCompleted(e.fireCallback,n),e.setErrorElement(t,n),e.removeElement(t.id)},e.addElement(this.id),this.validatorRunner.run(this)},t.prototype.doOnAsyncCompleted=function(e,t){var n=this;e&&t.forEach(function(e){n.errors.indexOf(e)<0&&n.errors.push(e)}),this.validatorRunner=null},t.prototype.setNewValue=function(e){if(this.survey&&(e=this.survey.questionValueChanging(this,e)),!this.isNewValueEqualsToValue(e)&&this.checkIsValueCorrect(e)){var t=this.getUnbindValue(this.value);this.isOldAnswered=this.isAnswered,this.isSettingQuestionValue=!0,this.setNewValueInData(e),this.allowNotifyValueChanged&&this.onValueChanged(),this.isSettingQuestionValue=!1,this.isAnswered!==this.isOldAnswered&&this.updateQuestionCss(),this.isOldAnswered=void 0,this.parent&&this.parent.onQuestionValueChanged(this),this.survey&&this.survey.questionValueChanged(this,t)}},t.prototype.getValueChangingOptions=function(e){},t.prototype.checkIsValueCorrect=function(e){var t=this.isValueEmpty(e,!this.allowSpaceAsAnswer)||this.isNewValueCorrect(e);return t||F.inCorrectQuestionValue(this.name,e),t},t.prototype.isNewValueCorrect=function(e){return!0},t.prototype.isNewValueEqualsToValue=function(e){var t=this.value;return!(!this.isTwoValueEquals(e,t,!1,!1)||e===t&&t&&(Array.isArray(t)||"object"==typeof t))},t.prototype.isTextValue=function(){return!1},t.prototype.getIsInputTextUpdate=function(){return!!this.survey&&this.survey.isUpdateValueTextOnTyping},Object.defineProperty(t.prototype,"requireStrictCompare",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getExpressionValue=function(e){return e},t.prototype.getDataLocNotification=function(){return!!this.isInputTextUpdate&&"text"},Object.defineProperty(t.prototype,"isInputTextUpdate",{get:function(){return this.getIsInputTextUpdate()&&this.isTextValue()},enumerable:!1,configurable:!0}),t.prototype.setNewValueInData=function(e){e=this.valueToData(e),this.isValueChangedInSurvey||this.setValueCore(e)},t.prototype.getValueCore=function(){return this.questionValue},t.prototype.setValueCore=function(e){this.setQuestionValue(e),null!=this.data&&this.canSetValueToSurvey()&&(e=this.valueForSurvey,this.data.setValue(this.getValueName(),e,this.getDataLocNotification(),this.allowNotifyValueChanged,this.name)),this.isMouseDown=!1},t.prototype.canSetValueToSurvey=function(){return!0},t.prototype.valueFromData=function(e){return e},t.prototype.valueToData=function(e){return e},t.prototype.convertToCorrectValue=function(e){return e},t.prototype.onValueChanged=function(){},t.prototype.onMouseDown=function(){this.isMouseDown=!0},t.prototype.setNewComment=function(e){this.questionComment!==e&&(this.questionComment=e,this.setCommentIntoData(e))},t.prototype.setCommentIntoData=function(e){null!=this.data&&this.data.setComment(this.getValueName(),e,!!this.getIsInputTextUpdate()&&"text")},t.prototype.getValidName=function(t){return Zn(e.prototype.getValidName.call(this,t))},t.prototype.updateValueFromSurvey=function(e,t){var n=this;if(void 0===t&&(t=!1),e=this.getUnbindValue(e),e=this.valueFromDataCore(e),this.checkIsValueCorrect(e)){var o=this.isValueEmpty(e);this.isUpdateingValueFromSurvey=!0,!o&&this.defaultValueExpression?this.setDefaultValueCore(function(t){n.updateValueFromSurveyCore(e,n.isTwoValueEquals(e,t))}):(this.updateValueFromSurveyCore(e,this.data!==this.getSurvey()),t&&o&&(this.isValueChangedDirectly=!1),o&&this.updateBindingsOnClearFromSurveyCore()),this.isUpdateingValueFromSurvey=!1,this.updateDependedQuestions(),this.updateIsAnswered()}},t.prototype.canUpdateBindings=function(){return!this.isUpdateingValueFromSurvey},t.prototype.updateBindingsOnClearFromSurveyCore=function(){var e=this,t=this.data;t&&!this.isBindingEmpty()&&this.bindings.getNames().forEach(function(n){var o=e.bindings.getValueNameByPropertyName(n),i=t.getValue(o);e.isValueEmpty(i)||e.updateBindingProp(n,i)})},t.prototype.updateValueFromSurveyCore=function(e,t){this.isChangingViaDefaultValue=t,e=this.valueFromData(e);var n=this.isTwoValueEquals(this.questionValue,this.convertToCorrectValue(e));this.setQuestionValue(e),n||this.resetSingleInput(),this.isChangingViaDefaultValue=!1},t.prototype.updateCommentFromSurvey=function(e){this.questionComment=e},t.prototype.onChangeQuestionValue=function(e){},t.prototype.setValueChangedDirectly=function(e){this.isValueChangedDirectly=e,this.setValueChangedDirectlyCallback&&this.setValueChangedDirectlyCallback(e)},t.prototype.setQuestionValue=function(e,t){void 0===t&&(t=!0),e=this.convertToCorrectValue(e);var n=this.isTwoValueEquals(this.questionValue,e);n||this.isChangingViaDefaultValue||this.isParentChangingViaDefaultValue||this.setValueChangedDirectly(!0),this.questionValue=e,n||this.onChangeQuestionValue(e),!n&&this.allowNotifyValueChanged&&this.fireCallback(this.valueChangedCallback),t&&this.updateIsAnswered()},Object.defineProperty(t.prototype,"isParentChangingViaDefaultValue",{get:function(){var e;return!0===(null===(e=this.data)||void 0===e?void 0:e.isChangingViaDefaultValue)},enumerable:!1,configurable:!0}),t.prototype.onSurveyValueChanged=function(e){},t.prototype.setVisibleIndex=function(e){return this.isVisibleIndexNegative(e)&&(e=-1),this.setPropertyValue("visibleIndex",e),this.setPropertyValue("no",this.calcNo()),e<0?0:1},t.prototype.isVisibleIndexNegative=function(e){return e<0||!this.isVisible||!this.hasTitle&&!gn.numbering.includeQuestionsWithHiddenTitle||!this.showNumber&&!gn.numbering.includeQuestionsWithHiddenNumber},t.prototype.removeElement=function(e){return!1},t.prototype.supportGoNextPageAutomatic=function(){return this.supportAutoAdvance()},t.prototype.supportAutoAdvance=function(){return!1},t.prototype.supportGoNextPageError=function(){return!0},t.prototype.clearIncorrectValues=function(){},t.prototype.clearOnDeletingContainer=function(){},t.prototype.clearErrors=function(){this.errors=[]},t.prototype.clearUnusedValues=function(){},t.prototype.onAnyValueChanged=function(e,t){},t.prototype.checkBindings=function(e,t){if(!this.bindings.isEmpty()&&this.data)for(var n=this.bindings.getPropertiesByValueName(e),o=0;o<n.length;o++){var i=n[o];this.isValueEmpty(t)&&r.isNumber(this[i])&&(t=0),this.updateBindingProp(i,t)}},t.prototype.updateBindingProp=function(e,t){this[e]=t},t.prototype.getComponentName=function(){return Hn.Instance.getRendererByQuestion(this)},t.prototype.isDefaultRendering=function(){return!!this.customWidget||"default"===this.getComponentName()},Object.defineProperty(t.prototype,"renderAs",{get:function(){return this.getPropertyValue("renderAs")},set:function(e){this.setPropertyValue("renderAs",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inMatrixMode",{get:function(){return this.getPropertyValue("inMatrixMode",!1)},set:function(e){this.setPropertyValue("inMatrixMode",e)},enumerable:!1,configurable:!0}),t.prototype.getErrorCustomText=function(e,t){return this.survey?this.survey.getSurveyErrorCustomText(this,e,t):e},t.prototype.getValidatorTitle=function(){return null},Object.defineProperty(t.prototype,"validatedValue",{get:function(){return this.value},set:function(e){this.value=e},enumerable:!1,configurable:!0}),t.prototype.getAllValues=function(){return this.data?this.data.getAllValues():null},t.prototype.processPopupVisiblilityChanged=function(e,t){this.survey.processPopupVisiblityChanged(this,e,t)},t.prototype.processOpenDropdownMenu=function(e){this.survey.processOpenDropdownMenu(this,e)},t.prototype.onTextKeyDownHandler=function(e){13===e.keyCode&&this.survey.questionEditFinishCallback(this,e)},t.prototype.transformToMobileView=function(){},t.prototype.transformToDesktopView=function(){},t.prototype.needResponsiveWidth=function(){return!1},t.prototype.supportResponsiveness=function(){return!1},t.prototype.needResponsiveness=function(){return this.supportResponsiveness()&&!this.isDesignMode},t.prototype.checkForResponsiveness=function(e){var t=this;this.needResponsiveness()&&(this.isCollapsed?this.registerPropertyChangedHandlers(["state"],function(){t.isExpanded&&(t.initResponsiveness(e),t.unregisterPropertyChangedHandlers(["state"],"for-responsiveness"))},"for-responsiveness"):this.initResponsiveness(e))},t.prototype.getObservedElementSelector=function(){return".sd-scrollable-container"},t.prototype.onMobileChanged=function(){this.onMobileChangedCallback&&this.onMobileChangedCallback()},t.prototype.triggerResponsiveness=function(e){void 0===e&&(e=!0),this.triggerResponsivenessCallback&&this.triggerResponsivenessCallback(e)},t.prototype.initResponsiveness=function(e){var t=this;if(o.isAvailable()&&(this.destroyResizeObserver(),e&&this.isDefaultRendering())){var i=this.getObservedElementSelector();if(!i)return;if(!e.querySelector(i))return;var r=!1,s=void 0;this.triggerResponsivenessCallback=function(n){n&&(s=void 0,t.renderAs="default",r=!1);var o=function(){var n=e.querySelector(i);if(t.isDefaultRendering()&&(s=n.scrollWidth),r||!on(n))r=!1;else{var o=nn(n);r=t.processResponsiveness(s,o)}};n?setTimeout(o,1):o()},this.resizeObserver=new ResizeObserver(function(e){n.requestAnimationFrame(function(){t.triggerResponsiveness(!1)})}),this.onMobileChangedCallback=function(){setTimeout(function(){var n=e.querySelector(i);t.processResponsiveness(s,nn(n))},0)},this.resizeObserver.observe(e)}},t.prototype.getCompactRenderAs=function(){return"default"},t.prototype.getDesktopRenderAs=function(){return"default"},t.prototype.onBeforeSetCompactRenderer=function(){},t.prototype.onBeforeSetDesktopRenderer=function(){},t.prototype.processResponsiveness=function(e,t){if(t=Math.round(t),Math.abs(e-t)>2){var n=this.renderAs;return e>t?(this.onBeforeSetCompactRenderer(),this.renderAs=this.getCompactRenderAs()):(this.onBeforeSetDesktopRenderer(),this.renderAs=this.getDesktopRenderAs()),n!==this.renderAs}return!1},t.prototype.destroyResizeObserver=function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0,this.onMobileChangedCallback=void 0,this.triggerResponsivenessCallback=void 0,this.renderAs=this.getDesktopRenderAs())},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.resetDependedQuestions(),this.destroyResizeObserver()},t.prototype.resetDependedQuestions=function(){for(var e=0;e<this.dependedQuestions.length;e++)this.dependedQuestions[e].resetDependedQuestion()},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this.isNewA11yStructure||this.hasTitle&&!this.parentQuestion?null:this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRole",{get:function(){return this.isNewA11yStructure?null:"textbox"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRequired",{get:function(){return this.isNewA11yStructure?null:this.isRequired?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInvalid",{get:function(){return this.isNewA11yStructure?null:this.hasCssError()?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabelledBy",{get:function(){return this.isNewA11yStructure||!this.hasTitle||this.parentQuestion?null:this.ariaTitleId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaDescribedBy",{get:function(){return this.isNewA11yStructure?null:this.hasTitle&&this.hasDescription?this.ariaDescriptionId:null},enumerable:!1,configurable:!0}),t.prototype.getContentAriaHidden=function(){return null},Object.defineProperty(t.prototype,"contentAriaHidden",{get:function(){return this.getContentAriaHidden()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaErrormessage",{get:function(){return this.isNewA11yStructure?null:this.hasCssError()?this.id+"_errors":null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRole",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRequired",{get:function(){return this.isRequired?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaInvalid",{get:function(){return this.hasCssError()?"true":"false"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaLabel",{get:function(){return this.hasTitle&&!this.parentQuestion?null:this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaLabelledBy",{get:function(){return this.hasTitle&&!this.parentQuestion?this.ariaTitleId:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaDescribedBy",{get:function(){var e=null;return this.hasCssError()?e=this.id+"_errors":this.hasTitle&&!this.parentQuestion&&this.hasDescription&&"hidden"!==this.descriptionLocation&&(e=this.ariaDescriptionId),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaErrormessage",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaExpanded",{get:function(){return this.getPropertyValue("ariaExpanded")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dragDropMatrixAttribute",{get:function(){return null},enumerable:!1,configurable:!0}),t.prototype.registerSychProperties=function(e,t){var n=this;this.registerFunctionOnPropertiesValueChanged(e,function(){n._syncPropertiesChanging||(n._syncPropertiesChanging=!0,t(),n._syncPropertiesChanging=!1)})},t}(Tt);function Zn(e){if(!e)return e;for(e=e.trim().replace(/[\{\}]+/g,"");e&&e[0]===gn.expressionDisableConversionChar;)e=e.substring(1);return e}D.addClass("question",[{name:"!name",onSettingValue:function(e,t){return Zn(t)}},{name:"state",default:"default",choices:["default","collapsed","expanded"]},{name:"visible:switch",default:!0,overridingProperty:"visibleIf"},{name:"useDisplayValuesInDynamicTexts:boolean",alternativeName:"useDisplayValuesInTitle",default:!0,layout:"row"},"visibleIf:condition",{name:"width"},{name:"minWidth",defaultFunc:function(){return gn.minWidth}},{name:"maxWidth",defaultFunc:function(){return gn.maxWidth}},{name:"colSpan:number",visible:!1,onSerializeValue:function(e){return e.getPropertyValue("colSpan")}},{name:"effectiveColSpan:number",minValue:1,isSerializable:!1,visibleIf:function(e){return!!e&&!!e.survey&&e.survey.gridLayoutEnabled}},{name:"startWithNewLine:boolean",default:!0,layout:"row"},{name:"indent:number",default:0,choices:[0,1,2,3],layout:"row"},{name:"page",isSerializable:!1,visibleIf:function(e){var t=e?e.survey:null;return!t||!t.pages||t.pages.length>1},choices:function(e){var t=e?e.survey:null;return t?t.pages.map(function(e){return{value:e.name,text:e.title}}):[]}},{name:"title:text",serializationProperty:"locTitle",layout:"row",dependsOn:"name",onPropertyEditorUpdate:function(e,t){e&&t&&(t.placeholder=e.locTitle.getPlaceholder())}},{name:"titleLocation",default:"default",choices:["default","top","bottom","left","hidden"],layout:"row"},{name:"showTitle:boolean",isSerializable:!1,dependsOn:"titleLocation"},{name:"description:text",serializationProperty:"locDescription",layout:"row"},{name:"descriptionLocation",default:"default",choices:["default","underInput","underTitle"]},{name:"showNumber:boolean",dependsOn:"titleLocation",default:!0,visibleIf:function(e){if(!e)return!0;if("hidden"===e.titleLocation)return!1;var t=e?e.parent:null;if(t&&"off"===t.showQuestionNumbers)return!1;var n=e?e.survey:null;return!n||"off"!==n.showQuestionNumbers||!!t&&"onpanel"===t.showQuestionNumbers}},{name:"hideNumber:boolean",visible:!1,isSerializable:!1},{name:"valueName",onSettingValue:function(e,t){return Zn(t)}},"enableIf:condition","resetValueIf:condition","setValueIf:condition","setValueExpression:expression","defaultValue:value",{name:"defaultValueExpression:expression",category:"logic"},"correctAnswer:value",{name:"clearIfInvisible",default:"default",choices:["default","none","onComplete","onHidden","onHiddenContainer"]},{name:"isRequired:switch",overridingProperty:"requiredIf"},"requiredIf:condition",{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},{name:"errorLocation",default:"default",choices:["default","top","bottom"]},{name:"readOnly:switch",overridingProperty:"enableIf"},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"},{name:"bindings:bindings",serializationProperty:"bindings",isSerializableFunc:function(e){return!e.isBindingEmpty()},visibleIf:function(e){return e.bindings.getNames().length>0}},{name:"renderAs",default:"default",visible:!1},{name:"showCommentArea:switch",visible:!1,default:!1,alternativeName:"hasComment",category:"general"},{name:"commentText",dependsOn:"showCommentArea",visibleIf:function(e){return e.showCommentArea},serializationProperty:"locCommentText"},{name:"commentPlaceholder",alternativeName:"commentPlaceHolder",serializationProperty:"locCommentPlaceholder",dependsOn:"showCommentArea",visibleIf:function(e){return e.showCommentArea}},{name:"defaultDisplayValue",serializationProperty:"locDefaultDisplayValue"}]),D.addAlterNativeClassName("question","questionbase");var $n=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),eo=function(){function e(e){this.item=e}return e.prototype.getValue=function(e,t,n,o){if(1===e.length){var i=e[0].name;if("item"===i||"choice"===i)return{isFound:!0,value:this.item.value,context:this}}var r=this.item.locOwner;if(r&&r.getValueGetterContext)return r.getValueGetterContext().getValue(e,t,n,o)},e.prototype.getRootObj=function(){var e=this.item.locOwner;return e&&e.getValueGetterContext?e:this.item.getSurvey()},e.prototype.getTextValue=function(e,t,n){return n&&t===this.item.value?this.item.textOrHtml:null!=t?t.toString():""},e}(),to=function(e){function t(t,n,o){var i=e.call(this)||this;return i.typeName=o,i.ownerPropertyName="",n&&(i.locText.text=n),t&&"object"==typeof t?i.setData(t,!0):i.setValue(t,!0),i.getType()!=i.getBaseType()&&C.createProperties(i),i.onCreating(),i}return $n(t,e),t.prototype.getMarkdownHtml=function(e,t,n){return this.locOwner?this.locOwner.getMarkdownHtml(e,t,n||this):void 0},t.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e,this):null},t.prototype.getRendererContext=function(e){return this.locOwner?this.locOwner.getRendererContext(e,this):e},t.prototype.getProcessedText=function(e){return this.locOwner?this.locOwner.getProcessedText(e):e},Object.defineProperty(t,"Separator",{get:function(){return gn.itemValueSeparator},set:function(e){gn.itemValueSeparator=e},enumerable:!1,configurable:!0}),t.setData=function(e,t,n){e.length=0;for(var o=0;o<t.length;o++){var i=t[o],r=i&&"function"==typeof i.getType?i.getType():null!=n?n:"itemvalue",s=D.createClass(r);s.setData(i),i.originalItem&&(s.originalItem=i.originalItem),i.data&&(s.data=i.data),e.push(s)}},t.getData=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].getData());return t},t.getItemByValue=function(e,t){if(!Array.isArray(e))return null;for(var n=r.isValueEmpty(t),o=0;o<e.length;o++){if(n&&r.isValueEmpty(e[o].value))return e[o];if(r.isTwoValueEquals(e[o].value,t,!1,!0,!1))return e[o]}return null},t.getTextOrHtmlByValue=function(e,n){var o=t.getItemByValue(e,n);return null!==o?o.textOrHtml:""},t.locStrsChanged=function(e){for(var t=0;t<e.length;t++)e[t].locStrsChanged()},t.runConditionsForItems=function(e,n,o,i,r,s){return void 0===r&&(r=!0),t.runConditionsForItemsCore(e,n,o,i,!0,r,s)},t.runEnabledConditionsForItems=function(e,n,o,i){return t.runConditionsForItemsCore(e,null,n,o,!1,!0,i)},t.runConditionsForItemsCore=function(e,t,n,o,i,r,s){void 0===r&&(r=!0);for(var a=!1,l=0;l<e.length;l++){var u=e[l],c=!(!r||!u.getConditionRunner)&&u.getConditionRunner(i);c||(c=n);var p=!0;c&&(p=c.runContext(u.getValueGetterContext(),o)),s&&(p=s(u,p)),t&&p&&t.push(u),p!=(i?u.isVisible:u.isEnabled)&&(a=!0,i?u.setIsVisible&&u.setIsVisible(p):u.setIsEnabled&&u.setIsEnabled(p))}return a},t.prototype.onCreating=function(){},t.prototype.getType=function(){return this.typeName||this.getBaseType()},t.prototype.getBaseType=function(){return"itemvalue"},t.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.locOwner&&this.locOwner.getSurvey?this.locOwner.getSurvey():null},t.prototype.getLocale=function(){return this.locOwner&&this.locOwner.getLocale?this.locOwner.getLocale():""},t.prototype.getLocalizableString=function(t){return"text"===t?this.locText:e.prototype.getLocalizableString.call(this,t)},t.prototype.getValueGetterContext=function(){return new eo(this)},Object.defineProperty(t.prototype,"isInternal",{get:function(){return!0===this.isGhost},enumerable:!1,configurable:!0}),t.prototype.createLocText=function(){var e=this,t=new Et(this,!0,"text");return t.onStrChanged=function(t,n){e.propertyValueChanged("text",t,n)},t.onGetTextCallback=function(t){return e.onGetText(t)},t},t.prototype.onGetText=function(e){return e||this.getValueText()},t.prototype.getValueText=function(){var e=this.value;return r.isValueEmpty(e)?null:e.toString()},Object.defineProperty(t.prototype,"locText",{get:function(){return this.locTextValue||(this.locTextValue=this.createLocText()),this.locTextValue},enumerable:!1,configurable:!0}),t.prototype.setLocText=function(e){this.locTextValue=e},Object.defineProperty(t.prototype,"locOwner",{get:function(){return this._locOwner},set:function(e){this._locOwner=e,this.onLocOwnerChanged()},enumerable:!1,configurable:!0}),t.prototype.onLocOwnerChanged=function(){},Object.defineProperty(t.prototype,"value",{get:function(){return this.getPropertyValue("value")},set:function(e){this.setValue(e,!1)},enumerable:!1,configurable:!0}),t.prototype.setValue=function(e,t){var n=void 0;e=this.getCorrectValue(e);var o=gn.itemValueSeparator;if(o&&!r.isValueEmpty(e)){var i=e.toString(),s=i.indexOf(o);s>-1&&(e=i.slice(0,s),n=i.slice(s+1))}t?this.setPropertyValueDirectly("value",e):this.setPropertyValue("value",e),n&&(this.text=n),this.id=this.value},t.prototype.getCorrectValue=function(e){return e},Object.defineProperty(t.prototype,"hasText",{get:function(){return!!this.pureText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pureText",{get:function(){var e;return(null===(e=this.locTextValue)||void 0===e?void 0:e.pureText)||""},set:function(e){this.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.calculatedText},set:function(e){this.locText.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textOrHtml",{get:function(){return this.locTextValue?this.locText.textOrHtml:this.getValueText()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"calculatedText",{get:function(){return this.locTextValue?this.locText.calculatedText:this.getValueText()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shortcutText",{get:function(){return this.text},enumerable:!1,configurable:!0}),t.prototype.canSerializeValue=function(){var e=this.value;return null!=e&&!Array.isArray(e)&&"object"!=typeof e},t.prototype.getData=function(){var e=this.toJSON();if(e.value&&e.value.pos&&delete e.value.pos,r.isValueEmpty(e.value))return e;var t=this.canSerializeValue();return t&&(gn.serialization.itemValueSerializeAsObject||gn.serialization.itemValueSerializeDisplayText)||1!=Object.keys(e).length?(gn.serialization.itemValueSerializeDisplayText&&void 0===e.text&&t&&(e.text=this.value.toString()),e):this.value},t.prototype.toJSON=function(){var e={},t=D.getProperties(this.getType());t&&0!=t.length||(t=D.getProperties(this.getBaseType()));for(var n=new A,o=0;o<t.length;o++){var i=t[o];this.canAddPpropertyToJSON(i)&&n.valueToJson(this,e,i)}return e},t.prototype.canAddPpropertyToJSON=function(e){return!("text"===e.name&&(!this.locTextValue||!this.locTextValue.hasNonDefaultText()&&r.isTwoValueEquals(this.value,this.locTextValue.getLocaleText(""),!1,!0,!1)))},t.prototype.setData=function(e,t){var n;if(!r.isValueEmpty(e)){if(void 0===e.value&&void 0!==e.text&&1===Object.keys(e).length&&(e.value=e.text),void 0!==e.value){var o=void 0;if("function"==typeof e.toJSON)o=e.toJSON();else if(Array.isArray(e.elements))for(var i in o={},e)"elements"!==i&&(o[i]=e[i]);else o=e;(new A).toObject(o,this)}else this.setValue(e,t);t||null===(n=this.locTextValue)||void 0===n||n.strChanged()}},Object.defineProperty(t.prototype,"visibleIf",{get:function(){return this.getPropertyValueWithoutDefault("visibleIf")||""},set:function(e){this.setPropertyValue("visibleIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableIf",{get:function(){return this.getPropertyValueWithoutDefault("enableIf")||""},set:function(e){this.setPropertyValue("enableIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){var e=this.getPropertyValueWithoutDefault("isVisible");return void 0===e||e},enumerable:!1,configurable:!0}),t.prototype.setIsVisible=function(e){this.setPropertyValue("isVisible",e)},Object.defineProperty(t.prototype,"isEnabled",{get:function(){var e=this.getPropertyValueWithoutDefault("isEnabled");return void 0===e||e},enumerable:!1,configurable:!0}),t.prototype.setIsEnabled=function(e){this.setPropertyValue("isEnabled",e)},t.prototype.addUsedLocales=function(e){this.locTextValue&&this.AddLocStringToUsedLocales(this.locTextValue,e)},t.prototype.locStrsChanged=function(){var t;e.prototype.locStrsChanged.call(this),null===(t=this.locTextValue)||void 0===t||t.strChanged()},t.prototype.onPropertyValueChanged=function(e,t,n){var o;"value"!==e||this.hasText||null===(o=this.locTextValue)||void 0===o||o.strChanged();var i="itemValuePropertyChanged";this.locOwner&&this.locOwner[i]&&this.locOwner[i](this,e,t,n)},t.prototype.getConditionRunner=function(e){return e?this.getVisibleConditionRunner():this.getEnableConditionRunner()},t.prototype.getVisibleConditionRunner=function(){var e=this.getExpressionFromSurvey("visibleIf");return e?(this.visibleConditionRunner||(this.visibleConditionRunner=new Pe(e)),this.visibleConditionRunner.expression=e,this.visibleConditionRunner):null},t.prototype.getEnableConditionRunner=function(){var e=this.getExpressionFromSurvey("enableIf");return e?(this.enableConditionRunner||(this.enableConditionRunner=new Pe(e)),this.enableConditionRunner.expression=e,this.enableConditionRunner):null},Object.defineProperty(t.prototype,"selected",{get:function(){var e=this,t=this._locOwner;return t instanceof Xn&&t.isItemSelected&&void 0===this.selectedValue&&(this.selectedValue=new Ie(function(){return t.isItemSelected(e)})),this.selectedValue},enumerable:!1,configurable:!0}),t.prototype.getComponent=function(){return this._locOwner instanceof Xn?this.componentValue||this._locOwner.itemComponent:this.componentValue},t.prototype.setComponent=function(e){this.componentValue=e},t.prototype.setRootElement=function(e){this._htmlElement=e},t.prototype.getRootElement=function(){return this._htmlElement},t.prototype.getEnabled=function(){return this.isEnabled},t.prototype.setEnabled=function(e){this.setIsEnabled(e)},t.prototype.getVisible=function(){var e=void 0===this.isVisible||this.isVisible,t=void 0===this._visible||this._visible;return e&&t},t.prototype.setVisible=function(e){this.visible!==e&&(this._visible=e)},Object.defineProperty(t.prototype,"_visible",{get:function(){return this.getPropertyValue("visible",!0)},set:function(e){this.setPropertyValue("visible",e)},enumerable:!1,configurable:!0}),t.prototype.getLocTitle=function(){return this.locText},t.prototype.getTitle=function(){return this.text},t.prototype.setLocTitle=function(e){},t.prototype.setTitle=function(e){},Object.defineProperty(t.prototype,"icon",{get:function(){return this.getPropertyValue("icon","")},set:function(e){this.setPropertyValue("icon",e)},enumerable:!1,configurable:!0}),function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([y()],t.prototype,"selectedValue",void 0),t}(ht);Te.createItemValue=function(e,t){var n=null;return(n=t?A.metaData.createClass(t,{}):"function"==typeof e.getType?new to(null,void 0,e.getType()):new to(null)).setData(e),n},Te.itemValueLocStrChanged=function(e){to.locStrsChanged(e)},v.getItemValuesDefaultValue=function(e,t){var n=new Array;return to.setData(n,Array.isArray(e)?e:[],t),n},D.addClass("itemvalue",[{name:"!value",isUnique:!0},{name:"text",serializationProperty:"locText"},{name:"visibleIf:condition",locationInTable:"detail"},{name:"enableIf:condition",locationInTable:"detail",visibleIf:function(e){return!e||"rateValues"!==e.ownerPropertyName}}],function(e){return new to(e)});var no=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),oo=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var o=e.call(this)||this;return o.expressionIsRunning=!1,o.isCalculated=!1,t&&(o.name=t),n&&(o.expression=n),o}return no(t,e),t.prototype.setOwner=function(e){this.data=e,this.rerunExpression()},t.prototype.getType=function(){return"calculatedvalue"},t.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.data&&this.data.getSurvey?this.data.getSurvey():null},Object.defineProperty(t.prototype,"owner",{get:function(){return this.data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.getPropertyValue("name")||""},set:function(e){this.setPropertyValue("name",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"includeIntoResult",{get:function(){return this.getPropertyValue("includeIntoResult")},set:function(e){this.setPropertyValue("includeIntoResult",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expression",{get:function(){return this.getPropertyValue("expression")||""},set:function(e){this.setPropertyValue("expression",e),this.rerunExpression()},enumerable:!1,configurable:!0}),t.prototype.locCalculation=function(){this.expressionIsRunning=!0},t.prototype.unlocCalculation=function(){this.expressionIsRunning=!1},t.prototype.resetCalculation=function(){this.isCalculated=!1},t.prototype.doCalculation=function(e,t){this.isCalculated||(this.runExpressionCore(e,t),this.isCalculated=!0)},t.prototype.runExpression=function(e){this.runExpressionCore(null,e)},Object.defineProperty(t.prototype,"value",{get:function(){if(this.data)return this.data.getVariable(this.name)},enumerable:!1,configurable:!0}),t.prototype.setValue=function(e){this.data&&this.data.setVariable(this.name,e)},Object.defineProperty(t.prototype,"canRunExpression",{get:function(){return!(!this.data||this.isLoadingFromJson||!this.expression||this.expressionIsRunning||!this.name)},enumerable:!1,configurable:!0}),t.prototype.rerunExpression=function(){this.canRunExpression&&this.runExpression(this.data.getFilteredProperties())},t.prototype.runExpressionCore=function(e,t){this.canRunExpression&&this.ensureExpression()&&(this.locCalculation(),e&&this.runDependentExpressions(e,t),this.expressionRunner.runContext(this.getValueGetterContext(),this.getPropertiesCopy(t,"expression")))},t.prototype.runDependentExpressions=function(e,t){var n=this.expressionRunner.getVariables();if(n)for(var o=0;o<e.length;o++){var i=e[o];i===this||n.indexOf(i.name)<0||i.doCalculation(e,t)}},t.prototype.ensureExpression=function(){var e=this,t=this.getExpressionFromSurvey("expression");return!!t&&(this.expressionRunner?this.expressionRunner.expression=t:(this.expressionRunner=this.createExpressionRunner(t),this.expressionRunner.onRunComplete=function(t){r.isTwoValueEquals(t,e.value,!1,!0,!1)||e.setValue(t),e.unlocCalculation()}),!0)},t}(Te);D.addClass("calculatedvalue",[{name:"!name",isUnique:!0},"expression:expression","includeIntoResult:boolean"],function(){return new oo},"base");var io=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ro=function(e){function t(t){void 0===t&&(t=null);var n=e.call(this)||this;return n.expression=t,n}return io(t,e),t.prototype.getType=function(){return"expressionitem"},t.prototype.runCondition=function(e){var t=!1;return this.runExpressionByProperty("expression",e,function(e){t=!0===e}),t},Object.defineProperty(t.prototype,"expression",{get:function(){return this.getPropertyValue("expression","")},set:function(e){this.setPropertyValue("expression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locHtml",{get:function(){return this.getLocalizableString("html")},enumerable:!1,configurable:!0}),t.prototype.getLocale=function(){return this.locOwner?this.locOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,t,n){return this.locOwner?this.locOwner.getMarkdownHtml(e,t,n):void 0},t.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.locOwner?this.locOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e){return this.locOwner?this.locOwner.getProcessedText(e):e},t.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.locOwner},t}(Te),so=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var o=e.call(this,t)||this;return o.createLocalizableString("html",o),o.html=n,o}return io(t,e),t.prototype.getType=function(){return"htmlconditionitem"},Object.defineProperty(t.prototype,"html",{get:function(){return this.getLocalizableStringText("html")},set:function(e){this.setLocalizableStringText("html",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locHtml",{get:function(){return this.getLocalizableString("html")},enumerable:!1,configurable:!0}),t}(ro),ao=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var o=e.call(this,t)||this;return o.createLocalizableString("url",o),o.url=n,o}return io(t,e),t.prototype.getType=function(){return"urlconditionitem"},Object.defineProperty(t.prototype,"url",{get:function(){return this.getLocalizableStringText("url")},set:function(e){this.setLocalizableStringText("url",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locUrl",{get:function(){return this.getLocalizableString("url")},enumerable:!1,configurable:!0}),t}(ro);D.addClass("expressionitem",["expression:condition"],function(){return new ro},"base"),D.addClass("htmlconditionitem",[{name:"html:html",serializationProperty:"locHtml"}],function(){return new so},"expressionitem"),D.addClass("urlconditionitem",[{name:"url:string",serializationProperty:"locUrl"}],function(){return new ao},"expressionitem");var lo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),uo=function(){function e(){this.parser=new DOMParser}return e.prototype.assignValue=function(e,t,n){Array.isArray(e[t])?e[t].push(n):void 0!==e[t]?e[t]=[e[t]].concat(n):"object"==typeof n&&1===Object.keys(n).length&&Object.keys(n)[0]===t?e[t]=n[t]:e[t]=n},e.prototype.xml2Json=function(e,t){if(e.children&&e.children.length>0)for(var n=0;n<e.children.length;n++){var o=e.children[n],i={};this.xml2Json(o,i),this.assignValue(t,o.nodeName,i)}else this.assignValue(t,e.nodeName,e.textContent)},e.prototype.parseXmlString=function(e){var t=this.parser.parseFromString(e,"text/xml"),n={};return this.xml2Json(t,n),n},e}(),co=function(e){function t(){var t=e.call(this)||this;return t.lastObjHash="",t.isRunningValue=!1,t.processedUrl="",t.processedPath="",t.isUsingCacheFromUrl=void 0,t.error=null,t.createItemValue=function(e){return new to(e)},t.registerPropertyChangedHandlers(["url"],function(){t.owner&&t.owner.setPropertyValue("isUsingRestful",!!t.url)}),t}return lo(t,e),Object.defineProperty(t,"EncodeParameters",{get:function(){return gn.web.encodeUrlParams},set:function(e){gn.web.encodeUrlParams=e},enumerable:!1,configurable:!0}),t.clearCache=function(){t.itemsResult={},t.sendingSameRequests={}},t.addSameRequest=function(e){if(!e.isUsingCache)return!1;var n=e.objHash,o=t.sendingSameRequests[n];return o?(o.push(e),e.isRunningValue=!0,!0):(t.sendingSameRequests[e.objHash]=[],!1)},t.unregisterSameRequests=function(e,n){if(e.isUsingCache){var o=t.sendingSameRequests[e.objHash];if(delete t.sendingSameRequests[e.objHash],o)for(var i=0;i<o.length;i++)o[i].isRunningValue=!1,o[i].getResultCallback&&o[i].getResultCallback(n)}},Object.defineProperty(t,"onBeforeSendRequest",{get:function(){return gn.web.onBeforeRequestChoices},set:function(e){gn.web.onBeforeRequestChoices=e},enumerable:!1,configurable:!0}),t.getCachedItemsResult=function(e){var n=e.objHash,o=t.itemsResult[n];return!!o&&(e.getResultCallback&&e.getResultCallback(o),!0)},t.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.owner?this.owner.survey:null},t.prototype.run=function(e){if(void 0===e&&(e=null),this.url&&this.getResultCallback){if(this.processedText(e),!this.processedUrl)return this.doEmptyResultCallback({}),void(this.lastObjHash=this.objHash);this.lastObjHash!==this.objHash&&(this.lastObjHash=this.objHash,this.error=null,this.useChangedItemsResults()||t.addSameRequest(this)||this.sendRequest())}},Object.defineProperty(t.prototype,"isUsingCache",{get:function(){return!0===this.isUsingCacheFromUrl||!1!==this.isUsingCacheFromUrl&&gn.web.cacheLoadedChoices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRunning",{get:function(){return this.getIsRunning()},enumerable:!1,configurable:!0}),t.prototype.getIsRunning=function(){return this.isRunningValue},Object.defineProperty(t.prototype,"isWaitingForParameters",{get:function(){return this.url&&!this.processedUrl},enumerable:!1,configurable:!0}),t.prototype.useChangedItemsResults=function(){return t.getCachedItemsResult(this)},t.prototype.doEmptyResultCallback=function(e){var t=[];this.updateResultCallback&&(t=this.updateResultCallback(t,e)),this.getResultCallback(t)},t.prototype.processedText=function(e){var n=this.url;if(n&&(n=n.replace(t.cacheText,"").replace(t.noCacheText,"")),e){var o=e.processTextEx({text:n,runAtDesign:!0}),i=e.processTextEx({text:this.path,runAtDesign:!0});o.hasAllValuesOnLastRun&&i.hasAllValuesOnLastRun?(this.processedUrl=o.text,this.processedPath=i.text):(this.processedUrl="",this.processedPath="")}else this.processedUrl=n,this.processedPath=this.path;this.onProcessedUrlCallback&&this.onProcessedUrlCallback(this.processedUrl,this.processedPath)},t.prototype.parseResponse=function(e){var t;if(e&&"function"==typeof e.indexOf&&0===e.indexOf("<"))t=(new uo).parseXmlString(e);else try{t=JSON.parse(e)}catch(n){t=(e||"").split("\n").map(function(e){return e.trim(" ")}).filter(function(e){return!!e})}return t},t.prototype.sendRequest=function(){"undefined"!=typeof XMLHttpRequest?this.sendXmlHttpRequest():"undefined"!=typeof fetch?this.sendFetchRequest():(this.error=new wn("The browser does not support XMLHttpRequest or fetch API","",this.owner),this.doEmptyResultCallback(""))},t.prototype.sendXmlHttpRequest=function(){var e=new XMLHttpRequest;e.open("GET",this.processedUrl),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var t=this,n=this.objHash;e.onload=function(){t.beforeLoadRequest(),200===e.status?t.onLoad(t.parseResponse(e.response),n):t.onError(e.statusText,e.responseText)};var o={url:this.processedUrl,request:e};gn.web.onBeforeRequestChoices&&gn.web.onBeforeRequestChoices(this,o),this.beforeSendRequest(),o.request.send()},t.prototype.sendFetchRequest=function(){var e=this,t=this.objHash,n={url:this.processedUrl,fetchOptions:{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}}};gn.web.onBeforeRequestChoices&&gn.web.onBeforeRequestChoices(this,n),this.beforeSendRequest(),fetch(n.url,n.fetchOptions).then(function(n){return e.beforeLoadRequest(),200===n.status?n.text().then(function(n){e.onLoad(e.parseResponse(n),t)}):n.text().then(function(t){e.onError(n.statusText,t)})}).catch(function(t){e.onError(t.message,"")})},t.prototype.getType=function(){return"choicesByUrl"},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return!this.url&&!this.path},enumerable:!1,configurable:!0}),t.prototype.getCustomPropertiesNames=function(){for(var e=this.getCustomProperties(),t=new Array,n=0;n<e.length;n++)t.push(this.getCustomPropertyName(e[n].name));return t},t.prototype.getCustomPropertyName=function(e){return e+"Name"},t.prototype.getCustomProperties=function(){for(var e=D.getProperties(this.itemValueType),t=[],n=0;n<e.length;n++)"value"!==e[n].name&&"text"!==e[n].name&&"visibleIf"!==e[n].name&&"enableIf"!==e[n].name&&t.push(e[n]);return t},t.prototype.getAllPropertiesNames=function(){var e=new Array;return D.getPropertiesByObj(this).forEach(function(t){return e.push(t.name)}),this.getCustomPropertiesNames().forEach(function(t){return e.push(t)}),e},t.prototype.setData=function(e){var t=this;e||(e={}),this.getAllPropertiesNames().forEach(function(n){t[n]=e[n]});var n=e.attachData||e.attachOriginalItems;void 0!==n&&(this.attachData=n)},t.prototype.getData=function(){var e=this,t={},n=!1;return this.getAllPropertiesNames().forEach(function(o){var i=e[o];e.isValueEmpty(i)||i===e.getDefaultPropertyValue(o)||(t[o]=i,n=!0)}),n?t:null},Object.defineProperty(t.prototype,"url",{get:function(){return this.getPropertyValue("url")||""},set:function(e){this.setPropertyValue("url",e),this.isUsingCacheFromUrl=void 0,e&&(e.indexOf(t.cacheText)>-1?this.isUsingCacheFromUrl=!0:e.indexOf(t.noCacheText)>-1&&(this.isUsingCacheFromUrl=!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.getPropertyValue("path")||""},set:function(e){this.setPropertyValue("path",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valueName",{get:function(){return this.getPropertyValue("valueName")||""},set:function(e){this.setPropertyValue("valueName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleName",{get:function(){return this.getPropertyValue("titleName")||""},set:function(e){this.setPropertyValue("titleName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageLinkName",{get:function(){return this.getPropertyValue("imageLinkName")||""},set:function(e){this.setPropertyValue("imageLinkName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowEmptyResponse",{get:function(){return this.getPropertyValue("allowEmptyResponse")},set:function(e){this.setPropertyValue("allowEmptyResponse",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attachOriginalItems",{get:function(){return this.attachData},set:function(e){this.attachData=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attachData",{get:function(){return this.getPropertyValue("attachData")},set:function(e){this.setPropertyValue("attachData",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemValueType",{get:function(){if(!this.owner)return"itemvalue";var e=D.findProperty(this.owner.getType(),"choices");return e?"itemvalue[]"==e.type?"itemvalue":e.type:"itemvalue"},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.setData(void 0)},t.prototype.beforeSendRequest=function(){this.isRunningValue=!0,this.beforeSendRequestCallback&&this.beforeSendRequestCallback()},t.prototype.beforeLoadRequest=function(){this.isRunningValue=!1},t.prototype.onLoad=function(e,n){void 0===n&&(n=null),n||(n=this.objHash);var o=new Array,i=this.getResultAfterPath(e);if(i&&i.length)for(var r=0;r<i.length;r++){var s=i[r];if(s){var a=this.getItemValueCallback?this.getItemValueCallback(s):this.getValue(s),l=this.createItemValue(a);this.setTitle(l,s),this.setCustomProperties(l,s),this.attachData&&(l.originalItem=s,l.data=s);var u=this.getImageLink(s);u&&(l.imageLink=u),o.push(l)}}else this.allowEmptyResponse||(this.error=new Vn(null,this.owner));this.updateResultCallback&&(o=this.updateResultCallback(o,e)),this.isUsingCache&&(t.itemsResult[n]=o),this.callResultCallback(o,n),t.unregisterSameRequests(this,o)},t.prototype.callResultCallback=function(e,t){t==this.objHash&&this.getResultCallback(e)},t.prototype.setCustomProperties=function(e,t){for(var n=this.getCustomProperties(),o=0;o<n.length;o++){var i=n[o],r=this.getValueCore(t,this.getPropertyBinding(i.name));this.isValueEmpty(r)||(e[i.name]=r)}},t.prototype.getPropertyBinding=function(e){return this[this.getCustomPropertyName(e)]?this[this.getCustomPropertyName(e)]:this[e]?this[e]:e},t.prototype.onError=function(e,n){this.error=new wn(e,n,this.owner),this.doEmptyResultCallback(n),t.unregisterSameRequests(this,[])},t.prototype.getResultAfterPath=function(e){if(!e)return e;if(!this.processedPath)return e;for(var t=this.getPathes(),n=0;n<t.length;n++)if(!(e=e[t[n]]))return null;return e},t.prototype.getPathes=function(){var e=[];return 0==(e=this.processedPath.indexOf(";")>-1?this.path.split(";"):this.processedPath.indexOf(",")>-1?this.processedPath.split(","):this.processedPath.split(".")).length&&e.push(this.processedPath),e},t.prototype.getValue=function(e){return e?this.valueName?this.getValueCore(e,this.valueName):e instanceof Object?Object.keys(e).length<1?null:e[Object.keys(e)[0]]:e:null},t.prototype.setTitle=function(e,t){var n=this.titleName?this.titleName:"title",o=this.getValueCore(t,n);o&&("string"==typeof o?e.text=o:e.locText.setJson(o))},t.prototype.getImageLink=function(e){var t=this.imageLinkName?this.imageLinkName:"imageLink";return this.getValueCore(e,t)},t.prototype.getValueCore=function(e,t){if(!e)return null;if(t.indexOf(".")<0)return e[t];for(var n=t.split("."),o=0;o<n.length;o++)if(!(e=e[n[o]]))return null;return e},Object.defineProperty(t.prototype,"objHash",{get:function(){return this.processedUrl+";"+this.processedPath+";"+this.valueName+";"+this.titleName+";"+this.imageLinkName+";"+this.attachData},enumerable:!1,configurable:!0}),t.cacheText="{CACHE}",t.noCacheText="{NOCACHE}",t.itemsResult={},t.sendingSameRequests={},t}(Te),po=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return lo(t,e),Object.defineProperty(t,"EncodeParameters",{get:function(){return co.EncodeParameters},set:function(e){co.EncodeParameters=e},enumerable:!1,configurable:!0}),t.clearCache=function(){co.clearCache()},Object.defineProperty(t,"onBeforeSendRequest",{get:function(){return gn.web.onBeforeRequestChoices},set:function(e){gn.web.onBeforeRequestChoices=e},enumerable:!1,configurable:!0}),t}(co);D.addClass("choicesByUrl",["url","path","valueName","titleName",{name:"imageLinkName",visibleIf:function(e){return!!e&&!!e.owner&&"imagepicker"==e.owner.getType()}},{name:"allowEmptyResponse:boolean"},{name:"attachData:boolean",alternativeName:"attachOriginalItems",visible:!1}],function(){return new co});var ho=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fo=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},go=function(e){function t(t){var n=e.call(this,t)||this;return n.generatedVisibleRows=null,n.generatedTotalRow=null,n.columns=n.createColumnValues(),n.rows=n.createItemValues("rows"),n}return ho(t,e),t.prototype.createColumnValues=function(){return this.createItemValues("columns")},t.prototype.getType=function(){return"matrixbase"},t.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.updateVisibilityBasedOnRows()},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return this.getPropertyValue("showHeader")},set:function(e){this.setPropertyValue("showHeader",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this.getPropertyValue("columns")},set:function(e){this.setPropertyValue("columns",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleColumns",{get:function(){var e=this,t=[];return this.columns.forEach(function(n){e.isColumnVisible(n)&&t.push(n)}),t},enumerable:!1,configurable:!0}),t.prototype.isColumnVisible=function(e){return e.isVisible},Object.defineProperty(t.prototype,"rows",{get:function(){return this.getPropertyValue("rows")},set:function(e){var t=this.processRowsOnSet(e);this.setPropertyValue("rows",t)},enumerable:!1,configurable:!0}),t.prototype.processRowsOnSet=function(e){return e},t.prototype.getVisibleRows=function(){return[]},Object.defineProperty(t.prototype,"visibleRows",{get:function(){return this.getVisibleRows()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowsVisibleIf",{get:function(){return this.getPropertyValue("rowsVisibleIf","")},set:function(e){this.setPropertyValue("rowsVisibleIf",e),this.isLoadingFromJsonValue||this.runCondition(this.getDataFilteredProperties())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsVisibleIf",{get:function(){return this.getPropertyValue("columnsVisibleIf","")},set:function(e){this.setPropertyValue("columnsVisibleIf",e),this.isLoadingFromJson||this.runCondition(this.getDataFilteredProperties())},enumerable:!1,configurable:!0}),t.prototype.runConditionCore=function(t){e.prototype.runConditionCore.call(this,t),this.runItemsCondition(t)},t.prototype.onColumnsChanged=function(){},t.prototype.onRowsChanged=function(){this.updateVisibilityBasedOnRows(),this.fireCallback(this.visibleRowsChangedCallback)},t.prototype.updateVisibilityBasedOnRows=function(){this.hideIfRowsEmpty&&this.onVisibleChanged()},t.prototype.isVisibleCore=function(){var t,n=e.prototype.isVisibleCore.call(this);return n&&this.hideIfRowsEmpty?(null===(t=this.visibleRows)||void 0===t?void 0:t.length)>0:n},t.prototype.shouldRunColumnExpression=function(){return!this.survey||!this.survey.areInvisibleElementsShowing},t.prototype.hasRowsAsItems=function(){return!0},t.prototype.runItemsCondition=function(e){var t=this.hasRowsAsItems()&&this.runConditionsForRows(e),n=this.runConditionsForColumns(e);(t=n||t)&&(this.isClearValueOnHidden&&n&&this.clearInvisibleColumnValues(),this.clearGeneratedRows(),n&&this.onColumnsChanged(),this.onRowsChanged())},t.prototype.clearGeneratedRows=function(){this.generatedVisibleRows=null},t.prototype.createRowsVisibleIfRunner=function(){return null},t.prototype.runConditionsForRows=function(e){var t=!!this.survey&&this.survey.areInvisibleElementsShowing,n=t?null:this.createRowsVisibleIfRunner(),o=to.runConditionsForItems(this.rows,void 0,n,e,!t);return to.runEnabledConditionsForItems(this.rows,void 0,e),o},t.prototype.runConditionsForColumns=function(e){var t=!!this.survey&&!this.survey.areInvisibleElementsShowing,n=this.getExpressionFromSurvey("columnsVisibleIf"),o=t&&n?new Pe(n):null;return to.runConditionsForItems(this.columns,void 0,o,e,this.shouldRunColumnExpression())},t.prototype.clearInvisibleColumnValues=function(){},t.prototype.clearInvisibleValuesInRows=function(){},t.prototype.needResponsiveWidth=function(){return!0},Object.defineProperty(t.prototype,"columnsAutoWidth",{get:function(){return!this.isMobile&&!this.columns.some(function(e){return!!e.width})},enumerable:!1,configurable:!0}),t.prototype.getTableCss=function(){var e;return(new _e).append(this.cssClasses.root).append(this.cssClasses.columnsAutoWidth,this.columnsAutoWidth).append(this.cssClasses.noHeader,!this.showHeader).append(this.cssClasses.hasFooter,!!(null===(e=this.renderedTable)||void 0===e?void 0:e.showAddRowOnBottom)).append(this.cssClasses.rootAlternateRows,this.alternateRows).append(this.cssClasses.rootVerticalAlignTop,"top"===this.verticalAlign).append(this.cssClasses.rootVerticalAlignMiddle,"middle"===this.verticalAlign).toString()},Object.defineProperty(t.prototype,"columnMinWidth",{get:function(){return this.getPropertyValue("columnMinWidth")||""},set:function(e){this.setPropertyValue("columnMinWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowTitleWidth",{get:function(){return this.getPropertyValue("rowTitleWidth")||""},set:function(e){this.setPropertyValue("rowTitleWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"displayMode",{get:function(){return this.getPropertyValue("displayMode")},set:function(e){this.setPropertyValue("displayMode",e)},enumerable:!1,configurable:!0}),t.prototype.getCellAriaLabel=function(e,t,n){var o=e.locText&&e.locText.renderedHtml?e.locText.renderedHtml:"";n&&(o=n);var i=t.locTitle&&t.locTitle.renderedHtml?t.locTitle.renderedHtml:"",r=(this.getLocalizationString("matrix_row")||"row").toLocaleLowerCase(),s=(this.getLocalizationString("matrix_column")||"column").toLocaleLowerCase();return"".concat(r," ").concat(o,", ").concat(s," ").concat(i)},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getIsMobile=function(){return"auto"==this.displayMode?e.prototype.getIsMobile.call(this):"list"===this.displayMode},fo([y()],t.prototype,"verticalAlign",void 0),fo([y()],t.prototype,"alternateRows",void 0),t}(Xn);D.addClass("matrixbase",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},"columnsVisibleIf:condition","rowsVisibleIf:condition","columnMinWidth",{name:"showHeader:boolean",default:!0},{name:"verticalAlign",choices:["top","middle"],default:"middle"},{name:"alternateRows:boolean",default:!1},{name:"displayMode",default:"auto",choices:["auto","table","list"],visible:!1}],void 0,"question");var yo=function(){},mo=function(e,t){this.name=e,this.returnDisplayValue=t,this.isExists=!1},bo=function(){function e(){this._unObservableValues=[void 0]}return Object.defineProperty(e.prototype,"hasAllValuesOnLastRunValue",{get:function(){return this._unObservableValues[0]},set:function(e){this._unObservableValues[0]=e},enumerable:!1,configurable:!0}),e.prototype.process=function(e,t,n,o){if(this.hasAllValuesOnLastRunValue=!0,!e)return e;if(!this.onProcess)return e;for(var i=this.getItems(e),s=i.length-1;s>=0;s--){var a=i[s],l=this.getName(e.substring(a.start+1,a.end));if(l){var u=new mo(l,!0===t);if(this.onProcess(u),u.isExists||(this.hasAllValuesOnLastRunValue=!1),u.isExists||o){r.isValueEmpty(u.value)&&(this.hasAllValuesOnLastRunValue=!1);var c=r.isValueEmpty(u.value)?"":u.value;n&&(c=encodeURIComponent(c)),e=e.substring(0,a.start)+c+e.substring(a.end+1)}}}return e},e.prototype.processValue=function(e,t){var n=new mo(e,t);return this.onProcess&&this.onProcess(n),n},Object.defineProperty(e.prototype,"hasAllValuesOnLastRun",{get:function(){return!!this.hasAllValuesOnLastRunValue},enumerable:!1,configurable:!0}),e.prototype.processText=function(e,t){return this.process(e,t)},e.prototype.processTextEx=function(e){var t={hasAllValuesOnLastRun:!0,text:e.text};return t.text=this.process(e.text,e.returnDisplayValue,e.doEncoding,e.replaceUndefinedValues),t.hasAllValuesOnLastRun=this.hasAllValuesOnLastRun,t},e.prototype.getItems=function(e){for(var t=[],n=e.length,o=-1,i="",r=0;r<n;r++)if("{"==(i=e[r])&&(o=r),"}"==i){if(o>-1){var s=new yo;s.start=o,s.end=r,this.isValidItemName(e.substring(o+1,r))&&t.push(s)}o=-1}return t},e.prototype.isValidItemName=function(e){return!!e&&e.indexOf(":")<0},e.prototype.getName=function(e){if(e)return e.trim()},e}(),vo=function(){function e(e){var t=this;this.obj=e,this.textPreProcessor=new bo,this.textPreProcessor.onProcess=function(e){t.getProcessedTextValue(e)}}return e.prototype.processText=function(e,t){var n={text:e,returnDisplayValue:t};return this.processTextEx(n).text},e.prototype.processTextEx=function(e){var t;return!e.runAtDesign&&(null===(t=this.survey)||void 0===t?void 0:t.isDesignMode)?{hasAllValuesOnLastRun:!0,text:e.text}:this.textPreProcessor.processTextEx(e)},Object.defineProperty(e.prototype,"survey",{get:function(){var e=this.obj;return e.getSurvey?e.getSurvey():null},enumerable:!1,configurable:!0}),e.prototype.getProcessedTextValue=function(e){var t=e.name.toLocaleLowerCase(),n=(new j).getValueInfo({name:t,context:this.obj.getValueGetterContext(),isText:!0,isDisplayValue:e.returnDisplayValue});n.isFound&&(e.isExists=n.isFound,e.value=n.value)},e}(),Co=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Po=function(){function e(e,t){this.name=e,this.json=t;var n=this;D.addClass(e,[],function(e){return wo.Instance.createQuestion(e?e.name:"",n)},"question"),this.onInit()}return e.prototype.onInit=function(){this.json.onInit&&this.json.onInit()},e.prototype.onCreated=function(e){this.json.onCreated&&this.json.onCreated(e)},e.prototype.onLoaded=function(e){this.json.onLoaded&&this.json.onLoaded(e)},e.prototype.onAfterRender=function(e,t){this.json.onAfterRender&&this.json.onAfterRender(e,t)},e.prototype.onAfterRenderContentElement=function(e,t,n){this.json.onAfterRenderContentElement&&this.json.onAfterRenderContentElement(e,t,n)},e.prototype.onUpdateQuestionCssClasses=function(e,t,n){this.json.onUpdateQuestionCssClasses&&this.json.onUpdateQuestionCssClasses(e,t,n)},e.prototype.onSetQuestionValue=function(e,t){this.json.onSetQuestionValue&&this.json.onSetQuestionValue(e,t),this.json.onValueSet&&this.json.onValueSet(e,t)},e.prototype.onPropertyChanged=function(e,t,n){this.json.onPropertyChanged&&this.json.onPropertyChanged(e,t,n)},e.prototype.onValueChanged=function(e,t,n){this.json.onValueChanged&&this.json.onValueChanged(e,t,n)},e.prototype.onValueChanging=function(e,t,n){return this.json.onValueChanging?this.json.onValueChanging(e,t,n):n},e.prototype.onGetErrorText=function(e){if(this.json.getErrorText)return this.json.getErrorText(e)},e.prototype.onItemValuePropertyChanged=function(e,t,n,o,i){this.json.onItemValuePropertyChanged&&this.json.onItemValuePropertyChanged(e,{obj:t,propertyName:n,name:o,newValue:i})},e.prototype.getDisplayValue=function(e,t,n){return this.json.getDisplayValue?this.json.getDisplayValue(n):n.getDisplayValue(e,t)},Object.defineProperty(e.prototype,"defaultQuestionTitle",{get:function(){return this.json.defaultQuestionTitle},enumerable:!1,configurable:!0}),e.prototype.setValueToQuestion=function(e){var t=this.json.valueToQuestion||this.json.setValue;return t?t(e):e},e.prototype.getValueFromQuestion=function(e){var t=this.json.valueFromQuestion||this.json.getValue;return t?t(e):e},Object.defineProperty(e.prototype,"isComposite",{get:function(){return!!this.json.elementsJSON||!!this.json.createElements},enumerable:!1,configurable:!0}),e.prototype.getDynamicProperties=function(){return Array.isArray(this.dynamicProperties)||(this.dynamicProperties=this.calcDynamicProperties()),this.dynamicProperties},e.prototype.calcDynamicProperties=function(){var e=this.json.inheritBaseProps;if(!e||!this.json.questionJSON)return[];var t=this.json.questionJSON.type;if(!t)return[];if(Array.isArray(e)){var n=[];return e.forEach(function(e){var o=D.findProperty(t,e);o&&n.push(o)}),n}var o=[];for(var i in this.json.questionJSON)o.push(i);return D.getDynamicPropertiesByTypes(this.name,t,o)},e}(),wo=function(){function e(){this.customQuestionValues=[]}return e.prototype.add=function(e){if(e){var t=e.name;if(!t)throw"Attribute name is missed";if(t=t.toLowerCase(),this.getCustomQuestionByName(t))throw"There is already registered custom question with name '"+t+"'";if(D.findClass(t))throw"There is already class with name '"+t+"'";var n=new Po(t,e);this.onAddingJson&&this.onAddingJson(t,n.isComposite),this.customQuestionValues.push(n)}},e.prototype.remove=function(e){if(!e)return!1;var t=this.getCustomQuestionIndex(e.toLowerCase());return!(t<0||(this.removeByIndex(t),0))},Object.defineProperty(e.prototype,"items",{get:function(){return this.customQuestionValues},enumerable:!1,configurable:!0}),e.prototype.getCustomQuestionByName=function(e){var t=this.getCustomQuestionIndex(e);return t>=0?this.customQuestionValues[t]:void 0},e.prototype.getCustomQuestionIndex=function(e){for(var t=0;t<this.customQuestionValues.length;t++)if(this.customQuestionValues[t].name===e)return t;return-1},e.prototype.removeByIndex=function(e){D.removeClass(this.customQuestionValues[e].name),this.customQuestionValues.splice(e,1)},e.prototype.clear=function(e){for(var t=this.customQuestionValues.length-1;t>=0;t--)!e&&this.customQuestionValues[t].json.internal||this.removeByIndex(t)},e.prototype.createQuestion=function(e,t){return t.isComposite?this.createCompositeModel(e,t):this.createCustomModel(e,t)},e.prototype.createCompositeModel=function(e,t){return this.onCreateComposite?this.onCreateComposite(e,t):new So(e,t)},e.prototype.createCustomModel=function(e,t){return this.onCreateCustom?this.onCreateCustom(e,t):new xo(e,t)},e.Instance=new e,e}(),Vo=function(e){function t(t,n){var o=e.call(this,t)||this;return o.customQuestion=n,C.createProperties(o),Tt.CreateDisabledDesignElements=!0,o.locQuestionTitle=o.createLocalizableString("questionTitle",o),o.locQuestionTitle.setJson(o.customQuestion.defaultQuestionTitle),o.createWrapper(),Tt.CreateDisabledDesignElements=!1,o.customQuestion&&o.customQuestion.onCreated(o),o}return Co(t,e),t.prototype.getType=function(){return this.customQuestion?this.customQuestion.name:"custom"},t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.getElement()&&this.getElement().locStrsChanged()},t.prototype.localeChanged=function(){e.prototype.locStrsChanged.call(this),this.getElement()&&this.getElement().localeChanged()},t.prototype.getDefaultTitle=function(){return this.locQuestionTitle.isEmpty?e.prototype.getDefaultTitle.call(this):this.getProcessedText(this.locQuestionTitle.textOrHtml)},t.prototype.addUsedLocales=function(t){e.prototype.addUsedLocales.call(this,t),this.getElement()&&this.getElement().addUsedLocales(t)},t.prototype.needResponsiveWidth=function(){var e=this.getElement();return!!e&&e.needResponsiveWidth()},t.prototype.createWrapper=function(){},t.prototype.onPropertyValueChanged=function(t,n,o){e.prototype.onPropertyValueChanged.call(this,t,n,o),this.customQuestion&&!this.isLoadingFromJson&&this.customQuestion.onPropertyChanged(this,t,o)},t.prototype.itemValuePropertyChanged=function(t,n,o,i){e.prototype.itemValuePropertyChanged.call(this,t,n,o,i),this.customQuestion&&!this.isLoadingFromJson&&this.customQuestion.onItemValuePropertyChanged(this,t,t.ownerPropertyName,n,i)},t.prototype.onFirstRenderingCore=function(){e.prototype.onFirstRenderingCore.call(this);var t=this.getElement();t&&t.onFirstRendering()},t.prototype.onHidingContent=function(){e.prototype.onHidingContent.call(this);var t=this.getElement();t&&t.onHidingContent()},t.prototype.getProgressInfo=function(){var t=e.prototype.getProgressInfo.call(this);return this.getElement()&&(t=this.getElement().getProgressInfo()),this.isRequired&&0==t.requiredQuestionCount&&(t.requiredQuestionCount=1,this.isEmpty()||(t.answeredQuestionCount=1)),t},t.prototype.initElement=function(e){e&&(e.setSurveyImpl(this),e.disableDesignActions=!0)},t.prototype.setSurveyImpl=function(t,n){this.isSettingValOnLoading=!0,e.prototype.setSurveyImpl.call(this,t,n),this.initElement(this.getElement()),this.isSettingValOnLoading=!1},t.prototype.onCustomQuestionLoaded=function(){!this.isLoadedCalled&&this.customQuestion&&this.survey&&(this.customQuestion.onLoaded(this),this.isLoadedCalled=!0)},t.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.isLoadedCalled=!1,this.getElement()&&this.getElement().onSurveyLoad(),this.onCustomQuestionLoaded()},t.prototype.setSurveyCore=function(t){e.prototype.setSurveyCore.call(this,t),!1===this.isLoadedCalled&&t&&this.onCustomQuestionLoaded()},t.prototype.afterRenderQuestionElement=function(e){},t.prototype.afterRenderCore=function(t){e.prototype.afterRenderCore.call(this,t),this.customQuestion&&this.customQuestion.onAfterRender(this,t)},t.prototype.onUpdateQuestionCssClasses=function(e,t){this.customQuestion&&this.customQuestion.onUpdateQuestionCssClasses(this,e,t)},t.prototype.setQuestionValue=function(t,n){void 0===n&&(n=!0),e.prototype.setQuestionValue.call(this,t,n),this.updateElementCss(),this.customQuestion&&this.customQuestion.onSetQuestionValue(this,t)},t.prototype.setNewValue=function(t){e.prototype.setNewValue.call(this,t),this.updateElementCss()},t.prototype.onCheckForErrors=function(t,n,o){if(e.prototype.onCheckForErrors.call(this,t,n,o),this.customQuestion){var i=this.customQuestion.onGetErrorText(this);i&&t.push(new En(i,this))}},t.prototype.getSurveyData=function(){return this},t.prototype.getTextProcessor=function(){return this.textProcessor},t.prototype.getValue=function(e){return this.value},t.prototype.setValue=function(e,t,n,o){if(this.data){this.customQuestion&&this.customQuestion.onValueChanged(this,e,t);var i=this.convertDataName(e),r=this.convertDataValue(e,t);this.valueToDataCallback&&(r=this.valueToDataCallback(r)),this.data.setValue(i,r,n,o),this.updateIsAnswered(),this.updateElementCss()}},t.prototype.getQuestionByName=function(e){},t.prototype.isValueChanging=function(e,t){if(this.customQuestion){var n=t;if(t=this.customQuestion.onValueChanging(this,e,t),!r.isTwoValueEquals(t,n)){var o=this.getQuestionByName(e);if(o)return o.value=t,!0}}return!1},t.prototype.convertDataName=function(e){return this.getValueName()},t.prototype.convertDataValue=function(e,t){return t},t.prototype.getVariable=function(e){return this.data?this.data.getVariable(e):null},t.prototype.setVariable=function(e,t){this.data&&this.data.setVariable(e,t)},t.prototype.getComment=function(e){return this.data?this.data.getComment(this.getValueName()):""},t.prototype.setComment=function(e,t,n){this.data&&this.data.setComment(this.getValueName(),t,n)},t.prototype.getAllValues=function(){return this.data?this.data.getAllValues():{}},t.prototype.getFilteredProperties=function(){return this.data?this.data.getFilteredProperties():{}},t.prototype.findQuestionByName=function(e){return this.data?this.data.findQuestionByName(e):null},t.prototype.getEditingSurveyElement=function(){},t.prototype.addElement=function(e,t){},t.prototype.removeElement=function(e){return!1},t.prototype.getQuestionTitleLocation=function(){return"left"},t.prototype.getQuestionTitleWidth=function(){},t.prototype.getColumsForElement=function(e){return[]},t.prototype.updateColumns=function(){},t.prototype.getQuestionStartIndex=function(){return this.getStartIndex()},t.prototype.getChildrenLayoutType=function(){return"row"},t.prototype.elementWidthChanged=function(e){},Object.defineProperty(t.prototype,"elements",{get:function(){return[]},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(e){return-1},t.prototype.ensureRowsVisibility=function(){},t.prototype.validateContainerOnly=function(){},t.prototype.onQuestionValueChanged=function(e){},t.prototype.getQuestionErrorLocation=function(){return this.getErrorLocation()},t.prototype.getContentAriaHidden=function(){return this.isDesignMode||e.prototype.getContentAriaHidden.call(this)},t.prototype.getContentDisplayValueCore=function(t,n,o){return o?this.customQuestion.getDisplayValue(t,n,o):e.prototype.getDisplayValueCore.call(this,t,n)},t}(Xn),xo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Co(t,e),t.prototype.getTemplate=function(){return"custom"},t.prototype.getDynamicProperties=function(){return this.customQuestion.getDynamicProperties()||[]},t.prototype.getDynamicType=function(){return this.questionWrapper?this.questionWrapper.getType():"question"},t.prototype.getOriginalObj=function(){return this.questionWrapper},t.prototype.createWrapper=function(){var e=this;this.questionWrapper=this.createQuestion(),this.createDynamicProperties(this.questionWrapper),this.getDynamicProperties().length>0&&(this.questionWrapper.onPropertyValueChangedCallback=function(t,n,o,i,r){e.getDynamicProperty(t)&&e.propertyValueChanged(t,n,o,r)})},t.prototype.getDynamicProperty=function(e){for(var t=this.getDynamicProperties(),n=0;n<t.length;n++)if(t[n].name===e)return t[n];return null},t.prototype.getElement=function(){return this.contentQuestion},t.prototype.supportAutoAdvance=function(){return!!this.contentQuestion&&this.contentQuestion.supportAutoAdvance()},t.prototype.onAnyValueChanged=function(t,n){e.prototype.onAnyValueChanged.call(this,t,n),this.contentQuestion&&this.contentQuestion.onAnyValueChanged(t,n)},t.prototype.getQuestionByName=function(e){return this.contentQuestion},t.prototype.getDefaultTitle=function(){return this.hasJSONTitle&&this.contentQuestion?this.getProcessedText(this.contentQuestion.title):e.prototype.getDefaultTitle.call(this)},t.prototype.setValue=function(t,n,o,i){this.isValueChanging(t,n)||e.prototype.setValue.call(this,t,n,o,i)},t.prototype.updateCommentFromSurvey=function(t){e.prototype.updateCommentFromSurvey.call(this,t);var n=this.contentQuestion;n&&n.updateCommentFromSurvey(t)},Object.defineProperty(t.prototype,"requireUpdateCommentValue",{get:function(){var e;return null===(e=this.contentQuestion)||void 0===e?void 0:e.requireUpdateCommentValue},enumerable:!1,configurable:!0}),t.prototype.onSetData=function(){e.prototype.onSetData.call(this),this.survey&&!this.isEmpty()&&this.setValue(this.name,this.value,!1,this.allowNotifyValueChanged)},t.prototype.validateElementCore=function(t){if(!this.contentQuestion)return!0;var n=this.contentQuestion.validateElement(t);this.errors=[];for(var o=0;o<this.contentQuestion.errors.length;o++)this.errors.push(this.contentQuestion.errors[o]);return n=n&&e.prototype.validateElementCore.call(this,t),this.updateElementCss(),n},t.prototype.focus=function(t){void 0===t&&(t=!1),this.contentQuestion?this.contentQuestion.focus(t):e.prototype.focus.call(this,t)},t.prototype.afterRenderCore=function(t){e.prototype.afterRenderCore.call(this,t),this.contentQuestion&&this.contentQuestion.afterRender(t)},Object.defineProperty(t.prototype,"contentQuestion",{get:function(){return this.questionWrapper},enumerable:!1,configurable:!0}),t.prototype.createQuestion=function(){var e=this,t=this.customQuestion.json,n=null;if(t.questionJSON){this.hasJSONTitle=!!t.questionJSON.title;var o=t.questionJSON.type;if(!o||!D.findClass(o))throw"type attribute in questionJSON is empty or incorrect";(n=D.createClass(o)).fromJSON(t.questionJSON),n=this.checkCreatedQuestion(n)}else t.createQuestion&&(n=this.checkCreatedQuestion(t.createQuestion()));return this.initElement(n),n&&(n.isContentElement=!0,n.name||(n.name="question"),n.onUpdateCssClassesCallback=function(t){e.onUpdateQuestionCssClasses(n,t)},n.hasCssErrorCallback=function(){return e.errors.length>0},n.setValueChangedDirectlyCallback=function(t){e.setValueChangedDirectly(t)}),n},t.prototype.checkCreatedQuestion=function(e){return e?(e.isQuestion||(e=Array.isArray(e.questions)&&e.questions.length>0?e.questions[0]:D.createClass("text"),F.error("Could not create component: '"+this.getType()+"'. questionJSON should be a question.")),e):e},t.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.contentQuestion&&this.isEmpty()&&!this.contentQuestion.isEmpty()&&(this.value=this.getContentQuestionValue())},t.prototype.runConditionCore=function(t){e.prototype.runConditionCore.call(this,t),this.contentQuestion&&this.contentQuestion.runCondition(t)},t.prototype.convertDataName=function(t){var n=this.contentQuestion;if(!n||t===this.getValueName())return e.prototype.convertDataName.call(this,t);var o=t.replace(n.getValueName(),this.getValueName());return 0==o.indexOf(this.getValueName())?o:e.prototype.convertDataName.call(this,t)},t.prototype.convertDataValue=function(t,n){return this.convertDataName(t)==e.prototype.convertDataName.call(this,t)?this.getContentQuestionValue():n},t.prototype.getContentQuestionValue=function(){if(this.contentQuestion){var e=this.contentQuestion.value;return this.customQuestion&&(e=this.customQuestion.getValueFromQuestion(e)),e}},t.prototype.setContentQuestionValue=function(e){this.contentQuestion&&(this.customQuestion&&(e=this.customQuestion.setValueToQuestion(e)),this.contentQuestion.value=e)},t.prototype.canSetValueToSurvey=function(){return!1},t.prototype.setQuestionValue=function(t,n){void 0===n&&(n=!0),e.prototype.setQuestionValue.call(this,t,n),this.isLoadingFromJson||!this.contentQuestion||this.isTwoValueEquals(this.getContentQuestionValue(),t)||this.setContentQuestionValue(this.getUnbindValue(t))},t.prototype.onSurveyValueChanged=function(t){e.prototype.onSurveyValueChanged.call(this,t),this.contentQuestion&&this.contentQuestion.onSurveyValueChanged(t)},t.prototype.getValueCore=function(){return this.contentQuestion?this.getContentQuestionValue():e.prototype.getValueCore.call(this)},t.prototype.setValueChangedDirectly=function(t){this.isSettingValueChanged||(this.isSettingValueChanged=!0,e.prototype.setValueChangedDirectly.call(this,t),this.contentQuestion&&this.contentQuestion.setValueChangedDirectly(t),this.isSettingValueChanged=!1)},t.prototype.createDynamicProperties=function(e){if(e){var t=this.getDynamicProperties();Array.isArray(t)&&D.addDynamicPropertiesIntoObj(this,e,t)}},t.prototype.initElement=function(t){var n=this;e.prototype.initElement.call(this,t),t&&(t.parent=this,t.afterRenderQuestionCallback=function(e,t){n.customQuestion&&n.customQuestion.onAfterRenderContentElement(n,e,t)})},t.prototype.updateElementCss=function(t){this.contentQuestion&&this.questionWrapper.updateElementCss(t),e.prototype.updateElementCss.call(this,t)},t.prototype.setIsMobile=function(t){e.prototype.setIsMobile.call(this,t),this.contentQuestion&&this.contentQuestion.setIsMobile(t)},t.prototype.updateElementCssCore=function(t){this.contentQuestion&&(t=this.contentQuestion.cssClasses),e.prototype.updateElementCssCore.call(this,t)},t.prototype.getDisplayValueCore=function(t,n){return e.prototype.getContentDisplayValueCore.call(this,t,n,this.contentQuestion)},t}(Vo),Oo=function(e){function t(t){var n=e.call(this,t)||this;return n.question=t,n}return Co(t,e),t.prototype.getValue=function(e,t,n,o){var i=this.question;return e.length>0&&(e.length>1||!t)?(e[0].name===gn.expressionVariables.composite&&e.shift(),new Kn(i.contentPanel.questions).getValue(e,!1,n,o)):{isFound:!1}},t}(Gn),So=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.customQuestion=n,o.settingNewValue=!1,o.textProcessing=new vo(o),o}return Co(t,e),t.prototype.createWrapper=function(){this.panelWrapper=this.createPanel()},t.prototype.getTemplate=function(){return"composite"},t.prototype.getElement=function(){return this.contentPanel},t.prototype.getCssRoot=function(t){return(new _e).append(e.prototype.getCssRoot.call(this,t)).append(t.composite).toString()},Object.defineProperty(t.prototype,"contentPanel",{get:function(){return this.panelWrapper},enumerable:!1,configurable:!0}),t.prototype.validateElementCore=function(t){var n=e.prototype.validateElementCore.call(this,t),o=this.contentPanel;return o?o.validateElement(t)&&n:n},t.prototype.updateElementCss=function(t){e.prototype.updateElementCss.call(this,t),this.contentPanel&&this.contentPanel.updateElementCss(t)},t.prototype.dispose=function(){this.unConnectEditingObj(),e.prototype.dispose.call(this)},t.prototype.updateEditingObj=function(){var e,t=this,n=null===(e=this.data)||void 0===e?void 0:e.getEditingSurveyElement();if(n){var o=n[this.getValueName()];return o&&!o.onPropertyChanged&&(o=void 0),o!==this.editingObjValue&&(this.unConnectEditingObj(),this.editingObjValue=o,o&&(this.onEditingObjPropertyChanged=function(e,n){t.setNewValueIntoQuestion(n.name,t.editingObjValue[n.name])},o.onPropertyChanged.add(this.onEditingObjPropertyChanged))),this.editingObjValue}},t.prototype.unConnectEditingObj=function(){this.editingObjValue&&!this.editingObjValue.isDisposed&&this.editingObjValue.onPropertyChanged.remove(this.onEditingObjPropertyChanged)},t.prototype.getEditingSurveyElement=function(){return this.editingObjValue},t.prototype.getTextProcessor=function(){return this.textProcessing},t.prototype.findQuestionByName=function(t){return this.getQuestionByName(t)||e.prototype.findQuestionByName.call(this,t)},t.prototype.clearValueIfInvisibleCore=function(t){e.prototype.clearValueIfInvisibleCore.call(this,t);for(var n=this.contentPanel.questions,o=0;o<n.length;o++)n[o].clearValueIfInvisible(t)},t.prototype.onAnyValueChanged=function(t,n){e.prototype.onAnyValueChanged.call(this,t,n);for(var o=this.contentPanel.questions,i=0;i<o.length;i++)o[i].onAnyValueChanged(t,n)},Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.createPanel=function(){var e=this,t=D.createClass("panel");t.showQuestionNumbers="off",t.renderWidth="100%";var n=this.customQuestion.json;return n.elementsJSON&&t.fromJSON({elements:n.elementsJSON}),n.createElements&&n.createElements(t,this),this.initElement(t),this.setIsContentElement(t),t.readOnly=this.isReadOnly,t.onGetNoCallback=function(t){return e.no},t.questions.forEach(function(t){t.setParentQuestion(e),t.onUpdateCssClassesCallback=function(n){e.onUpdateQuestionCssClasses(t,n)}}),this.setAfterRenderCallbacks(t),t},t.prototype.onReadOnlyChanged=function(){this.contentPanel&&(this.contentPanel.readOnly=this.isReadOnly),e.prototype.onReadOnlyChanged.call(this)},t.prototype.updateValueFromSurvey=function(t,n){void 0===n&&(n=!1),this.updateEditingObj(),e.prototype.updateValueFromSurvey.call(this,t,n)},t.prototype.onSurveyLoad=function(){if(this.isSettingValOnLoading=!0,this.contentPanel&&(this.contentPanel.readOnly=this.isReadOnly,this.setIsContentElement(this.contentPanel)),e.prototype.onSurveyLoad.call(this),this.contentPanel){var t=this.getContentPanelValue();r.isValueEmpty(t)||(this.value=t)}this.isSettingValOnLoading=!1},t.prototype.setIsContentElement=function(e){e.isContentElement=!0;for(var t=e.elements,n=0;n<t.length;n++){var o=t[n];o.isPanel?this.setIsContentElement(o):o.isContentElement=!0}},t.prototype.setVisibleIndex=function(t){if(this.isVisibleIndexNegative(t))return e.prototype.setVisibleIndex.call(this,-1);var n=e.prototype.setVisibleIndex.call(this,t);return this.isVisible&&this.contentPanel&&(n+=this.contentPanel.setVisibleIndex(t+1)),n},t.prototype.runConditionCore=function(t){e.prototype.runConditionCore.call(this,t),this.contentPanel&&this.contentPanel.runCondition(t)},t.prototype.onSurveyValueChanged=function(t){e.prototype.onSurveyValueChanged.call(this,t);var n=t||{};this.contentPanel&&this.contentPanel.questions.forEach(function(e){e.onSurveyValueChanged(n[e.getValueName()])})},t.prototype.getValue=function(e){var t=this.value;return t?t[e]:null},t.prototype.getQuestionByName=function(e){return this.contentPanel?this.contentPanel.getQuestionByName(e):void 0},t.prototype.setValue=function(t,n,o,i){if(this.settingNewValue)this.setNewValueIntoQuestion(t,n);else if(!this.isValueChanging(t,n)){if(this.settingNewValue=!0,!this.isEditingSurveyElement&&this.contentPanel)for(var r=0,s=this.contentPanel.questions.length+1;r<s&&this.updateValueCoreWithPanelValue();)r++;this.setNewValueIntoQuestion(t,n),e.prototype.setValue.call(this,t,n,o,i),this.settingNewValue=!1,this.runPanelTriggers(gn.expressionVariables.composite+"."+t,n),this.isEditingSurveyElement&&this.runCondition(this.getFilteredProperties())}},t.prototype.setComment=function(e,t,n){var o=this.getUnbindValue(this.value),i=this.getCommentName(e);if(!(!o&&!t||t&&o&&o[i]===t)){t?(o||(o={}),o[i]=t):delete o[i];var r=this.getQuestionByName(e);r&&r.comment!==t&&(r.comment=t),this.settingNewValue||(this.value=o)}},t.prototype.getComment=function(e){var t=this.getQuestionByName(e);if(t)return t.comment;var n=this.value;return!!n&&n[this.getCommentName(e)]||""},t.prototype.getCommentName=function(e){return e+gn.commentSuffix},t.prototype.runPanelTriggers=function(e,t){this.contentPanel&&this.contentPanel.questions.forEach(function(n){n.runTriggers(e,t)})},t.prototype.updateValueCoreWithPanelValue=function(){var e=this.getContentPanelValue();return!this.isTwoValueEquals(this.getValueCore(),e)&&(this.setValueCore(e),!0)},t.prototype.getContentPanelValue=function(e){return e||(e=this.contentPanel.getValue()),this.customQuestion.setValueToQuestion(e)},t.prototype.getValueForContentPanel=function(e){return this.customQuestion.getValueFromQuestion(e)},t.prototype.setNewValueIntoQuestion=function(e,t){var n=this.getQuestionByName(e);n&&!this.isTwoValueEquals(t,n.value)&&(n.value=t)},t.prototype.addConditionObjectsByContext=function(e,t){if(this.contentPanel)for(var n=this.contentPanel.questions,o=this.name,i=this.title,r=0;r<n.length;r++)e.push({name:o+"."+n[r].name,text:i+"."+n[r].title,question:n[r]})},t.prototype.collectNestedQuestionsCore=function(e,t,n,o){this.contentPanel&&(o&&e.push(this),this.contentPanel.questions.forEach(function(i){return i.addNestedQuestion(e,t,n,o)}))},t.prototype.convertDataValue=function(e,t){var n=this.contentPanel&&!this.isEditingSurveyElement?this.contentPanel.getValue():this.getValueForContentPanel(this.value);return n||(n={}),n.getType||(n=r.getUnbindValue(n)),this.isValueEmpty(t)&&!this.isEditingSurveyElement?delete n[e]:n[e]=t,this.getContentPanelValue(n)},t.prototype.setQuestionValue=function(t,n){void 0===n&&(n=!0),this.setValuesIntoQuestions(t),!this.isEditingSurveyElement&&this.contentPanel&&(t=this.getContentPanelValue()),e.prototype.setQuestionValue.call(this,t,n)},t.prototype.setValuesIntoQuestions=function(e){if(this.contentPanel&&!this.settingNewValue){e=this.getValueForContentPanel(e);var t=this.settingNewValue;this.settingNewValue=!0;for(var n=this.contentPanel.questions,o=0;o<n.length;o++){var i=n[o],r=i.getValueName(),s=this.getCommentName(r),a=e?e[r]:void 0,l=!!e&&e[s]||"";this.isTwoValueEquals(i.value,a)||void 0===a&&i.isEmpty()||(i.value=a),i.comment!==l&&(i.comment=l)}this.settingNewValue=t}},t.prototype.getValueGetterContext=function(){return new Oo(this)},t.prototype.getDisplayValueCore=function(t,n){return e.prototype.getContentDisplayValueCore.call(this,t,n,this.contentPanel)},t.prototype.setAfterRenderCallbacks=function(e){var t=this;if(e&&this.customQuestion)for(var n=e.questions,o=0;o<n.length;o++)n[o].afterRenderQuestionCallback=function(e,n){t.customQuestion.onAfterRenderContentElement(t,e,n)}},Object.defineProperty(t.prototype,"ariaRole",{get:function(){return"group"},enumerable:!1,configurable:!0}),t.prototype.setIsMobile=function(t){e.prototype.setIsMobile.call(this,t),this.contentPanel&&this.contentPanel.questions.forEach(function(e){e.setIsMobile(t)})},t}(Vo),Io=function(){function e(){}return Object.defineProperty(e,"DefaultChoices",{get:function(){var e=l("choices_Item");return[e+"1",e+"2",e+"3"]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DefaultColums",{get:function(){var e=l("matrix_column")+" ";return[e+"1",e+"2",e+"3"]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DefaultRows",{get:function(){var e=l("matrix_row")+" ";return[e+"1",e+"2"]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DefaultMutlipleTextItems",{get:function(){var e=l("multipletext_itemname");return[e+"1",e+"2"]},enumerable:!1,configurable:!0}),e.prototype.registerQuestion=function(e,t,n){void 0===n&&(n=!0),To.Instance.registerElement(e,t,n)},e.prototype.registerCustomQuestion=function(e){To.Instance.registerCustomQuestion(e)},e.prototype.unregisterElement=function(e,t){void 0===t&&(t=!1),To.Instance.unregisterElement(e,t)},e.prototype.clear=function(){To.Instance.clear()},e.prototype.getAllTypes=function(){return To.Instance.getAllTypes()},e.prototype.createQuestion=function(e,t){return To.Instance.createElement(e,t)},e.Instance=new e,e}(),To=function(){function e(){var e=this;this.creatorHash={},this.registerCustomQuestion=function(t,n){void 0===n&&(n=!0),e.registerElement(t,function(e){var n=D.createClass(t);return n&&(n.name=e),n},n)}}return e.prototype.registerElement=function(e,t,n){void 0===n&&(n=!0),this.creatorHash[e]={showInToolbox:n,creator:t}},e.prototype.clear=function(){this.creatorHash={}},e.prototype.unregisterElement=function(e,t){void 0===t&&(t=!1),delete this.creatorHash[e],t&&D.removeClass(e)},e.prototype.getAllToolboxTypes=function(){return this.getAllTypesCore(!0)},e.prototype.getAllTypes=function(){return this.getAllTypesCore(!1)},e.prototype.createElement=function(e,t){var n=this.creatorHash[e];if(n&&n.creator)return n.creator(t);var o=wo.Instance.getCustomQuestionByName(e);return o?wo.Instance.createQuestion(t,o):null},e.prototype.getAllTypesCore=function(e){var t=new Array;for(var n in this.creatorHash)e&&!this.creatorHash[n].showInToolbox||t.push(n);return t.sort()},e.Instance=new e,e}(),Ro=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Eo=function(e){function t(t){var n=e.call(this,t)||this;return n.createLocalizableString("format",n),n.registerPropertyChangedHandlers(["format","currency","displayStyle"],function(){n.updateFormatedValue()}),n}return Ro(t,e),t.prototype.getType=function(){return"expression"},Object.defineProperty(t.prototype,"hasInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this.getLocalizableStringText("format","")},set:function(e){this.setLocalizableStringText("format",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locFormat",{get:function(){return this.getLocalizableString("format")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expression",{get:function(){return this.getPropertyValue("expression","")},set:function(e){this.setPropertyValue("expression",e)},enumerable:!1,configurable:!0}),t.prototype.locCalculation=function(){this.isExecutionLocked=!0},t.prototype.unlocCalculation=function(){this.isExecutionLocked=!1},t.prototype.runConditionCore=function(t){var n=this;e.prototype.runConditionCore.call(this,t),this.isExecutionLocked||!this.runIfReadOnly&&this.isReadOnly||this.runExpressionByProperty("expression",t,function(e){n.value=n.roundValue(e)})},t.prototype.canCollectErrors=function(){return!0},t.prototype.hasRequiredError=function(){return!1},Object.defineProperty(t.prototype,"maximumFractionDigits",{get:function(){return this.getPropertyValue("maximumFractionDigits")},set:function(e){e<-1||e>20||this.setPropertyValue("maximumFractionDigits",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minimumFractionDigits",{get:function(){return this.getPropertyValue("minimumFractionDigits")},set:function(e){e<-1||e>20||this.setPropertyValue("minimumFractionDigits",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"runIfReadOnly",{get:function(){return!0===this.runIfReadOnlyValue},set:function(e){this.runIfReadOnlyValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"formatedValue",{get:function(){return this.getPropertyValue("formatedValue","")},enumerable:!1,configurable:!0}),t.prototype.updateFormatedValue=function(){this.setPropertyValue("formatedValue",this.getDisplayValueCore(!1,this.value))},t.prototype.onValueChanged=function(){this.updateFormatedValue()},t.prototype.updateValueFromSurvey=function(t,n){e.prototype.updateValueFromSurvey.call(this,t,n),this.updateFormatedValue()},t.prototype.getDisplayValueCore=function(e,t){var n=null==t?this.defaultValue:t,o="";if(!this.isValueEmpty(n)){var i=this.getValueAsStr(n);o=this.format?this.format.format(i):i}return this.survey&&(o=this.survey.getExpressionDisplayValue(this,n,o)),o},Object.defineProperty(t.prototype,"displayStyle",{get:function(){return this.getPropertyValue("displayStyle")},set:function(e){this.setPropertyValue("displayStyle",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currency",{get:function(){return this.getPropertyValue("currency")},set:function(e){["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"].indexOf(e)<0||this.setPropertyValue("currency",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useGrouping",{get:function(){return this.getPropertyValue("useGrouping")},set:function(e){this.setPropertyValue("useGrouping",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"precision",{get:function(){return this.getPropertyValue("precision")},set:function(e){this.setPropertyValue("precision",e)},enumerable:!1,configurable:!0}),t.prototype.roundValue=function(e){if(e!==1/0)return this.precision<0?e:r.isNumber(e)?parseFloat(e.toFixed(this.precision)):e},t.prototype.getValueAsStr=function(e){if("date"==this.displayStyle){var t=i("question-expression",e);if(t&&t.toLocaleDateString)return t.toLocaleDateString()}if("none"!=this.displayStyle&&r.isNumber(e)){var n=this.getLocale();n||(n="en");var o={style:this.displayStyle,currency:this.currency,useGrouping:this.useGrouping};return this.maximumFractionDigits>-1&&(o.maximumFractionDigits=this.maximumFractionDigits),this.minimumFractionDigits>-1&&(o.minimumFractionDigits=this.minimumFractionDigits),e.toLocaleString(n,o)}return e.toString()},Object.defineProperty(t.prototype,"ariaRole",{get:function(){return"presentation"},enumerable:!1,configurable:!0}),t}(Xn);function Ao(e,t,n){var o=n?t:e;return-1==e||-1==t?o:e>t?n?e:t:o}D.addClass("expression",["expression:expression",{name:"format",serializationProperty:"locFormat"},{name:"displayStyle",default:"none",choices:["none","decimal","currency","percent","date"]},{name:"currency",choices:function(){return["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"]},default:"USD",visibleIf:function(e){return"currency"===e.displayStyle}},{name:"maximumFractionDigits:number",onSettingValue:function(e,t){return Ao(e.minimumFractionDigits,t,!0)},default:-1},{name:"minimumFractionDigits:number",onSettingValue:function(e,t){return Ao(t,e.maximumFractionDigits,!1)},default:-1},{name:"useGrouping:boolean",default:!0},{name:"precision:number",default:-1,category:"data"},{name:"enableIf",visible:!1,isSerializable:!1},{name:"isRequired",visible:!1,isSerializable:!1},{name:"readOnly",visible:!1,isSerializable:!1},{name:"requiredErrorText",visible:!1,isSerializable:!1},{name:"resetValueIf",visible:!1,isSerializable:!1},{name:"setValueIf",visible:!1,isSerializable:!1},{name:"setValueExpression",visible:!1,isSerializable:!1},{name:"defaultValueExpression",visible:!1,isSerializable:!1},{name:"defaultValue",visible:!1,isSerializable:!1},{name:"correctAnswer",visible:!1,isSerializable:!1},{name:"requiredIf",visible:!1,isSerializable:!1}],function(){return new Eo("")},"question"),Io.Instance.registerQuestion("expression",function(e){return new Eo(e)});var Do=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lo=function(){function e(e){this.column=e}return e.prototype.getValue=function(e,t,n,o){if(1===e.length&&["name","item"].indexOf(e[0].name)>-1)return{isFound:!0,value:this.column.name}},e.prototype.getRootObj=function(){return this.column.colOwner},e}();function jo(e,t,n,o){e.storeOthersAsComment=!!n&&n.storeOthersAsComment,e.choices&&0!=e.choices.length||!e.choicesByUrl.isEmpty||(e.choices=n.choices),e.choicesByUrl.isEmpty||e.choicesByUrl.run(o.getTextProcessor())}var _o={dropdown:{onCellQuestionUpdate:function(e,t,n,o){!function(e,t,n,o){jo(e,0,n,o),e.locPlaceholder&&e.locPlaceholder.isEmpty&&!n.locPlaceholder.isEmpty&&(e.placeholder=n.placeholder)}(e,0,n,o)}},checkbox:{onCellQuestionUpdate:function(e,t,n,o){jo(e,0,n,o),e.colCount=t.colCount>-1?t.colCount:n.columnColCount}},radiogroup:{onCellQuestionUpdate:function(e,t,n,o){jo(e,0,n,o),e.colCount=t.colCount>-1?t.colCount:n.columnColCount}},tagbox:{onCellQuestionUpdate:function(e,t,n,o){jo(e,0,n,o)}},text:{},comment:{},boolean:{onCellQuestionUpdate:function(e,t,n,o){e.renderAs=t.renderAs}},expression:{},rating:{},slider:{}},No=function(e){function t(t,n,o){var i=e.call(this)||this;return i.indexValue=-1,i._hasVisibleCell=!0,i.isColumnsVisibleIf=!0,i.previousChoicesId=void 0,i.colOwnerValue=o,i.createLocalizableString("totalFormat",i),i.createLocalizableString("cellHint",i),i.registerPropertyChangedHandlers(["showInMultipleColumns"],function(){i.doShowInMultipleColumnsChanged()}),i.registerPropertyChangedHandlers(["visible"],function(){i.doColumnVisibilityChanged()}),i.updateTemplateQuestion(void 0,t,n),i}return Do(t,e),t.getColumnTypes=function(){var e=[];for(var t in _o)e.push(t);return e},t.prototype.getOriginalObj=function(){return this.templateQuestion},t.prototype.getClassNameProperty=function(){return"cellType"},t.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.colOwner?this.colOwner.survey:null},t.prototype.endLoadingFromJson=function(){var t=this;e.prototype.endLoadingFromJson.call(this),this.templateQuestion.autoOtherMode=this.isShowInMultipleColumns,this.templateQuestion.endLoadingFromJson(),this.templateQuestion.onGetSurvey=function(){return t.getSurvey()}},t.prototype.getDynamicPropertyName=function(){return"cellType"},t.prototype.getDynamicType=function(){return"default"===this.cellType?"question":this.calcCellQuestionType(null)},Object.defineProperty(t.prototype,"colOwner",{get:function(){return this.colOwnerValue},set:function(e){this.colOwnerValue=e,e&&(this.updateTemplateQuestion(),this.setParentQuestionToTemplate(this.templateQuestion))},enumerable:!1,configurable:!0}),t.prototype.getValueGetterContext=function(){return new Lo(this)},t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.locTitle.strChanged()},t.prototype.addUsedLocales=function(t){e.prototype.addUsedLocales.call(this,t),this.templateQuestion.addUsedLocales(t)},Object.defineProperty(t.prototype,"index",{get:function(){return this.indexValue},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e){this.indexValue=e},t.prototype.getType=function(){return"matrixdropdowncolumn"},Object.defineProperty(t.prototype,"cellType",{get:function(){return this.getPropertyValue("cellType")},set:function(e){e=e.toLocaleLowerCase(),this.updateTemplateQuestion(e),this.setPropertyValue("cellType",e),this.colOwner&&this.colOwner.onColumnCellTypeChanged(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateQuestion",{get:function(){return this.templateQuestionValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.templateQuestion.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isColumnVisible",{get:function(){return!!this.isDesignMode||this.visible&&this.hasVisibleCell},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.templateQuestion.visible},set:function(e){this.templateQuestion.visible=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasVisibleCell",{get:function(){return this._hasVisibleCell},set:function(e){this._hasVisibleCell=e},enumerable:!1,configurable:!0}),t.prototype.getVisibleMultipleChoices=function(){var e=this.templateQuestion.visibleChoices;if(!Array.isArray(e))return[];if(!Array.isArray(this._visiblechoices))return e;for(var t=new Array,n=0;n<e.length;n++){var o=e[n];this._visiblechoices.indexOf(o.value)>-1&&t.push(o)}return t},Object.defineProperty(t.prototype,"getVisibleChoicesInCell",{get:function(){if(Array.isArray(this._visiblechoices))return this._visiblechoices;var e=this.templateQuestion.visibleChoices;return Array.isArray(e)?e:[]},enumerable:!1,configurable:!0}),t.prototype.setVisibleChoicesInCell=function(e){this._visiblechoices=e},Object.defineProperty(t.prototype,"isFilteredMultipleColumns",{get:function(){if(!this.showInMultipleColumns)return!1;var e=this.templateQuestion.choices;if(!Array.isArray(e))return!1;for(var t=0;t<e.length;t++)if(e[t].visibleIf)return!0;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.templateQuestion.name},set:function(e){this.templateQuestion.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.templateQuestion.title},set:function(e){this.templateQuestion.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.templateQuestion.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullTitle",{get:function(){return this.locTitle.textOrHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultDisplayValue",{get:function(){return this.templateQuestion.defaultDisplayValue},set:function(e){this.templateQuestion.defaultDisplayValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locDefaultDisplayValue",{get:function(){return this.templateQuestion.locDefaultDisplayValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequired",{get:function(){return this.getPropertyValue("isRequired")},set:function(e){this.setPropertyValue("isRequired",e),this.templateQuestion.isRequired=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRenderedRequired",{get:function(){return this.getPropertyValue("isRenderedRequired",this.isRequired)},set:function(e){this.setPropertyValue("isRenderedRequired",e)},enumerable:!1,configurable:!0}),t.prototype.updateIsRenderedRequired=function(e){this.isRenderedRequired=e||this.isRequired},Object.defineProperty(t.prototype,"requiredMark",{get:function(){return this.isRenderedRequired&&this.getSurvey()?this.getSurvey().requiredMark:this.templateQuestion.requiredMark},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredErrorText",{get:function(){return this.templateQuestion.requiredErrorText},set:function(e){this.templateQuestion.requiredErrorText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRequiredErrorText",{get:function(){return this.templateQuestion.locRequiredErrorText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this.templateQuestion.readOnly},set:function(e){this.templateQuestion.readOnly=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasOther",{get:function(){return this.showOtherItem},set:function(e){this.showOtherItem=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showOtherItem",{get:function(){return this.templateQuestion.showOtherItem},set:function(e){this.templateQuestion.showOtherItem=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleIf",{get:function(){return this.templateQuestion.visibleIf},set:function(e){this.templateQuestion.visibleIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableIf",{get:function(){return this.templateQuestion.enableIf},set:function(e){this.templateQuestion.enableIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredIf",{get:function(){return this.templateQuestion.requiredIf},set:function(e){this.templateQuestion.requiredIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resetValueIf",{get:function(){return this.templateQuestion.resetValueIf},set:function(e){this.templateQuestion.resetValueIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultValueExpression",{get:function(){return this.templateQuestion.defaultValueExpression},set:function(e){this.templateQuestion.defaultValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setValueIf",{get:function(){return this.templateQuestion.setValueIf},set:function(e){this.templateQuestion.setValueIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setValueExpression",{get:function(){return this.templateQuestion.setValueExpression},set:function(e){this.templateQuestion.setValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUnique",{get:function(){return this.getPropertyValue("isUnique")},set:function(e){this.setPropertyValue("isUnique",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showInMultipleColumns",{get:function(){return this.getPropertyValue("showInMultipleColumns")},set:function(e){this.setPropertyValue("showInMultipleColumns",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSupportMultipleColumns",{get:function(){return["checkbox","radiogroup"].indexOf(this.cellType)>-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowInMultipleColumns",{get:function(){return this.showInMultipleColumns&&this.isSupportMultipleColumns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validators",{get:function(){return this.templateQuestion.validators},set:function(e){this.templateQuestion.validators=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalType",{get:function(){return this.getPropertyValue("totalType")},set:function(e){this.setPropertyValue("totalType",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalExpression",{get:function(){return this.getPropertyValue("totalExpression")},set:function(e){this.setPropertyValue("totalExpression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTotal",{get:function(){return"none"!=this.totalType||!!this.totalExpression},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalFormat",{get:function(){return this.getLocalizableStringText("totalFormat","")},set:function(e){this.setLocalizableStringText("totalFormat",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTotalFormat",{get:function(){return this.getLocalizableString("totalFormat")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cellHint",{get:function(){return this.getLocalizableStringText("cellHint","")},set:function(e){this.setLocalizableStringText("cellHint",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCellHint",{get:function(){return this.getLocalizableString("cellHint")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderAs",{get:function(){return this.getPropertyValue("renderAs")},set:function(e){this.setPropertyValue("renderAs",e),this.templateQuestion&&(this.templateQuestion.renderAs=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalMaximumFractionDigits",{get:function(){return this.getPropertyValue("totalMaximumFractionDigits")},set:function(e){e<-1||e>20||this.setPropertyValue("totalMaximumFractionDigits",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalMinimumFractionDigits",{get:function(){return this.getPropertyValue("totalMinimumFractionDigits")},set:function(e){e<-1||e>20||this.setPropertyValue("totalMinimumFractionDigits",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalDisplayStyle",{get:function(){return this.getPropertyValue("totalDisplayStyle")},set:function(e){this.setPropertyValue("totalDisplayStyle",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalAlignment",{get:function(){return this.getPropertyValue("totalAlignment")},set:function(e){this.setPropertyValue("totalAlignment",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalCurrency",{get:function(){return this.getPropertyValue("totalCurrency")},set:function(e){["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"].indexOf(e)<0||this.setPropertyValue("totalCurrency",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth","")},set:function(e){this.setPropertyValue("minWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.templateQuestion.width},set:function(e){this.templateQuestion.width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"colCount",{get:function(){return this.getPropertyValue("colCount")},set:function(e){e<-1||e>4||this.setPropertyValue("colCount",e)},enumerable:!1,configurable:!0}),t.prototype.getLocale=function(){return this.colOwner?this.colOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,t,n){return this.colOwner?this.colOwner.getMarkdownHtml(e,t,n):void 0},t.prototype.getRenderer=function(e){return this.colOwner?this.colOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.colOwner?this.colOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e){return this.colOwner?this.colOwner.getProcessedText(e):e},t.prototype.createCellQuestion=function(e){var t=this.calcCellQuestionType(e),n=this.createNewQuestion(t);return this.callOnCellQuestionUpdate(n,e),n},t.prototype.startLoadingFromJson=function(t){e.prototype.startLoadingFromJson.call(this,t),t&&!t.cellType&&t.choices&&(t.cellType=this.colOwner.getCellType())},t.prototype.updateCellQuestion=function(e,t,n){void 0===n&&(n=null),this.setQuestionProperties(e,n)},t.prototype.callOnCellQuestionUpdate=function(e,t){var n=e.getType(),o=_o[n];o&&o.onCellQuestionUpdate&&o.onCellQuestionUpdate(e,this,this.colOwner,t)},t.prototype.defaultCellTypeChanged=function(){this.updateTemplateQuestion()},t.prototype.calcCellQuestionType=function(e){var t=this.getDefaultCellQuestionType();return e&&this.colOwner&&(t=this.colOwner.getCustomCellType(this,e,t)),t},t.prototype.getDefaultCellQuestionType=function(e){return e||(e=this.cellType),"default"!==e?e:this.colOwner?this.colOwner.getCellType():gn.matrix.defaultCellType},t.prototype.updateTemplateQuestion=function(e,t,n){var o=this,i=this.getDefaultCellQuestionType(e),r=this.templateQuestion?this.templateQuestion.getType():"";i!==r&&(this.templateQuestion&&this.removeProperties(r),this.templateQuestionValue=this.createNewQuestion(i),this.templateQuestion.locOwner=this,this.addProperties(i),t&&(this.name=t),n?this.title=n:this.templateQuestion.locTitle.strChanged(),gn.serialization.matrixDropdownColumnSerializeTitle&&(this.templateQuestion.locTitle.serializeCallBackText=!0),this.templateQuestion.onPropertyChanged.add(function(e,t){o.propertyValueChanged(t.name,t.oldValue,t.newValue,t.arrayChanges,t.target)}),this.templateQuestion.onNestedPropertyChanged.add(function(e,t){o.colOwner&&!o.isLoadingFromJson&&o.colOwner.onColumnNestedPropertyChanged(o,t.name,t.nestedName,t.newValue)}),this.templateQuestion.onItemValuePropertyChanged.add(function(e,t){o.doItemValuePropertyChanged(t.propertyName,t.obj,t.name,t.newValue,t.oldValue)}),this.templateQuestion.isContentElement=!0,this.isLoadingFromJson||(this.templateQuestion.onGetSurvey=function(){return o.getSurvey()}),this.templateQuestion.locTitle.strChanged())},t.prototype.createNewQuestion=function(e){var t=D.createClass(e);return t||(t=D.createClass("text")),t.loadingOwner=this,t.isEditableTemplateElement=!0,t.autoOtherMode=this.isShowInMultipleColumns,this.setQuestionProperties(t),this.setParentQuestionToTemplate(t),t},t.prototype.setParentQuestionToTemplate=function(e){this.colOwner&&this.colOwner.isQuestion&&e.setParentQuestion(this.colOwner)},t.prototype.setQuestionProperties=function(e,t){var n=this;if(void 0===t&&(t=null),this.templateQuestion){var o=(new A).toJsonObject(this.templateQuestion,!0);if(t&&t(o),o.type=e.getType(),"default"===this.cellType&&this.colOwner&&this.colOwner.hasChoices()&&delete o.choices,delete o.itemComponent,this.jsonObj&&"rating"===o.type&&this.isLoadingFromJson&&Object.keys(this.jsonObj).forEach(function(e){o[e]=n.jsonObj[e]}),"random"===o.choicesOrder){o.choicesOrder="none";var i=this.templateQuestion.visibleChoices;Array.isArray(i)&&(o.choices=i)}(new A).toObject(o,e),e.isContentElement=this.templateQuestion.isContentElement,this.previousChoicesId=void 0,e.loadedChoicesFromServerCallback=function(){if(n.isShowInMultipleColumns&&(!n.previousChoicesId||n.previousChoicesId===e.id)){n.previousChoicesId=e.id;var t=e.visibleChoices;n.templateQuestion.choices=t,n.propertyValueChanged("choices",t,t)}}}},t.prototype.propertyValueChanged=function(t,n,o,i,r){if(e.prototype.propertyValueChanged.call(this,t,n,o,i,r),"isRequired"===t&&this.updateIsRenderedRequired(o),this.colOwner&&!this.isLoadingFromJson){if(this.isShowInMultipleColumns){if("choicesOrder"===t)return;["visibleChoices","choices"].indexOf(t)>-1&&this.colOwner.onShowInMultipleColumnsChanged(this)}D.hasOriginalProperty(this,t)&&this.colOwner.onColumnPropertyChanged(this,t,o)}},t.prototype.doItemValuePropertyChanged=function(e,t,n,o,i){D.hasOriginalProperty(t,n)&&(null==this.colOwner||this.isLoadingFromJson||this.colOwner.onColumnItemValuePropertyChanged(this,e,t,n,o,i))},t.prototype.doShowInMultipleColumnsChanged=function(){null!=this.colOwner&&this.colOwner.onShowInMultipleColumnsChanged(this),this.templateQuestion&&(this.templateQuestion.autoOtherMode=this.isShowInMultipleColumns)},t.prototype.doColumnVisibilityChanged=function(){null==this.colOwner||this.isDesignMode||this.colOwner.onColumnVisibilityChanged(this)},t.prototype.getProperties=function(e){return D.getDynamicPropertiesByObj(this,e)},t.prototype.removeProperties=function(e){for(var t=this.getProperties(e),n=0;n<t.length;n++){var o=t[n];delete this[o.name],o.serializationProperty&&delete this[o.serializationProperty]}},t.prototype.addProperties=function(e){var t=this.getProperties(e);D.addDynamicPropertiesIntoObj(this,this.templateQuestion,t)},t}(Te);D.addClass("matrixdropdowncolumn",[{name:"!name",isUnique:!0},{name:"title",serializationProperty:"locTitle",dependsOn:"name",onPropertyEditorUpdate:function(e,t){e&&t&&(t.placeholder=e.locTitle.getPlaceholder())}},{name:"cellHint",serializationProperty:"locCellHint",visible:!1},{name:"cellType",default:"default",choices:function(){var e=No.getColumnTypes();return e.splice(0,0,"default"),e}},{name:"colCount",default:-1,choices:[-1,0,1,2,3,4]},{name:"isRequired:boolean",defaultFunc:function(e){var t=null==e?void 0:e.templateQuestion;return t&&D.findProperty(t.getType(),"isRequired").getDefaultValue(t)||!1}},"isUnique:boolean",{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},"readOnly:boolean",{name:"minWidth",onPropertyEditorUpdate:function(e,t){e&&t&&(t.value=e.minWidth)}},"width",{name:"visible:switch",default:!0,overridingProperty:"visibleIf"},"visibleIf:condition","enableIf:condition","requiredIf:condition","resetValueIf:condition","setValueIf:condition","setValueExpression:expression",{name:"showInMultipleColumns:boolean",dependsOn:"cellType",visibleIf:function(e){return e.isSupportMultipleColumns}},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"},{name:"totalType",visibleIf:function(e){return!e.isShowInMultipleColumns},default:"none",choices:["none","sum","count","min","max","avg"]},{name:"totalExpression:expression",visibleIf:function(e){return!e.isShowInMultipleColumns}},{name:"totalFormat",serializationProperty:"locTotalFormat",visibleIf:function(e){return e.hasTotal}},{name:"totalDisplayStyle",visibleIf:function(e){return e.hasTotal},default:"none",choices:["none","decimal","currency","percent"]},{name:"totalAlignment",visibleIf:function(e){return e.hasTotal},default:"auto",choices:["auto","left","center","right"]},{name:"totalCurrency",visibleIf:function(e){return e.hasTotal},choices:function(){return["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"]},default:"USD"},{name:"totalMaximumFractionDigits:number",default:-1,visibleIf:function(e){return e.hasTotal}},{name:"totalMinimumFractionDigits:number",default:-1,visibleIf:function(e){return e.hasTotal}},{name:"renderAs",default:"default",visible:!1},{name:"defaultDisplayValue",serializationProperty:"locDefaultDisplayValue"}],function(){return new No("")});var Mo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ko=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};function Fo(e,t,n){return e+(t?"-error":"")+(n?"-detail":"")}var Bo=function(){function e(){this.minWidth="",this.width="",this.colSpans=1,this.isActionsCell=!1,this.isErrorsCell=!1,this.isDragHandlerCell=!1,this.isDetailRowCell=!1,this.classNameValue="",this.idValue=e.counter++}return Object.defineProperty(e.prototype,"requiredMark",{get:function(){return this.column&&this.column.isRenderedRequired?this.column.requiredMark:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasQuestion",{get:function(){return!!this.question&&!this.isErrorsCell},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasTitle",{get:function(){return!!this.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPanel",{get:function(){return!!this.panel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){var e=this.question?this.question.id:this.idValue.toString();return this.isChoice&&(e+="-"+(Number.isInteger(this.choiceIndex)?"index"+this.choiceIndex.toString():this.item.id)),Fo(e,this.isErrorsCell,this.isDetailRowCell)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this.itemValue},set:function(e){this.itemValue=e,e&&(e.hideCaption=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isChoice",{get:function(){return!!this.item},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isItemChoice",{get:function(){return this.isChoice&&!this.isOtherChoice},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"choiceValue",{get:function(){return this.isChoice?this.item.value:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCheckbox",{get:function(){return this.isItemChoice&&this.question.isDescendantOf("checkbox")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRadio",{get:function(){return this.isItemChoice&&this.question.isDescendantOf("radiogroup")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFirstChoice",{get:function(){return 0===this.choiceIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){var e=(new _e).append(this.classNameValue);return this.hasQuestion&&e.append(this.question.cssClasses.hasError,this.question.errors.length>0).append(this.question.cssClasses.answered,this.question.isAnswered),e.toString()},set:function(e){this.classNameValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cellQuestionWrapperClassName",{get:function(){return this.cell.getQuestionWrapperClassName(this.matrix.cssClasses.cellQuestionWrapper)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){var e;return!this.hasQuestion&&!this.isErrorsCell||!(null===(e=this.matrix)||void 0===e?void 0:e.isMobile)||this.question.isVisible},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showResponsiveTitle",{get:function(){var e;return this.hasQuestion&&(null===(e=this.matrix)||void 0===e?void 0:e.isMobile)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responsiveTitleCss",{get:function(){return(new _e).append(this.matrix.cssClasses.cellResponsiveTitle).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responsiveLocTitle",{get:function(){return this.cell.column.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){if(this.cell&&this.cell.column){if(this.matrix.IsMultiplyColumn(this.cell.column))return this.item?this.item.locText.renderedHtml:"";var e=this.cell.column.cellHint;return e?""===e.trim()?"":this.cell.column.locCellHint.renderedHtml:this.hasQuestion&&this.question.isVisible&&this.question.title?this.question.title:this.cell.column.title}return this.hasQuestion&&this.question.isVisible?this.question.locTitle.renderedHtml:this.hasTitle&&this.locTitle.renderedHtml||""},enumerable:!1,configurable:!0}),e.prototype.getTitle=function(){return this.matrix&&this.matrix.showHeader?this.headers:""},e.prototype.calculateFinalClassName=function(e){var t=this.cell.question.cssClasses,n=(new _e).append(t.itemValue,!!t).append(t.asCell,!!t);return n.append(e.cell,n.isEmpty()&&!!e).append(e.choiceCell,this.isChoice).toString()},e.prototype.focusIn=function(){this.question&&this.question.focusIn()},e.counter=1,e}(),qo=function(e){function t(t,n){void 0===n&&(n=!1);var o=e.call(this)||this;return o.cssClasses=t,o.isDetailRow=n,o.hasEndActions=!1,o.isErrorsRow=!1,o.cells=[],o}return Mo(t,e),Object.defineProperty(t.prototype,"id",{get:function(){var e;return Fo((null===(e=this.row)||void 0===e?void 0:e.id)||this.uniqueId.toString(),this.isErrorsRow,this.isDetailRow)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropTargetId",{get:function(){var e;return null===(e=this.row)||void 0===e?void 0:e.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){return this.row?{"data-sv-drop-target-matrix-row":this.row.id}:{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){var e,t;return(new _e).append(this.cssClasses.row).append(this.cssClasses.detailRow,this.isDetailRow).append(this.cssClasses.rowHasPanel,null===(e=this.row)||void 0===e?void 0:e.hasPanel).append(this.cssClasses.expandedRow,(null===(t=this.row)||void 0===t?void 0:t.isDetailPanelShowing)&&!this.isDetailRow).append(this.cssClasses.rowHasEndActions,this.hasEndActions).append(this.cssClasses.ghostRow,this.isGhostRow).append(this.cssClasses.rowAdditional,this.isAdditionalClasses).toString()},enumerable:!1,configurable:!0}),t.prototype.setRootElement=function(e){this.rootElement=e},t.prototype.getRootElement=function(){return this.rootElement},t.prototype.focusCell=function(e){if(this.rootElement){var t=":scope td:nth-of-type(".concat(e+1,") input, :scope td:nth-of-type(").concat(e+1,") button"),n=this.rootElement.querySelectorAll(t)[0];n&&n.focus()}},ko([y({defaultValue:!1})],t.prototype,"isGhostRow",void 0),ko([y({defaultValue:!1})],t.prototype,"isAdditionalClasses",void 0),ko([y({defaultValue:!0})],t.prototype,"visible",void 0),t}(Te),Qo=function(e){function t(t){var n=e.call(this,t)||this;return n.isErrorsRow=!0,n}return Mo(t,e),Object.defineProperty(t.prototype,"attributes",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return(new _e).append(this.cssClasses.row).append(this.cssClasses.errorRow).toString()},enumerable:!1,configurable:!0}),t.prototype.onAfterCreated=function(){var e=this,t=function(){e.visible=e.cells.some(function(e){return e.question&&e.question.hasVisibleErrors})};this.cells.forEach(function(e){e.question&&e.question.registerFunctionOnPropertyValueChanged("hasVisibleErrors",t)}),t()},t}(qo),zo=function(e){function t(t,n){var o=e.call(this,t)||this;return o.customId=n,o.isErrorsRow=!1,o}return Mo(t,e),Object.defineProperty(t.prototype,"attributes",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropTargetId",{get:function(){return this.customId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return(new _e).append(this.cssClasses.row).append(this.cssClasses.rowEmpty).toString()},enumerable:!1,configurable:!0}),t}(qo),Ho=function(e){function t(t){var n=e.call(this)||this;return n.matrix=t,n._renderedRows=[],n.renderedRowsAnimation=new Vt(n.getRenderedRowsAnimationOptions(),function(e){n._renderedRows=e},function(){return n._renderedRows}),n.hasActionCellInRowsValues={},n.build(),n}return Mo(t,e),t.prototype.getIsAnimationAllowed=function(){return e.prototype.getIsAnimationAllowed.call(this)&&this.matrix.animationAllowed},t.prototype.getRenderedRowsAnimationOptions=function(){var e=this,t=function(e){e.querySelectorAll(":scope > td > *").forEach(function(e){pn(e)})},n=function(e){e.querySelectorAll(":scope > td > *").forEach(function(e){hn(e)})};return{isAnimationEnabled:function(){return e.animationAllowed},getRerenderEvent:function(){return e.onElementRerendered},getAnimatedElement:function(e){return e.getRootElement()},getLeaveOptions:function(){return{cssClass:e.cssClasses.rowLeave,onBeforeRunAnimation:t,onAfterRunAnimation:n}},getEnterOptions:function(o,i){return{cssClass:e.cssClasses.rowEnter,onBeforeRunAnimation:t,onAfterRunAnimation:n}},getKey:function(e){return e.id}}},t.prototype.updateRenderedRows=function(){this.renderedRows=this.rows},Object.defineProperty(t.prototype,"renderedRows",{get:function(){return this._renderedRows},set:function(e){this.renderedRowsAnimation.sync(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapperDropTargetId",{get:function(){var e;return null===(e=this.renderedRows[this.renderedRows.length-1])||void 0===e?void 0:e.dropTargetId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTable",{get:function(){return this.getPropertyValue("showTable",!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return this.getPropertyValue("showHeader")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showAddRow",{get:function(){return this.getPropertyValue("showAddRow",!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showAddRowOnTop",{get:function(){return this.getPropertyValue("showAddRowOnTop",!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showAddRowOnBottom",{get:function(){return this.getPropertyValue("showAddRowOnBottom",!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showFooter",{get:function(){return this.matrix.hasFooter&&this.matrix.isColumnLayoutHorizontal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFooter",{get:function(){return!!this.footerRow},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasRemoveRows",{get:function(){return this.hasRemoveRowsValue},enumerable:!1,configurable:!0}),t.prototype.isRequireReset=function(){return this.isRequireResetValue||this.hasRemoveRows!=this.matrix.canRemoveRows||!this.matrix.isColumnLayoutHorizontal},t.prototype.requireReset=function(){this.isRequireResetValue=!0},Object.defineProperty(t.prototype,"headerRow",{get:function(){return this.headerRowValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerRow",{get:function(){return this.footerRowValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRowsDragAndDrop",{get:function(){return this.matrix.isRowsDragAndDrop&&this.matrix.isColumnLayoutHorizontal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCellErrorsTop",{get:function(){return"top"===this.matrix.getErrorLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCellErrorsBottom",{get:function(){return"bottom"===this.matrix.getErrorLocation()},enumerable:!1,configurable:!0}),t.prototype.build=function(){this.hasRemoveRowsValue=this.matrix.canRemoveRows,this.matrix.visibleRows,this.cssClasses=this.matrix.cssClasses,this.buildRowsActions(),this.buildHeader(),this.buildRows(),this.buildFooter(),this.updateShowTableAndAddRow()},t.prototype.updateShowTableAndAddRow=function(){var e=this.rows.length>0||this.matrix.isDesignMode||!this.matrix.getShowColumnsIfEmpty();this.setPropertyValue("showTable",e);var t=this.matrix.isDesignMode,n=!t&&this.matrix.canAddRow&&e,o=n,i=n;o&&(o="default"===this.matrix.getAddRowLocation()?!this.matrix.isColumnLayoutHorizontal:"bottom"!==this.matrix.getAddRowLocation()),i&&"topBottom"!==this.matrix.getAddRowLocation()&&(i=!o),this.setPropertyValue("showAddRow",!t&&this.matrix.canAddRow),this.setPropertyValue("showAddRowOnTop",o),this.setPropertyValue("showAddRowOnBottom",i)},t.prototype.onAddedRow=function(e,t){if(!(this.getRenderedDataRowCount()>=this.matrix.visibleRows.length)){var n=this.getRenderedRowIndexByIndex(t);this.rowsActions.splice(t,0,this.buildRowActions(e)),this.addHorizontalRow(this.rows,e,n),this.updateShowTableAndAddRow()}},t.prototype.getRenderedRowIndexByIndex=function(e){for(var t=0,n=0,o=0;o<this.rows.length;o++){if(n===e){(this.rows[o].isErrorsRow||this.rows[o].isDetailRow)&&(t++,o+1<this.rows.length&&this.rows[o+1].isDetailRow&&t++);break}t++,this.rows[o].isErrorsRow||this.rows[o].isDetailRow||n++}return n<e?this.rows.length:t},t.prototype.getRenderedDataRowCount=function(){for(var e=0,t=0;t<this.rows.length;t++)this.rows[t].isErrorsRow||this.rows[t].isDetailRow||e++;return e},t.prototype.onRemovedRow=function(e){var t=this.getRenderedRowIndex(e);if(!(t<0)){this.rowsActions.splice(t,1);var n=1;t<this.rows.length-1&&this.showCellErrorsBottom&&this.rows[t+1].isErrorsRow&&n++,t<this.rows.length-1&&(this.rows[t+1].isDetailRow||this.showCellErrorsBottom&&t+1<this.rows.length-1&&this.rows[t+2].isDetailRow)&&n++,t>0&&this.showCellErrorsTop&&this.rows[t-1].isErrorsRow&&(t--,n++),this.rows.splice(t,n),this.updateShowTableAndAddRow()}},t.prototype.onDetailPanelChangeVisibility=function(e,t){var n=this.getRenderedRowIndex(e);if(!(n<0)){var o=n;this.showCellErrorsBottom&&o++;var i=o<this.rows.length-1&&this.rows[o+1].isDetailRow?o+1:-1;if(!(t&&i>-1||!t&&i<0))if(t){var r=this.createDetailPanelRow(e,this.rows[n]);this.rows.splice(o+1,0,r)}else this.rows.splice(i,1)}},t.prototype.focusActionCell=function(e,t){var n=this.rows[this.rows.length-1];if(this.matrix.isColumnLayoutHorizontal){var o=this.getRenderedRowIndex(e);n=this.rows[o]}null==n||n.focusCell(t)},t.prototype.getRenderedRowIndex=function(e){for(var t=0;t<this.rows.length;t++)if(this.rows[t].row==e)return t;return-1},t.prototype.buildRowsActions=function(){this.rowsActions=[];for(var e=this.matrix.visibleRows,t=0;t<e.length;t++)this.rowsActions.push(this.buildRowActions(e[t]))},t.prototype.createRenderedRow=function(e,t){return void 0===t&&(t=!1),new qo(e,t)},t.prototype.createErrorRenderedRow=function(e){return new Qo(e)},t.prototype.createEmptyRenderedRow=function(e){return new zo(e,this.matrix.id)},t.prototype.buildHeader=function(){var e=this.matrix.isColumnLayoutHorizontal&&this.matrix.showHeader||this.matrix.hasRowText&&!this.matrix.isColumnLayoutHorizontal;if(this.setPropertyValue("showHeader",e),e){if(this.headerRowValue=this.createRenderedRow(this.cssClasses),this.isRowsDragAndDrop&&this.headerRow.cells.push(this.createHeaderCell(null,"action",this.cssClasses.actionsCellDrag)),this.hasActionCellInRows("start")&&this.headerRow.cells.push(this.createHeaderCell(null,"action")),this.matrix.hasRowText&&this.matrix.showHeader&&this.headerRow.cells.push(this.createHeaderCell(null)),this.matrix.isColumnLayoutHorizontal)for(var t=0;t<this.matrix.columns.length;t++){var n=this.matrix.columns[t];n.isColumnVisible&&(this.matrix.IsMultiplyColumn(n)?this.createMutlipleColumnsHeader(n):this.headerRow.cells.push(this.createHeaderCell(n)))}else{var o=this.matrix.visibleRows;for(t=0;t<o.length;t++){var i=this.createTextCell(o[t].locText);this.setHeaderCellCssClasses(i),i.row=o[t],this.headerRow.cells.push(i)}this.matrix.hasFooter&&(i=this.createTextCell(this.matrix.getFooterText()),this.setHeaderCellCssClasses(i),this.headerRow.cells.push(i))}this.hasActionCellInRows("end")&&this.headerRow.cells.push(this.createHeaderCell(null,"action"))}},t.prototype.buildFooter=function(){if(this.showFooter){if(this.footerRowValue=this.createRenderedRow(this.cssClasses),this.isRowsDragAndDrop&&this.footerRow.cells.push(this.createHeaderCell(null)),this.hasActionCellInRows("start")&&this.footerRow.cells.push(this.createHeaderCell(null,"action")),this.matrix.hasRowText){var e=this.createTextCell(this.matrix.getFooterText());e.className=(new _e).append(e.className).append(this.cssClasses.footerTotalCell).toString(),this.footerRow.cells.push(e)}for(var t=this.matrix.visibleTotalRow.cells,n=0;n<t.length;n++){var o=t[n];if(o.column.isColumnVisible)if(this.matrix.IsMultiplyColumn(o.column))this.createMutlipleColumnsFooter(this.footerRow,o);else{var i=this.createEditCell(o);o.column&&this.setCellWidth(o.column,i),i.className=(new _e).append(i.className).append(this.cssClasses.footerCell).toString(),this.footerRow.cells.push(i)}}this.hasActionCellInRows("end")&&this.footerRow.cells.push(this.createHeaderCell(null,"action"))}},t.prototype.buildRows=function(){this.blockAnimations();var e=this.matrix.isColumnLayoutHorizontal?this.buildHorizontalRows():this.buildVerticalRows();this.rows=e,this.releaseAnimations()},t.prototype.hasActionCellInRows=function(e){return void 0===this.hasActionCellInRowsValues[e]&&(this.hasActionCellInRowsValues[e]=this.hasActionsCellInLocaltion(e)),this.hasActionCellInRowsValues[e]},t.prototype.hasActionsCellInLocaltion=function(e){var t=this;return!("end"!=e||!this.hasRemoveRows)||this.matrix.visibleRows.some(function(n,o){return!t.isValueEmpty(t.getRowActions(o,e))})},t.prototype.canRemoveRow=function(e){return this.matrix.canRemoveRow(e)},t.prototype.buildHorizontalRows=function(){var e=this.matrix.visibleRows,t=[];if(0==e.length&&this.matrix.allowRowReorder&&this.matrix.allowRowDragIn){var n=this.createEmptyRow(),o=this.createTextCell(this.matrix.locNoRowsText);o.colSpans=this.headerRow&&this.headerRow.cells.length||1,n.cells.push(o),t.push(n)}for(var i=0;i<e.length;i++)this.addHorizontalRow(t,e[i]);return t},t.prototype.addHorizontalRow=function(e,t,n){void 0===n&&(n=-1);var o=this.createHorizontalRow(t),i=this.createErrorRow(o);if(o.row=t,n<0&&(n=e.length),this.matrix.isMobile){for(var r=[],s=0;s<o.cells.length;s++)this.showCellErrorsTop&&!i.cells[s].isEmpty&&r.push(i.cells[s]),r.push(o.cells[s]),this.showCellErrorsBottom&&!i.cells[s].isEmpty&&r.push(i.cells[s]);o.cells=r,e.splice(n,0,o)}else e.splice.apply(e,function(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}([n,0],this.showCellErrorsTop?[i,o]:[o,i],!1)),n++;t.isDetailPanelShowing&&e.splice(n+1,0,this.createDetailPanelRow(t,o))},t.prototype.getRowDragCell=function(e){var t=new Bo,n=this.matrix.lockedRowCount;return t.isDragHandlerCell=n<1||e>=n,t.isEmpty=!t.isDragHandlerCell,t.className=this.getActionsCellClassName(t),t.row=this.matrix.visibleRows[e],t},t.prototype.getActionsCellClassName=function(e){var t=this;void 0===e&&(e=null);var n=(new _e).append(this.cssClasses.actionsCell).append(this.cssClasses.actionsCellDrag,null==e?void 0:e.isDragHandlerCell).append(this.cssClasses.detailRowCell,null==e?void 0:e.isDetailRowCell).append(this.cssClasses.verticalCell,!this.matrix.isColumnLayoutHorizontal);if(e.isActionsCell){var o=e.item.value.actions;this.cssClasses.actionsCellPrefix&&o.forEach(function(e){n.append(t.cssClasses.actionsCellPrefix+"--"+e.id)})}return n.toString()},t.prototype.getRowActionsCell=function(e,t,n){void 0===n&&(n=!1);var o=this.getRowActions(e,t);if(!this.isValueEmpty(o)){var i=new Bo,r=this.matrix.allowAdaptiveActions?new yt:new qe;this.matrix.survey&&this.matrix.survey.getCss().actionBar&&(r.cssClasses=this.matrix.survey.getCss().actionBar),r.setItems(o);var s=new to(r);return i.item=s,i.isActionsCell=!0,i.isDragHandlerCell=!1,i.isDetailRowCell=n,i.className=this.getActionsCellClassName(i),i.row=this.matrix.visibleRows[e],i}return null},t.prototype.getRowActions=function(e,t){var n=this.rowsActions[e];return Array.isArray(n)?n.filter(function(e){return e.location||(e.location="start"),e.location===t}):[]},t.prototype.buildRowActions=function(e){var t=[];return this.setDefaultRowActions(e,t),this.matrix.survey&&(t=this.matrix.survey.getUpdatedMatrixRowActions(this.matrix,e,t)),t},Object.defineProperty(t.prototype,"showRemoveButtonAsIcon",{get:function(){return gn.matrix.renderRemoveAsIcon&&this.matrix.survey&&"sd-root-modern"===this.matrix.survey.css.root},enumerable:!1,configurable:!0}),t.prototype.setDefaultRowActions=function(e,t){var n=this,o=this.matrix;this.hasRemoveRows&&this.canRemoveRow(e)&&(this.showRemoveButtonAsIcon?t.push(new dt({id:"remove-row",iconName:"icon-delete-24x24",iconSize:"auto",component:"sv-action-bar-item",innerCss:(new _e).append(this.matrix.cssClasses.button).append(this.matrix.cssClasses.buttonRemove).toString(),location:"end",showTitle:!1,title:o.removeRowText,enabled:!o.isInputReadOnly,data:{row:e,question:o},action:function(){o.removeRowUI(e)}})):t.push(new dt({id:"remove-row",location:"end",enabled:!this.matrix.isInputReadOnly,component:"sv-matrix-remove-button",data:{row:e,question:this.matrix}}))),e.hasPanel&&(this.matrix.isMobile?t.unshift(new dt({id:"show-detail-mobile",title:new Ie(function(){return e.isDetailPanelShowing?n.matrix.getLocalizationString("hideDetails"):n.matrix.getLocalizationString("showDetails")}),showTitle:!0,location:"end",action:function(t){e.showHideDetailPanelClick()}})):t.push(new dt({id:"show-detail",title:new Ie(function(){return e.isDetailPanelShowing?n.matrix.getLocalizationString("hideDetails"):n.matrix.getLocalizationString("showDetails")}),showTitle:!1,location:"start",component:"sv-matrix-detail-button",data:{row:e,question:this.matrix}})))},t.prototype.createErrorRow=function(e){for(var t=this.createErrorRenderedRow(this.cssClasses),n=0;n<e.cells.length;n++){var o=e.cells[n];o.hasQuestion?this.matrix.IsMultiplyColumn(o.cell.column)?o.isFirstChoice?t.cells.push(this.createErrorCell(o.cell)):t.cells.push(this.createEmptyCell(!0)):t.cells.push(this.createErrorCell(o.cell)):t.cells.push(this.createEmptyCell(!0))}return t.onAfterCreated(),t},t.prototype.createEmptyRow=function(){return this.createEmptyRenderedRow(this.cssClasses)},t.prototype.createHorizontalRow=function(e){var t=this.createRenderedRow(this.cssClasses);if(this.isRowsDragAndDrop){var n=this.matrix.visibleRows.indexOf(e);t.cells.push(this.getRowDragCell(n))}this.addRowActionsCell(e,t,"start"),this.matrix.hasRowText&&((r=this.createTextCell(e.locText)).row=e,t.cells.push(r),this.setCellWidth(null,r),r.className=(new _e).append(r.className).append(this.cssClasses.rowTextCell).append(this.cssClasses.columnTitleCell,!this.matrix.isColumnLayoutHorizontal).append(this.cssClasses.detailRowText,e.hasPanel).toString());for(var o=0;o<e.cells.length;o++){var i=e.cells[o];if(i.column.isColumnVisible)if(this.matrix.IsMultiplyColumn(i.column))this.createMutlipleEditCells(t,i);else{i.column.isShowInMultipleColumns&&i.question.visibleChoices.map(function(e){return e.hideCaption=!1});var r=this.createEditCell(i);t.cells.push(r),this.setCellWidth(i.column,r)}}return this.addRowActionsCell(e,t,"end"),t},t.prototype.addRowActionsCell=function(e,t,n){var o=this.matrix.visibleRows.indexOf(e);if(this.hasActionCellInRows(n)){var i=this.getRowActionsCell(o,n,t.isDetailRow);if(i)t.cells.push(i),t.hasEndActions=!0;else{var r=new Bo;r.isEmpty=!0,r.isDetailRowCell=t.isDetailRow,t.cells.push(r)}}},t.prototype.createDetailPanelRow=function(e,t){var n=this.matrix.isDesignMode,o=this.createRenderedRow(this.cssClasses,!0);o.row=e;var i=new Bo;this.matrix.hasRowText&&(i.colSpans=2),i.isEmpty=!0,n||o.cells.push(i);var r=null;this.hasActionCellInRows("end")&&((r=new Bo).isEmpty=!0);var s=new Bo;return s.panel=e.detailPanel,s.colSpans=t.cells.length-(n?0:i.colSpans)-(r?r.colSpans:0),s.className=this.cssClasses.detailPanelCell,o.cells.push(s),r&&(this.matrix.isMobile?this.addRowActionsCell(e,o,"end"):o.cells.push(r)),"function"==typeof this.matrix.onCreateDetailPanelRenderedRowCallback&&this.matrix.onCreateDetailPanelRenderedRowCallback(o),o},t.prototype.buildVerticalRows=function(){for(var e=this.matrix.columns,t=[],n=0;n<e.length;n++){var o=e[n];if(o.isColumnVisible)if(this.matrix.IsMultiplyColumn(o))this.createMutlipleVerticalRows(t,o,n);else{var i=this.createVerticalRow(o,n),r=this.createErrorRow(i);this.showCellErrorsTop?(t.push(r),t.push(i)):(t.push(i),t.push(r))}}return this.hasActionCellInRows("end")&&t.push(this.createEndVerticalActionRow()),t},t.prototype.createMutlipleVerticalRows=function(e,t,n){var o=this.getMultipleColumnChoices(t);if(o)for(var i=0;i<o.length;i++){var r=this.createVerticalRow(t,n,o[i],i),s=this.createErrorRow(r);this.showCellErrorsTop?(e.push(s),e.push(r)):(e.push(r),e.push(s))}},t.prototype.createVerticalRow=function(e,t,n,o){void 0===n&&(n=null),void 0===o&&(o=-1);var i=this.createRenderedRow(this.cssClasses);if(this.matrix.showHeader){var r=n?n.locText:e.locTitle,s=this.createTextCell(r);s.column=e,s.className=(new _e).append(s.className).append(this.cssClasses.rowTextCell).append(this.cssClasses.columnTitleCell).toString(),i.cells.push(s)}for(var a=this.matrix.visibleRows,l=0;l<a.length;l++){var u=n,c=o>=0?o:l,p=a[l].cells[t],h=n?p.question.visibleChoices:void 0;h&&c<h.length&&(u=h[c]);var d=this.createEditCell(p,u);d.item=u,d.choiceIndex=c,i.cells.push(d)}return this.matrix.hasTotal&&i.cells.push(this.createEditCell(this.matrix.visibleTotalRow.cells[t])),i},t.prototype.createEndVerticalActionRow=function(){var e=this.createRenderedRow(this.cssClasses);this.matrix.showHeader&&e.cells.push(this.createEmptyCell());for(var t=this.matrix.visibleRows,n=0;n<t.length;n++)e.cells.push(this.getRowActionsCell(n,"end"));return this.matrix.hasTotal&&e.cells.push(this.createEmptyCell()),e},t.prototype.createMutlipleEditCells=function(e,t,n){void 0===n&&(n=!1);var o=n?this.getMultipleColumnChoices(t.column):t.question.visibleChoices;if(o)for(var i=0;i<o.length;i++){var r=this.createEditCell(t,n?void 0:o[i]);n||(this.setItemCellCssClasses(r),r.choiceIndex=i),e.cells.push(r)}},t.prototype.setItemCellCssClasses=function(e){e.className=(new _e).append(this.cssClasses.cell).append(this.cssClasses.itemCell).append(this.cssClasses.radioCell,e.isRadio).append(this.cssClasses.checkboxCell,e.isCheckbox).toString()},t.prototype.createEditCell=function(e,t){void 0===t&&(t=void 0);var n=new Bo;return n.cell=e,n.row=e.row,n.column=e.column,n.question=e.question,n.matrix=this.matrix,n.item=t,n.isOtherChoice=!!t&&!!e.question&&e.question.otherItem===t,n.className=n.calculateFinalClassName(this.cssClasses),n},t.prototype.createErrorCell=function(e,t){void 0===t&&(t=void 0);var n=new Bo;return n.question=e.question,n.row=e.row,n.matrix=this.matrix,n.isErrorsCell=!0,n.className=(new _e).append(this.cssClasses.cell).append(this.cssClasses.errorsCell).append(this.cssClasses.errorsCellTop,this.showCellErrorsTop).append(this.cssClasses.errorsCellBottom,this.showCellErrorsBottom).toString(),n},t.prototype.createMutlipleColumnsFooter=function(e,t){this.createMutlipleEditCells(e,t,!0)},t.prototype.createMutlipleColumnsHeader=function(e){var t=this.getMultipleColumnChoices(e);if(t)for(var n=0;n<t.length;n++){var o=this.createTextCell(t[n].locText);this.setHeaderCell(e,o),this.setHeaderCellCssClasses(o),this.headerRow.cells.push(o)}},t.prototype.getMultipleColumnChoices=function(e){var t=e.templateQuestion.choices;return t&&Array.isArray(t)&&0==t.length?[].concat(this.matrix.choices,e.getVisibleMultipleChoices()):(t=e.getVisibleMultipleChoices())&&Array.isArray(t)?t:null},t.prototype.setHeaderCellCssClasses=function(e,t,n){e.className=(new _e).append(this.cssClasses.headerCell).append(this.cssClasses.columnTitleCell,this.matrix.isColumnLayoutHorizontal).append(this.cssClasses.emptyCell,!!e.isEmpty).append(this.cssClasses.cell+"--"+t,!!t).append(n,!!n).toString()},t.prototype.createHeaderCell=function(e,t,n){void 0===t&&(t=null);var o=e?this.createTextCell(e.locTitle):this.createEmptyCell();return o.column=e,this.setHeaderCell(e,o),t||(t=e&&"default"!==e.cellType?e.cellType:this.matrix.cellType),this.setHeaderCellCssClasses(o,t,n),o},t.prototype.setHeaderCell=function(e,t){this.setCellWidth(e,t)},t.prototype.setCellWidth=function(e,t){t.minWidth=null!=e?this.matrix.getColumnWidth(e):this.matrix.getRowTitleWidth(),t.width=null!=e?e.width:this.matrix.getRowTitleWidth()},t.prototype.createTextCell=function(e){var t=new Bo;return t.locTitle=e,this.cssClasses.cell&&(t.className=this.cssClasses.cell),t},t.prototype.createEmptyCell=function(e){void 0===e&&(e=!1);var t=this.createTextCell(null);return t.isEmpty=!0,t.className=(new _e).append(this.cssClasses.cell).append(this.cssClasses.emptyCell).append(this.cssClasses.errorsCell,e).toString(),t},ko([b({onPush:function(e,t,n){n.updateRenderedRows()},onRemove:function(e,t,n){n.updateRenderedRows()}})],t.prototype,"rows",void 0),ko([b()],t.prototype,"_renderedRows",void 0),t}(Te),Uo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Wo=function(){function e(e,t,n){this.column=e,this.row=t,this.data=n,this.questionValue=this.createQuestion(e,t,n),this.questionValue.updateCustomWidget(),this.updateCellQuestionTitleDueToAccessebility(t)}return e.prototype.updateCellQuestionTitleDueToAccessebility=function(e){var t=this;this.questionValue.locTitle.onGetTextCallback=function(n){var o=null==e?void 0:e.getSurvey();if(!o||o.isSingleVisibleInput)return t.questionValue.title;var i=e.getAccessbilityText();return i?t.column.colOwner.getCellAriaLabel(e,t.column,i):t.questionValue.title}},e.prototype.locStrsChanged=function(){this.question.locStrsChanged()},e.prototype.createQuestion=function(e,t,n){var o=this,i=n.createQuestion(this.row,this.column);return i.onFirstRendering(),i.readOnlyCallback=function(){return!o.row.isRowEnabled()},i.validateValueCallback=function(){return n.validateCell(t,e.name,t.value)},C.getProperties(e.getType()).forEach(function(t){var n=t.name;void 0!==e[n]&&(i[n]=e[n])}),i},Object.defineProperty(e.prototype,"question",{get:function(){return this.questionValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.question.value},set:function(e){this.question.value=e},enumerable:!1,configurable:!0}),e.prototype.getQuestionWrapperClassName=function(e){return e},e.prototype.runCondition=function(e){this.question.runCondition(e)},e}(),Go=function(e){function t(t,n,o){var i=e.call(this,t,n,o)||this;return i.column=t,i.row=n,i.data=o,i.updateCellQuestion(),i}return Uo(t,e),t.prototype.createQuestion=function(e,t,n){var o=D.createClass("expression");return o.setSurveyImpl(t),o},t.prototype.locStrsChanged=function(){this.updateCellQuestion(),e.prototype.locStrsChanged.call(this)},t.prototype.updateCellQuestion=function(){this.question.locCalculation(),this.column.updateCellQuestion(this.question,null,function(e){delete e.defaultValue}),this.question.expression=this.getTotalExpression(),this.question.format=this.column.totalFormat,this.question.currency=this.column.totalCurrency,this.question.displayStyle=this.column.totalDisplayStyle,this.question.maximumFractionDigits=this.column.totalMaximumFractionDigits,this.question.minimumFractionDigits=this.column.totalMinimumFractionDigits,this.question.unlocCalculation(),this.question.runIfReadOnly=!0},t.prototype.getQuestionWrapperClassName=function(t){var n=e.prototype.getQuestionWrapperClassName.call(this,t);if(!n)return n;this.question.expression&&"''"!=this.question.expression&&(n+=" "+t+"--expression");var o=this.column.totalAlignment;return"auto"===o&&"dropdown"===this.column.cellType&&(o="left"),n+" "+t+"--"+o},t.prototype.getTotalExpression=function(){if(this.column.totalExpression)return this.column.totalExpression;if("none"==this.column.totalType)return"''";var e=this.column.totalType+"InArray";return B.Instance.hasFunction(e)?e+"({matrix}, '"+this.column.name+"')":""},t}(Wo),Jo=function(e){function t(t){var n=e.call(this)||this;return n.row=t,n}return Uo(t,e),t.prototype.getIndex=function(){return this.row.rowIndex-1},t.prototype.getQuestionData=function(){return this.row.data},t.prototype.getValue=function(t,n,o,i){if(0!==t.length){var r=gn.expressionVariables;if(1===t.length){var s=this.getRowValue(t[0].name);if(void 0!==s)return{isFound:!0,value:s};if(t[0].name===r.matrix){var a=this.row.data;return{isFound:!0,context:a.getValueGetterContext(),value:a.getFilteredData()}}}if(t.length>1&&t[0].name===r.totalRow){var l=this.row.data.visibleTotalRow;if(l)return t[0].name="row",l.getValueGetterContext().getValue(t,n,o,i)}var u=t[0].name===r.row;if(u||!n){u&&t.shift();var c=e.prototype.getValue.call(this,t,n,o,i);if(c&&c.isFound)return c;var p=this.row.getAllValues();return n&&(c=this.getValueFromBindedQuestions(t,p))?c:new N(p).getValue(t,n,o,i)}}},t.prototype.getRootObj=function(){return this.row.data},t.prototype.updateValueByItem=function(e,t){var n=this.row.getQuestionsByValueName(e,!0);n.length>0&&(t.isFound=!0,t.context=n[0].getValueGetterContext())},t.prototype.getRowValue=function(e){var t=gn.expressionVariables;return(e=e.toLocaleLowerCase())===t.rowIndex.toLocaleLowerCase()?this.row.rowIndex:e===t.visibleRowIndex.toLocaleLowerCase()?this.getQuestionData().visibleRows.indexOf(this.row)+1:[t.item,t.rowName.toLocaleLowerCase(),t.rowValue.toLocaleLowerCase()].indexOf(e)>-1?this.row.rowName:e==t.rowTitle.toLocaleLowerCase()?this.row.rowTitle:void 0},t}(Jn),Ko=function(){function e(t,n){var o=this;this.data=t,this.isSettingValue=!1,this.detailPanelValue=null,this.visibleValue=!0,this.cells=[],this.visibleIndex=-1,this.isCreatingDetailPanel=!1,this.data=t,this.subscribeToChanges(n),this.textPreProcessor=new vo(this),this.showHideDetailPanelClick=function(){if(o.getSurvey().isDesignMode)return!0;o.showHideDetailPanel()},this.idValue=e.getId()}return e.getId=function(){return"srow_"+e.idCounter++},Object.defineProperty(e.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowName",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowTitle",{get:function(){return this.rowName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataName",{get:function(){return this.rowName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.rowName},enumerable:!1,configurable:!0}),e.prototype.getValueGetterContext=function(){return new Jo(this)},e.prototype.isRowEnabled=function(){return!0},e.prototype.isRowHasEnabledCondition=function(){return!1},Object.defineProperty(e.prototype,"isVisible",{get:function(){return this.visible&&this.isItemVisible()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this.visibleValue},set:function(e){var t;this.visible!==e&&(this.visibleValue=e,null===(t=this.data)||void 0===t||t.onRowVisibilityChanged(this))},enumerable:!1,configurable:!0}),e.prototype.isItemVisible=function(){return!0},Object.defineProperty(e.prototype,"value",{get:function(){return this.getValueCore(!1)},set:function(e){this.isSettingValue=!0,this.subscribeToChanges(e);for(var t=this.questions,n=0;n<t.length;n++){var o=t[n],i=this.getCellValue(e,o.getValueName()),r=o.comment,s=e?e[o.getValueName()+Te.commentSuffix]:"";null==s&&(s=""),o.updateValueFromSurvey(i),(s||this.isTwoValueEquals(r,o.comment))&&o.updateCommentFromSurvey(s),o.onSurveyValueChanged(i)}this.isSettingValue=!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filteredValue",{get:function(){return this.getValueCore(!0)},enumerable:!1,configurable:!0}),e.prototype.getValueCore=function(e){for(var t={},n=this.questions,o=0;o<n.length;o++){var i=n[o];i.isEmpty()||(t[i.getValueName()]=e?i.getFilteredValue():i.value),i.comment&&this.getSurvey()&&this.getSurvey().storeOthersAsComment&&(t[i.getValueName()+Te.commentSuffix]=i.comment)}return t},Object.defineProperty(e.prototype,"locText",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype.getAccessbilityText=function(){return this.locText&&this.locText.renderedHtml},Object.defineProperty(e.prototype,"hasPanel",{get:function(){return!!this.data&&this.data.hasDetailPanel(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"detailPanel",{get:function(){return this.detailPanelValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"detailPanelId",{get:function(){return this.detailPanel?this.detailPanel.id:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDetailPanelShowing",{get:function(){return!!this.data&&this.data.getIsDetailPanelShowing(this)},enumerable:!1,configurable:!0}),e.prototype.setIsDetailPanelShowing=function(e){!e&&this.detailPanel&&this.detailPanel.onHidingContent(),this.data&&this.data.setIsDetailPanelShowing(this,e),e&&this.detailPanel&&this.detailPanel.onFirstRendering(),this.onDetailPanelShowingChanged&&this.onDetailPanelShowingChanged()},e.prototype.showHideDetailPanel=function(){this.isDetailPanelShowing?this.hideDetailPanel():this.showDetailPanel()},e.prototype.showDetailPanel=function(){this.ensureDetailPanel(),this.detailPanelValue&&this.setIsDetailPanelShowing(!0)},e.prototype.hideDetailPanel=function(e){void 0===e&&(e=!1),this.setIsDetailPanelShowing(!1),e&&(this.detailPanelValue=null)},e.prototype.ensureDetailPanel=function(){if(!this.isCreatingDetailPanel&&!this.detailPanelValue&&this.hasPanel&&this.data){this.isCreatingDetailPanel=!0,this.detailPanelValue=this.data.createRowDetailPanel(this);var e=this.detailPanelValue.questions,t=this.getDataRowValue();if(!r.isValueEmpty(t))for(var n=0;n<e.length;n++){var o=e[n].getValueName(),i=this.editingObj?D.getObjPropertyValue(this.editingObj,o):t[o];r.isValueEmpty(i)||(e[n].value=i)}this.detailPanelValue.setSurveyImpl(this),this.isCreatingDetailPanel=!1}},e.prototype.getAllValues=function(){var e=this.value;if(this.data){var t=this.getDataRowValue();if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}return e},e.prototype.getFilteredProperties=function(){return{survey:this.getSurvey(),row:this}},e.prototype.getDataRowValue=function(){return this.data?this.data.getRowValue(this.data.getRowIndex(this)):null},e.prototype.runCondition=function(e,t){if(this.data){var n=r.createCopy(e);n[gn.expressionVariables.row]=this,this.visible=!t||new Pe(t).runContext(this.getValueGetterContext(),e);for(var o=0;o<this.cells.length;o++)this.cells[o].runCondition(n);this.detailPanel&&this.detailPanel.runCondition(n),this.isRowHasEnabledCondition()&&this.onQuestionReadOnlyChanged()}},e.prototype.updateElementVisibility=function(){this.cells.forEach(function(e){return e.question.updateElementVisibility()}),this.detailPanel&&this.detailPanel.updateElementVisibility()},e.prototype.getNamesWithDefaultValues=function(){var e=[];return this.questions.forEach(function(t){t.isValueDefault&&e.push(t.getValueName())}),e},e.prototype.clearValue=function(e,t){for(var n=this.questions,o=0;o<n.length;o++)n[o].clearValue(e,t)},e.prototype.onAnyValueChanged=function(e,t){for(var n=this.questions,o=0;o<n.length;o++)n[o].onAnyValueChanged(e,t)},e.prototype.getDataValueCore=function(e,t){var n=this.getSurvey();return n?n.getDataValueCore(e,t):e[t]},e.prototype.getValue=function(e){var t=this.getQuestionByName(e);return t?t.value:null},e.prototype.setValue=function(e,t){this.setValueCore(e,t,!1)},e.prototype.getVariable=function(e){},e.prototype.setVariable=function(e,t){},e.prototype.getComment=function(e){var t=this.getQuestionByName(e);return t?t.comment:""},e.prototype.setComment=function(e,t,n){this.setValueCore(e,t,!0)},e.prototype.findQuestionByName=function(e){if(e){var t=gn.expressionVariables.row+".";if(0===e.indexOf(t))return this.getQuestionByName(e.substring(t.length));var n=this.getSurvey();return n?n.getQuestionByName(e):null}},e.prototype.getEditingSurveyElement=function(){},e.prototype.setValueCore=function(e,t,n){if(!this.isSettingValue&&!this.isCreatingDetailPanel){this.updateQuestionsValue(e,t,n),n||this.updateSharedQuestionsValue(e,t);var o=this.value,i=n?e+Te.commentSuffix:e,r=t,s=this.getQuestionByName(e),a=this.data.onRowChanging(this,i,o);if(s&&!this.isTwoValueEquals(a,r)&&(this.isSettingValue=!0,n?s.comment=a:s.value=a,this.isSettingValue=!1,o=this.value),!this.data.isValidateOnValueChanging||this.validateCellQuestion(s)){var l=null==t&&!s||n&&!t&&!!s;this.data.onRowChanged(this,i,o,l);var u=gn.expressionVariables.row;if(i){var c=u+"."+i;this.runTriggers(c,o),this.data.runTriggersInRow(this,c,o)}this.onAnyValueChanged(u,"")}}},e.prototype.updateQuestionsValue=function(e,t,n){if(this.detailPanel){var o=this.getQuestionByColumnName(e),i=this.detailPanel.getQuestionByName(e);if(o&&i){var r=this.isTwoValueEquals(t,n?o.comment:o.value)?i:o;this.isSettingValue=!0,n?r.comment=t:r.value=t,this.isSettingValue=!1}}},e.prototype.updateSharedQuestionsValue=function(e,t){var n=this.getQuestionsByValueName(e);if(n.length>1)for(var o=0;o<n.length;o++)r.isTwoValueEquals(n[o].value,t)||(this.isSettingValue=!0,n[o].updateValueFromSurvey(t),this.isSettingValue=!1)},e.prototype.runTriggers=function(e,t,n){(e||n)&&this.questions.forEach(function(o){return o.runTriggers(e,t,n)})},e.prototype.validateCellQuestion=function(e){if(!e)return!0;if(!e.validateElement(new Yn({fireCallback:!0,isOnValueChanged:!this.data.isValidateOnValueChanging})))return!1;if(e.isEmpty())return!0;var t=this.getCellByColumnName(e.name);return!(t&&t.column&&t.column.isUnique&&this.data.checkIfValueInRowDuplicated(this,e))},Object.defineProperty(e.prototype,"isEmpty",{get:function(){var e=this.value;if(r.isValueEmpty(e))return!0;for(var t in e)if(void 0!==e[t]&&null!==e[t])return!1;return!0},enumerable:!1,configurable:!0}),e.prototype.hasValueAnyQuestion=function(e){for(var t=e?this.visibleQuestions:this.questions,n=0;n<t.length;n++)if(!t[n].isEmpty())return!0;return!1},e.prototype.getQuestionByColumn=function(e){var t=this.getCellByColumn(e);return t?t.question:null},e.prototype.getCellByColumn=function(e){for(var t=0;t<this.cells.length;t++)if(this.cells[t].column==e)return this.cells[t];return null},e.prototype.getCellByColumnName=function(e){for(var t=0;t<this.cells.length;t++)if(this.cells[t].column.name==e)return this.cells[t];return null},e.prototype.getQuestionByColumnName=function(e){var t=this.getCellByColumnName(e);return t?t.question:null},Object.defineProperty(e.prototype,"questions",{get:function(){for(var e=[],t=0;t<this.cells.length;t++)e.push(this.cells[t].question);var n=this.detailPanel?this.detailPanel.questions:[];for(t=0;t<n.length;t++)e.push(n[t]);return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleQuestions",{get:function(){var e=[];return this.questions.forEach(function(t){t.isVisible&&e.push(t)}),e},enumerable:!1,configurable:!0}),e.prototype.getQuestionByName=function(e){return this.getQuestionByColumnName(e)||(this.detailPanel?this.detailPanel.getQuestionByName(e):null)},e.prototype.getQuestionsByName=function(e){var t=[],n=this.getQuestionByColumnName(e);return n&&t.push(n),this.detailPanel&&(n=this.detailPanel.getQuestionByName(e))&&t.push(n),t},e.prototype.getQuestionsByValueName=function(e,t){t&&(e=e.toLocaleLowerCase());for(var n=[],o=0;o<this.cells.length;o++){var i=this.cells[o],r=i.question;if(r){var s=r.getValueName();t&&(s=s.toLocaleLowerCase()),s===e&&n.push(i.question)}}return this.detailPanel&&(n=n.concat(this.detailPanel.getQuestionsByValueName(e,t))),n},e.prototype.getSharedQuestionByName=function(e){return this.data?this.data.getSharedQuestionByName(e,this):null},e.prototype.clearIncorrectValues=function(e){for(var t in e){var n=this.getQuestionByName(t);if(n){var o=n.value;n.clearIncorrectValues(),this.isTwoValueEquals(o,n.value)||this.setValue(t,n.value)}else!this.getSharedQuestionByName(t)&&t.indexOf(gn.matrix.totalsSuffix)<0&&this.setValue(t,null)}},e.prototype.getLocale=function(){return this.data?this.data.getLocale():""},e.prototype.getMarkdownHtml=function(e,t,n){return this.data?this.data.getMarkdownHtml(e,t,n):void 0},e.prototype.getRenderer=function(e){return this.data?this.data.getRenderer(e):null},e.prototype.getRendererContext=function(e){return this.data?this.data.getRendererContext(e):e},e.prototype.getProcessedText=function(e){return this.data?this.data.getProcessedText(e):e},e.prototype.locStrsChanged=function(){for(var e=0;e<this.cells.length;e++)this.cells[e].locStrsChanged();this.detailPanel&&this.detailPanel.locStrsChanged()},e.prototype.updateCellQuestionOnColumnChanged=function(e,t,n){var o=this.getCellByColumn(e);o&&this.updateCellOnColumnChanged(o,t,n)},e.prototype.updateCellQuestionOnColumnItemValueChanged=function(e,t,n,o,i,r){var s=this.getCellByColumn(e);s&&this.updateCellOnColumnItemValueChanged(s,t,n,o,i,r)},e.prototype.onQuestionReadOnlyChanged=function(){for(var e=this.questions,t=0;t<e.length;t++){var n=e[t];n.setPropertyValue("isReadOnly",n.isReadOnly)}if(this.detailPanel){var o=!!this.data&&this.data.isMatrixReadOnly();this.detailPanel.readOnly=o||!this.isRowEnabled()}},e.prototype.validate=function(e){var t=!0,n=this.cells;if(!n)return t;for(var o=0;o<n.length;o++)if(n[o]){var i=n[o].question;i&&i.visible&&(e&&!0===e.isOnValueChanged&&i.isEmpty()||(t=i.validateElement(e)&&t))}if(this.hasPanel){this.ensureDetailPanel();var r=this.detailPanel.validateElement(e),s=e;s.hideErroredPanel||r||!e.fireCallback||(s.isSingleDetailPanel&&(s.hideErroredPanel=!0),this.showDetailPanel()),t=r&&t}return t},e.prototype.updateCellOnColumnChanged=function(e,t,n){"choices"===t&&Array.isArray(n)&&0===n.length&&this.data&&(n=this.data.choices),e.question[t]=n},e.prototype.updateCellOnColumnItemValueChanged=function(e,t,n,o,i,r){var s=e.question[t];if(Array.isArray(s)){var a="value"===o?r:n.value,l=to.getItemByValue(s,a);l&&(l[o]=i)}},e.prototype.buildCells=function(e){this.isSettingValue=!0;for(var t=this.data.columns,n=0;n<t.length;n++){var o=t[n],i=this.createCell(o);this.cells.push(i);var s=this.getCellValue(e,o.name);if(!r.isValueEmpty(s)){i.question.value=s;var a=o.name+Te.commentSuffix;e&&!r.isValueEmpty(e[a])&&(i.question.comment=e[a])}}this.isSettingValue=!1},e.prototype.isTwoValueEquals=function(e,t){return r.isTwoValueEquals(e,t,!1,!0,!1)},e.prototype.getCellValue=function(e,t){return this.editingObj?D.getObjPropertyValue(this.editingObj,t):e?e[t]:void 0},e.prototype.createCell=function(e){return new Wo(e,this,this.data)},e.prototype.getSurveyData=function(){return this},e.prototype.getSurvey=function(){return this.data?this.data.getSurvey():null},e.prototype.getTextProcessor=function(){return this.textPreProcessor},Object.defineProperty(e.prototype,"rowIndex",{get:function(){return this.getRowIndex()},enumerable:!1,configurable:!0}),e.prototype.getRowIndex=function(){return this.data?this.data.getRowIndex(this)+1:-1},Object.defineProperty(e.prototype,"editingObj",{get:function(){return this.editingObjValue},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this.editingObj&&(this.editingObj.onPropertyChanged.remove(this.onEditingObjPropertyChanged),this.editingObjValue=null)},e.prototype.subscribeToChanges=function(e){var t=this;e&&e.getType&&e.onPropertyChanged&&e!==this.editingObj&&(this.editingObjValue=e,this.onEditingObjPropertyChanged=function(e,n){t.updateOnSetValue(n.name,n.newValue)},this.editingObj.onPropertyChanged.add(this.onEditingObjPropertyChanged))},e.prototype.updateOnSetValue=function(e,t){this.isSettingValue=!0;for(var n=this.getQuestionsByName(e),o=0;o<n.length;o++)n[o].value=t;this.isSettingValue=!1},e.idCounter=1,e}(),Yo=function(e){function t(t){var n=e.call(this,t,null)||this;return n.buildCells(null),n}return Uo(t,e),t.prototype.createCell=function(e){return new Go(e,this,this.data)},t.prototype.setValue=function(e,t){this.data&&!this.isSettingValue&&this.data.onTotalValueChanged()},t.prototype.runCondition=function(t,n){var o,i=0;do{o=r.getUnbindValue(this.value),e.prototype.runCondition.call(this,t,""),i++}while(!r.isTwoValueEquals(o,this.value)&&i<3)},t.prototype.updateCellOnColumnChanged=function(e,t,n){e.updateCellQuestion()},t}(Ko),Xo=function(){function e(e,t){this.matrix=e,this.row=t}return e.prototype.getLocale=function(){return this.matrix.getLocale()},e.prototype.getMarkdownHtml=function(e,t,n){return this.matrix.getMarkdownHtml(e,t,n)},e.prototype.getProcessedText=function(e){return this.matrix.processSingleInputTitle(e,this.row)},e.prototype.getRenderer=function(e){return this.matrix.getRenderer(e)},e.prototype.getRendererContext=function(e){return this.matrix.getRendererContext(e)},e}(),Zo=function(e){function t(t){var n=e.call(this,t)||this;return n.isRowChanging=!1,n.lockResetRenderedTable=!1,n.createItemValues("choices"),n.createLocalizableString("placeholder",n,!1,!0),n.createLocalizableString("keyDuplicationError",n,!1,!0),n.createLocalizableString("singleInputTitleTemplate",new Xo(n),!0,n.getSingleInputTitleTemplate()),n.detailPanelValue=n.createNewDetailPanel(),n.detailPanel.selectedElementInDesign=n,n.detailPanel.renderWidth="100%",n.detailPanel.isInteractiveDesignElement=!1,n.detailPanel.showTitle=!1,n.registerPropertyChangedHandlers(["columns","cellType"],function(){n.updateColumnsAndRows()}),n.registerPropertyChangedHandlers(["placeholder","columnColCount","rowTitleWidth","choices"],function(){n.clearRowsAndResetRenderedTable()}),n.registerPropertyChangedHandlers(["transposeData","addRowButtonLocation","hideColumnsIfEmpty","showHeader","minRowCount","isReadOnly","rowCount","hasFooter","detailPanelMode","displayMode"],function(){n.resetRenderedTable()}),n}return Uo(t,e),Object.defineProperty(t,"defaultCellType",{get:function(){return gn.matrix.defaultCellType},set:function(e){gn.matrix.defaultCellType=e},enumerable:!1,configurable:!0}),t.addDefaultColumns=function(e){for(var t=Io.DefaultColums,n=0;n<t.length;n++)e.addColumn(t[n])},t.prototype.createColumnValues=function(){var e=this;return this.createNewArray("columns",function(t){t.colOwner=e,e.onAddColumn&&e.onAddColumn(t),e.survey&&e.survey.matrixColumnAdded(e,t)},function(t){t.colOwner=null,e.onRemoveColumn&&e.onRemoveColumn(t)})},t.prototype.getType=function(){return"matrixdropdownbase"},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.clearGeneratedRows()},Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRowsDynamic",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUpdateLocked",{get:function(){return this.isLoadingFromJson||this.isUpdating},enumerable:!1,configurable:!0}),t.prototype.beginUpdate=function(){this.isUpdating=!0},t.prototype.endUpdate=function(){this.isUpdating=!1,this.updateColumnsAndRows()},t.prototype.updateColumnsAndRows=function(){this.updateColumnsIndexes(this.columns),this.updateColumnsCellType(),this.generatedTotalRow=null,this.clearRowsAndResetRenderedTable()},t.prototype.itemValuePropertyChanged=function(t,n,o,i){e.prototype.itemValuePropertyChanged.call(this,t,n,o,i),"choices"===t.ownerPropertyName&&this.clearRowsAndResetRenderedTable()},Object.defineProperty(t.prototype,"transposeData",{get:function(){return this.getPropertyValue("transposeData")},set:function(e){this.setPropertyValue("transposeData",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnLayout",{get:function(){return this.transposeData?"vertical":"horizontal"},set:function(e){this.transposeData="vertical"===e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsLocation",{get:function(){return this.columnLayout},set:function(e){this.columnLayout=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"detailErrorLocation",{get:function(){return this.getPropertyValue("detailErrorLocation")},set:function(e){this.setPropertyValue("detailErrorLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cellErrorLocation",{get:function(){return this.getPropertyValue("cellErrorLocation")},set:function(e){this.setPropertyValue("cellErrorLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),t.prototype.getChildErrorLocation=function(t){var n=t.parent?this.detailErrorLocation:this.cellErrorLocation;return"default"!==n?n:e.prototype.getChildErrorLocation.call(this,t)},Object.defineProperty(t.prototype,"isColumnLayoutHorizontal",{get:function(){return!!this.isMobile||!this.transposeData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useCaseSensitiveComparison",{get:function(){return void 0!==this.useCaseSensitiveComparisonValue?this.useCaseSensitiveComparisonValue:gn.comparator.caseSensitive},set:function(e){this.useCaseSensitiveComparisonValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUniqueCaseSensitive",{get:function(){return this.useCaseSensitiveComparison},set:function(e){this.useCaseSensitiveComparison=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"detailPanelMode",{get:function(){return this.getPropertyValue("detailPanelMode")},set:function(e){this.setPropertyValue("detailPanelMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"detailPanel",{get:function(){return this.detailPanelValue},enumerable:!1,configurable:!0}),t.prototype.getPanels=function(){return[this.detailPanel]},Object.defineProperty(t.prototype,"detailElements",{get:function(){return this.detailPanel.elements},enumerable:!1,configurable:!0}),t.prototype.createNewDetailPanel=function(){return D.createClass("panel")},Object.defineProperty(t.prototype,"hasRowText",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getFooterText=function(){return null},Object.defineProperty(t.prototype,"canAddRow",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canRemoveRows",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.canRemoveRow=function(e){return!0},t.prototype.onPointerDown=function(e,t){},t.prototype.onRowsChanged=function(){this.clearVisibleRows(),this.resetRenderedTable(),e.prototype.onRowsChanged.call(this),this.updateRowsVisibleIndexes()},t.prototype.updateRowsVisibleIndexes=function(){var e=this.visibleRows;if(Array.isArray(e)){var t=gn.expressionVariables.visibleRowIndex,n={};n[t]=0;for(var o=0;o<e.length;o++)e[o].visibleIndex=o,n[t]=o+1,e[o].runTriggers(t,o+1,n)}},t.prototype.onStartRowAddingRemoving=function(){this.lockResetRenderedTable=!0,this.setValueChangedDirectly(!0)},t.prototype.onEndRowAdding=function(){if(this.lockResetRenderedTable=!1,this.renderedTable)if(this.renderedTable.isRequireReset())this.resetRenderedTable();else{var e=this.visibleRows.length-1;this.renderedTable.onAddedRow(this.visibleRows[e],e)}},t.prototype.onEndRowRemoving=function(e){this.lockResetRenderedTable=!1,this.renderedTable.isRequireReset()?this.resetRenderedTable():e&&this.renderedTable.onRemovedRow(e)},Object.defineProperty(t.prototype,"renderedTableValue",{get:function(){return this.getPropertyValue("renderedTable",null)},set:function(e){this.setPropertyValue("renderedTable",e)},enumerable:!1,configurable:!0}),t.prototype.clearRowsAndResetRenderedTable=function(){this.clearGeneratedRows(),this.resetRenderedTable(),this.fireCallback(this.columnsChangedCallback)},t.prototype.resetRenderedTable=function(e){this.renderedTableValue&&(this.lockResetRenderedTable||this.isUpdateLocked?e&&this.renderedTableValue.requireReset():(this.renderedTableValue=null,this.fireCallback(this.onRenderedTableResetCallback)))},t.prototype.clearGeneratedRows=function(){if(this.clearVisibleRows(),this.generatedVisibleRows){for(var t=0;t<this.generatedVisibleRows.length;t++)this.generatedVisibleRows[t].dispose();e.prototype.clearGeneratedRows.call(this)}},Object.defineProperty(t.prototype,"isRendredTableCreated",{get:function(){return!!this.renderedTableValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedTable",{get:function(){return this.renderedTableValue||this.isDisposed||(this.renderedTableValue=this.createRenderedTable(),this.onRenderedTableCreatedCallback&&this.onRenderedTableCreatedCallback(this.renderedTableValue)),this.renderedTableValue},enumerable:!1,configurable:!0}),t.prototype.createRenderedTable=function(){return new Ho(this)},t.prototype.getRowByQuestion=function(e){if(e)return e.data},t.prototype.onMatrixRowCreated=function(e){if(this.survey)for(var t={rowValue:e.value,row:e,column:null,columnName:null,cell:null,cellQuestion:null,value:null},n=0;n<this.columns.length;n++){t.column=this.columns[n],t.columnName=t.column.name;var o=e.cells[n];t.cell=o,t.cellQuestion=o.question,t.value=o.value,this.onCellCreatedCallback&&this.onCellCreatedCallback(t),this.survey.matrixCellCreated(this,t)}},Object.defineProperty(t.prototype,"cellType",{get:function(){return this.getPropertyValue("cellType",gn.matrix.defaultCellType)},set:function(e){e=e.toLowerCase(),this.setPropertyValue("cellType",e)},enumerable:!1,configurable:!0}),t.prototype.isSelectCellType=function(){return D.isDescendantOf(this.cellType,"selectbase")},t.prototype.updateColumnsCellType=function(){for(var e=0;e<this.columns.length;e++)this.columns[e].defaultCellTypeChanged()},t.prototype.updateColumnsIndexes=function(e){for(var t=0;t<e.length;t++)e[t].setIndex(t)},Object.defineProperty(t.prototype,"columnColCount",{get:function(){return this.getPropertyValue("columnColCount")},set:function(e){e<0||e>4||this.setPropertyValue("columnColCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"horizontalScroll",{get:function(){return this.getPropertyValue("horizontalScroll")},set:function(e){this.setPropertyValue("horizontalScroll",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowAdaptiveActions",{get:function(){return this.getPropertyValue("allowAdaptiveActions")},set:function(e){this.setPropertyValue("allowAdaptiveActions",e),this.detailPanel&&(this.detailPanel.allowAdaptiveActions=e)},enumerable:!1,configurable:!0}),t.prototype.hasChoices=function(){return this.choices.length>0},t.prototype.onColumnPropertyChanged=function(e,t,n){if(this.updateHasFooter(),this.generatedVisibleRows){for(var o=0;o<this.generatedVisibleRows.length;o++)this.generatedVisibleRows[o].updateCellQuestionOnColumnChanged(e,t,n);this.generatedTotalRow&&this.generatedTotalRow.updateCellQuestionOnColumnChanged(e,t,n),this.onColumnsChanged(),"isRequired"==t&&this.resetRenderedTable()}},t.prototype.onColumnNestedPropertyChanged=function(e,t,n,o){if(this.generatedVisibleRows)for(var i=0;i<this.generatedVisibleRows.length;i++){var r=this.generatedVisibleRows[i].getQuestionByColumn(e);r&&r[t]&&(r[t][n]=o)}},t.prototype.onColumnItemValuePropertyChanged=function(e,t,n,o,i,r){if(this.generatedVisibleRows)for(var s=0;s<this.generatedVisibleRows.length;s++)this.generatedVisibleRows[s].updateCellQuestionOnColumnItemValueChanged(e,t,n,o,i,r)},t.prototype.onShowInMultipleColumnsChanged=function(e){this.resetTableAndRows()},t.prototype.onColumnVisibilityChanged=function(e){this.resetTableAndRows()},t.prototype.onColumnCellTypeChanged=function(e){this.updateDefaultRowValue(e),this.resetTableAndRows()},t.prototype.updateDefaultRowValue=function(e){var t=this.defaultRowValue;t&&"file"===e.cellType&&t[e.name]&&(delete t[e.name],0===Object.keys(t).length&&(t=void 0),this.defaultRowValue=t)},t.prototype.resetTableAndRows=function(){this.clearGeneratedRows(),this.resetRenderedTable()},t.prototype.getRowTitleWidth=function(){return""},Object.defineProperty(t.prototype,"hasFooter",{get:function(){return this.getPropertyValue("hasFooter",!1)},enumerable:!1,configurable:!0}),t.prototype.getAddRowLocation=function(){return"default"},t.prototype.getShowColumnsIfEmpty=function(){return!1},t.prototype.updateShowTableAndAddRow=function(){this.renderedTable&&this.renderedTable.updateShowTableAndAddRow()},t.prototype.updateHasFooter=function(){this.setPropertyValue("hasFooter",this.hasTotal)},Object.defineProperty(t.prototype,"hasTotal",{get:function(){for(var e=0;e<this.columns.length;e++)if(this.columns[e].hasTotal)return!0;return!1},enumerable:!1,configurable:!0}),t.prototype.getCellType=function(){return this.cellType},t.prototype.getCustomCellType=function(e,t,n){if(!this.survey)return n;var o={rowValue:t.value,row:t,column:e,columnName:e.name,cellType:n};return this.survey.matrixCellCreating(this,o),o.cellType},t.prototype.getConditionJson=function(t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),!n)return e.prototype.getConditionJson.call(this,t);for(var o="",i=n.length-1;i>=0&&"."!=n[i];i--)o=n[i]+o;var r=void 0,s=this.getColumnByName(o);return s?r=s.createCellQuestion(null):"none"!==this.detailPanelMode&&(r=this.detailPanel.getQuestionByName(o)),r?r.getConditionJson(t):null},t.prototype.clearIncorrectValues=function(){if(Array.isArray(this.visibleRows))for(var e=this.generatedVisibleRows,t=0;t<e.length;t++)e[t].clearIncorrectValues(this.getRowValue(t))},t.prototype.clearErrors=function(){e.prototype.clearErrors.call(this),this.runFuncForCellQuestions(function(e){e.clearErrors()})},t.prototype.localeChanged=function(){e.prototype.localeChanged.call(this),this.runFuncForCellQuestions(function(e){e.localeChanged()})},t.prototype.runFuncForCellQuestions=function(e){var t=this.generatedVisibleRows;if(t)for(var n=0;n<t.length;n++){var o=t[n];if(o.isVisible)for(var i=0;i<o.cells.length;i++)e(o.cells[i].question)}},t.prototype.runConditionCore=function(t){e.prototype.runConditionCore.call(this,t);var n,o=0;do{n=r.getUnbindValue(this.totalValue),this.runCellsCondition(t),this.runTotalsCondition(t),o++}while(!r.isTwoValueEquals(n,this.totalValue)&&o<3);this.updateVisibilityBasedOnRows()},t.prototype.runTriggers=function(t,n,o){e.prototype.runTriggers.call(this,t,n,o),this.runFuncForCellQuestions(function(e){e.runTriggers(t,n,o)})},t.prototype.updateElementVisibility=function(){e.prototype.updateElementVisibility.call(this);var t=this.generatedVisibleRows;t&&t.forEach(function(e){return e.updateElementVisibility()}),this.updateShowTableAndAddRow()},t.prototype.shouldRunColumnExpression=function(){return!1},t.prototype.runCellsCondition=function(e){if(!this.isDesignMode){var t=this.getExpressionFromSurvey("rowsVisibleIf"),n=this.generatedVisibleRows;if(n)for(var o=0;o<n.length;o++)n[o].runCondition(e,t);this.checkColumnsVisibility(),this.checkColumnsRenderedRequired()}},t.prototype.runConditionsForColumns=function(e){var t=this.getExpressionFromSurvey("columnsVisibleIf");return this.columns.forEach(function(n){if(t){var o=new Pe(t);n.isColumnsVisibleIf=!0===o.runContext(n.getValueGetterContext(),e)}else n.isColumnsVisibleIf=!0}),!1},t.prototype.checkColumnsVisibility=function(){if(!this.isDesignMode){for(var e=!1,t=0;t<this.columns.length;t++){var n=this.columns[t],o=!!n.visibleIf||n.isFilteredMultipleColumns;(o||this.columnsVisibleIf||!n.isColumnVisible)&&(e=this.isColumnVisibilityChanged(n,o)||e)}e&&this.resetRenderedTable(!0)}},t.prototype.checkColumnsRenderedRequired=function(){var e=this.generatedVisibleRows;if(e)for(var t=0;t<this.columns.length;t++){var n=this.columns[t];if(n.requiredIf&&n.isColumnVisible){for(var o=e.length>0,i=0;i<e.length;i++)if(!e[i].cells[t].question.isRequired){o=!1;break}n.updateIsRenderedRequired(o)}}},t.prototype.isColumnVisibilityChanged=function(e,t){var n=e.isColumnVisible,o=!t,i=this.generatedVisibleRows,s=t&&i,a=s&&e.isFilteredMultipleColumns,l=a?e.getVisibleChoicesInCell:[],u=new Array;if(s)for(var c=0;c<i.length;c++){var p=i[c].cells[e.index],h=null==p?void 0:p.question;if(h&&h.isVisible){if(o=!0,!a)break;this.updateNewVisibleChoices(h,u)}}return e.hasVisibleCell=o&&e.isColumnsVisibleIf,!(!a||(e.setVisibleChoicesInCell(u),r.isArraysEqual(l,u,!0,!1,!1)))||n!==e.isColumnVisible},t.prototype.updateNewVisibleChoices=function(e,t){var n=e.visibleChoices;if(Array.isArray(n))for(var o=0;o<n.length;o++){var i=n[o];t.indexOf(i.value)<0&&t.push(i.value)}},t.prototype.runTotalsCondition=function(e){this.generatedTotalRow&&this.generatedTotalRow.runCondition(e)},t.prototype.IsMultiplyColumn=function(e){return e.isShowInMultipleColumns&&!this.isMobile},t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this);for(var t=this.columns,n=0;n<t.length;n++)t[n].locStrsChanged();var o=this.generatedVisibleRows;if(o){for(n=0;n<o.length;n++)o[n].locStrsChanged();this.generatedTotalRow&&this.generatedTotalRow.locStrsChanged()}},t.prototype.getColumnByName=function(e){for(var t=0;t<this.columns.length;t++)if(this.columns[t].name==e)return this.columns[t];return null},t.prototype.getColumnName=function(e){return this.getColumnByName(e)},t.prototype.getColumnWidth=function(e){var t;return e.minWidth?e.minWidth:this.columnMinWidth?this.columnMinWidth:(null===(t=gn.matrix.columnWidthsByType[e.cellType])||void 0===t?void 0:t.minWidth)||""},Object.defineProperty(t.prototype,"choices",{get:function(){return this.getPropertyValue("choices")},set:function(e){this.setPropertyValue("choices",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this.getLocalizableStringText("placeholder")},set:function(e){this.setLocalizableStringText("placeholder",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceholder",{get:function(){return this.getLocalizableString("placeholder")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optionsCaption",{get:function(){return this.placeholder},set:function(e){this.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyDuplicationError",{get:function(){return this.getLocalizableStringText("keyDuplicationError")},set:function(e){this.setLocalizableStringText("keyDuplicationError",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locKeyDuplicationError",{get:function(){return this.getLocalizableString("keyDuplicationError")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"singleInputTitleTemplate",{get:function(){return this.getLocalizableStringText("singleInputTitleTemplate")},set:function(e){this.setLocalizableStringText("singleInputTitleTemplate",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locSingleInputTitleTemplate",{get:function(){return this.getLocalizableString("singleInputTitleTemplate")},enumerable:!1,configurable:!0}),t.prototype.getSingleQuestionLocTitleCore=function(){return this.locSingleInputTitleTemplate},t.prototype.getSingleInputTitleTemplate=function(){return""},t.prototype.processSingleInputTitle=function(e,t){t||(t=this.getRowByQuestion(this.singleInputQuestion));var n=t?t.getTextProcessor():this.textProcessor;return n?n.processText(e,!0):e},t.prototype.singleInputMoveToFirstCore=function(){var e,t=null===(e=this.singleInputQuestion)||void 0===e?void 0:e.data;this.singleInputEditRow(t)},t.prototype.singleInputEditRow=function(e){if(e){var t=e.visibleQuestions;Array.isArray(t)&&t.length>0&&this.setSingleInputQuestion(t[0])}},Object.defineProperty(t.prototype,"storeOthersAsComment",{get:function(){return!!this.survey&&this.survey.storeOthersAsComment},enumerable:!1,configurable:!0}),t.prototype.addColumn=function(e,t){var n=new No(e,t,this);return this.columns.push(n),n},t.prototype.clearVisibleRows=function(){this.visibleRowsArray=null},t.prototype.isColumnVisible=function(e){return e.isColumnVisible},t.prototype.getVisibleRows=function(){return this.isUpdateLocked?null:this.isGenereatingRows?[]:(this.visibleRowsArray||(this.generateVisibleRowsIfNeeded(),this.visibleRowsArray=this.getVisibleFromGenerated(this.generatedVisibleRows),this.updateRowsVisibleIndexes()),this.visibleRowsArray)},Object.defineProperty(t.prototype,"allRows",{get:function(){return this.isGenereatingRows?[]:(this.generateVisibleRowsIfNeeded(),this.generatedVisibleRows)},enumerable:!1,configurable:!0}),t.prototype.generateVisibleRowsIfNeeded=function(){if(!this.isUpdateLocked&&!this.generatedVisibleRows){this.isGenereatingRows=!0,this.generatedVisibleRows=this.generateRows(),this.isGenereatingRows=!1;for(var e=0;e<this.generatedVisibleRows.length;e++){var t=this.generatedVisibleRows[e];t.visibleIndex=e,this.onMatrixRowCreated(t)}this.data&&(this.runCellsCondition(this.data.getFilteredProperties()),this.isValueChangedWithoutRows&&(this.isValueChangedWithoutRows=!1,this.runTriggersOnNewRows())),this.generatedVisibleRows&&(this.updateValueOnRowsGeneration(this.generatedVisibleRows),this.updateIsAnswered())}},t.prototype.runTriggersOnNewRows=function(){var e=this,t=this.value;this.generatedVisibleRows.forEach(function(n){var o=e.getRowValueCore(n,t);if(!r.isValueEmpty(o)){var i=r.createCopyWithPrefix(o,gn.expressionVariables.row+".");n.runTriggers("",void 0,i)}})},t.prototype.getVisibleFromGenerated=function(e){var t=[];return e?(e.forEach(function(e){e.isVisible&&t.push(e)}),t.length===e.length?e:t):t},t.prototype.updateValueOnRowsGeneration=function(e){for(var t=this.createNewValue(!0),n=this.createNewValue(),o=0;o<e.length;o++){var i=e[o];if(!i.editingObj){var r=this.getRowValue(o),s=i.value;this.isTwoValueEquals(r,s)||(n=this.getNewValueOnRowChanged(i,"",s,!1,n).value)}}this.isTwoValueEquals(t,n)||(this.isRowChanging=!0,this.setNewValue(n),this.isRowChanging=!1)},Object.defineProperty(t.prototype,"totalValue",{get:function(){return this.hasTotal&&this.visibleTotalRow?this.visibleTotalRow.value:{}},enumerable:!1,configurable:!0}),t.prototype.getVisibleTotalRow=function(){return this.isUpdateLocked?null:(this.hasTotal?this.generatedTotalRow||(this.generatedTotalRow=this.generateTotalRow(),this.data&&this.runTotalsCondition({survey:this.survey})):this.generatedTotalRow=null,this.generatedTotalRow)},Object.defineProperty(t.prototype,"visibleTotalRow",{get:function(){return this.getVisibleTotalRow()},enumerable:!1,configurable:!0}),t.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.updateColumnsIndexes(this.columns),this.clearGeneratedRows(),this.generatedTotalRow=null,this.updateHasFooter()},t.prototype.getRowValue=function(e){if(e<0||!Array.isArray(this.visibleRows))return null;var t=this.generatedVisibleRows;if(e>=t.length)return null;var n=this.value,o=this.getRowValueCore(t[e],n);return this.isValueSurveyElement(n)?o:r.getUnbindValue(o)},t.prototype.checkIfValueInRowDuplicated=function(e,t){return!!this.generatedVisibleRows&&this.isValueInColumnDuplicated(t.name,!0,e)},t.prototype.setRowValue=function(e,t){if(e<0)return null;var n=this.visibleRows;if(e>=n.length)return null;n[e].value=t,this.onRowChanged(n[e],"",t,!1)},t.prototype.generateRows=function(){return null},t.prototype.generateTotalRow=function(){return new Yo(this)},t.prototype.createNewValue=function(e){void 0===e&&(e=!1);var t=this.value?this.createValueCopy():{};return e&&this.isMatrixValueEmpty(t)?null:t},t.prototype.getRowValueCore=function(e,t,n){void 0===n&&(n=!1);var o=t&&t[e.rowName]?t[e.rowName]:null;return!o&&n&&(o={},t&&(t[e.rowName]=o)),o},t.prototype.getRowObj=function(e){var t=this.getRowValueCore(e,this.value);return t&&t.getType?t:null},t.prototype.getRowDisplayValue=function(e,t,n){if(!n)return n;if(t.editingObj)return n;for(var o=Object.keys(n),i=0;i<o.length;i++){var r=o[i],s=t.getQuestionByName(r);if(s||(s=this.getSharedQuestionByName(r,t)),s){var a=s.getDisplayValue(e,n[r]);e&&s.title&&s.title!==r?(n[s.title]=a,delete n[r]):n[r]=a}}return n},t.prototype.getPlainData=function(t){var n=this;void 0===t&&(t={includeEmpty:!0});var o=e.prototype.getPlainData.call(this,t);if(o){o.isNode=!0;var i=Array.isArray(o.data)?[].concat(o.data):[];o.data=this.visibleRows.map(function(e){var o={name:e.dataName,title:e.text,value:e.value,displayValue:n.getRowDisplayValue(!1,e,e.value),getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!0,data:e.cells.map(function(e){return e.question.getPlainData(t)}).filter(function(e){return!!e})};return(t.calculations||[]).forEach(function(t){o[t.propertyName]=e[t.propertyName]}),o}),o.data=o.data.concat(i)}return o},t.prototype.addConditionObjectsByContext=function(e,t){var n=[].concat(this.columns);"none"!==this.detailPanelMode&&(n=n.concat(this.detailPanel.questions));var o=!!t&&n.indexOf(t)>-1,i=!0===t||o,r=this.getConditionObjectsRowIndeces();i&&r.push(-1);for(var s=0;s<r.length;s++){var a=r[s],l=a>-1?this.getConditionObjectRowName(a):"row";if(l)for(var u=a>-1?this.getConditionObjectRowText(a):"row",c=a>-1||!0===t,p=c&&-1===a?".":"",h=(c?this.getValueName():"")+p+l+".",d=(c?this.processedTitle:"")+p+u+".",f=0;f<n.length;f++){var g=n[f];if(-1!==a||t!==g){var y={name:h+g.name,text:d+g.fullTitle,question:this};-1===a&&!0===t?y.context=this:o&&h.startsWith("row.")&&(y.context=t),e.push(y)}}}},t.prototype.onHidingContent=function(){if(e.prototype.onHidingContent.call(this),this.generatedVisibleRows){var t=[];this.collectNestedQuestions(t,!0),t.forEach(function(e){return e.onHidingContent()})}},t.prototype.getIsReadyNestedQuestions=function(){if(!this.generatedVisibleRows)return[];var e=new Array;return this.collectNestedQuestonsInRows(this.generatedVisibleRows,e,!1,!0,!1),this.generatedTotalRow&&this.collectNestedQuestonsInRows([this.generatedTotalRow],e,!1,!0,!1),e},t.prototype.collectNestedQuestionsCore=function(e,t,n,o){o&&e.push(this),this.collectNestedQuestonsInRows(this.visibleRows,e,t,n,o)},t.prototype.collectNestedQuestonsInRows=function(e,t,n,o,i){Array.isArray(e)&&e.forEach(function(e){e.questions.forEach(function(e){return e.addNestedQuestion(t,n,o,i)})})},t.prototype.getConditionObjectRowName=function(e){return""},t.prototype.getConditionObjectRowText=function(e){return this.getConditionObjectRowName(e)},t.prototype.getConditionObjectsRowIndeces=function(){return[]},t.prototype.getProgressInfo=function(){if(this.getIsRequireToGenerateRows()&&this.generateVisibleRowsIfNeeded(),this.generatedVisibleRows)return Tt.getProgressInfoByElements(this.getCellQuestions(),this.isRequired);var e=Te.createProgressInfo();return this.updateProgressInfoByValues(e),0===e.requiredQuestionCount&&this.isRequired&&(e.requiredQuestionCount=1,e.requiredAnsweredQuestionCount=this.isEmpty()?0:1),e},t.prototype.getIsRequireToGenerateRows=function(){return!!this.rowsVisibleIf},t.prototype.updateProgressInfoByValues=function(e){},t.prototype.updateProgressInfoByRow=function(e,t){for(var n=0;n<this.columns.length;n++){var o=this.columns[n];if(o.templateQuestion.hasInput){var i=!r.isValueEmpty(t[o.name]);!i&&o.templateQuestion.visibleIf||(e.questionCount+=1,e.requiredQuestionCount+=o.isRequired,e.answeredQuestionCount+=i?1:0,e.requiredAnsweredQuestionCount+=i&&o.isRequired?1:0)}}},t.prototype.getCellQuestions=function(){var e=[];return this.runFuncForCellQuestions(function(t){e.push(t)}),e},t.prototype.onBeforeValueChanged=function(e){},t.prototype.onSetQuestionValue=function(){if(!this.isRowChanging&&(this.onBeforeValueChanged(this.value),this.generatedVisibleRows&&0!=this.generatedVisibleRows.length)){this.isRowChanging=!0;for(var e=this.createNewValue(),t=0;t<this.generatedVisibleRows.length;t++){var n=this.generatedVisibleRows[t];this.generatedVisibleRows[t].value=this.getRowValueCore(n,e)}this.isRowChanging=!1}},t.prototype.setQuestionValue=function(t){e.prototype.setQuestionValue.call(this,t,!1),this.onSetQuestionValue(),this.updateIsAnswered()},t.prototype.supportAutoAdvance=function(){var e=this.generatedVisibleRows;if(e||(e=this.visibleRows),!e)return!0;for(var t=0;t<e.length;t++){var n=this.generatedVisibleRows[t].cells;if(n)for(var o=0;o<n.length;o++){var i=n[o].question;if(i&&(!i.supportAutoAdvance()||!i.value))return!1}}return!0},t.prototype.getContainsErrors=function(){return e.prototype.getContainsErrors.call(this)||this.checkForAnswersOrErrors(function(e){return e.containsErrors},!1)},t.prototype.getIsAnswered=function(){return e.prototype.getIsAnswered.call(this)&&this.checkForAnswersOrErrors(function(e){return e.isAnswered},!0)},t.prototype.checkForAnswersOrErrors=function(e,t){void 0===t&&(t=!1);var n=this.generatedVisibleRows;if(!n)return!1;for(var o=0;o<n.length;o++){var i=n[o].cells;if(i)for(var r=0;r<i.length;r++)if(i[r]){var s=i[r].question;if(s&&s.isVisible)if(e(s)){if(!t)return!0}else if(t)return!1}}return!!t},t.prototype.validateElementCore=function(t){var n=this.validateRows(t),o=this.isValueDuplicated(t);return e.prototype.validateElementCore.call(this,t)&&n&&!o},t.prototype.getIsRunningValidators=function(){if(e.prototype.getIsRunningValidators.call(this))return!0;if(!this.generatedVisibleRows)return!1;for(var t=0;t<this.generatedVisibleRows.length;t++){var n=this.generatedVisibleRows[t].cells;if(n)for(var o=0;o<n.length;o++)if(n[o]){var i=n[o].question;if(i&&i.isRunningValidators)return!0}}return!1},t.prototype.getAllErrors=function(){var t=e.prototype.getAllErrors.call(this),n=this.generatedVisibleRows;if(null===n)return t;for(var o=0;o<n.length;o++)for(var i=n[o],r=0;r<i.cells.length;r++){var s=i.cells[r].question.getAllErrors();s&&s.length>0&&(t=t.concat(s))}return t},t.prototype.validateRows=function(e){var t=this.generatedVisibleRows;t||(t=this.visibleRows);var n=!0;e.isSingleDetailPanel="underRowSingle"===this.detailPanelMode;for(var o=0;o<t.length;o++)t[o].isVisible&&(n=t[o].validate(e)&&n);return n},t.prototype.isValueDuplicated=function(e){if(!this.generatedVisibleRows)return!1;for(var t=this.getUniqueColumnsNames(),n=!1,o=0;o<t.length;o++){var i=this.getDuplicatedRowAndShowErrors(t[o],!0);i&&i.length>0&&(e.setErrorElement(i[0].getQuestionByColumnName(t[o])),n=!0)}return n},t.prototype.getUniqueColumnsNames=function(){for(var e=new Array,t=0;t<this.columns.length;t++)this.columns[t].isUnique&&e.push(this.columns[t].name);return e},t.prototype.isValueInColumnDuplicated=function(e,t,n){var o=this.getDuplicatedRowAndShowErrors(e,t,n);return n?o.indexOf(n)>-1:o.length>0},t.prototype.getDuplicatedRowAndShowErrors=function(e,t,n){var o=this.getDuplicatedRows(e);return t&&this.showDuplicatedErrorsInRows(o,e),this.removeDuplicatedErrorsInRows(o,e),o},t.prototype.getDuplicatedRows=function(e){for(var t={},n=[],o=this.generatedVisibleRows,i=0;i<o.length;i++){var r=void 0,s=o[i].getQuestionByName(e);if(s)r=s.value;else{var a=this.getRowValue(i);r=a?a[e]:void 0}this.isValueEmpty(r)||(this.useCaseSensitiveComparison||"string"!=typeof r||(r=r.toLocaleLowerCase()),t[r]||(t[r]=[]),t[r].push(o[i]))}for(var l in t)t[l].length>1&&t[l].forEach(function(e){return n.push(e)});return n},t.prototype.showDuplicatedErrorsInRows=function(e,t){var n=this;e.forEach(function(e){var o=e.getQuestionByName(t),i=n.detailPanel.getQuestionByName(t);!o&&i&&(e.showDetailPanel(),e.detailPanel&&(o=e.detailPanel.getQuestionByName(t))),o&&(i&&e.showDetailPanel(),n.addDuplicationError(o))})},t.prototype.removeDuplicatedErrorsInRows=function(e,t){var n=this;this.generatedVisibleRows.forEach(function(o){if(e.indexOf(o)<0){var i=o.getQuestionByName(t);i&&n.removeDuplicationError(o,i)}})},t.prototype.getDuplicationError=function(e){for(var t=e.errors,n=0;n<t.length;n++)if("keyduplicationerror"===t[n].getErrorType())return t[n];return null},t.prototype.addDuplicationError=function(e){this.getDuplicationError(e)||e.addError(new Rn(this.keyDuplicationError,this))},t.prototype.removeDuplicationError=function(e,t){t.removeError(this.getDuplicationError(t))&&0===t.errors.length&&e.editingObj&&(e.editingObj[t.getValueName()]=t.value)},t.prototype.getFirstQuestionToFocus=function(e){return this.getFirstCellQuestion(e)},t.prototype.getFirstInputElementId=function(){var t=this.getFirstCellQuestion(!1);return t?t.inputId:e.prototype.getFirstInputElementId.call(this)},t.prototype.getFirstErrorInputElementId=function(){var t=this.getFirstCellQuestion(!0);return t?t.inputId:e.prototype.getFirstErrorInputElementId.call(this)},t.prototype.getFirstCellQuestion=function(e){if(!this.generatedVisibleRows)return null;for(var t=0;t<this.generatedVisibleRows.length;t++)for(var n=this.generatedVisibleRows[t].cells,o=0;o<n.length;o++){if(!e)return n[o].question;if(n[o].question.currentErrorCount>0)return n[o].question}return null},t.prototype.onReadOnlyChanged=function(){if(e.prototype.onReadOnlyChanged.call(this),this.generateRows)for(var t=0;t<this.visibleRows.length;t++)this.visibleRows[t].onQuestionReadOnlyChanged()},t.prototype.createQuestion=function(e,t){return this.createQuestionCore(e,t)},t.prototype.createQuestionCore=function(e,t){var n=t.createCellQuestion(e);return n.setSurveyImpl(e),n.setParentQuestion(this),n.inMatrixMode=!0,n},t.prototype.deleteRowValue=function(e,t){return e?(delete e[t.rowName],this.isObject(e)&&0==Object.keys(e).length?null:e):e},t.prototype.onAnyValueChanged=function(e,t){if(!this.isUpdateLocked&&!this.isDoingonAnyValueChanged)if(this.generatedVisibleRows){this.isDoingonAnyValueChanged=!0;for(var n=this.generatedVisibleRows,o=0;o<n.length;o++)n[o].onAnyValueChanged(e,t);var i=this.visibleTotalRow;i&&i.onAnyValueChanged(e,t),this.isDoingonAnyValueChanged=!1}else e===this.getValueName()&&(this.isValueChangedWithoutRows=!0)},t.prototype.isObject=function(e){return null!==e&&"object"==typeof e},t.prototype.getOnCellValueChangedOptions=function(e,t,n){return{row:e,columnName:t,rowValue:n,value:n?n[t]:null,getCellQuestion:function(t){return e.getQuestionByName(t)},cellQuestion:e.getQuestionByName(t),column:this.getColumnByName(t)}},t.prototype.onCellValueChanged=function(e,t,n){if(this.survey){var o=this.getOnCellValueChangedOptions(e,t,n);this.onCellValueChangedCallback&&this.onCellValueChangedCallback(o),this.survey.matrixCellValueChanged(this,o)}},t.prototype.validateCell=function(e,t,n){if(this.survey){var o=this.getOnCellValueChangedOptions(e,t,n);return this.survey.matrixCellValidate(this,o)}},Object.defineProperty(t.prototype,"isValidateOnValueChanging",{get:function(){return!!this.survey&&this.survey.isValidateOnValueChanging},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasInvisibleRows",{get:function(){var e=this.generatedVisibleRows;if(!Array.isArray(e))return!1;for(var t=0;t<e.length;t++)if(!e[t].isVisible)return!0;return!1},enumerable:!1,configurable:!0}),t.prototype.getFilteredData=function(){return this.isEmpty()||!this.generatedVisibleRows||this.isEditingSurveyElement?this.value:this.getFilteredDataCore()},t.prototype.getFilteredDataCore=function(){return this.value},t.prototype.onRowChanging=function(e,t,n){if(!this.survey&&!this.cellValueChangingCallback)return n?n[t]:null;var o=this.getOnCellValueChangedOptions(e,t,n),i=this.getRowValueCore(e,this.createNewValue(),!0);return o.oldValue=i?i[t]:null,this.cellValueChangingCallback&&(o.value=this.cellValueChangingCallback(e,t,o.value,o.oldValue)),this.survey&&this.survey.matrixCellValueChanging(this,o),o.value},t.prototype.getSharedQuestionFromArray=function(e,t){return this.survey&&this.valueName?this.survey.getQuestionByValueNameFromArray(this.valueName,e,t):null},t.prototype.onRowChanged=function(e,t,n,o){var i=t?this.getRowObj(e):null;if(i){var r=null;n&&!o&&(r=n[t]),this.isRowChanging=!0,D.setObjPropertyValue(i,t,r),this.isRowChanging=!1,this.onCellValueChanged(e,t,i)}else{var s=this.createNewValue(!0),a=this.getNewValueOnRowChanged(e,t,n,o,this.createNewValue());if(this.isTwoValueEquals(s,a.value))return;this.isRowChanging=!0,this.setNewValue(a.value),this.isRowChanging=!1,t&&this.onCellValueChanged(e,t,a.rowValue)}this.getUniqueColumnsNames().indexOf(t)>-1&&this.isValueInColumnDuplicated(t,!!i)},t.prototype.getNewValueOnRowChanged=function(e,t,n,o,i){var r=this.getRowValueCore(e,i,!0);if(o&&delete r[t],e.questions.forEach(function(e){delete r[e.getValueName()]}),n)for(var s in n=JSON.parse(JSON.stringify(n)))this.isValueEmpty(n[s])||(r[s]=n[s]);return this.isObject(r)&&0===Object.keys(r).length&&(i=this.deleteRowValue(i,e)),{value:i=this.correctValueForMinMaxRows(i),rowValue:r}},t.prototype.correctValueForMinMaxRows=function(e){return e},t.prototype.getRowIndex=function(e){return Array.isArray(this.generatedVisibleRows)?this.generatedVisibleRows.indexOf(e):-1},t.prototype.getElementsInDesign=function(t){var n;return void 0===t&&(t=!1),n="none"==this.detailPanelMode?e.prototype.getElementsInDesign.call(this,t):t?[this.detailPanel]:this.detailElements,this.columns.concat(n)},t.prototype.hasDetailPanel=function(e){return"none"!=this.detailPanelMode&&(!!this.isDesignMode||(this.onHasDetailPanelCallback?this.onHasDetailPanelCallback(e):this.detailElements.length>0))},t.prototype.getIsDetailPanelShowing=function(e){if("none"==this.detailPanelMode)return!1;if(this.isDesignMode){var t=0==this.visibleRows.indexOf(e);return t&&(e.detailPanel||e.showDetailPanel()),t}return this.getPropertyValue("isRowShowing"+e.id,!1)},t.prototype.setIsDetailPanelShowing=function(e,t){if(t!=this.getIsDetailPanelShowing(e)&&(this.setPropertyValue("isRowShowing"+e.id,t),this.updateDetailPanelButtonCss(e),this.renderedTable&&this.renderedTable.onDetailPanelChangeVisibility(e,t),this.survey&&this.survey.matrixDetailPanelVisibleChanged(this,e.rowIndex-1,e,t),t&&"underRowSingle"===this.detailPanelMode))for(var n=this.visibleRows,o=0;o<n.length;o++)n[o].id!==e.id&&n[o].isDetailPanelShowing&&n[o].hideDetailPanel()},t.prototype.getDetailPanelButtonCss=function(e){var t=(new _e).append(this.getPropertyValue("detailButtonCss"+e.id));return t.append(this.cssClasses.detailButton,""===t.toString()).toString()},t.prototype.getDetailPanelIconCss=function(e){var t=(new _e).append(this.getPropertyValue("detailIconCss"+e.id));return t.append(this.cssClasses.detailIcon,""===t.toString()).toString()},t.prototype.getDetailPanelIconId=function(e){return this.getIsDetailPanelShowing(e)?this.cssClasses.detailIconExpandedId:this.cssClasses.detailIconId},t.prototype.updateDetailPanelButtonCss=function(e){var t=this.cssClasses,n=this.getIsDetailPanelShowing(e),o=(new _e).append(t.detailIcon).append(t.detailIconExpanded,n);this.setPropertyValue("detailIconCss"+e.id,o.toString());var i=(new _e).append(t.detailButton).append(t.detailButtonExpanded,n);this.setPropertyValue("detailButtonCss"+e.id,i.toString())},t.prototype.createRowDetailPanel=function(e){var t=this;if(this.isDesignMode)return this.detailPanel;var n=this.createNewDetailPanel();n.readOnly=this.isReadOnly||!e.isRowEnabled(),n.setSurveyImpl(e);var o=this.detailPanel.toJSON();return(new A).toObject(o,n),n.renderWidth="100%",n.updateCustomWidgets(),this.onCreateDetailPanelCallback&&this.onCreateDetailPanelCallback(e,n),n.questions.forEach(function(e){return e.setParentQuestion(t)}),n.onSurveyLoad(),n},t.prototype.getSharedQuestionByName=function(e,t){if(!this.survey||!this.valueName)return null;var n=this.getRowIndex(t);return n<0?null:this.survey.getQuestionByValueNameFromArray(this.valueName,e,n)},t.prototype.runTriggersInRow=function(e,t,n){if(this.survey&&this.valueName){var o=this.getRowIndex(e);o<0||this.survey.getQuestionsByValueName(this.valueName).forEach(function(e){var i=e.visibleRows;Array.isArray(i)&&o<i.length&&i[0]instanceof Ko&&i[o].runTriggers(t,n)})}},t.prototype.onTotalValueChanged=function(){this.data&&this.visibleTotalRow&&!this.isUpdateLocked&&!this.isSett&&this.data.setValue(this.getValueName()+gn.matrix.totalsSuffix,this.totalValue,!1)},t.prototype.getParentTextProcessor=function(){if(!this.parentQuestion||!this.parent)return null;var e=this.parent.data;return e&&e.getTextProcessor?e.getTextProcessor():null},t.prototype.isMatrixReadOnly=function(){return this.isReadOnly},t.prototype.onRowVisibilityChanged=function(e){this.clearVisibleRows(),this.resetRenderedTable(),this.resetSingleInput()},t.prototype.clearValueIfInvisibleCore=function(t){e.prototype.clearValueIfInvisibleCore.call(this,t),this.clearInvisibleValuesInRows()},t.prototype.clearInvisibleValuesInRows=function(){var e;!this.isEmpty()&&this.isRowsFiltered()&&((null===(e=this.survey)||void 0===e?void 0:e.questionsByValueName(this.getValueName()))||[]).length<2&&(this.value=this.getFilteredData())},t.prototype.isRowsFiltered=function(){return this.visibleRows!==this.generatedVisibleRows},t.prototype.getQuestionFromArray=function(e,t){return t>=this.visibleRows.length?null:this.visibleRows[t].getQuestionByName(e)},t.prototype.isMatrixValueEmpty=function(e){if(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if(this.isObject(e[t])&&Object.keys(e[t]).length>0)return!1;return!0}return 0==Object.keys(e).length}},Object.defineProperty(t.prototype,"SurveyModel",{get:function(){return this.survey},enumerable:!1,configurable:!0}),t.prototype.getCellTemplateData=function(e){return this.SurveyModel.getMatrixCellTemplateData(e)},t.prototype.getCellWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName(e,e.row instanceof Yo?"row-footer":"cell")},t.prototype.getCellWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData(e,e.row instanceof Yo?"row-footer":"cell")},t.prototype.getColumnHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName(e,"column-header")},t.prototype.getColumnHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData(e,"column-header")},t.prototype.getRowHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName(e,"row-header")},t.prototype.getRowHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData(e,"row-header")},t.prototype.onMobileChanged=function(){e.prototype.onMobileChanged.call(this),this.resetRenderedTable()},t.prototype.getRootCss=function(){return(new _e).append(e.prototype.getRootCss.call(this)).append(this.cssClasses.rootScroll,this.horizontalScroll).toString()},t.prototype.afterRenderQuestionElement=function(t){e.prototype.afterRenderQuestionElement.call(this,t),this.setRootElement(null==t?void 0:t.parentElement)},t.prototype.beforeDestroyQuestionElement=function(t){e.prototype.beforeDestroyQuestionElement.call(this,t),this.setRootElement(void 0)},t.prototype.setRootElement=function(e){this.rootElement=e},t.prototype.getRootElement=function(){return this.rootElement},Object.defineProperty(t.prototype,"dragDropMatrixAttribute",{get:function(){return this.renderedTable.wrapperDropTargetId},enumerable:!1,configurable:!0}),t}(go);D.addClass("matrixdropdownbase",[{name:"columns:matrixdropdowncolumns",uniqueProperty:"name",className:"matrixdropdowncolumn",isArray:!0},{name:"columnLayout",alternativeName:"columnsLocation",choices:["horizontal","vertical"],visible:!1,isSerializable:!1},{name:"transposeData:boolean",version:"1.9.130",oldName:"columnLayout"},{name:"detailElements",baseClassName:"question",visible:!1,isLightSerializable:!1},{name:"detailPanelMode",choices:["none","underRow","underRowSingle"],default:"none"},{name:"cellErrorLocation",default:"default",choices:["default","top","bottom"]},{name:"detailErrorLocation",default:"default",choices:["default","top","bottom"],visibleIf:function(e){return!!e&&"none"!=e.detailPanelMode}},{name:"horizontalScroll:boolean",visible:!1},{name:"choices:itemvalue[]",uniqueProperty:"value",visibleIf:function(e){return e.isSelectCellType()}},{name:"placeholder",alternativeName:"optionsCaption",serializationProperty:"locPlaceholder"},{name:"keyDuplicationError",serializationProperty:"locKeyDuplicationError"},{name:"singleInputTitleTemplate",serializationProperty:"locSingleInputTitleTemplate",visibleIf:function(e){var t;return"inputPerPage"===(null===(t=e.survey)||void 0===t?void 0:t.questionsOnPageMode)}},{name:"cellType",default:"dropdown",choices:function(){return No.getColumnTypes()}},{name:"columnColCount",default:0,choices:[0,1,2,3,4]},"columnMinWidth",{name:"allowAdaptiveActions:boolean",default:!1,visible:!1}],function(){return new Zo("")},"matrixbase");var $o=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ei=function(e){function t(t){var n=e.call(this)||this;return n.question=t,n}return $o(t,e),t.prototype.getValue=function(t,n,o,i){if(!i&&this.question.isEmpty())return{isFound:0===t.length,value:void 0};if(t.length>0){var r=e.prototype.getValue.call(this,t,n,o,i);if(r&&r.isFound)return r}return new N(this.question.value).getValue(t,n,o,i)},t.prototype.getRootObj=function(){return this.question.data},t.prototype.updateValueByItem=function(e,t){var n,o=this.question.visibleRows;e=e.toLocaleLowerCase();for(var i=0;i<o.length;i++){var r=o[i];if(((null===(n=r.rowName)||void 0===n?void 0:n.toString())||"").toLocaleLowerCase()===e)return t.isFound=!0,void(t.context=r.getValueGetterContext())}},t}(_),ti=function(e){function t(t,n,o,i){var r=e.call(this,o,i)||this;return r.name=t,r.item=n,r.buildCells(i),r}return $o(t,e),Object.defineProperty(t.prototype,"rowName",{get:function(){return this.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowTitle",{get:function(){return this.text},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.item.text},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locText",{get:function(){return this.item.locText},enumerable:!1,configurable:!0}),t.prototype.isItemVisible=function(){return this.item.isVisible},t.prototype.isRowEnabled=function(){return this.item.isEnabled},t.prototype.isRowHasEnabledCondition=function(){return!!this.item.enableIf},t}(Ko),ni=function(e){function t(t){var n=e.call(this,t)||this;return n.defaultValuesInRows={},n.createLocalizableString("totalText",n,!0),n.registerPropertyChangedHandlers(["rows"],function(){n.generatedVisibleRows&&(n.clearGeneratedRows(),n.resetRenderedTable(),n.getVisibleRows(),n.clearIncorrectValues())}),n.registerPropertyChangedHandlers(["hideIfRowsEmpty"],function(){n.updateVisibilityBasedOnRows()}),n}return $o(t,e),t.prototype.getType=function(){return"matrixdropdown"},Object.defineProperty(t.prototype,"totalText",{get:function(){return this.getLocalizableStringText("totalText","")},set:function(e){this.setLocalizableStringText("totalText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTotalText",{get:function(){return this.getLocalizableString("totalText")},enumerable:!1,configurable:!0}),t.prototype.getFooterText=function(){return this.locTotalText},t.prototype.getRowTitleWidth=function(){return this.rowTitleWidth},Object.defineProperty(t.prototype,"hideIfRowsEmpty",{get:function(){return this.getPropertyValue("hideIfRowsEmpty")},set:function(e){this.setPropertyValue("hideIfRowsEmpty",e)},enumerable:!1,configurable:!0}),t.prototype.getSingleInputTitleTemplate=function(){return"rowNameTemplateTitle"},t.prototype.getValueGetterContext=function(){return new ei(this)},t.prototype.getDisplayValueCore=function(e,t){if(!t)return t;var n=this.visibleRows,o={};if(!n)return o;for(var i=0;i<n.length;i++){var r=n[i].rowName,s=t[r];if(s){if(e){var a=to.getTextOrHtmlByValue(this.rows,r);a&&(r=a)}o[r]=this.getRowDisplayValue(e,n[i],s)}}return o},t.prototype.getConditionObjectRowName=function(e){return"."+this.rows[e].value},t.prototype.getConditionObjectRowText=function(e){return"."+this.rows[e].calculatedText},t.prototype.getConditionObjectsRowIndeces=function(){for(var e=[],t=0;t<this.rows.length;t++)e.push(t);return e},t.prototype.isNewValueCorrect=function(e){return r.isValueObject(e,!0)},t.prototype.clearIncorrectValues=function(){if(!this.isEmpty()){this.getVisibleRows();var t={},n=this.value;for(var o in n){var i=this.getRowByKey(o);i&&i.isVisible&&(t[o]=n[o])}this.value=t}e.prototype.clearIncorrectValues.call(this)},t.prototype.getRowByKey=function(e){var t=this.generatedVisibleRows;if(!t)return null;for(var n=0;n<t.length;n++)if(t[n].rowName===e)return t[n];return null},t.prototype.clearGeneratedRows=function(){var t=this;this.generatedVisibleRows&&(this.isDisposed||this.generatedVisibleRows.forEach(function(e){t.defaultValuesInRows[e.rowName]=e.getNamesWithDefaultValues()}),e.prototype.clearGeneratedRows.call(this))},t.prototype.getRowValueForCreation=function(e,t){var n=e[t];if(!n)return n;var o=this.defaultValuesInRows[t];return Array.isArray(o)&&0!==o.length?(o.forEach(function(e){delete n[e]}),n):n},t.prototype.generateRows=function(){var e=new Array,t=this.rows;if(!t||0===t.length)return e;var n=this.value;n||(n={});for(var o=0;o<t.length;o++){var i=t[o];this.isValueEmpty(i.value)||e.push(this.createMatrixRow(i,this.getRowValueForCreation(n,i.value)))}return e},t.prototype.createMatrixRow=function(e,t){return new ti(e.value,e,this,t)},t.prototype.getFilteredDataCore=function(){var e={};return this.generatedVisibleRows.forEach(function(t){t.isVisible&&!t.isEmpty&&(e[t.rowName]=t.filteredValue)}),e},t.prototype.getSearchableItemValueKeys=function(e){e.push("rows")},t.prototype.getIsRequireToGenerateRows=function(){if(e.prototype.getIsRequireToGenerateRows.call(this))return!0;for(var t=0;t<this.rows.length;t++)if(this.rows[t].visibleIf)return!0;return!1},t.prototype.updateProgressInfoByValues=function(e){var t=this.value;t||(t={});for(var n=0;n<this.rows.length;n++){var o=t[this.rows[n].value];this.updateProgressInfoByRow(e,o||{})}},t}(Zo);D.addClass("matrixdropdown",[{name:"rows:itemvalue[]",uniqueProperty:"value"},"rowsVisibleIf:condition","rowTitleWidth",{name:"totalText",serializationProperty:"locTotalText"},"hideIfRowsEmpty:boolean"],function(){return new ni("")},"matrixdropdownbase"),Io.Instance.registerQuestion("matrixdropdown",function(e){var t=new ni(e);return t.choices=[1,2,3,4,5],t.rows=Io.DefaultRows,Zo.addDefaultColumns(t),t});"undefined"!=typeof window&&window.addEventListener("touchmove",function(e){oi.PreventScrolling&&e.preventDefault()},{passive:!1});var oi=function(){function e(t,n,o){void 0===n&&(n=!0),void 0===o&&(o=!1);var i=this;this.dd=t,this.longTap=n,this.fitToContainer=o,this.scrollIntervalId=null,this.stopLongTapIfMoveEnough=function(e){e.preventDefault(),i.currentX=e.pageX,i.currentY=e.pageY,i.isMicroMovement||(i.returnUserSelectBack(),i.stopLongTap())},this.stopLongTap=function(e){clearTimeout(i.timeoutID),i.timeoutID=null,document.removeEventListener("pointerup",i.stopLongTap),document.removeEventListener("pointermove",i.stopLongTapIfMoveEnough)},this.handlePointerCancel=function(e){i.clear()},this.handleEscapeButton=function(e){27==e.keyCode&&i.clear()},this.onContextMenu=function(e){e.preventDefault(),e.stopPropagation()},this.dragOver=function(e){i.moveShortcutElement(e),i.draggedElementShortcut.style.cursor="grabbing",i.dd.dragOver(e)},this.clear=function(){cancelAnimationFrame(i.scrollIntervalId),document.removeEventListener("pointermove",i.dragOver),document.removeEventListener("pointercancel",i.handlePointerCancel),document.removeEventListener("keydown",i.handleEscapeButton),document.removeEventListener("pointerup",i.drop),i.draggedElementShortcut.removeEventListener("pointerup",i.drop),Je&&i.draggedElementShortcut.removeEventListener("contextmenu",i.onContextMenu),i.draggedElementShortcut.parentElement.removeChild(i.draggedElementShortcut),i.dd.clear(),i.draggedElementShortcut=null,i.scrollIntervalId=null,Je&&(i.savedTargetNode.style.cssText=null,i.savedTargetNode&&i.savedTargetNode.parentElement.removeChild(i.savedTargetNode),i.insertNodeToParentAtIndex(i.savedTargetNodeParent,i.savedTargetNode,i.savedTargetNodeIndex),e.PreventScrolling=!1),i.savedTargetNode=null,i.savedTargetNodeParent=null,i.savedTargetNodeIndex=null,i.returnUserSelectBack()},this.drop=function(){i.dd.drop(),i.clear()},this.draggedElementShortcut=null}return Object.defineProperty(e.prototype,"documentOrShadowRoot",{get:function(){var e=this.rootElement.getRootNode();return e instanceof Document||e instanceof ShadowRoot?e:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rootElement",{get:function(){return Nt(gn.environment.root)?this.rootContainer||gn.environment.root:this.rootContainer||gn.environment.root.documentElement||document.body},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewRootElement",{get:function(){return Nt(this.rootElement)?this.rootElement.host:this.rootElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMicroMovement",{get:function(){var e=Math.abs(this.currentX-this.startX),t=Math.abs(this.currentY-this.startY);return e<5&&t<5},enumerable:!1,configurable:!0}),e.prototype.startLongTapProcessing=function(e,t,n,o,i){var r=this;void 0===i&&(i=!1),this.startX=e.pageX,this.startY=e.pageY,document.body.style.setProperty("touch-action","none","important"),this.timeoutID=setTimeout(function(){r.doStartDrag(e,t,n,o),i||(r.savedTargetNode=e.target,r.savedTargetNode.style.cssText="\n          position: absolute;\n          height: 1px!important;\n          width: 1px!important;\n          overflow: hidden;\n          clip: rect(1px 1px 1px 1px);\n          clip: rect(1px, 1px, 1px, 1px);\n        ",r.savedTargetNodeParent=r.savedTargetNode.parentElement,r.savedTargetNodeIndex=r.getNodeIndexInParent(r.savedTargetNode),r.rootElement.appendChild(r.savedTargetNode)),r.stopLongTap()},this.longTap?500:0),document.addEventListener("pointerup",this.stopLongTap),document.addEventListener("pointermove",this.stopLongTapIfMoveEnough)},e.prototype.moveShortcutElement=function(e){var t=this.viewRootElement.getBoundingClientRect().x,n=this.viewRootElement.getBoundingClientRect().y,o=this.viewRootElement.scrollLeft,i=this.viewRootElement.scrollTop;this.doScroll(e.clientY,e.clientX);var r=this.draggedElementShortcut.offsetHeight,s=this.draggedElementShortcut.offsetWidth,a=this.draggedElementShortcut.shortcutXOffset||s/2,l=this.draggedElementShortcut.shortcutYOffset||r/2;0!==document.querySelectorAll("[dir='rtl']").length&&(a=s/2,l=r/2);var u=document.documentElement.clientHeight,c=document.documentElement.clientWidth,p=e.pageX,h=e.pageY,d=e.clientX,f=e.clientY;t-=o,n-=i;var g=this.getShortcutBottomCoordinate(f,r,l);return this.getShortcutRightCoordinate(d,s,a)>=c?(this.draggedElementShortcut.style.left=c-s-t+"px",void(this.draggedElementShortcut.style.top=f-l-n+"px")):d-a<=0?(this.draggedElementShortcut.style.left=p-d-t+"px",void(this.draggedElementShortcut.style.top=f-n-l+"px")):g>=u?(this.draggedElementShortcut.style.left=d-a-t+"px",void(this.draggedElementShortcut.style.top=u-r-n+"px")):f-l<=0?(this.draggedElementShortcut.style.left=d-a-t+"px",void(this.draggedElementShortcut.style.top=h-f-n+"px")):(this.draggedElementShortcut.style.left=d-t-a+"px",void(this.draggedElementShortcut.style.top=f-n-l+"px"))},e.prototype.getShortcutBottomCoordinate=function(e,t,n){return e+t-n},e.prototype.getShortcutRightCoordinate=function(e,t,n){return e+t-n},e.prototype.requestAnimationFrame=function(e){return requestAnimationFrame(e)},e.prototype.scrollByDrag=function(e,t,n){var o,i,r,s,a=this,l=100;"HTML"===e.tagName?(o=0,i=document.documentElement.clientHeight,r=0,s=document.documentElement.clientWidth):(o=e.getBoundingClientRect().top,i=e.getBoundingClientRect().bottom,r=e.getBoundingClientRect().left,s=e.getBoundingClientRect().right);var u=function(){var c=t-o<=l,p=i-t<=l,h=n-r<=l,d=s-n<=l;!c||h||d?!p||h||d?!d||c||p?!h||c||p||(e.scrollLeft-=15):e.scrollLeft+=15:e.scrollTop+=15:e.scrollTop-=15,a.scrollIntervalId=a.requestAnimationFrame(u)};this.scrollIntervalId=this.requestAnimationFrame(u)},e.prototype.doScroll=function(e,t){cancelAnimationFrame(this.scrollIntervalId);var n=this.draggedElementShortcut.style.display;this.draggedElementShortcut.style.display="none";var o=this.documentOrShadowRoot.elementFromPoint(t,e);this.draggedElementShortcut.style.display=n||"block";var i=kt(o);this.scrollByDrag(i,e,t)},e.prototype.doStartDrag=function(t,n,o,i){Je&&(e.PreventScrolling=!0),3!==t.which&&(this.dd.dragInit(t,n,o,i),this.rootElement.append(this.draggedElementShortcut),this.moveShortcutElement(t),document.addEventListener("pointermove",this.dragOver),document.addEventListener("pointercancel",this.handlePointerCancel),document.addEventListener("keydown",this.handleEscapeButton),document.addEventListener("pointerup",this.drop),Je?this.draggedElementShortcut.addEventListener("contextmenu",this.onContextMenu):this.draggedElementShortcut.addEventListener("pointerup",this.drop))},e.prototype.returnUserSelectBack=function(){document.body.style.setProperty("touch-action","auto"),document.body.style.setProperty("user-select","auto"),document.body.style.setProperty("-webkit-user-select","auto")},e.prototype.startDrag=function(e,t,n,o,i){void 0===i&&(i=!1),document.body.style.setProperty("user-select","none","important"),document.body.style.setProperty("-webkit-user-select","none","important"),Je?this.startLongTapProcessing(e,t,n,o,i):this.doStartDrag(e,t,n,o)},e.prototype.getNodeIndexInParent=function(e){return function(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}([],e.parentElement.childNodes,!0).indexOf(e)},e.prototype.insertNodeToParentAtIndex=function(e,t,n){e.insertBefore(t,e.childNodes[n])},e.PreventScrolling=!1,e}(),ii=function(){function e(e,t,n,o){var i,r=this;this.surveyValue=e,this.creator=t,this._isBottom=null,this.onGhostPositionChanged=new Ae,this.onDragStart=new Ae,this.onDragEnd=new Ae,this.onDragClear=new Ae,this.onBeforeDrop=this.onDragStart,this.onAfterDrop=this.onDragEnd,this.draggedElement=null,this.dropTarget=null,this.prevDropTarget=null,this.allowDropHere=!1,this.banDropHere=function(){r.allowDropHere=!1,r.doBanDropHere(),r.dropTarget=null,r.domAdapter.draggedElementShortcut.style.cursor="not-allowed",r.isBottom=null},this.doBanDropHere=function(){},this.domAdapter=o||new oi(this,n,null===(i=this.survey)||void 0===i?void 0:i.fitToContainer)}return Object.defineProperty(e.prototype,"isBottom",{get:function(){return!!this._isBottom},set:function(e){this._isBottom=e,this.ghostPositionChanged()},enumerable:!1,configurable:!0}),e.prototype.ghostPositionChanged=function(){this.onGhostPositionChanged.fire({},{})},Object.defineProperty(e.prototype,"dropTargetDataAttributeName",{get:function(){return"[data-sv-drop-target-".concat(this.draggedElementType,"]")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"survey",{get:function(){var e;return this.surveyValue||(null===(e=this.creator)||void 0===e?void 0:e.survey)},enumerable:!1,configurable:!0}),e.prototype.startDrag=function(e,t,n,o,i){void 0===i&&(i=!1),this.domAdapter.rootContainer=this.getRootElement(this.survey,this.creator),this.domAdapter.startDrag(e,t,n,o,i)},e.prototype.getRootElement=function(e,t){return t?t.rootElement:e.rootElement},e.prototype.dragInit=function(e,t,n,o){this.draggedElement=t,this.parentElement=n;var i=this.getShortcutText(this.draggedElement);this.domAdapter.draggedElementShortcut=this.createDraggedElementShortcut(i,o,e),this.onStartDrag(e);var r=this.draggedElement&&this.draggedElement.parent;this.onDragStart.fire(this,{fromElement:r,draggedElement:this.draggedElement})},e.prototype.onStartDrag=function(e){},e.prototype.isDropTargetDoesntChanged=function(e){return this.dropTarget===this.prevDropTarget&&e===this.isBottom},e.prototype.getShortcutText=function(e){return null==e?void 0:e.shortcutText},e.prototype.createDraggedElementShortcut=function(e,t,n){var i=o.createElement("div");return i&&(i.innerText=e,i.className=this.getDraggedElementClass()),i},e.prototype.getDraggedElementClass=function(){return"sv-dragged-element-shortcut"},e.prototype.doDragOver=function(){},e.prototype.afterDragOver=function(e){},e.prototype.findDropTargetNodeFromPoint=function(e,t){var n=this.domAdapter.draggedElementShortcut.style.display;if(this.domAdapter.draggedElementShortcut.style.display="none",!o.isAvailable())return null;var i=this.domAdapter.documentOrShadowRoot.elementsFromPoint(e,t);this.domAdapter.draggedElementShortcut.style.display=n||"block";for(var r=0,s=i[r];s&&s.className&&"function"==typeof s.className.indexOf&&-1!=s.className.indexOf("sv-drag-target-skipped");)s=i[++r];return s?this.findDropTargetNodeByDragOverNode(s):null},e.prototype.getDataAttributeValueByNode=function(e){var t=this,n="svDropTarget";return this.draggedElementType.split("-").forEach(function(e){n+=t.capitalizeFirstLetter(e)}),e.dataset[n]},e.prototype.getDropTargetByNode=function(e,t){var n=this.getDataAttributeValueByNode(e);return this.getDropTargetByDataAttributeValue(n,e,t)},e.prototype.capitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.prototype.calculateVerticalMiddleOfHTMLElement=function(e){var t=e.getBoundingClientRect();return t.y+t.height/2},e.prototype.calculateHorizontalMiddleOfHTMLElement=function(e){var t=e.getBoundingClientRect();return t.x+t.width/2},e.prototype.calculateIsBottom=function(e,t){return!1},e.prototype.findDropTargetNodeByDragOverNode=function(e){return e.closest(this.dropTargetDataAttributeName)},e.prototype.dragOver=function(e){var t=this.findDropTargetNodeFromPoint(e.clientX,e.clientY);if(t){this.dropTarget=this.getDropTargetByNode(t,e);var n=this.isDropTargetValid(this.dropTarget,t);if(this.doDragOver(),n){var o=this.calculateIsBottom(e.clientY,t);this.allowDropHere=!0,this.isDropTargetDoesntChanged(o)||(this.isBottom=null,this.isBottom=o,this.draggedElement!=this.dropTarget&&this.afterDragOver(t),this.prevDropTarget=this.dropTarget)}else this.banDropHere()}else this.banDropHere()},e.prototype.drop=function(){if(this.allowDropHere){var e=this.draggedElement.parent,t=this.doDrop();this.onDragEnd.fire(this,{fromElement:e,draggedElement:t,toElement:this.dropTarget})}},e.prototype.clear=function(){var e={draggedElement:this.draggedElement};this.dropTarget=null,this.prevDropTarget=null,this.draggedElement=null,this.isBottom=null,this.parentElement=null,this.onDragClear.fire(this,e)},e}(),ri=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),si=function(){return si=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},si.apply(this,arguments)},ai=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dropIsBanned=!1,t.matrixRowMap={},t.fromIndex=null,t.toIndex=null,t.toMatrix=null,t.doBanDropHere=function(){t.dropIsBanned||(t.removeGhost(),t.parentElement.renderedTable.rows.splice(t.initialDraggedElementIndex,0,t.draggedRenderedRow),t.dropIsBanned=!0,t.lastDropTargetParentElement=t.parentElement)},t.doDrop=function(){if(t.parentElement==t.toMatrix)t.fromIndex<t.toIndex&&t.toIndex--,t.parentElement.moveRowByIndex(t.fromIndex,t.toIndex);else if(t.toMatrix){var e=si({},t.parentElement.value[t.fromIndex]);t.parentElement.removeRowByIndex(t.fromIndex),t.toMatrix.addRowByIndex(e,t.toIndex)}return t.parentElement},t}return ri(t,e),Object.defineProperty(t.prototype,"draggedElementType",{get:function(){return"matrix-row"},enumerable:!1,configurable:!0}),t.prototype.patchUserSelect=function(){var e=o.getBody();e&&(this.restoreUserSelectValue=e.style.userSelect,e.style.userSelect="none")},t.prototype.onStartDrag=function(){var e=this;this.patchUserSelect();var t=this.parentElement.renderedTable.rows,n=t.findIndex(function(t){return t.row===e.draggedElement});n>=0&&(this.draggedRenderedRow=t[n],this.initialDraggedElementIndex=n,this.draggedRenderedRow.isGhostRow=!0,this.lastDropTargetParentElement=this.parentElement);var o=[];this.survey.onMatrixRowDragOver.isEmpty?o.push(this.parentElement):function e(t){t.filter(function(e){return e.isDescendantOf("matrixdynamic")&&e.allowRowReorder}).forEach(function(t){o.push(t),"none"!==t.detailPanelMode&&t.visibleRows.forEach(function(t){t.isDetailPanelShowing&&e(t.questions)})})}(this.survey.getAllQuestions()),this.matrixRowMap={},o.forEach(function(t){t.visibleRows.forEach(function(n){e.matrixRowMap[n.id]={row:n,matrix:t}}),0==t.visibleRows.length&&(e.matrixRowMap[t.id]={row:t,matrix:t})}),this.fromIndex=this.parentElement.visibleRows.indexOf(this.draggedElement)},Object.defineProperty(t.prototype,"shortcutClass",{get:function(){return(new _e).append(this.parentElement.cssClasses.draggedRow).toString()},enumerable:!1,configurable:!0}),t.prototype.createDraggedElementShortcut=function(e,t,n){var i=o.createElement("div");if(i){if(i.className=this.shortcutClass,t){var r=t.closest("[data-sv-drop-target-matrix-row]"),s=r.cloneNode(!0);s.style.cssText="\n        width: ".concat(r.offsetWidth,"px;\n      "),s.classList.remove("sv-matrix__drag-drop--moveup"),s.classList.remove("sv-matrix__drag-drop--movedown"),this.draggedElement.isDragDropMoveDown=!1,this.draggedElement.isDragDropMoveUp=!1,i.appendChild(s);var a=t.getBoundingClientRect();i.shortcutXOffset=n.clientX-a.x,i.shortcutYOffset=n.clientY-a.y}return i}},t.prototype.getDropTargetByDataAttributeValue=function(e){var t=this.matrixRowMap[e];return(null==t?void 0:t.row)||(null==t?void 0:t.matrix)},t.prototype.canInsertIntoThisRow=function(e){var t=this.parentElement.lockedRowCount;return t<=0||e.rowIndex>t},t.prototype.isDropTargetValid=function(e,t){return this.canInsertIntoThisRow(e)},t.prototype.calculateIsBottom=function(e,t){if(t.dataset.svDropTargetMatrix)return!0;var n=t.getBoundingClientRect();return e>=n.y+n.height/2},t.prototype.removeGhost=function(){var e=this.lastDropTargetParentElement.renderedTable.rows,t=e.indexOf(this.draggedRenderedRow);t>=0&&e.splice(t,1)},t.prototype.afterDragOver=function(t){var n=this;if(this.dropTarget){var o=this.matrixRowMap[this.dropTarget.id].matrix,i=this.matrixRowMap[this.dropTarget.id].row,r=this.isBottom&&!i.isDetailPanelShowing?1:0,s=0,a={allow:o==this.parentElement,row:i,fromMatrix:this.parentElement,toMatrix:o};if(this.survey.onMatrixRowDragOver.fire(this.survey,a),a.allow){this.removeGhost(),this.lastDropTargetParentElement=o;var l=o.renderedTable.rows;if(o.visibleRows.length>0){var u=l.findIndex(function(e){return e.row==n.dropTarget});u>=0&&l.splice(u+r,0,this.draggedRenderedRow),s=o.visibleRows.indexOf(this.dropTarget)+r}else o.renderedTable.headerRow||(l[0].cells[0].colSpans=this.draggedRenderedRow.cells.length),l.splice(0,0,this.draggedRenderedRow);this.toIndex=s,this.toMatrix=o,this.dropIsBanned=!1,e.prototype.ghostPositionChanged.call(this)}}},t.prototype.clear=function(){this.matrixRowMap={},this.parentElement.renderedTable.rows.forEach(function(e){e.isGhostRow=!1}),this.parentElement.clearOnDrop(),this.toMatrix&&this.toMatrix.clearOnDrop(),this.fromIndex=null,this.toIndex=null;var t=o.getBody();t&&(t.style.userSelect=this.restoreUserSelectValue||"initial"),e.prototype.clear.call(this)},t}(ii),li=function(){function e(e,t){void 0===t&&(t=!0);var n=this;this.dragHandler=e,this.preventOnTouch=t,this.onPointerUp=function(e){n.clearListeners()},this.tryToStartDrag=function(e){if(n.currentX=e.pageX,n.currentY=e.pageY,!n.isMicroMovement)return n.clearListeners(),n.dragHandler(n.pointerDownEvent,n.targets,n.itemModel),!0}}return e.prototype.onPointerDown=function(e,t){this.targets={currentTarget:e.currentTarget,target:e.target},Je&&this.preventOnTouch?this.dragHandler(e,this.targets,t):(this.pointerDownEvent=e,this.startX=e.pageX,this.startY=e.pageY,this.targets.currentTarget.getRootNode().addEventListener("pointermove",this.tryToStartDrag),this.targets.currentTarget.addEventListener("pointerup",this.onPointerUp),this.itemModel=t)},Object.defineProperty(e.prototype,"isMicroMovement",{get:function(){var e=Math.abs(this.currentX-this.startX),t=Math.abs(this.currentY-this.startY);return e<10&&t<10},enumerable:!1,configurable:!0}),e.prototype.clearListeners=function(){this.pointerDownEvent&&(this.targets.currentTarget.getRootNode().removeEventListener("pointermove",this.tryToStartDrag),this.targets.currentTarget.removeEventListener("pointerup",this.onPointerUp))},e}(),ui=function(){function e(e,t,n){this.locText=e,this.btnEdit=t,this.btnRemove=n}return Object.defineProperty(e.prototype,"showRemove",{get:function(){return!!this.btnRemove},enumerable:!1,configurable:!0}),e}(),ci=function(){function e(e,t){this.question=e,this.noEntry=t,this.items=[]}return e.prototype.isEmpty=function(){return 0==this.items.length},e.prototype.dispose=function(){this.items.forEach(function(e){var t,n;null===(t=e.btnEdit)||void 0===t||t.dispose(),null===(n=e.btnRemove)||void 0===n||n.dispose()})},e}(),pi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),hi=function(e){function t(t){var n=e.call(this,t)||this;return n.question=t,n}return pi(t,e),t.prototype.getValue=function(t,n,o,i){if(!i&&this.question.isEmpty())return{isFound:0===t.length,value:void 0};if(o>-1){var r=this.question.allRows;return o>=0&&o<r.length?r[o].getValueGetterContext().getValue(t,!1,o,i):{isFound:!1,value:void 0,context:this}}return e.prototype.getValue.call(this,t,n,o,i)},t}(Gn),di=function(e){function t(t,n,o){var i=e.call(this,n,o)||this;return i.index=t,i.buildCells(o),i}return pi(t,e),t.prototype.getRowIndex=function(){var t=e.prototype.getRowIndex.call(this);return t>0?t:this.index+1},Object.defineProperty(t.prototype,"rowName",{get:function(){return this.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataName",{get:function(){return"row"+(this.index+1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return"row "+(this.visibleIndex+1)},enumerable:!1,configurable:!0}),t.prototype.getAccessbilityText=function(){return(this.visibleIndex+1).toString()},Object.defineProperty(t.prototype,"shortcutText",{get:function(){var e=this.data.visibleRows.indexOf(this)+1,t=this.cells.length>1?this.cells[1].questionValue:void 0,n=this.cells.length>0?this.cells[0].questionValue:void 0;return t&&t.value||n&&n.value||""+e},enumerable:!1,configurable:!0}),t}(Ko),fi=function(e){function t(t){var n=e.call(this,t)||this;return n.rowCounter=0,n.setRowCountValueFromData=!1,n.startDragMatrixRow=function(e,t){n.dragDropMatrixRows.startDrag(e,n.draggedRow,n,t.target)},n.initialRowCount=n.getDefaultPropertyValue("rowCount"),n.createLocalizableString("confirmDeleteText",n,!1,"confirmDelete"),n.createLocalizableString("addRowText",n).onGetTextCallback=function(e){return e||n.defaultAddRowText},n.createLocalizableString("removeRowText",n,!1,"removeRow"),n.createLocalizableString("noRowsText",n,!1,!0),n.createLocalizableString("editRowText",n,!1,"editText"),n.registerPropertyChangedHandlers(["hideColumnsIfEmpty","allowAddRows"],function(){n.updateShowTableAndAddRow()}),n.registerPropertyChangedHandlers(["allowRowReorder","isReadOnly","lockedRowCount"],function(){n.resetRenderedTable()}),n.registerPropertyChangedHandlers(["minRowCount"],function(){n.onMinRowCountChanged()}),n.registerPropertyChangedHandlers(["maxRowCount"],function(){n.onMaxRowCountChanged()}),n.dragOrClickHelper=new li(n.startDragMatrixRow),n}return pi(t,e),t.prototype.setSurveyImpl=function(t,n){e.prototype.setSurveyImpl.call(this,t,n),this.dragDropMatrixRows=new ai(this.survey,null,!0)},t.prototype.isBanStartDrag=function(e){var t=e.target;return"true"===t.getAttribute("contenteditable")||"INPUT"===t.nodeName||!this.isDragHandleAreaValid(t)},t.prototype.isDragHandleAreaValid=function(e){return"icon"!==this.survey.matrixDragHandleArea||e.classList.contains(this.cssClasses.dragElementDecorator)},t.prototype.onPointerDown=function(e,t){t&&this.isRowsDragAndDrop&&!this.isDesignMode&&(this.isBanStartDrag(e)||t.isDetailPanelShowing||(this.draggedRow=t,this.dragOrClickHelper.onPointerDown(e)))},t.prototype.getType=function(){return"matrixdynamic"},Object.defineProperty(t.prototype,"isRowsDynamic",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"confirmDelete",{get:function(){return this.getPropertyValue("confirmDelete")},set:function(e){this.setPropertyValue("confirmDelete",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValueArray",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyName",{get:function(){return this.getPropertyValue("keyName","")},set:function(e){this.setPropertyValue("keyName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultRowValue",{get:function(){return this.getPropertyValue("defaultRowValue")},set:function(e){this.setPropertyValue("defaultRowValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"copyDefaultValueFromLastEntry",{get:function(){return this.getPropertyValue("copyDefaultValueFromLastEntry")},set:function(e){this.setPropertyValue("copyDefaultValueFromLastEntry",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultValueFromLastRow",{get:function(){return this.copyDefaultValueFromLastEntry},set:function(e){this.copyDefaultValueFromLastEntry=e},enumerable:!1,configurable:!0}),t.prototype.isDefaultValueEmpty=function(){return e.prototype.isDefaultValueEmpty.call(this)&&this.isValueEmpty(this.defaultRowValue)},t.prototype.valueFromData=function(t){return this.minRowCount<1||this.isEmpty()?e.prototype.valueFromData.call(this,t):this.correctValueForMinMaxRows(t)},t.prototype.correctValueForMinMaxRows=function(e){Array.isArray(e)||(e=[]);for(var t=e.length;t<this.minRowCount;t++)e.push({});return e},t.prototype.isNewValueCorrect=function(e){return Array.isArray(e)},t.prototype.setDefaultValue=function(){if(!this.isValueEmpty(this.defaultRowValue)&&this.isValueEmpty(this.defaultValue)){if(this.isEmpty()&&0!=this.rowCount){for(var t=[],n=0;n<this.rowCount;n++)t.push(this.defaultRowValue);this.value=t}}else e.prototype.setDefaultValue.call(this)},t.prototype.moveRowByIndex=function(e,t){var n=this.createNewValue(),o=Math.max(e,t);if(Array.isArray(n)||!(o>=n.length)){var i=n[e];n.splice(e,1),n.splice(t,0,i);var r=this.generatedVisibleRows;if(Array.isArray(r)&&o<r.length){var s=r[t],a=r[e];if(this.getIsDetailPanelShowing(a)!==this.getIsDetailPanelShowing(s)){var l=this.getIsDetailPanelShowing(s);this.setIsDetailPanelShowing(s,this.getIsDetailPanelShowing(a)),this.setIsDetailPanelShowing(a,l)}}this.value=n}},t.prototype.addRowByIndex=function(e,t){var n=this.createNewValue();!Array.isArray(n)&&t>=n.length||(n.splice(t,0,e),this.rowCount++,this.value=n)},t.prototype.removeRowByIndex=function(e){var t=this.createNewValue();!Array.isArray(t)&&e>=t.length||(t.splice(e,1),this.rowCount--,this.value=t)},t.prototype.clearOnDrop=function(){this.isEditingSurveyElement||this.resetRenderedTable()},t.prototype.initDataUI=function(){this.generatedVisibleRows||this.getVisibleRows()},Object.defineProperty(t.prototype,"rowCount",{get:function(){return this.rowCountValue},set:function(e){if(!((e=r.getNumber(e))<0||e>gn.matrix.maxRowCount||e===this.rowCount)){this.setRowCountValueFromData=!1;var t=this.rowCountValue;if(this.rowCountValue=e,this.value&&this.value.length>e){var n=this.value;n.splice(e),this.value=n}if(this.isUpdateLocked)this.initialRowCount=e;else{if(this.generatedVisibleRows||0==t){this.generatedVisibleRows||(this.clearGeneratedRows(),this.generatedVisibleRows=[]),this.generatedVisibleRows.splice(e);for(var o=t;o<e;o++){var i=this.createMatrixRow(this.getValueForNewRow());this.generatedVisibleRows.push(i),this.onMatrixRowCreated(i)}this.runCondition(this.getDataFilteredProperties())}this.onRowsChanged()}}},enumerable:!1,configurable:!0}),t.prototype.updateBindingProp=function(t,n){e.prototype.updateBindingProp.call(this,t,n);var o=this.generatedVisibleRows;if("rowCount"===t&&Array.isArray(o)){var i=this.getUnbindValue(this.value)||[];if(i.length<o.length){for(var r=!1,s=i.length;s<o.length;s++)r||(r=!o[s].isEmpty),i.push(o[s].value||{});r&&(this.value=i)}}},t.prototype.updateProgressInfoByValues=function(e){var t=this.value;Array.isArray(t)||(t=[]);for(var n=0;n<this.rowCount;n++){var o=n<t.length?t[n]:{};this.updateProgressInfoByRow(e,o)}},t.prototype.getValueForNewRow=function(){var e=null;return this.onGetValueForNewRowCallBack&&(e=this.onGetValueForNewRowCallBack(this)),e},Object.defineProperty(t.prototype,"allowRowReorder",{get:function(){return this.getPropertyValue("allowRowReorder")},set:function(e){this.setPropertyValue("allowRowReorder",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowRowsDragAndDrop",{get:function(){return this.allowRowReorder},set:function(e){this.allowRowReorder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowRowDragIn",{get:function(){var e,t;return!(null===(t=null===(e=this.survey)||void 0===e?void 0:e.onMatrixRowDragOver)||void 0===t?void 0:t.isEmpty)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRowsDragAndDrop",{get:function(){return this.allowRowReorder&&!this.isReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lockedRowCount",{get:function(){return this.getPropertyValue("lockedRowCount",0)},set:function(e){this.setPropertyValue("lockedRowCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iconDragElement",{get:function(){return this.cssClasses.iconDragElement},enumerable:!1,configurable:!0}),t.prototype.createRenderedTable=function(){return new gi(this)},Object.defineProperty(t.prototype,"rowCountValue",{get:function(){return this.getPropertyValue("rowCount")},set:function(e){this.setPropertyValue("rowCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minRowCount",{get:function(){return this.getPropertyValue("minRowCount")},set:function(e){e<0&&(e=0),this.setPropertyValue("minRowCount",e)},enumerable:!1,configurable:!0}),t.prototype.onMinRowCountChanged=function(){var e=this.minRowCount;e>this.maxRowCount&&(this.maxRowCount=e),this.initialRowCount<e&&(this.initialRowCount=e),this.rowCount<e&&(this.rowCount=e)},Object.defineProperty(t.prototype,"maxRowCount",{get:function(){return this.getPropertyValue("maxRowCount")},set:function(e){e<=0||(e>gn.matrix.maxRowCount&&(e=gn.matrix.maxRowCount),e!=this.maxRowCount&&this.setPropertyValue("maxRowCount",e))},enumerable:!1,configurable:!0}),t.prototype.onMaxRowCountChanged=function(){var e=this.maxRowCount;e<this.minRowCount&&(this.minRowCount=e),this.rowCount>e&&(this.rowCount=e)},Object.defineProperty(t.prototype,"allowAddRows",{get:function(){return this.getPropertyValue("allowAddRows")},set:function(e){this.setPropertyValue("allowAddRows",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowRemoveRows",{get:function(){return this.getPropertyValue("allowRemoveRows")},set:function(e){this.setPropertyValue("allowRemoveRows",e),this.isUpdateLocked||this.resetRenderedTable()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canAddRow",{get:function(){return this.allowAddRows&&!this.isReadOnly&&this.rowCount<this.maxRowCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canRemoveRows",{get:function(){var e=this.allowRemoveRows&&!this.isReadOnly&&this.rowCount>this.minRowCount;return this.canRemoveRowsCallback?this.canRemoveRowsCallback(e):e},enumerable:!1,configurable:!0}),t.prototype.canRemoveRow=function(e){if(!this.survey)return!0;var t=e.rowIndex-1;return!(this.lockedRowCount>0&&t<this.lockedRowCount)&&this.survey.matrixAllowRemoveRow(this,t,e)},t.prototype.addRowUI=function(){this.addRow(!0)},t.prototype.getQuestionToFocusOnAddingRow=function(){if(0===this.visibleRows.length)return null;for(var e=this.visibleRows[this.visibleRows.length-1],t=0;t<e.cells.length;t++){var n=e.cells[t].question;if(n&&n.isVisible&&!n.isReadOnly)return n}return null},t.prototype.addRow=function(e){var t=this.rowCount,n=this.canAddRow,o={question:this,canAddRow:n,allow:n};if(this.survey&&this.survey.matrixBeforeRowAdded(o),(n!==o.allow?o.allow:n!==o.canAddRow?o.canAddRow:n)&&(this.onStartRowAddingRemoving(),this.addRowCore(),this.onEndRowAdding(),this.singleInputOnAddItem(!1),this.detailPanelShowOnAdding&&this.visibleRows.length>0&&this.visibleRows[this.visibleRows.length-1].showDetailPanel(),e&&t!==this.rowCount)){var i=this.getQuestionToFocusOnAddingRow();i&&i.focus()}},Object.defineProperty(t.prototype,"detailPanelShowOnAdding",{get:function(){return this.getPropertyValue("detailPanelShowOnAdding")},set:function(e){this.setPropertyValue("detailPanelShowOnAdding",e)},enumerable:!1,configurable:!0}),t.prototype.hasRowsAsItems=function(){return!1},t.prototype.unbindValue=function(){this.clearGeneratedRows(),this.clearPropertyValue("value"),this.rowCountValue=0,e.prototype.unbindValue.call(this)},t.prototype.isValueSurveyElement=function(t){return this.isEditingSurveyElement||e.prototype.isValueSurveyElement.call(this,t)},t.prototype.addRowCore=function(){var e=this.rowCount;this.rowCount=this.rowCount+1;var t=this.getDefaultRowValue(!0),n=null;if(this.isValueEmpty(t)||(n=this.createNewValue()).length==this.rowCount&&(n[n.length-1]=t,this.value=n),this.data){this.runCellsCondition(this.getDataFilteredProperties());var o=this.generatedVisibleRows;if(this.isValueEmpty(t)&&o.length>0){var i=o[o.length-1];this.isValueEmpty(i.value)||(n||(n=this.createNewValue()),this.isValueSurveyElement(n)||this.isTwoValueEquals(n[n.length-1],i.value)||(n[n.length-1]=i.value,this.value=n))}}this.survey&&(o=this.visibleRows,e+1==this.rowCount&&o.length>0&&(i=o[o.length-1],this.survey.matrixRowAdded(this,i),this.onRowsChanged()))},t.prototype.getDefaultRowValue=function(e){for(var t=null,n=0;n<this.columns.length;n++){var o=this.columns[n].templateQuestion;o&&!this.isValueEmpty(o.getDefaultValue())&&((t=t||{})[this.columns[n].name]=o.getDefaultValue())}if(!this.isValueEmpty(this.defaultRowValue))for(var i in this.defaultRowValue)(t=t||{})[i]=this.defaultRowValue[i];if(e&&this.copyDefaultValueFromLastEntry){var r=this.value;if(r&&Array.isArray(r)&&r.length>=this.rowCount-1){var s=r[this.rowCount-2];for(var i in s)(t=t||{})[i]=s[i]}}return t},t.prototype.focusAddBUtton=function(){var e=this.getRootElement();if(e&&this.cssClasses.buttonAdd){var t=e.querySelectorAll("."+this.cssClasses.buttonAdd)[0];t&&t.focus()}},t.prototype.getActionCellIndex=function(e){var t=this.showHeader?1:0;return this.isColumnLayoutHorizontal?e.cells.length:this.visibleRows.indexOf(e)+t},t.prototype.removeRowUI=function(e){var t=this;if(e&&e.rowName){var n=this.visibleRows.indexOf(e);if(n<0)return;e=n}this.removeRow(e,void 0,function(){var e=t.visibleRows.length,o=n>=e?e-1:n,i=o>-1?t.visibleRows[o]:void 0;setTimeout(function(){i?t.renderedTable.focusActionCell(i,t.getActionCellIndex(i)):t.focusAddBUtton()},10)})},t.prototype.isRequireConfirmOnRowDelete=function(e){if(!this.confirmDelete)return!1;if(e<0||e>=this.rowCount)return!1;var t=this.createNewValue();return!(this.isValueEmpty(t)||!Array.isArray(t)||e>=t.length||this.isValueEmpty(t[e]))},t.prototype.removeRow=function(e,t,n){var o=this;if(this.canRemoveRows&&!(e<0||e>=this.rowCount)){var i=this.visibleRows&&e<this.visibleRows.length?this.visibleRows[e]:null;void 0===t&&(t=this.isRequireConfirmOnRowDelete(e)),t?Lt({message:this.confirmDeleteText,funcOnYes:function(){o.removeRowAsync(e,i),n&&n()},locale:this.getLocale(),rootElement:this.survey.rootElement,cssClass:this.cssClasses.confirmDialog}):(this.removeRowAsync(e,i),n&&n())}},t.prototype.removeRowAsync=function(e,t){t&&this.survey&&!this.survey.matrixRowRemoving(this,e,t)||(this.onStartRowAddingRemoving(),this.removeRowCore(e),this.singleInputOnRemoveItem(e),this.onEndRowRemoving(t))},t.prototype.removeRowCore=function(e){var t=this.visibleRows?this.visibleRows[e]:null;if(!((e=this.generatedVisibleRows.indexOf(t))<0)){if(this.generatedVisibleRows&&e<this.generatedVisibleRows.length&&this.generatedVisibleRows.splice(e,1),this.rowCountValue--,this.value){var n=[];(n=Array.isArray(this.value)&&e<this.value.length?this.createValueCopy():this.createNewValue()).splice(e,1),n=this.deleteRowValue(n,null),this.isRowChanging=!0,this.value=n,this.isRowChanging=!1}this.onRowsChanged(),this.survey&&this.survey.matrixRowRemoved(this,e,t)}},t.prototype.onSingleInputQuestionAdded=function(e){this.showHeader||(e.titleLocation="hidden")},t.prototype.getSingleInputQuestionsCore=function(e,t){var n=new Array,o=this.visibleRows;if(t)for(var i=0;i<o.length;i++){var r=o[i];r.hasValueAnyQuestion(!0)&&r.validate(new Yn)||this.fillSingleInputQuestionsByRow(n,r)}return this.getSingleInputQuestionsForDynamic(e,n)},t.prototype.fillSingleInputQuestionsInContainer=function(e,t){var n=this.getRowByQuestion(t);this.fillSingleInputQuestionsByRow(e,n)},t.prototype.fillSingleInputQuestionsByRow=function(e,t){t&&t.questions.forEach(function(t){return t.addNestedQuestion(e,!0,!1,!1)})},t.prototype.getSingleInputAddTextCore=function(){if(this.canAddRow)return this.addRowText},t.prototype.singleInputAddItemCore=function(){this.addRowUI()},t.prototype.singleInputRemoveItemCore=function(e){this.removeRowUI(this.getRowByQuestion(e))},t.prototype.getSingleQuestionOnChange=function(e){var t=this.visibleRows;if(t.length>0){(e<0||e>=t.length)&&(e=t.length-1);var n=t[e].visibleQuestions;if(n.length>0)return n[0]}return null},t.prototype.createSingleInputSummary=function(){var e=this,t=new ci(this,this.locNoRowsText),n=new Array,o=this.canRemoveRows;return this.visibleRows.forEach(function(t){var i=new Et(new Xo(e,t),!0,void 0,e.getSingleInputTitleTemplate());i.setJson(e.locSingleInputTitleTemplate.getJson());var r=new dt({locTitle:e.getLocalizableString("editRowText"),action:function(){e.singleInputEditRow(t)}}),s=o&&e.canRemoveRow(t)?new dt({locTitle:e.locRemoveRowText,action:function(){e.removeRowUI(t)}}):void 0;n.push(new ui(i,r,s))}),t.items=n,t},Object.defineProperty(t.prototype,"confirmDeleteText",{get:function(){return this.getLocalizableStringText("confirmDeleteText")},set:function(e){this.setLocalizableStringText("confirmDeleteText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locConfirmDeleteText",{get:function(){return this.getLocalizableString("confirmDeleteText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"addRowText",{get:function(){return this.getLocalizableStringText("addRowText",this.defaultAddRowText)},set:function(e){this.setLocalizableStringText("addRowText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locAddRowText",{get:function(){return this.getLocalizableString("addRowText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultAddRowText",{get:function(){return this.getLocalizationString(this.isColumnLayoutHorizontal?"addRow":"addColumn")},enumerable:!1,configurable:!0}),t.prototype.getSingleInputTitleTemplate=function(){return"rowIndexTemplateTitle"},Object.defineProperty(t.prototype,"addRowButtonLocation",{get:function(){return this.getPropertyValue("addRowButtonLocation")},set:function(e){this.setPropertyValue("addRowButtonLocation",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"addRowLocation",{get:function(){return this.addRowButtonLocation},set:function(e){this.addRowButtonLocation=e},enumerable:!1,configurable:!0}),t.prototype.getAddRowLocation=function(){return this.addRowButtonLocation},Object.defineProperty(t.prototype,"hideColumnsIfEmpty",{get:function(){return this.getPropertyValue("hideColumnsIfEmpty")},set:function(e){this.setPropertyValue("hideColumnsIfEmpty",e)},enumerable:!1,configurable:!0}),t.prototype.getShowColumnsIfEmpty=function(){return this.hideColumnsIfEmpty},Object.defineProperty(t.prototype,"removeRowText",{get:function(){return this.getLocalizableStringText("removeRowText")},set:function(e){this.setLocalizableStringText("removeRowText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRemoveRowText",{get:function(){return this.getLocalizableString("removeRowText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noRowsText",{get:function(){return this.getLocalizableStringText("noRowsText")},set:function(e){this.setLocalizableStringText("noRowsText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locNoRowsText",{get:function(){return this.getLocalizableString("noRowsText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emptyRowsText",{get:function(){return this.noRowsText},set:function(e){this.noRowsText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locEmptyRowsText",{get:function(){return this.locNoRowsText},enumerable:!1,configurable:!0}),t.prototype.getValueGetterContext=function(){return new hi(this)},t.prototype.getDisplayValueCore=function(e,t){if(!t||!Array.isArray(t))return t;for(var n=this.getUnbindValue(t),o=this.visibleRows,i=0;i<o.length&&i<n.length;i++){var r=n[i];r&&(n[i]=this.getRowDisplayValue(e,o[i],r))}return n},t.prototype.getConditionObjectRowName=function(e){return"["+e.toString()+"]"},t.prototype.getConditionObjectsRowIndeces=function(){for(var e=[],t=Math.max(this.rowCount,1),n=0;n<Math.min(gn.matrix.maxRowCountInCondition,t);n++)e.push(n);return e},t.prototype.supportAutoAdvance=function(){return!1},Object.defineProperty(t.prototype,"hasRowText",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.onCheckForErrors=function(t,n,o){e.prototype.onCheckForErrors.call(this,t,n,o),n||this.validateMinRows()||t.push(new Tn(this.minRowCount,this))},t.prototype.validateMinRows=function(){if(this.minRowCount<=0||!this.isRequired||!this.generatedVisibleRows)return!0;var e=0;return this.generatedVisibleRows.forEach(function(t){t.isEmpty||e++}),e>=this.minRowCount},t.prototype.getUniqueColumnsNames=function(){var t=e.prototype.getUniqueColumnsNames.call(this),n=this.keyName;return n&&t.indexOf(n)<0&&t.push(n),t},t.prototype.generateRows=function(){var e=new Array;if(0===this.rowCount)return e;for(var t=this.createNewValue(),n=0;n<this.rowCount;n++)e.push(this.createMatrixRow(this.getRowValueByIndex(t,n)));return this.isValueEmpty(this.getDefaultRowValue(!1))||(this.value=t),e},t.prototype.createMatrixRow=function(e){return new di(this.rowCounter++,this,e)},t.prototype.getInsertedDeletedIndex=function(e,t){for(var n=Math.min(e.length,t.length),o=0;o<n;o++)if(t[o]!==e[o].editingObj)return o;return n},t.prototype.isEditingObjectValueChanged=function(){var e=this.value;if(!this.generatedVisibleRows||!this.isValueSurveyElement(e))return!1;var t=this.lastDeletedRow;this.lastDeletedRow=void 0;var n=this.generatedVisibleRows;if(!Array.isArray(e)||Math.abs(n.length-e.length)>1||n.length===e.length)return!1;var o=this.getInsertedDeletedIndex(n,e);if(n.length>e.length){this.lastDeletedRow=n[o];var i=n[o];n.splice(o,1),this.isRendredTableCreated&&this.renderedTable.onRemovedRow(i)}else{var r=void 0;t&&t.editingObj===e[o]?r=t:(t=void 0,r=this.createMatrixRow(e[o])),n.splice(o,0,r),t||this.onMatrixRowCreated(r),this.isRendredTableCreated&&this.renderedTable.onAddedRow(r,o)}return this.setPropertyValueDirectly("rowCount",e.length),!0},t.prototype.updateValueFromSurvey=function(t,n){if(void 0===n&&(n=!1),this.setRowCountValueFromData=!0,this.minRowCount>0&&r.isValueEmpty(t)&&!r.isValueEmpty(this.defaultRowValue)){t=[];for(var o=0;o<this.minRowCount;o++)t.push(r.createCopy(this.defaultRowValue))}e.prototype.updateValueFromSurvey.call(this,t,n),this.setRowCountValueFromData=!1},t.prototype.getFilteredDataCore=function(){var e=[];return this.generatedVisibleRows.forEach(function(t){t.isVisible&&!t.isEmpty&&e.push(t.filteredValue)}),e},t.prototype.onBeforeValueChanged=function(e){if(e&&Array.isArray(e)){var t=e.length;if(t!=this.rowCount&&(this.setRowCountValueFromData||!(t<this.initialRowCount))&&!this.isEditingObjectValueChanged()&&(this.setRowCountValueFromData=!0,this.rowCountValue=t,this.generatedVisibleRows)){if(t==this.generatedVisibleRows.length+1){this.onStartRowAddingRemoving();var n=this.getRowValueByIndex(e,t-1),o=this.createMatrixRow(n);this.generatedVisibleRows.push(o),this.onMatrixRowCreated(o),this.onEndRowAdding()}else this.clearGeneratedRows(),this.getVisibleRows(),this.onRowsChanged();this.setRowCountValueFromData=!1}}},t.prototype.createNewValue=function(){var e=this.createValueCopy();e&&Array.isArray(e)||(e=[]),e.length>this.rowCount&&e.splice(this.rowCount);var t=this.getDefaultRowValue(!1);t=t||{};for(var n=e.length;n<this.rowCount;n++)e.push(this.getUnbindValue(t));return e},t.prototype.deleteRowValue=function(e,t){if(!Array.isArray(e))return e;for(var n=!0,o=0;o<e.length;o++)if(this.isObject(e[o])&&Object.keys(e[o]).length>0){n=!1;break}return n?null:e},t.prototype.getRowValueByIndex=function(e,t){return Array.isArray(e)&&t>=0&&t<e.length?e[t]:null},t.prototype.getRowValueCore=function(e,t,n){if(void 0===n&&(n=!1),!this.generatedVisibleRows)return{};var o=this.getRowValueByIndex(t,this.generatedVisibleRows.indexOf(e));return!o&&n&&(o={}),o},t.prototype.getAddRowButtonCss=function(e){return void 0===e&&(e=!1),(new _e).append(this.cssClasses.button).append(this.cssClasses.buttonAdd).append(this.cssClasses.emptyRowsButton,e).toString()},t.prototype.getRemoveRowButtonCss=function(){return(new _e).append(this.cssClasses.button).append(this.cssClasses.buttonRemove).toString()},t.prototype.getRootCss=function(){var t;return(new _e).append(e.prototype.getRootCss.call(this)).append(this.cssClasses.empty,!(null===(t=this.renderedTable)||void 0===t?void 0:t.showTable)).toString()},t}(Zo),gi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pi(t,e),t.prototype.setDefaultRowActions=function(t,n){e.prototype.setDefaultRowActions.call(this,t,n)},t}(Ho);D.addClass("matrixdynamic",[{name:"allowAddRows:boolean",default:!0},{name:"allowRemoveRows:boolean",default:!0},{name:"rowCount:number",default:2,minValue:0,isBindable:!0},{name:"minRowCount:number",default:0,minValue:0},{name:"maxRowCount:number",default:gn.matrix.maxRowCount},{name:"keyName"},"defaultRowValue:rowvalue",{name:"copyDefaultValueFromLastEntry:boolean",alternativeName:"defaultValueFromLastRow"},{name:"confirmDelete:boolean"},{name:"confirmDeleteText",dependsOn:"confirmDelete",visibleIf:function(e){return!e||e.confirmDelete},serializationProperty:"locConfirmDeleteText"},{name:"addRowButtonLocation",alternativeName:"addRowLocation",default:"default",choices:["default","top","bottom","topBottom"]},{name:"addRowText",serializationProperty:"locAddRowText"},{name:"removeRowText",serializationProperty:"locRemoveRowText"},"hideColumnsIfEmpty:boolean",{name:"noRowsText:text",alternativeName:"emptyRowsText",serializationProperty:"locNoRowsText",dependsOn:"hideColumnsIfEmpty",visibleIf:function(e){return!e||e.hideColumnsIfEmpty}},{name:"detailPanelShowOnAdding:boolean",dependsOn:"detailPanelMode",visibleIf:function(e){return"none"!==e.detailPanelMode}},{name:"allowRowReorder:switch",alternativeName:"allowRowsDragAndDrop"}],function(){return new fi("")},"matrixdropdownbase"),Io.Instance.registerQuestion("matrixdynamic",function(e){var t=new fi(e);return t.choices=[1,2,3,4,5],Zo.addDefaultColumns(t),t});var yi={currentType:"default",getCss:function(){var e=this.currentType?this[this.currentType]:mi;return e||(e=mi),e},getAvailableThemes:function(){return Object.keys(this).filter(function(e){return-1===["currentType","getCss","getAvailableThemes"].indexOf(e)})}},mi={root:"sd-root-modern",rootProgress:"sd-progress",rootMobile:"sd-root-modern--mobile",rootAnimationDisabled:"sd-root-modern--animation-disabled",rootReadOnly:"sd-root--readonly",rootCompact:"sd-root--compact",rootFitToContainer:"sd-root-modern--full-container",rootWrapper:"sd-root-modern__wrapper",rootWrapperFixed:"sd-root-modern__wrapper--fixed",rootWrapperHasImage:"sd-root-modern__wrapper--has-image",rootBackgroundImage:"sd-root_background-image",container:"sd-container-modern",header:"sd-title sd-container-modern__title",bodyContainer:"sv-components-row",body:"sd-body",bodyWithTimer:"sd-body--with-timer",clockTimerRoot:"sd-timer",clockTimerRootTop:"sd-timer--top",clockTimerRootBottom:"sd-timer--bottom",clockTimerProgress:"sd-timer__progress",clockTimerProgressAnimation:"sd-timer__progress--animation",clockTimerTextContainer:"sd-timer__text-container",clockTimerMinorText:"sd-timer__text--minor",clockTimerMajorText:"sd-timer__text--major",bodyEmpty:"sd-body sd-body--empty",bodyLoading:"sd-body--loading",footer:"sd-footer sd-body__navigation sd-clearfix",title:"sd-title",description:"sd-description",logo:"sd-logo",logoImage:"sd-logo__image",headerText:"sd-header__text",headerClose:"sd-hidden",navigationButton:"",bodyNavigationButton:"sd-btn",completedPage:"sd-completedpage",completedBeforePage:"sd-completed-before-page",timerRoot:"sd-body__timer",navigation:{complete:"sd-btn--action sd-navigation__complete-btn",prev:"sd-navigation__prev-btn",next:"sd-navigation__next-btn",start:"sd-navigation__start-btn",preview:"sd-navigation__preview-btn",edit:"sd-btn sd-btn--small"},panel:{contentEnter:"sd-element__content--enter",contentLeave:"sd-element__content--leave",enter:"sd-element-wrapper--enter",leave:"sd-element-wrapper--leave",asPage:"sd-panel--as-page",number:"sd-element__num",title:"sd-title sd-element__title sd-panel__title",titleExpandable:"sd-element__title--expandable",titleExpandableSvg:"sd-element__title-expandable-svg",titleNumInline:"sd-element__title--num-inline",titleExpanded:"sd-element__title--expanded",titleCollapsed:"sd-element__title--collapsed",titleDisabled:"sd-element__title--disabled",titleOnExpand:"sd-panel__title--expanded",titleOnError:"sd-panel__title--error",titleBar:"sd-action-title-bar",description:"sd-description sd-panel__description",container:"sd-element sd-element--complex sd-panel sd-row__panel",withFrame:"sd-element--with-frame",content:"sd-element__content sd-panel__content",icon:"sd-panel__icon",iconExpanded:"sd-panel__icon--expanded",footer:"sd-panel__footer",requiredMark:"sd-panel__required-text",header:"sd-panel__header sd-element__header sd-element__header--location-top",collapsed:"sd-element--collapsed",expanded:"sd-element--expanded",expandable:"sd-element--expandable",expandableAnimating:"sd-elemenet--expandable--animating",nested:"sd-element--nested sd-element--nested-with-borders",invisible:"sd-element--invisible",navigationButton:"",compact:"sd-element--with-frame sd-element--compact",errorsContainer:"sd-panel__errbox sd-element__erbox sd-element__erbox--above-element"},paneldynamic:{mainRoot:"sd-element  sd-question sd-question--paneldynamic sd-element--complex sd-question--complex sd-row__question",empty:"sd-question--empty",root:"sd-paneldynamic",iconRemove:"sd-hidden",navigation:"sd-paneldynamic__navigation",title:"sd-title sd-element__title sd-question__title",header:"sd-paneldynamic__header sd-element__header",headerTab:"sd-paneldynamic__header-tab",button:"sd-action sd-paneldynamic__btn",buttonRemove:"sd-action--negative sd-paneldynamic__remove-btn",buttonAdd:"sd-paneldynamic__add-btn",buttonPrev:"sd-paneldynamic__prev-btn sd-action--icon sd-action",buttonPrevDisabled:"sd-action--disabled",buttonNextDisabled:"sd-action--disabled",buttonNext:"sd-paneldynamic__next-btn sd-action--icon sd-action",progressContainer:"sd-paneldynamic__progress-container",progress:"sd-progress",progressBar:"sd-progress__bar",nested:"sd-element--nested sd-element--nested-with-borders",progressText:"sd-paneldynamic__progress-text",separator:"sd-paneldynamic__separator",panelWrapper:"sd-paneldynamic__panel-wrapper",footer:"sd-paneldynamic__footer",panelFooter:"sd-paneldynamic__panel-footer",footerButtonsContainer:"sd-paneldynamic__buttons-container",panelsContainer:"sd-paneldynamic__panels-container",panelWrapperInRow:"sd-paneldynamic__panel-wrapper--in-row",panelWrapperEnter:"sd-paneldynamic__panel-wrapper--enter",panelWrapperLeave:"sd-paneldynamic__panel-wrapper--leave",panelWrapperList:"sd-paneldynamic__panel-wrapper--list",progressBtnIcon:"icon-progressbuttonv2",noEntriesPlaceholder:"sd-paneldynamic__placeholder sd-question__placeholder",compact:"sd-element--with-frame sd-element--compact",tabsContainer:"sd-paneldynamic__tabs-container",tabsContainerWithHeader:"sd-paneldynamic__tabs-container--with-header",tabsRoot:"sd-tabs-toolbar",tabsLeft:"sd-tabs-toolbar--left",tabsRight:"sd-tabs-toolbar--right",tabsCenter:"sd-tabs-toolbar--center",tabs:{item:"sd-tab-item",itemPressed:"sd-tab-item--pressed",itemAsIcon:"sd-tab-item--icon",itemIcon:"sd-tab-item__icon",itemTitle:"sd-tab-item__title"}},progress:"sd-progress sd-body__progress",progressTop:"sd-body__progress--top",progressBottom:"sd-body__progress--bottom",progressBar:"sd-progress__bar",progressText:"sd-progress__text",progressButtonsRoot:"sd-progress-buttons",progressButtonsNumbered:"sd-progress-buttons--numbered",progressButtonsFitSurveyWidth:"sd-progress-buttons--fit-survey-width",progressButtonsContainerCenter:"sd-progress-buttons__container-center",progressButtonsContainer:"sd-progress-buttons__container",progressButtonsConnector:"sd-progress-buttons__connector",progressButtonsButton:"sd-progress-buttons__button",progressButtonsButtonBackground:"sd-progress-buttons__button-background",progressButtonsButtonContent:"sd-progress-buttons__button-content",progressButtonsHeader:"sd-progress-buttons__header",progressButtonsFooter:"sd-progress-buttons__footer",progressButtonsImageButtonLeft:"sd-progress-buttons__image-button-left",progressButtonsImageButtonRight:"sd-progress-buttons__image-button-right",progressButtonsImageButtonHidden:"sd-progress-buttons__image-button--hidden",progressButtonsListContainer:"sd-progress-buttons__list-container",progressButtonsList:"sd-progress-buttons__list",progressButtonsListElementPassed:"sd-progress-buttons__list-element--passed",progressButtonsListElementCurrent:"sd-progress-buttons__list-element--current",progressButtonsListElementNonClickable:"sd-progress-buttons__list-element--nonclickable",progressButtonsPageTitle:"sd-progress-buttons__page-title",progressButtonsPageDescription:"sd-progress-buttons__page-description",progressTextInBar:"sd-hidden",page:{root:"sd-page sd-body__page",emptyHeaderRoot:"sd-page__empty-header",title:"sd-title sd-page__title",description:"sd-description sd-page__description",number:"sd-page__num",errorsContainer:"sd-page__errbox"},pageTitle:"sd-title sd-page__title",pageDescription:"sd-description sd-page__description",row:"sd-row sd-clearfix",rowMultiple:"sd-row--multiple",rowCompact:"sd-row--compact",rowEnter:"sd-row--enter",rowDelayedEnter:"sd-row--delayed-enter",rowLeave:"sd-row--leave",rowReplace:"sd-row--replace",pageRow:"sd-page__row",question:{contentEnter:"sd-element__content--enter",contentLeave:"sd-element__content--leave",enter:"sd-element-wrapper--enter",leave:"sd-element-wrapper--leave",mobile:"sd-question--mobile",mainRoot:"sd-element sd-question sd-row__question",flowRoot:"sd-element sd-question sd-row__question sd-row__question--flow",withFrame:"sd-element--with-frame",asCell:"sd-table__cell",answered:"sd-question--answered",header:"sd-question__header sd-element__header",headerLeft:"sd-question__header--location--left",headerTop:"sd-question__header--location-top sd-element__header--location-top",headerBottom:"sd-question__header--location--bottom",content:"sd-element__content sd-question__content",contentSupportContainerQueries:"sd-question__content--support-container-queries",contentLeft:"sd-question__content--left",titleNumInline:"sd-element__title--num-inline",titleLeftRoot:"sd-question--left",titleTopRoot:"sd-question--title-top",descriptionUnderInputRoot:"sd-question--description-under-input",titleBottomRoot:"sd-question--title-bottom",titleOnAnswer:"sd-question__title--answer",titleEmpty:"sd-question__title--empty",titleOnError:"sd-question__title--error",title:"sd-title sd-element__title sd-question__title",titleExpandable:"sd-element__title--expandable",titleExpandableSvg:"sd-element__title-expandable-svg",titleExpanded:"sd-element__title--expanded",titleCollapsed:"sd-element__title--collapsed",titleDisabled:"sd-element__title--disabled",titleReadOnly:"sd-element__title--readonly",titleBar:"sd-action-title-bar",requiredMark:"sd-question__required-text",number:"sd-element__num",description:"sd-description sd-question__description",descriptionUnderInput:"sd-question__description--under-input",comment:"sd-input sd-comment",required:"sd-question--required",titleRequired:"sd-question__title--required",indent:20,footer:"sd-question__footer",commentArea:"sd-question__comment-area",formGroup:"sd-question__form-group",hasError:"sd-question--error",hasErrorTop:"sd-question--error-top",hasErrorBottom:"sd-question--error-bottom",collapsed:"sd-element--collapsed",expandable:"sd-element--expandable",expandableAnimating:"sd-elemenet--expandable--animating",expanded:"sd-element--expanded",nested:"sd-element--nested",invisible:"sd-element--invisible",composite:"sd-element--complex sd-composite",disabled:"sd-question--disabled",readOnly:"sd-question--readonly",preview:"sd-question--preview",noPointerEventsMode:"sd-question--no-pointer-events",errorsContainer:"sd-element__erbox sd-question__erbox",errorsContainerTop:"sd-element__erbox--above-element sd-question__erbox--above-question",errorsContainerBottom:"sd-question__erbox--below-question",confirmDialog:"sd-popup--confirm sv-popup--confirm",singleInputTitle:"sd-element__title--singleinput",singleInputWrapper:"sd-question__singleinput-wrapper",breadcrumbsRoot:"sd-breadcrumbs",breadcrumbsItem:"sd-breadcrumbs-item",breadcrumbsItemButton:"sd-breadcrumbs-item__button",breadcrumbsSeparator:"sd-breadcrumbs-separator",summary:"sd-summary",summaryRow:"sd-summary-row",summaryRowContent:"sd-summary-row__content",summaryRowActions:"sd-summary-row__actions",summaryRowAction:"sd-summary-row-action",summaryRowActionEdit:"sd-summary-row-action sd-summary-row-action--edit",summaryRowActionDelete:"sd-summary-row-action sd-summary-row-action--delete"},image:{mainRoot:"sd-element sd-question sd-question--image",root:"sd-image",image:"sd-image__image",adaptive:"sd-image__image--adaptive",noImage:"sd-image__no-image",noImageSvgIconId:"icon-no-image",withFrame:""},html:{mainRoot:"sd-element sd-question sd-row__question sd-question--html",root:"sd-html",withFrame:"",nested:"sd-element--nested sd-html--nested"},error:{root:"sd-error",warningMode:"sd-error--warning",infoMode:"sd-error--info",icon:"",item:"sd-error__item",locationTop:"",locationBottom:""},checkbox:{root:"sd-selectbase",rootMobile:"sd-selectbase--mobile",rootRow:"sd-selectbase--row",rootMultiColumn:"sd-selectbase--multi-column",item:"sd-item sd-checkbox sd-selectbase__item",itemEnter:"sd-item--enter",itemLeave:"sd-item--leave",itemOnError:"sd-item--error",itemSelectAll:"sd-checkbox--selectall",itemNone:"sd-checkbox--none",itemDisabled:"sd-item--disabled sd-checkbox--disabled",itemReadOnly:"sd-item--readonly sd-checkbox--readonly",itemPreview:"sd-item--preview sd-checkbox--preview",itemPreviewSvgIconId:"#icon-check-16x16",itemChecked:"sd-item--checked sd-checkbox--checked",itemHover:"sd-item--allowhover sd-checkbox--allowhover",itemInline:"sd-selectbase__item--inline",label:"sd-selectbase__label",labelChecked:"",itemControl:"sd-visuallyhidden sd-item__control sd-checkbox__control",itemDecorator:"sd-item__svg sd-checkbox__svg",itemSvgIconId:"#icon-check-16x16",controlLabel:"sd-item__control-label",materialDecorator:"sd-item__decorator sd-checkbox__decorator",otherArea:"sd-selectbase__other",column:"sd-selectbase__column"},radiogroup:{root:"sd-selectbase",rootMobile:"sd-selectbase--mobile",rootRow:"sd-selectbase--row",rootMultiColumn:"sd-selectbase--multi-column",item:"sd-item sd-radio sd-selectbase__item",itemOnError:"sd-item--error",itemInline:"sd-selectbase__item--inline",label:"sd-selectbase__label",labelChecked:"",itemEnter:"sd-item--enter",itemLeave:"sd-item--leave",itemDisabled:"sd-item--disabled sd-radio--disabled",itemReadOnly:"sd-item--readonly sd-radio--readonly",itemPreview:"sd-item--preview sd-radio--preview",itemPreviewSvgIconId:"#icon-check-16x16",itemChecked:"sd-item--checked sd-radio--checked",itemHover:"sd-item--allowhover sd-radio--allowhover",itemControl:"sd-visuallyhidden sd-item__control sd-radio__control",itemDecorator:"sd-item__svg sd-radio__svg",controlLabel:"sd-item__control-label",materialDecorator:"sd-item__decorator sd-radio__decorator",otherArea:"sd-selectbase__other",clearButton:"",column:"sd-selectbase__column"},boolean:{mainRoot:"sd-element sd-question sd-row__question sd-question--boolean",root:"sv_qcbc sv_qbln sd-scrollable-container sd-boolean-root",rootRadio:"sv_qcbc sv_qbln sd-scrollable-container sd-scrollable-container--compact",item:"sd-boolean",itemOnError:"sd-boolean--error",control:"sd-boolean__control sd-visuallyhidden",itemChecked:"sd-boolean--checked",itemExchanged:"sd-boolean--exchanged",itemIndeterminate:"sd-boolean--indeterminate",itemDisabled:"sd-boolean--disabled",itemReadOnly:"sd-boolean--readonly",itemPreview:"sd-boolean--preview",itemHover:"sd-boolean--allowhover",label:"sd-boolean__label",labelTrue:"sd-boolean__label--true",labelFalse:"sd-boolean__label--false",switch:"sd-boolean__switch",disabledLabel:"sd-checkbox__label--disabled",labelReadOnly:"sd-checkbox__label--readonly",labelPreview:"sd-checkbox__label--preview",sliderText:"sd-boolean__thumb-text",slider:"sd-boolean__thumb",sliderGhost:"sd-boolean__thumb-ghost",radioItem:"sd-item",radioItemChecked:"sd-item--checked sd-radio--checked",radioItemDisabled:"sd-item--disabled sd-radio--disabled",radioItemReadOnly:"sd-item--readonly sd-radio--readonly",radioItemPreview:"sd-item--preview sd-radio--preview",itemPreviewSvgIconId:"#icon-check-16x16",radioLabel:"sd-selectbase__label",radioControlLabel:"sd-item__control-label",radioFieldset:"sd-selectbase",itemRadioDecorator:"sd-item__svg sd-radio__svg",materialRadioDecorator:"sd-item__decorator sd-radio__decorator",itemRadioControl:"sd-visuallyhidden sd-item__control sd-radio__control",rootCheckbox:"sd-selectbase",checkboxItem:"sd-item sd-selectbase__item sd-checkbox",checkboxLabel:"sd-selectbase__label",checkboxItemOnError:"sd-item--error",checkboxItemIndeterminate:"sd-checkbox--intermediate",checkboxItemChecked:"sd-item--checked sd-checkbox--checked",checkboxItemDecorator:"sd-item__svg sd-checkbox__svg",checkboxItemDisabled:"sd-item--disabled sd-checkbox--disabled",checkboxItemReadOnly:"sd-item--readonly sd-checkbox--readonly",checkboxItemPreview:"sd-item--preview sd-checkbox--preview",controlCheckbox:"sd-visuallyhidden sd-item__control sd-checkbox__control",checkboxMaterialDecorator:"sd-item__decorator sd-checkbox__decorator",checkboxControlLabel:"sd-item__control-label",checkboxIsLabelRendered:"sd-checkbox--label-rendered",svgIconCheckedId:"#icon-check-16x16"},text:{root:"sd-input sd-text",small:"sd-row__question--small",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",constrolWithCharacterCounter:"sd-text__character-counter",characterCounterBig:"sd-text__character-counter--big",content:"sd-text__content sd-question__content",remainingCharacterCounter:"sd-remaining-character-counter",onError:"sd-input--error"},multipletext:{root:"sd-multipletext",rootMobile:"sd-multipletext--mobile",itemLabel:"sd-multipletext__item-container sd-input",itemLabelReadOnly:"sd-input--readonly",itemLabelDisabled:"sd-input--disabled",itemLabelPreview:"sd-input--preview",itemLabelOnError:"sd-multipletext__item-container--error",itemLabelAllowFocus:"sd-multipletext__item-container--allow-focus",itemLabelAnswered:"sd-multipletext__item-container--answered",itemWithCharacterCounter:"sd-multipletext-item__character-counter",item:"sd-multipletext__item",itemTitle:"sd-multipletext__item-title",content:"sd-multipletext__content sd-question__content",row:"sd-multipletext__row",cell:"sd-multipletext__cell",cellError:"sd-multipletext__cell--error",cellErrorTop:"sd-multipletext__cell--error-top",cellErrorBottom:"sd-multipletext__cell--error-bottom"},dropdown:{root:"sd-selectbase",popup:"sv-dropdown-popup",small:"sd-row__question--small",selectWrapper:"sv-dropdown_select-wrapper",onError:"sd-input--error",label:"sd-selectbase__label",itemEnter:"sd-item--enter",itemLeave:"sd-item--leave",item:"sd-item sd-radio sd-selectbase__item",itemDisabled:"sd-item--disabled sd-radio--disabled",itemChecked:"sd-item--checked sd-radio--checked",itemHover:"sd-item--allowhover sd-radio--allowhover",itemControl:"sd-visuallyhidden sd-item__control sd-radio__control",itemDecorator:"sd-item__svg sd-radio__svg",cleanButtonIconId:"icon-cancel",chevronButton:"sd-dropdown_chevron-button",chevronButtonSvg:"sd-dropdown_chevron-button-svg",chevronButtonIconId:"icon-chevron",control:"sd-input sd-dropdown",controlInputFieldComponent:"sd-dropdown__input-field-component",controlValue:"sd-dropdown__value",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",controlEmpty:"sd-dropdown--empty",controlLabel:"sd-item__control-label",filterStringInput:"sd-dropdown__filter-string-input",materialDecorator:"sd-item__decorator sd-radio__decorator",hintPrefix:"sd-dropdown__hint-prefix",hintSuffix:"sd-dropdown__hint-suffix"},imagepicker:{mainRoot:"sd-element sd-question sd-row__question",root:"sd-selectbase sd-imagepicker",rootResponsive:"sd-imagepicker--responsive",rootStatic:"sd-imagepicker--static",rootColumn:"sd-imagepicker--column",item:"sd-imagepicker__item",itemOnError:"sd-imagepicker__item--error",itemInline:"sd-imagepicker__item--inline",itemChecked:"sd-imagepicker__item--checked",itemDisabled:"sd-imagepicker__item--disabled",itemReadOnly:"sd-imagepicker__item--readonly",itemPreview:"sd-imagepicker__item--preview",itemHover:"sd-imagepicker__item--allowhover",label:"sd-imagepicker__label",itemDecorator:"sd-imagepicker__item-decorator",imageContainer:"sd-imagepicker__image-container",itemControl:"sd-imagepicker__control sd-visuallyhidden",image:"sd-imagepicker__image",itemText:"sd-imagepicker__text",itemNoImage:"sd-imagepicker__no-image",itemNoImageSvgIcon:"sd-imagepicker__no-image-svg",itemNoImageSvgIconId:"icon-no-image",column:"sd-selectbase__column sd-imagepicker__column",checkedItemDecorator:"sd-imagepicker__check-decorator",checkedItemSvgIcon:"sd-imagepicker__check-icon",checkedItemSvgIconId:"icon-check-24x24"},matrix:{mainRoot:"sd-element sd-question sd-row__question sd-element--complex sd-question--complex sd-question--table",tableWrapper:"sd-matrix sd-table-wrapper",root:"sd-table sd-matrix__table",columnsAutoWidth:"sd-table--columnsautowidth",noHeader:"sd-table--no-header",rootVerticalAlignTop:"sd-table--align-top",rootVerticalAlignMiddle:"sd-table--align-middle",rootAlternateRows:"sd-table--alternate-rows",rowError:"sd-matrix__row--error",cell:"sd-table__cell sd-matrix__cell",row:"sd-table__row",rowDisabled:"sd-table__row-disabled",rowReadOnly:"sd-table__row-readonly",headerCell:"sd-table__cell sd-table__cell--header",rowTextCell:"sd-table__cell sd-matrix__cell sd-table__cell--row-text",label:"sd-item sd-{type} sd-matrix__label",itemOnError:"sd-item--error",itemValue:"sd-visuallyhidden sd-item__control sd-{type}__control",itemChecked:"sd-item--checked sd-{type}--checked",itemDisabled:"sd-item--disabled sd-{type}--disabled",itemReadOnly:"sd-item--readonly sd-{type}--readonly",itemPreview:"sd-item--preview sd-{type}--preview",itemPreviewSvgIconId:"#icon-check-16x16",itemHover:"sd-{type}--allowhover",materialDecorator:"sd-item__decorator sd-{type}__decorator",itemDecorator:"sd-item__svg sd-{type}__svg",cellText:"sd-matrix__text",cellTextSelected:"sd-matrix__text--checked",cellTextDisabled:"sd-matrix__text--disabled",cellResponsiveTitle:"sd-matrix__responsive-title",compact:"sd-element--with-frame sd-element--compact"},matrixdropdown:{mainRoot:"sd-element sd-question sd-row__question sd-element--complex sd-question--complex sd-question--table",rootScroll:"sd-question--scroll",root:"sd-table sd-matrixdropdown",columnsAutoWidth:"sd-table--columnsautowidth",noHeader:"sd-table--no-header",hasFooter:"sd-table--has-footer",rootVerticalAlignTop:"sd-table--align-top",rootVerticalAlignMiddle:"sd-table--align-middle",tableWrapper:"sd-table-wrapper",rootAlternateRows:"sd-table--alternate-rows",cell:"sd-table__cell",cellResponsiveTitle:"sd-table__responsive-title",errorsCell:"sd-table__cell--error",errorsCellTop:"sd-table__cell--error-top",errorsCellBottom:"sd-table__cell--error-bottom",itemCell:"sd-table__cell--item",row:"sd-table__row",rowDelayedEnter:"sd-table__row--delayed-enter",rowEnter:"sd-table__row--enter",rowLeave:"sd-table__row--leave",expandedRow:"sd-table__row--expanded",rowHasPanel:"sd-table__row--has-panel",rowHasEndActions:"sd-table__row--has-end-actions",headerCell:"sd-table__cell sd-table__cell--header",rowTextCell:"sd-table__cell sd-table__cell--row-text",footerCell:"sd-table__cell sd-table__cell--footer",footerTotalCell:"sd-table__cell sd-table__cell--footer-total",columnTitleCell:"sd-table__cell--column-title",cellRequiredMark:"sd-question__required-text",detailButton:"sd-table__cell--detail-button",detailButtonExpanded:"sd-table__cell--detail-button--expanded",detailIcon:"sd-detail-panel__icon",detailIconExpanded:"sd-detail-panel__icon--expanded",detailIconId:"icon-expanddetail",detailIconExpandedId:"icon-collapsedetail",detailPanelCell:"sd-table__cell--detail-panel",detailRowCell:"sd-table__cell--detail",actionsCellPrefix:"sd-table__cell-action",actionsCell:"sd-table__cell sd-table__cell--actions",actionsCellDrag:"sd-table__cell--drag",emptyCell:"sd-table__cell--empty",verticalCell:"sd-table__cell--vertical",cellQuestionWrapper:"sd-matrix__question-wrapper sd-table__question-wrapper",compact:"sd-element--with-frame sd-element--compact"},matrixdynamic:{mainRoot:"sd-element sd-question sd-row__question sd-element--complex sd-question--complex sd-question--table",rootScroll:"sd-question--scroll",empty:"sd-question--empty",root:"sd-table sd-matrixdynamic",columnsAutoWidth:"sd-table--columnsautowidth",noHeader:"sd-table--no-header",hasFooter:"sd-table--has-footer",tableWrapper:"sd-table-wrapper",rootAlternateRows:"sd-table--alternate-rows",content:"sd-matrixdynamic__content sd-question__content",cell:"sd-table__cell",cellResponsiveTitle:"sd-table__responsive-title",row:"sd-table__row",rowEmpty:"sd-table__row--empty",rowDelayedEnter:"sd-table__row--delayed-enter",rowEnter:"sd-table__row--enter",rowLeave:"sd-table__row--leave",rowHasPanel:"sd-table__row--has-panel",rowHasEndActions:"sd-table__row--has-end-actions",expandedRow:"sd-table__row--expanded",itemCell:"sd-table__cell--item",headerCell:"sd-table__cell sd-table__cell--header",rowTextCell:"sd-table__cell sd-table__cell--row-text",footerCell:"sd-table__cell sd-table__cell--footer",columnTitleCell:"sd-table__cell--column-title",cellRequiredMark:"sd-question__required-text",button:"sd-action sd-matrixdynamic__btn",detailRow:"sd-table__row sd-table__row--detail",detailButton:"sd-table__cell--detail-button",detailButtonExpanded:"sd-table__cell--detail-button--expanded",detailIcon:"sd-detail-panel__icon",detailIconExpanded:"sd-detail-panel__icon--expanded",detailIconId:"icon-expanddetail",detailIconExpandedId:"icon-collapsedetail",detailPanelCell:"sd-table__cell--detail-panel",detailRowCell:"sd-table__cell--detail",actionsCellPrefix:"sd-table__cell-action",actionsCell:"sd-table__cell sd-table__cell--actions",actionsCellDrag:"sd-table__cell--drag",buttonAdd:"sd-matrixdynamic__add-btn",buttonRemove:"sd-action--negative sd-matrixdynamic__remove-btn",iconAdd:"sd-hidden",iconRemove:"",dragElementDecorator:"sd-drag-element__svg",iconDragElement:"#icon-drag-24x24",footer:"sd-matrixdynamic__footer",footerTotalCell:"sd-table__cell sd-table__cell--footer-total",noRowsSection:"sd-matrixdynamic__placeholder sd-question__placeholder",iconDrag:"sv-matrixdynamic__drag-icon",ghostRow:"sv-matrix-row--drag-drop-ghost-mod",draggedRow:"sv-matrixdynamic-dragged-row",emptyCell:"sd-table__cell--empty",verticalCell:"sd-table__cell--vertical",cellQuestionWrapper:"sd-matrix__question-wrapper sd-table__question-wrapper",errorsCell:"sd-table__cell--error",errorsCellTop:"sd-table__cell--error-top",errorsCellBottom:"sd-table__cell--error-bottom",compact:"sd-element--with-frame sd-element--compact"},rating:{rootDropdown:"sd-scrollable-container sd-scrollable-container--compact sd-selectbase",root:"sd-scrollable-container sd-rating",rootWrappable:"sd-rating--wrappable",rootLabelsTop:"sd-rating--labels-top",rootLabelsBottom:"sd-rating--labels-bottom",rootLabelsDiagonal:"sd-rating--labels-diagonal",item:"sd-rating__item",itemOnError:"sd-rating__item--error",itemHover:"sd-rating__item--allowhover",selected:"sd-rating__item--selected",itemStar:"sd-rating__item-star",itemStarOnError:"sd-rating__item-star--error",itemStarHover:"sd-rating__item-star--allowhover",itemStarSelected:"sd-rating__item-star--selected",itemStarDisabled:"sd-rating__item-star--disabled",itemStarReadOnly:"sd-rating__item-star--readonly",itemStarPreview:"sd-rating__item-star--preview",itemStarHighlighted:"sd-rating__item-star--highlighted",itemStarUnhighlighted:"sd-rating__item-star--unhighlighted",itemStarSmall:"sd-rating__item-star--small",itemSmiley:"sd-rating__item-smiley",itemSmileyOnError:"sd-rating__item-smiley--error",itemSmileyHover:"sd-rating__item-smiley--allowhover",itemSmileySelected:"sd-rating__item-smiley--selected",itemSmileyDisabled:"sd-rating__item-smiley--disabled",itemSmileyReadOnly:"sd-rating__item-smiley--readonly",itemSmileyPreview:"sd-rating__item-smiley--preview",itemSmileyHighlighted:"sd-rating__item-star--highlighted",itemSmileyScaleColored:"sd-rating__item-smiley--scale-colored",itemSmileyRateColored:"sd-rating__item-smiley--rate-colored",itemSmileySmall:"sd-rating__item-smiley--small",minText:"sd-rating__item-text sd-rating__min-text",itemText:"sd-rating__item-text",maxText:"sd-rating__item-text sd-rating__max-text",itemDisabled:"sd-rating__item--disabled",itemReadOnly:"sd-rating__item--readonly",itemPreview:"sd-rating__item--preview",itemFixedSize:"sd-rating__item--fixed-size",control:"sd-input sd-dropdown",itemSmall:"sd-rating--small",selectWrapper:"sv-dropdown_select-wrapper",controlValue:"sd-dropdown__value",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",controlEmpty:"sd-dropdown--empty",filterStringInput:"sd-dropdown__filter-string-input",chevronButtonIconId:"icon-chevron",popup:"sv-dropdown-popup",onError:"sd-input--error"},slider:{root:"sd-slider",rootSingleMode:"sd-slider--single",rootNegativeScaleMode:"sd-slider--negative-scale-mode",rootDesignMode:"sd-slider--design-mode",rootAnimatedThumbMode:"sd-slider--animated-thumb-mode",rootTooltipsAlwaysMode:"sd-slider--tooltips-always-mode",rootLabelsShowValueTextMode:"sd-slider--labels-show-value-text-mode",visualContainer:"sd-slider-container",visualContainerSlider:"sd-slider-container__slider",rangeTrack:"sd-slider__track sd-slider__range-track",inverseTrackLeft:"sd-slider__track sd-slider__inverse-track sd-slider__inverse-track--left",inverseTrackRight:"sd-slider__track sd-slider__inverse-track sd-slider__inverse-track--right",thumbContainer:"sd-slider__thumb-container",thumbContainerIndeterminateMode:"sd-slider__thumb-container--indeterminate",thumbContainerFocusedMode:"sd-slider__thumb-container--focused",thumb:"sd-slider__thumb",thumbDot:"sd-slider__thumb-dot",tooltip:"sd-slider__tooltip",tooltipPanel:"sd-slider__tooltip-panel",tooltipOnHoverMode:"sd-slider__tooltip--on-hover",tooltipValue:"sd-slider__tooltip-value",input:"sd-slider__input",labelsContainer:"sd-slider-labels-container",label:"sd-slider__label",labelLongMod:"sd-slider__label--long",labelTick:"sd-slider__label-tick",labelTextContainer:"sd-slider__label-text-container",labelText:"sd-slider__label-text",labelTextSecondaryMode:"sd-slider__label-text sd-slider__label-text--secondary",clearButton:""},comment:{root:"sd-input sd-comment",small:"sd-row__question--small",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",content:"sd-comment__content sd-question__content",remainingCharacterCounter:"sd-remaining-character-counter",onError:"sd-input--error"},expression:"sd-expression",file:{root:"sd-file",rootDragging:"sd-file--dragging",rootAnswered:"sd-file--answered",rootDisabled:"sd-file--disabled",rootReadOnly:"sd-file--readonly",rootPreview:"sd-file--preview",placeholderInput:"sd-visuallyhidden",previewItem:"sd-file__preview-item",fileSign:"",fileList:"sd-file__list",fileSignBottom:"sd-file__sign",dragArea:"sd-file__drag-area",dragAreaActive:"sd-file__drag-area--active",fileDecorator:"sd-file__decorator",onError:"sd-file__decorator--error",fileDecoratorDrag:"sd-file__decorator--drag",fileInput:"sd-visuallyhidden",chooseFile:"sd-file__choose-btn",chooseFileAsText:"sd-action sd-file__choose-btn--text",chooseFileAsTextDisabled:"sd-action--disabled",chooseFileAsIcon:"sd-file__choose-btn--icon",chooseFileIconId:"icon-choosefile",disabled:"sd-file__choose-btn--disabled",controlDisabled:"sd-file__choose-file-btn--disabled",removeButton:"sd-context-btn--negative",removeButtonBottom:"",removeButtonIconId:"icon-clear",removeFile:"sd-hidden",removeFileSvg:"",removeFileSvgIconId:"icon-close_16x16",wrapper:"sd-file__wrapper",defaultImage:"sd-file__default-image",defaultImageIconId:"icon-defaultfile",leftIconId:"icon-arrowleft",rightIconId:"icon-arrowright",removeFileButton:"sd-context-btn--small sd-context-btn--with-border sd-context-btn--colorful sd-context-btn--negative sd-file__remove-file-button",dragAreaPlaceholder:"sd-file__drag-area-placeholder",imageWrapper:"sd-file__image-wrapper",imageWrapperDefaultImage:"sd-file__image-wrapper--default-image",single:"sd-file--single",singleImage:"sd-file--single-image",mobile:"sd-file--mobile",videoContainer:"sd-file__video-container",contextButton:"sd-context-btn",video:"sd-file__video",actionsContainer:"sd-file__actions-container",closeCameraButton:"sd-file__close-camera-button",changeCameraButton:"sd-file__change-camera-button",takePictureButton:"sd-file__take-picture-button",loadingIndicator:"sd-file__loading-indicator",page:"sd-file__page"},signaturepad:{mainRoot:"sd-element sd-question sd-question--signature sd-row__question",root:"sd-signaturepad sjs_sp_container",small:"sd-row__question--small",controls:"sjs_sp_controls sd-signaturepad__controls",placeholder:"sjs_sp_placeholder",canvas:"sjs_sp_canvas sd-signaturepad__canvas",backgroundImage:"sjs_sp__background-image sd-signaturepad__background-image",clearButton:"sjs_sp_clear sd-context-btn sd-context-btn--negative sd-signaturepad__clear",clearButtonIconId:"icon-clear",loadingIndicator:"sd-signaturepad__loading-indicator"},saveData:{root:"sv-save-data_root",rootWithButtons:"sv-save-data_root--with-buttons",info:"sv-save-data_info",error:"sv-save-data_error",success:"sv-save-data_success",button:"sv-save-data_button",shown:"sv-save-data_root--shown"},window:{root:"sv_window",rootCollapsedMod:"sv_window--collapsed",rootFullScreenMode:"sv_window--full-screen",rootContent:"sv_window_root-content",body:"sv_window_content",header:{root:"sv_window_header",titleCollapsed:"sv_window_header_title_collapsed",buttonsContainer:"sv_window_buttons_container",button:"sv_window_button",buttonExpanded:"",buttonCollapsed:"",collapseButton:"sv_window_button sv_window_button_collapse",closeButton:"sv_window_button sv_window_button_close",fullScreenButton:"sv_window_button sv_window_button_full_screen"}},ranking:{root:"sv-ranking",rootMobileMod:"sv-ranking--mobile",rootDragMod:"sv-ranking--drag",rootDisabled:"sd-ranking--disabled",rootReadOnly:"sd-ranking--readonly",rootPreview:"sd-ranking--preview",rootDesignMode:"sv-ranking--design-mode",rootDragHandleAreaIcon:"sv-ranking--drag-handle-area-icon",rootSelectToRankMod:"sv-ranking--select-to-rank",rootSelectToRankEmptyValueMod:"sv-ranking--select-to-rank-empty-value",rootSelectToRankAlignVertical:"sv-ranking--select-to-rank-vertical",rootSelectToRankAlignHorizontal:"sv-ranking--select-to-rank-horizontal",rootSelectToRankSwapAreas:"sv-ranking--select-to-rank-swap-areas",item:"sv-ranking-item",itemContent:"sv-ranking-item__content sd-ranking-item__content",itemIndex:"sv-ranking-item__index sd-ranking-item__index",itemIndexEmptyMode:"sv-ranking-item__index--empty sd-ranking-item__index--empty",itemDisabled:"sv-ranking-item--disabled",itemReadOnly:"sv-ranking-item--readonly",itemPreview:"sv-ranking-item--preview",controlLabel:"sv-ranking-item__text",itemGhostNode:"sv-ranking-item__ghost",itemIconContainer:"sv-ranking-item__icon-container",itemIcon:"sv-ranking-item__icon",itemIconHoverMod:"sv-ranking-item__icon--hover",itemIconFocusMod:"sv-ranking-item__icon--focus",itemGhostMod:"sv-ranking-item--ghost",itemDragMod:"sv-ranking--drag",itemOnError:"sv-ranking-item--error",container:"sv-ranking__container",containerEmptyMode:"sv-ranking__container--empty",containerFromMode:"sv-ranking__container--from",containerToMode:"sv-ranking__container--to",containerPlaceholder:"sv-ranking__container-placeholder",containersDivider:"sv-ranking__containers-divider"},buttongroup:{root:"sd-button-group-scrollable-container sv-button-group",item:"sv-button-group__item",itemIcon:"sv-button-group__item-icon",itemDecorator:"sv-button-group__item-decorator",itemCaption:"sv-button-group__item-caption",itemHover:"sv-button-group__item--hover",itemSelected:"sv-button-group__item--selected",itemDisabled:"sv-button-group__item--disabled",itemControl:"sv-visuallyhidden",rootDropdown:"sd-button-group-scrollable-container sd-scrollable-container--compact sd-selectbase",selectWrapper:"sv-dropdown_select-wrapper",control:"sd-input sd-dropdown",controlEmpty:"sd-dropdown--empty",controlValue:"sd-dropdown__value",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",controlLabel:"sd-item__control-label",filterStringInput:"sd-dropdown__filter-string-input",chevronButtonIconId:"icon-chevron",popup:"sv-dropdown-popup",cleanButtonIconId:"icon-cancel",hintPrefix:"sd-dropdown__hint-prefix",hintSuffix:"sd-dropdown__hint-suffix"},list:{root:"sv-list__container sd-list",item:"sv-list__item sd-list__item",itemBody:"sv-list__item-body sd-list__item-body",itemSelected:"sv-list__item--selected sd-list__item--selected",itemFocused:"sv-list__item--focused sd-list__item--focused",itemHovered:"sv-list__item--hovered sd-list__item--hovered"},actionBar:{root:"sd-action-bar",item:"sd-action",defaultSizeMode:"",smallSizeMode:"",itemPressed:"sd-action--pressed",itemAsIcon:"sd-action--icon",itemIcon:"sd-action__icon",itemTitle:"sd-action__title"},variables:{mobileWidth:"--sd-mobile-width",themeMark:"--sv-defaultV2-mark"},tagbox:{root:"sd-selectbase",popup:"sv-dropdown-popup",small:"sd-row__question--small",selectWrapper:"sv-dropdown_select-wrapper",onError:"sd-input--error",label:"sd-selectbase__label",itemSvgIconId:"#icon-check-16x16",item:"sd-item sd-checkbox sd-selectbase__item",itemDisabled:"sd-item--disabled sd-checkbox--disabled",itemChecked:"sd-item--checked sd-checkbox--checked",itemHover:"sd-item--allowhover sd-checkbox--allowhover",itemControl:"sd-visuallyhidden sd-item__control sd-checkbox__control",itemDecorator:"sd-item__svg sd-checkbox__svg",itemEnter:"sd-item--enter",itemLeave:"sd-item--leave",cleanButtonIconId:"icon-cancel-24x24",cleanItemButton:"sd-tagbox-item_clean-button",cleanItemButtonSvg:"sd-tagbox-item_clean-button-svg",cleanItemButtonIconId:"icon-clear_16x16",chevronButtonIconId:"icon-chevron",control:"sd-input sd-tagbox sd-dropdown",controlValue:"sd-tagbox__value sd-dropdown__value",controlValueItems:"sd-tagbox__value-items",placeholderInput:"sd-tagbox__placeholder",controlEditable:"sd-input--editable",controlDisabled:"sd-input--disabled",controlReadOnly:"sd-input--readonly",controlPreview:"sd-input--preview",controlEmpty:"sd-dropdown--empty sd-tagbox--empty",controlLabel:"sd-item__control-label",filterStringInput:"sd-tagbox__filter-string-input sd-dropdown__filter-string-input",materialDecorator:"sd-item__decorator sd-checkbox__decorator",hint:"sd-tagbox__hint",hintPrefix:"sd-dropdown__hint-prefix sd-tagbox__hint-prefix",hintSuffix:"sd-dropdown__hint-suffix sd-tagbox__hint-suffix",hintSuffixWrapper:"sd-tagbox__hint-suffix-wrapper"}},bi="default";yi[bi]=mi;var vi={setTimeout:function(e){return vi.safeTimeOut(e,1e3)},clearTimeout:function(e){clearTimeout(e)},safeTimeOut:function(e,t){return t<=0?(e(),0):setTimeout(e,t)},now:function(){return Date.now()}},Ci=function(){function e(){this.listenerCounter=0,this.timerId=-1,this.onTimerTick=new Ae,this.onTimer=this.onTimerTick}return Object.defineProperty(e,"instance",{get:function(){return e.instanceValue||(e.instanceValue=new e),e.instanceValue},enumerable:!1,configurable:!0}),e.prototype.start=function(e){var t=this;void 0===e&&(e=null),e&&this.onTimerTick.add(e),this.prevTimeInMs=vi.now(),this.timerId<0&&(this.timerId=vi.setTimeout(function(){t.doTimer()})),this.listenerCounter++},e.prototype.stop=function(e){void 0===e&&(e=null),e&&this.onTimerTick.remove(e),this.listenerCounter--,0==this.listenerCounter&&this.timerId>-1&&(vi.clearTimeout(this.timerId),this.timerId=-1)},e.prototype.doTimer=function(){var e=this;if((this.onTimerTick.isEmpty||0==this.listenerCounter)&&(this.timerId=-1),!(this.timerId<0)){var t=vi.now(),n=Math.floor((t-this.prevTimeInMs)/1e3);this.prevTimeInMs=t,n<0&&(n=1);var o=this.timerId;this.onTimerTick.fire(this,{seconds:n}),o===this.timerId&&(this.timerId=vi.setTimeout(function(){e.doTimer()}))}},e.instanceValue=null,e}(),Pi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wi=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Vi=function(e){function t(t){var n=e.call(this)||this;return n.timerFunc=null,n.surveyValue=t,n.onCreating(),n}return Pi(t,e),Object.defineProperty(t.prototype,"survey",{get:function(){return this.surveyValue},enumerable:!1,configurable:!0}),t.prototype.onCreating=function(){},t.prototype.start=function(){var e=this;this.survey&&(this.isRunning||this.isDesignMode||(this.survey.onCurrentPageChanged.add(function(){e.update()}),this.timerFunc=function(t,n){e.doTimer(n.seconds)},this.setIsRunning(!0),this.update(),Ci.instance.start(this.timerFunc)))},t.prototype.stop=function(){this.isRunning&&(this.setIsRunning(!1),Ci.instance.stop(this.timerFunc))},Object.defineProperty(t.prototype,"isRunning",{get:function(){return this.getPropertyValue("isRunning",!1)},enumerable:!1,configurable:!0}),t.prototype.setIsRunning=function(e){this.setPropertyValue("isRunning",e)},t.prototype.update=function(){this.updateText(),this.updateProgress()},t.prototype.doTimer=function(e){var t=this.survey.currentPage;if(t){var n=t.getMaxTimeToFinish();n>0&&n<t.timeSpent+e&&(e=n-t.timeSpent),t.timeSpent=t.timeSpent+e}this.spent=this.spent+e,this.update(),this.onTimerTick&&this.onTimerTick(t)},t.prototype.updateProgress=function(){var e=this,t=this.survey.timerInfo,n=t.spent,o=t.limit;o?(0==n?(this.progress=0,setTimeout(function(){e.progress=Math.floor((n+1)/o*100)/100},0)):n<=o&&(this.progress=Math.floor((n+1)/o*100)/100),this.progress>1&&(this.progress=void 0)):this.progress=void 0},t.prototype.updateText=function(){var e=this.survey.timerClock;this.clockMajorText=e.majorText,this.clockMinorText=e.minorText,this.text=this.survey.timerInfoText},Object.defineProperty(t.prototype,"showProgress",{get:function(){return void 0!==this.progress},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTimerAsClock",{get:function(){return!!this.survey.getCss().clockTimerRoot},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rootCss",{get:function(){return(new _e).append(this.survey.getCss().clockTimerRoot).append(this.survey.getCss().clockTimerRootTop,this.survey.isTimerPanelShowingOnTop).append(this.survey.getCss().clockTimerRootBottom,this.survey.isTimerPanelShowingOnBottom).toString()},enumerable:!1,configurable:!0}),t.prototype.getProgressCss=function(){return(new _e).append(this.survey.getCss().clockTimerProgress).append(this.survey.getCss().clockTimerProgressAnimation,this.progress>0).toString()},Object.defineProperty(t.prototype,"textContainerCss",{get:function(){return this.survey.getCss().clockTimerTextContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minorTextCss",{get:function(){return this.survey.getCss().clockTimerMinorText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"majorTextCss",{get:function(){return this.survey.getCss().clockTimerMajorText},enumerable:!1,configurable:!0}),wi([y()],t.prototype,"text",void 0),wi([y()],t.prototype,"progress",void 0),wi([y()],t.prototype,"clockMajorText",void 0),wi([y()],t.prototype,"clockMinorText",void 0),wi([y({defaultValue:0})],t.prototype,"spent",void 0),t}(Te),xi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Oi=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Si=function(e){function t(t){var n=e.call(this)||this;return n.cssClasses=t,n.timeout=gn.notifications.lifetime,n.timer=void 0,n.actionsVisibility={},n.showActions=!0,n.actionBar=new qe,n.actionBar.setCssClasses({root:Be.root,defaultSizeMode:Be.defaultSizeMode,smallSizeMode:Be.smallSizeMode},!1),n.css=n.cssClasses.root,n}return xi(t,e),t.prototype.getCssClass=function(e){return(new _e).append(this.cssClasses.root).append(this.cssClasses.rootWithButtons,this.actionBar.getVisibleActions().length>0).append(this.cssClasses.info,"error"!==e&&"success"!==e).append(this.cssClasses.error,"error"===e).append(this.cssClasses.success,"success"===e).append(this.cssClasses.shown,this.active).toString()},t.prototype.updateActionsVisibility=function(e){var t=this;this.actionBar.actions.forEach(function(n){return n.visible=t.showActions&&t.actionsVisibility[n.id]===e})},t.prototype.notify=function(e,t,n){var o=this;void 0===t&&(t="info"),void 0===n&&(n=!1),this.isDisplayed=!0,setTimeout(function(){o.updateActionsVisibility(t),o.message=e,o.active=!0,o.css=o.getCssClass(t),o.timer&&(clearTimeout(o.timer),o.timer=void 0),n||(o.timer=setTimeout(function(){o.timer=void 0,o.active=!1,o.css=o.getCssClass(t)},o.timeout))},1)},t.prototype.addAction=function(e,t){e.visible=!1,e.innerCss=this.cssClasses.button;var n=this.actionBar.addAction(e);this.actionsVisibility[n.id]=t},Oi([y({defaultValue:!1})],t.prototype,"active",void 0),Oi([y({defaultValue:!1})],t.prototype,"isDisplayed",void 0),Oi([y()],t.prototype,"message",void 0),Oi([y()],t.prototype,"css",void 0),t}(Te),Ii=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ti=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Ri=function(){function e(e,t,n){this.cover=e,this.positionX=t,this.positionY=n}return e.prototype.calcRow=function(e){return"top"===e?1:"middle"===e?2:3},e.prototype.calcColumn=function(e){return"left"===e?1:"center"===e?2:3},e.prototype.calcAlignItems=function(e){return"left"===e?"flex-start":"center"===e?"center":"flex-end"},e.prototype.calcAlignText=function(e){return"left"===e?"start":"center"===e?"center":"end"},e.prototype.calcJustifyContent=function(e){return"top"===e?"flex-start":"middle"===e?"center":"flex-end"},e.prototype.calcGridRow=function(){var e=this.calcRow(this.positionY);if(this.cover.renderedHeight)return e;var t=this.cover.getVisibleRows(),n=t.indexOf(e);if(-1===n)return 0;var o=t.length;return 3===o?e:1===o?1:n+1},Object.defineProperty(e.prototype,"survey",{get:function(){return this.cover.survey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"css",{get:function(){return(new _e).append(e.CLASSNAME).append("".concat(e.CLASSNAME,"--").concat(this.positionX)).append("".concat(e.CLASSNAME,"--").concat(this.positionY)).append(e.CLASSNAME+"--empty",this.isEmpty).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){var e=this.calcGridRow(),t={};return t.gridRow=e,t.gridColumn=0!==e?this.calcColumn(this.positionX):0,t.width=this.width?this.width+"px":void 0,0===e&&(t.display="none"),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentStyle",{get:function(){var e={};return e.textAlign=this.calcAlignText(this.positionX),e.alignItems=this.calcAlignItems(this.positionX),e.justifyContent=this.calcJustifyContent(this.positionY),e.maxWidth=this.contentMaxWidth,e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showLogo",{get:function(){return this.survey.hasLogo&&this.positionX===this.cover.logoPositionX&&this.positionY===this.cover.logoPositionY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showTitle",{get:function(){return this.survey.hasTitle&&this.positionX===this.cover.titlePositionX&&this.positionY===this.cover.titlePositionY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showDescription",{get:function(){return this.survey.renderedHasDescription&&this.positionX===this.cover.descriptionPositionX&&this.positionY===this.cover.descriptionPositionY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return!this.showLogo&&!this.showTitle&&!this.showDescription},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textAreaWidth",{get:function(){return this.cover.renderedTextAreaWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){if(this.cover.width)return Math.ceil(this.cover.width/3)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentMaxWidth",{get:function(){return this.cover.getContentMaxWidth(this)},enumerable:!1,configurable:!0}),e.CLASSNAME="sv-header__cell",e}(),Ei=function(e){function t(){var t=e.call(this)||this;return t.cells=[],["top","middle","bottom"].forEach(function(e){return["left","center","right"].forEach(function(n){return t.cells.push(new Ri(t,n,e))})}),t.init(),t}return Ii(t,e),t.prototype.calcBackgroundSize=function(e){return"fill"===e?"100% 100%":"tile"===e?"auto":e},t.prototype.updateHeaderClasses=function(){var e=!this.backgroundColor||"transparent"===this.backgroundColor,t="var(--sjs-primary-backcolor)"===this.backgroundColor,n=!e&&!t;this.headerClasses=(new _e).append("sv-header").append("sv-header--height-auto",!this.renderedHeight).append("sv-header__without-background",e&&!this.backgroundImage).append("sv-header__background-color--none",e&&!this.titleColor&&!this.descriptionColor).append("sv-header__background-color--accent",t&&!this.titleColor&&!this.descriptionColor).append("sv-header__background-color--custom",n&&!this.titleColor&&!this.descriptionColor).append("sv-header__overlap",this.overlapEnabled).toString()},t.prototype.updateContentClasses=function(){var e=!!this.survey&&this.survey.calculateWidthMode(),t="survey"===this.inheritWidthFrom&&!!e&&"static"===e;if(this.maxWidth=t?this.survey.width:void 0,this.maxWidth){var n=this.maxWidth.toString();-1===n.indexOf("px")&&-1===n.indexOf("%")&&(this.maxWidth=parseFloat(n)+"px")}this.contentClasses=(new _e).append("sv-header__content").append("sv-header__content--static",t).append("sv-header__content--responsive","container"===this.inheritWidthFrom||!!e&&"responsive"===e).toString()},t.prototype.updateBackgroundImageClasses=function(){this.backgroundImageClasses=(new _e).append("sv-header__background-image").append("sv-header__background-image--contain","contain"===this.backgroundImageFit).append("sv-header__background-image--tile","tile"===this.backgroundImageFit).toString()},t.prototype.fromTheme=function(t){e.prototype.fromJSON.call(this,t.header||{}),t.cssVariables&&(this.backgroundColor=t.cssVariables["--sjs-header-backcolor"],this.titleColor=t.cssVariables["--sjs-font-headertitle-color"],this.descriptionColor=t.cssVariables["--sjs-font-headerdescription-color"]),this.init()},t.prototype.init=function(){this.renderBackgroundImage=Bt(this.backgroundImage),this.updateHeaderClasses(),this.updateContentClasses(),this.updateBackgroundImageClasses()},t.prototype.getType=function(){return"cover"},Object.defineProperty(t.prototype,"renderedHeight",{get:function(){return this.survey&&!this.survey.isMobile||!this.survey?this.height?this.height+"px":void 0:this.survey&&this.survey.isMobile&&this.mobileHeight?this.mobileHeight+"px":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedTextAreaWidth",{get:function(){return this.textAreaWidth?this.textAreaWidth+"px":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return!this.survey.hasLogo&&!this.survey.hasTitle&&!this.survey.renderedHasDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"survey",{get:function(){return this._survey},set:function(e){var t=this;this._survey!==e&&(this._survey=e,e&&(this.updateContentClasses(),this._survey.onPropertyChanged.add(function(e,n){"widthMode"!=n.name&&"width"!=n.name||t.updateContentClasses()})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundImageStyle",{get:function(){return this.backgroundImage?{opacity:this.backgroundImageOpacity,backgroundImage:this.renderBackgroundImage,backgroundSize:this.calcBackgroundSize(this.backgroundImageFit)}:null},enumerable:!1,configurable:!0}),t.prototype.propertyValueChanged=function(t,n,o,i,r){e.prototype.propertyValueChanged.call(this,t,n,o),"height"!==t&&"backgroundColor"!==t&&"backgroundImage"!==t&&"overlapEnabled"!==t||this.updateHeaderClasses(),"inheritWidthFrom"===t&&this.updateContentClasses(),"backgroundImageFit"===t&&this.updateBackgroundImageClasses()},t.prototype.getVisibleRows=function(){for(var e=[],t=0;t<3;t++){var n=3*t;this.cells[n].isEmpty&&this.cells[n+1].isEmpty&&this.cells[n+2].isEmpty||e.push(t+1)}return 0!==e.length?e:[1,2,3]},t.prototype.getContentMaxWidth=function(e){if(!e.isEmpty&&!e.showLogo){var t=this.cells.indexOf(e),n=Math.floor(t/3),o=t%3;if(1==o){if(!this.cells[3*n].isEmpty||!this.cells[3*n+2].isEmpty)return"100%"}else{if(0==o){for(var i=0,r=o+1;r<3&&this.cells[3*n+r].isEmpty;)this.cells[3*n+r].isEmpty&&i++,r++;return 100*(i+1)+"%"}if(2==o){var s=0;for(r=o-1;r>0&&this.cells[3*n+r].isEmpty;)this.cells[3*n+r].isEmpty&&s++,r--;return 100*(s+1)+"%"}}}},t.prototype.processResponsiveness=function(){if(this.survey&&this.survey.rootElement&&!this.survey.isMobile){var e=this.survey.rootElement.querySelectorAll(".sv-header__content")[0];if(!e)return;var t=e.getBoundingClientRect().width,n=o.getComputedStyle(e),i=parseFloat(n.paddingLeft)||0,r=parseFloat(n.paddingRight)||0,s=parseFloat(n.columnGap)||0;this.width=t-i-r-2*s}},Object.defineProperty(t.prototype,"hasBackground",{get:function(){return!!this.backgroundImage||"transparent"!==this.backgroundColor},enumerable:!1,configurable:!0}),Ti([y()],t.prototype,"height",void 0),Ti([y()],t.prototype,"mobileHeight",void 0),Ti([y()],t.prototype,"inheritWidthFrom",void 0),Ti([y()],t.prototype,"textAreaWidth",void 0),Ti([y()],t.prototype,"textGlowEnabled",void 0),Ti([y()],t.prototype,"overlapEnabled",void 0),Ti([y({defaultValue:"transparent"})],t.prototype,"backgroundColor",void 0),Ti([y()],t.prototype,"titleColor",void 0),Ti([y()],t.prototype,"descriptionColor",void 0),Ti([y({onSet:function(e,t){t.renderBackgroundImage=Bt(e)}})],t.prototype,"backgroundImage",void 0),Ti([y()],t.prototype,"renderBackgroundImage",void 0),Ti([y()],t.prototype,"backgroundImageFit",void 0),Ti([y()],t.prototype,"backgroundImageOpacity",void 0),Ti([y()],t.prototype,"logoPositionX",void 0),Ti([y()],t.prototype,"logoPositionY",void 0),Ti([y()],t.prototype,"titlePositionX",void 0),Ti([y()],t.prototype,"titlePositionY",void 0),Ti([y()],t.prototype,"descriptionPositionX",void 0),Ti([y()],t.prototype,"descriptionPositionY",void 0),Ti([y()],t.prototype,"logoStyle",void 0),Ti([y()],t.prototype,"titleStyle",void 0),Ti([y()],t.prototype,"descriptionStyle",void 0),Ti([y()],t.prototype,"headerClasses",void 0),Ti([y()],t.prototype,"contentClasses",void 0),Ti([y()],t.prototype,"width",void 0),Ti([y()],t.prototype,"maxWidth",void 0),Ti([y()],t.prototype,"backgroundImageClasses",void 0),t}(Te);D.addClass("cover",[{name:"height:number",minValue:0,default:0},{name:"mobileHeight:number",minValue:0,default:0},{name:"inheritWidthFrom",default:"survey"},{name:"textAreaWidth:number",minValue:0,default:0},{name:"textGlowEnabled:boolean"},{name:"overlapEnabled:boolean"},{name:"backgroundImage:file"},{name:"backgroundImageOpacity:number",minValue:0,maxValue:1,default:1},{name:"backgroundImageFit",default:"cover",choices:["cover","fill","contain"]},{name:"logoPositionX",default:"left"},{name:"logoPositionY",default:"top"},{name:"titlePositionX",default:"left"},{name:"titlePositionY",default:"bottom"},{name:"descriptionPositionX",default:"left"},{name:"descriptionPositionY",default:"bottom"}],function(){return new Ei});var Ai=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Di=function(e){this.type=e,this.timestamp=new Date},Li=function(e){function t(){var t=e.call(this)||this;return t.taskList=[],t.onAllTasksCompleted=t.addEvent(),t}return Ai(t,e),t.prototype.runTask=function(e,t){var n=this,o=new Di(e);return this.taskList.push(o),this.hasActiveTasks=!0,t(function(){return n.taskFinished(o)}),o},t.prototype.waitAndExecute=function(e){this.hasActiveTasks?this.onAllTasksCompleted.add(function(){e()}):e()},t.prototype.taskFinished=function(e){var t=this.taskList.indexOf(e);t>-1&&this.taskList.splice(t,1),this.hasActiveTasks&&0==this.taskList.length&&(this.hasActiveTasks=!1,this.onAllTasksCompleted.fire(this,{}))},function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([y({defaultValue:!1})],t.prototype,"hasActiveTasks",void 0),t}(Te),ji=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Ni=function(e){function t(t,n){var o=e.call(this)||this;return o.effectiveWidth=t,o.questionTitleWidth=n,o}return ji(t,e),t.prototype.getType=function(){return"panellayoutcolumn"},t.prototype.isEmpty=function(){return!this.width&&!this.questionTitleWidth},_i([y()],t.prototype,"width",void 0),_i([y({onSet:function(e,t,n){e!==n&&(t.width=e)}})],t.prototype,"effectiveWidth",void 0),_i([y()],t.prototype,"questionTitleWidth",void 0),t}(Te);D.addClass("panellayoutcolumn",[{name:"effectiveWidth:number",isSerializable:!1,minValue:0},{name:"width:number",visible:!1},"questionTitleWidth"],function(e){return new Ni});var Mi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ki=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Fi=function(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))},Bi=function(e){function t(t){var n=e.call(this)||this;return n.panel=t,n._scrollableParent=void 0,n._updateVisibility=void 0,n.visibleElementsAnimation=new Vt(n.getVisibleElementsAnimationOptions(),function(e){n.setWidth(e),n.setPropertyValue("visibleElements",e)},function(){return n.visibleElements}),n.visible=t.areInvisibleElementsShowing,n.createNewArray("elements"),n.createNewArray("visibleElements"),n}return Mi(t,e),Object.defineProperty(t.prototype,"allowRendering",{get:function(){return!this.panel||!this.panel.survey||!this.panel.survey.isLazyRenderingSuspended},enumerable:!1,configurable:!0}),t.prototype.startLazyRendering=function(e,t){var i=this;if(void 0===t&&(t=kt),o.isAvailable()){this._scrollableParent=t(e),this._scrollableParent===o.getDocumentElement()&&(this._scrollableParent=n.getWindow());var r=this._scrollableParent.scrollHeight>this._scrollableParent.clientHeight;this.isNeedRender=!r,r&&(this._updateVisibility=function(){if(i.allowRendering){var t=function(e,t){if(void 0===t&&(t=0),void 0===gn.environment||!e.offsetHeight)return!1;var o=gn.environment.root,i=Nt(o)?o.host.clientHeight:o.documentElement.clientHeight,r=e.getBoundingClientRect(),s=-t,a=Math.max(i,n.getInnerHeight())+t,l=r.top,u=r.bottom;return Math.max(s,l)<=Math.min(a,u)}(e,50);!i.isNeedRender&&t&&(i.isNeedRender=!0,i.stopLazyRendering())}},this.lazyRenderingTimeout=setTimeout(function(){i._scrollableParent&&i._scrollableParent.addEventListener&&i._scrollableParent.addEventListener("scroll",i._updateVisibility),i.ensureVisibility()},10))}},t.prototype.ensureVisibility=function(){this._updateVisibility&&this._updateVisibility()},t.prototype.stopLazyRendering=function(){this._scrollableParent&&this._updateVisibility&&this._scrollableParent.removeEventListener&&this._scrollableParent.removeEventListener("scroll",this._updateVisibility),clearTimeout(this.lazyRenderingTimeout),this._scrollableParent=void 0,this._updateVisibility=void 0},t.prototype.setIsLazyRendering=function(e){this.isLazyRenderingValue=e,this.isNeedRender=!e},t.prototype.isLazyRendering=function(){return!0===this.isLazyRenderingValue},Object.defineProperty(t.prototype,"id",{get:function(){return"pr_"+this.uniqueId},enumerable:!1,configurable:!0}),t.prototype.equalsCore=function(e){return this==e},Object.defineProperty(t.prototype,"elements",{get:function(){return this.getPropertyValue("elements")},enumerable:!1,configurable:!0}),t.prototype.getIsAnimationAllowed=function(){var t;return e.prototype.getIsAnimationAllowed.call(this)&&this.visible&&(null===(t=this.panel)||void 0===t?void 0:t.animationAllowed)},t.prototype.getVisibleElementsAnimationOptions=function(){var e=this,t=function(e){pn(e),cn(e,{width:nn(e)+"px"})};return{getRerenderEvent:function(){return e.onElementRerendered},isAnimationEnabled:function(){return e.animationAllowed},allowSyncRemovalAddition:!1,getAnimatedElement:function(e){return e.getWrapperElement()},getLeaveOptions:function(e){var n=e;return{cssClass:(e.isPanel?n.cssClasses.panel:n.cssClasses).leave,onBeforeRunAnimation:t,onAfterRunAnimation:hn}},getEnterOptions:function(e){var n=e;return{cssClass:(e.isPanel?n.cssClasses.panel:n.cssClasses).enter,onBeforeRunAnimation:t,onAfterRunAnimation:hn}}}},Object.defineProperty(t.prototype,"visibleElements",{get:function(){return this.getPropertyValue("visibleElements")},set:function(e){if(!e.length)return this.visible=!1,void this.visibleElementsAnimation.cancel();this.visible=!0,this.visibleElementsAnimation.sync(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.getPropertyValue("visible",!0)},set:function(e){this.setPropertyValue("visible",e),this.onVisibleChangedCallback&&this.onVisibleChangedCallback()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNeedRender",{get:function(){return this.getPropertyValue("isneedrender",!0)},set:function(e){this.setPropertyValue("isneedrender",e)},enumerable:!1,configurable:!0}),t.prototype.updateVisible=function(){for(var e=[],t=0;t<this.elements.length;t++)this.elements[t].isVisible&&e.push(this.elements[t]),(this.elements[t].isPanel||"paneldynamic"===this.elements[t].getType())&&(this.setIsLazyRendering(!1),this.stopLazyRendering());this.visibleElements=e},t.prototype.addElement=function(e){this.elements.push(e),this.updateVisible()},Object.defineProperty(t.prototype,"index",{get:function(){return this.panel.rows.indexOf(this)},enumerable:!1,configurable:!0}),t.prototype.setWidth=function(e){var t=e.length;if(0!=t){for(var n=1===e.length,o=[],i=0;i<this.elements.length;i++)if((s=this.elements[i]).isVisible){s.isSingleInRow=n;var r=this.getElementWidth(s);r&&(s.renderWidth=this.getRenderedWidthFromWidth(r),o.push(s)),s.rightIndent=0}else s.renderWidth="";for(i=0;i<this.elements.length;i++){var s;!(s=this.elements[i]).isVisible||o.indexOf(s)>-1||(0==o.length?s.renderWidth="".concat(Number.parseFloat((100/t).toFixed(6)),"%"):s.renderWidth=this.getRenderedCalcWidth(s,o,t))}}},t.prototype.getRenderedCalcWidth=function(e,t,n){for(var o="100%",i=0;i<t.length;i++)o+=" - "+t[i].renderWidth;var r=n-t.length;return r>1&&(o="("+o+")/"+r.toString()),"calc("+o+")"},t.prototype.getElementWidth=function(e){var t=e.width;return t&&"string"==typeof t?t.trim():""},t.prototype.getRenderedWidthFromWidth=function(e){return r.isNumber(e)?e+"px":e},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.stopLazyRendering()},t.prototype.getRowCss=function(){return(new _e).append(this.panel.cssClasses.row).append(this.panel.cssClasses.rowCompact,this.panel.isCompact).append(this.panel.cssClasses.pageRow,this.panel.isPage||this.panel.showPanelAsPage).append(this.panel.cssClasses.rowMultiple,this.visibleElements.length>1).toString()},t.prototype.setRootElement=function(e){this.rootElement=e},t.prototype.getRootElement=function(){return this.rootElement},t}(Te),qi=function(e){function t(t){void 0===t&&(t="");var n=e.call(this,t)||this;return n.isQuestionsReady=!1,n.questionsValue=new Array,n._columns=void 0,n._columnsReady=!1,n.rowsAnimation=new Vt(n.getRowsAnimationOptions(),function(e){n.setPropertyValue("visibleRows",e)},function(){return n.visibleRows}),n.isRandomizing=!1,n.onColumnPropertyValueChangedCallback=function(e,t,o,i,r){n._columnsReady&&(n.updateColumnWidth(n.gridLayoutColumns),n.updateRootStyle())},n.locCountRowUpdates=0,n.createNewArray("rows",function(e,t){n.onAddRow(e)},function(e){n.onRemoveRow(e)}),n.createNewArray("visibleRows"),n.createNewArray("gridLayoutColumns",function(e){e.onPropertyValueChangedCallback=n.onColumnPropertyValueChangedCallback}),n.elementsValue=n.createNewArray("elements",n.onAddElement.bind(n),n.onRemoveElement.bind(n)),n.setPropertyValueDirectly("id","sp_"+n.uniqueId),n.addExpressionProperty("visibleIf",function(e,t){n.visible=!0===t},function(e){return!n.areInvisibleElementsShowing}),n.addExpressionProperty("enableIf",function(e,t){n.readOnly=!1===t}),n.addExpressionProperty("requiredIf",function(e,t){n.isRequired=!0===t}),n.createLocalizableString("requiredErrorText",n),n.createLocalizableString("navigationTitle",n,!0).onGetTextCallback=function(e){return e||n.title||n.name},n.registerPropertyChangedHandlers(["questionTitleLocation"],function(){n.onVisibleChanged.bind(n),n.updateElementCss(!0)}),n.registerPropertyChangedHandlers(["questionStartIndex","showQuestionNumbers"],function(){n.updateVisibleIndexes()}),n.registerPropertyChangedHandlers(["title"],function(){n.resetHasTextInTitle()}),n}return Mi(t,e),Object.defineProperty(t.prototype,"gridLayoutColumns",{get:function(){var e=this.getPropertyValue("gridLayoutColumns");return this._columns||(this.generateColumns([].concat(e)),e=this._columns,this.gridLayoutColumns=e),e},set:function(e){this.setPropertyValue("gridLayoutColumns",e)},enumerable:!1,configurable:!0}),t.prototype.onAddRow=function(e){var t=this;this.onRowVisibleChanged(),e.onVisibleChangedCallback=function(){return t.onRowVisibleChanged()}},t.prototype.getRowsAnimationOptions=function(){var e=this;return{getRerenderEvent:function(){return e.onElementRerendered},isAnimationEnabled:function(){return e.animationAllowed},getAnimatedElement:function(e){return e.getRootElement()},getLeaveOptions:function(t,n){return{cssClass:e.cssClasses.rowLeave,onBeforeRunAnimation:pn,onAfterRunAnimation:hn}},getEnterOptions:function(t,n){var o=e.cssClasses;return{cssClass:(new _e).append(o.rowEnter).append(o.rowDelayedEnter,n.isDeletingRunning).toString(),onBeforeRunAnimation:pn,onAfterRunAnimation:hn}}}},Object.defineProperty(t.prototype,"visibleRows",{get:function(){return this.getPropertyValue("visibleRows")},set:function(e){this.rowsAnimation.sync(e)},enumerable:!1,configurable:!0}),t.prototype.onRemoveRow=function(e){e.visibleElementsAnimation.cancel(),this.visibleRows=this.rows.filter(function(e){return e.visible}),e.onVisibleChangedCallback=void 0},t.prototype.onRowVisibleChanged=function(){this.visibleRows=this.rows.filter(function(e){return e.visible})},t.prototype.getType=function(){return"panelbase"},t.prototype.setSurveyImpl=function(t,n){this.blockAnimations(),e.prototype.setSurveyImpl.call(this,t,n),this.isDesignMode&&this.onVisibleChanged();for(var o=0;o<this.elements.length;o++)this.elements[o].setSurveyImpl(t,n);this.releaseAnimations()},t.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.markQuestionListDirty(),this.onRowsChanged()},Object.defineProperty(t.prototype,"hasTextInTitle",{get:function(){var e=this;return this.getPropertyValue("hasTextInTitle",void 0,function(){return!!e.title})},enumerable:!1,configurable:!0}),t.prototype.resetHasTextInTitle=function(){this.resetPropertyValue("hasTextInTitle")},Object.defineProperty(t.prototype,"hasTitle",{get:function(){return this.canShowTitle(this.survey)&&(this.hasTextInTitle||this.locTitle.textOrHtml.length>0)||this.isDesignMode&&!this.isPanel&&this.showTitle&&gn.designMode.showEmptyTitles},enumerable:!1,configurable:!0}),t.prototype.delete=function(e){void 0===e&&(e=!0),this.deletePanel(),this.removeFromParent(),e&&this.dispose()},t.prototype.deletePanel=function(){for(var e=this.elements,t=0;t<e.length;t++){var n=e[t];n.isPanel&&n.deletePanel(),this.onRemoveElementNotifySurvey(n)}},t.prototype.removeFromParent=function(){},t.prototype.canShowTitle=function(e){return!0},t.prototype.getDefaultTitleTagName=function(){return gn.titleTags.panel},Object.defineProperty(t.prototype,"_showDescription",{get:function(){return!(!this.hasTitle&&this.isDesignMode)&&(this.survey&&this.survey.showPageTitles&&this.hasDescription||this.showDescription&&this.isDesignMode&&gn.designMode.showEmptyDescriptions)},enumerable:!1,configurable:!0}),t.prototype.localeChanged=function(){e.prototype.localeChanged.call(this);for(var t=0;t<this.elements.length;t++)this.elements[t].localeChanged()},t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this);for(var t=0;t<this.elements.length;t++)this.elements[t].locStrsChanged()},t.prototype.getMarkdownHtml=function(t,n,o){return"navigationTitle"===n&&this.locNavigationTitle.isEmpty?this.locTitle.renderedHtml||this.name:e.prototype.getMarkdownHtml.call(this,t,n,o)},Object.defineProperty(t.prototype,"locNavigationTitle",{get:function(){return this.getLocalizableString("navigationTitle")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedNavigationTitle",{get:function(){return this.locNavigationTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredMark",{get:function(){return this.survey&&this.isRequired?this.survey.requiredMark:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredText",{get:function(){return this.requiredMark},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titlePattern",{get:function(){return this.survey?this.survey.questionTitlePattern:"numTitleRequire"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextOnStart",{get:function(){return this.isRequired&&"requireNumTitle"==this.titlePattern},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextBeforeTitle",{get:function(){return this.isRequired&&"numRequireTitle"==this.titlePattern},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextAfterTitle",{get:function(){return this.isRequired&&"numTitleRequire"==this.titlePattern},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredErrorText",{get:function(){return this.getLocalizableStringText("requiredErrorText")},set:function(e){this.setLocalizableStringText("requiredErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRequiredErrorText",{get:function(){return this.getLocalizableString("requiredErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionOrder",{get:function(){return this.getPropertyValue("questionOrder")},set:function(e){this.setPropertyValue("questionOrder",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionsOrder",{get:function(){return this.questionOrder},set:function(e){this.questionOrder=e},enumerable:!1,configurable:!0}),t.prototype.addNoFromChild=function(e){return e},t.prototype.canRandomize=function(e){return e&&"initial"!==this.questionOrder||"random"===this.questionOrder},t.prototype.randomizeElements=function(e){if(!this.canRandomize(e)||this.isRandomizing)return!1;this.isRandomizing=!0;for(var t=[],n=this.elements,o=0;o<n.length;o++)t.push(n[o]);var i=r.randomizeArray(t);return this.setArrayPropertyDirectly("elements",i,!1),this.updateRows(),this.updateVisibleIndexes(),this.isRandomizing=!1,!0},Object.defineProperty(t.prototype,"areQuestionsRandomized",{get:function(){return"random"==("default"==this.questionOrder&&this.survey?this.survey.questionOrder:this.questionOrder)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getPropertyValue("parent",null)},set:function(e){this.setPropertyValue("parent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depth",{get:function(){return null==this.parent?0:this.parent.depth+1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleIf",{get:function(){return this.getPropertyValue("visibleIf","")},set:function(e){this.setPropertyValue("visibleIf",e)},enumerable:!1,configurable:!0}),t.prototype.calcCssClasses=function(e){var t={panel:{},error:{},row:"",rowEnter:"",rowLeave:"",rowDelayedEnter:"",rowMultiple:"",pageRow:"",rowCompact:""};return this.copyCssClasses(t.panel,e.panel),this.copyCssClasses(t.error,e.error),e.pageRow&&(t.pageRow=e.pageRow),e.rowCompact&&(t.rowCompact=e.rowCompact),e.row&&(t.row=e.row),e.rowEnter&&(t.rowEnter=e.rowEnter),e.rowLeave&&(t.rowLeave=e.rowLeave),e.rowDelayedEnter&&(t.rowDelayedEnter=e.rowDelayedEnter),e.rowMultiple&&(t.rowMultiple=e.rowMultiple),this.survey&&this.survey.updatePanelCssClasses(this,t),t},Object.defineProperty(t.prototype,"id",{get:function(){return this.getPropertyValue("id")},set:function(e){this.setPropertyValue("id",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPanel",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getPanels=function(){return[this]},t.prototype.getLayoutType=function(){return"row"},t.prototype.isLayoutTypeSupported=function(e){return"flow"!==e},Object.defineProperty(t.prototype,"questions",{get:function(){return this.isQuestionsReady||(this.questionsValue=this.getQuestionsCore(!1),this.isQuestionsReady=!0),this.questionsValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleQuestions",{get:function(){return this.getQuestionsCore(!0)},enumerable:!1,configurable:!0}),t.prototype.getQuestionsCore=function(e){for(var t=new Array,n=0;n<this.elements.length;n++){var o=this.elements[n];if(!e||o.isVisible)if(o.isPanel)for(var i=o.getQuestionsCore(e),r=0;r<i.length;r++)t.push(i[r]);else t.push(o)}return t},t.prototype.getQuestions=function(e){var t=this.questions;if(!e)return t;var n=[];return t.forEach(function(e){n.push(e),e.getNestedQuestions().forEach(function(e){return n.push(e)})}),n},t.prototype.getQuestionByName=function(e){for(var t=this.questions,n=0;n<t.length;n++)if(t[n].name==e)return t[n];return null},t.prototype.getElementByName=function(e){if(e==this.name)return this;for(var t=this.elements,n=0;n<t.length;n++){var o=t[n];if(o.name==e)return o;var i=o.getPanels();if(Array.isArray(i))for(var r=0;r<i.length;r++){var s=i[r].getElementByName(e);if(s)return s}}return null},t.prototype.getQuestionByValueName=function(e,t){void 0===t&&(t=!1);var n=this.getQuestionsByValueName(e,t);return n.length>0?n[0]:null},t.prototype.getQuestionsByValueName=function(e,t){void 0===t&&(t=!1);var n=[];t&&(e=e.toLowerCase());for(var o=this.questions,i=0;i<o.length;i++){var r=o[i].getValueName();t&&(r=r.toLowerCase()),r==e&&n.push(o[i])}return n},t.prototype.getValue=function(){var e={};return this.collectValues(e,0),r.getUnbindValue(e)},t.prototype.hasValueAnyQuestion=function(e){for(var t=e?this.visibleQuestions:this.questions,n=0;n<t.length;n++)if(!t[n].isEmpty())return!0;return!1},t.prototype.collectValues=function(e,t){var n=this.elements;0===t&&(n=this.questions);for(var o=0;o<n.length;o++){var i=n[o];if(i.isPanel||i.isPage){var r={};i.collectValues(r,t-1)&&(e[i.name]=r)}else{var s=i;if(!s.isEmpty()){var a=s.getValueName();if(e[a]=s.getStructuredValue(t-1),this.data){var l=this.data.getComment(a);l&&(e[a+Te.commentSuffix]=l)}}}}return!0},t.prototype.getDisplayValue=function(e){for(var t={},n=this.questions,o=0;o<n.length;o++){var i=n[o];i.isEmpty()||(t[e?i.title:i.getValueName()]=i.getDisplayValue(e))}return t},t.prototype.getComments=function(){var e={};if(!this.data)return e;for(var t=this.questions,n=0;n<t.length;n++){var o=t[n],i=this.data.getComment(o.getValueName());i&&(e[o.getValueName()]=i)}return e},t.prototype.clearIncorrectValues=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].clearIncorrectValues()},t.prototype.clearErrors=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].clearErrors();this.errors=[]},t.prototype.markQuestionListDirty=function(){this.isQuestionsReady=!1,this.parent&&this.parent.markQuestionListDirty()},Object.defineProperty(t.prototype,"elements",{get:function(){return Te.collectDependency(this,"elements"),this.elementsValue},enumerable:!1,configurable:!0}),t.prototype.getElementsInDesign=function(e){return void 0===e&&(e=!1),this.elements},t.prototype.containsElement=function(e){for(var t=0;t<this.elements.length;t++){var n=this.elements[t];if(n==e)return!0;var o=n.getPanels();if(Array.isArray(o))for(var i=0;i<o.length;i++)if(o[i].containsElement(e))return!0}return!1},Object.defineProperty(t.prototype,"isRequired",{get:function(){return this.getPropertyValue("isRequired")},set:function(e){this.setPropertyValue("isRequired",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredIf",{get:function(){return this.getPropertyValue("requiredIf","")},set:function(e){this.setPropertyValue("requiredIf",e)},enumerable:!1,configurable:!0}),t.prototype.searchText=function(t,n){e.prototype.searchText.call(this,t,n);for(var o=0;o<this.elements.length;o++)this.elements[o].searchText(t,n)},t.prototype.hasErrors=function(e,t){return void 0===e&&(e=!0),void 0===t&&(t=!1),!this.validate(e,t)},t.prototype.validate=function(e,t,n){void 0===e&&(e=!0),void 0===t&&(t=!1);var o=new Yn({fireCallback:e,focusOnFirstError:t,callbackResult:n});return this.validateCore(o),o.finish(),o.runningResult},t.prototype.validateContainerOnly=function(){this.validateInPanels(new Yn({fireCallback:!0,isOnValueChanged:!1})),this.parent&&this.parent.validateContainerOnly()},t.prototype.onQuestionValueChanged=function(e){var t=this.questions.indexOf(e);if(!(t<0))for(var n=this.questions.length-1,o=t+5<n?t+5:n,i=t-5>0?t-5:0;i<=o;i++)if(i!==t){var r=this.questions[i];r.errors.length>0&&r.validate(!1)&&r.validate(!0)}},t.prototype.validateInPanels=function(e){var t=[];this.validateRequired(e,t),this.survey&&(this.survey.validatePanel(this,t,e.fireCallback),e.setErrorElement(this,t)),e.fireCallback&&(this.errors=t)},t.prototype.getErrorCustomText=function(e,t){return this.survey?this.survey.getSurveyErrorCustomText(this,e,t):e},t.prototype.validateRequired=function(e,t){if(this.isRequired){var n=[];if(this.addQuestionsToList(n,!0),0!=n.length){for(var o=0;o<n.length;o++)if(!n[o].isEmpty())return;var i=new vn(this.requiredErrorText,this);t.push(i),e.setErrorElement(n[0],[i])}}},t.prototype.validateElement=function(e){var t=e.errorCount;return this.validateCore(e),e.errorCount<=t},t.prototype.validateCore=function(e){var t,n=null===(t=this.survey)||void 0===t?void 0:t.currentSingleQuestion;n&&this.questions.indexOf(n)<0&&(n=void 0);for(var o=n?[n]:this.elements,i=null,r=0;r<o.length;r++)(i=o[r]).isVisible&&(i.isPanel?i.validateCore(e):i.validateElement(e));n||(this.validateInPanels(e),this.updateContainsErrors())},t.prototype.getContainsErrors=function(){var t=e.prototype.getContainsErrors.call(this);if(t)return t;for(var n=this.elements,o=0;o<n.length;o++)if(n[o].containsErrors)return!0;return!1},t.prototype.updateElementVisibility=function(){for(var t=0;t<this.elements.length;t++)this.elements[t].updateElementVisibility();e.prototype.updateElementVisibility.call(this)},t.prototype.getFirstQuestionToFocus=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),!e&&!t&&this.isCollapsed)return null;for(var n=this.elements,o=0;o<n.length;o++){var i=n[o];if(i.isVisible&&(t||!i.isCollapsed))if(i.isPanel){var r=i.getFirstQuestionToFocus(e,t);if(r)return r}else{var s=i.getFirstQuestionToFocus(e);if(s)return s}}return null},t.prototype.getFirstVisibleQuestion=function(){for(var e=this.questions,t=0;t<e.length;t++)if(e[t].isVisible)return e[t];return null},t.prototype.getFirstVisibleElement=function(){for(var e=this.elements,t=0;t<e.length;t++)if(e[t].isVisible)return e[t];return null},t.prototype.focusFirstQuestion=function(){var e=this.getFirstQuestionToFocus();e&&e.focus()},t.prototype.focusFirstErrorQuestion=function(){var e=this.getFirstQuestionToFocus(!0);e&&e.focus()},t.prototype.addQuestionsToList=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),this.addElementsToList(e,t,n,!1)},t.prototype.addPanelsIntoList=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),this.addElementsToList(e,t,n,!0)},t.prototype.addElementsToList=function(e,t,n,o){t&&!this.visible||this.addElementsToListCore(e,this.elements,t,n,o)},t.prototype.addElementsToListCore=function(e,t,n,o,i){for(var r=0;r<t.length;r++){var s=t[r];n&&!s.visible||((i&&s.isPanel||!i&&!s.isPanel)&&e.push(s),s.isPanel?s.addElementsToListCore(e,s.elements,n,o,i):o&&this.addElementsToListCore(e,s.getElementsInDesign(!1),n,o,i))}},t.prototype.calcMaxRowColSpan=function(){var e=0;return this.rows.forEach(function(t){var n=0,o=!1;t.elements.forEach(function(e){e.width&&(o=!0),n+=e.colSpan||1}),!o&&n>e&&(e=n)}),e},t.prototype.updateColumnWidth=function(e){var t,n=0,o=0;if(e.forEach(function(e){e.width?(n+=e.width,e.setPropertyValue("effectiveWidth",e.width)):o++}),o)for(var i=(t=(100-n)/o,Math.floor(100*t)/100),r=0;r<e.length;r++)e[r].width||e[r].setPropertyValue("effectiveWidth",i)},t.prototype.updateColumns=function(){this._columns=void 0,this.updateRootStyle()},t.prototype.updateRootStyle=function(){var t;e.prototype.updateRootStyle.call(this),null===(t=this.elements)||void 0===t||t.forEach(function(e){return e.updateRootStyle()})},t.prototype.updateCustomWidgets=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].updateCustomWidgets()},Object.defineProperty(t.prototype,"questionTitleLocation",{get:function(){return this.getPropertyValue("questionTitleLocation")},set:function(e){this.setPropertyValue("questionTitleLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),t.prototype.getQuestionTitleLocation=function(){return this.onGetQuestionTitleLocation?this.onGetQuestionTitleLocation():"default"!=this.questionTitleLocation?this.questionTitleLocation:this.parent?this.parent.getQuestionTitleLocation():this.survey?this.survey.questionTitleLocation:"top"},t.prototype.availableQuestionTitleWidth=function(){return"left"===this.getQuestionTitleLocation()||this.hasElementWithTitleLocationLeft()},t.prototype.hasElementWithTitleLocationLeft=function(){return this.elements.some(function(e){return e instanceof t?e.hasElementWithTitleLocationLeft():e instanceof Xn?"left"===e.getTitleLocation():void 0})},t.prototype.getQuestionTitleWidth=function(){return(this.onGetQuestionTitleWidth?this.onGetQuestionTitleWidth():this.questionTitleWidth)||this.parent&&this.parent.getQuestionTitleWidth()},Object.defineProperty(t.prototype,"columns",{get:function(){return this._columns||(this.generateColumns(this.gridLayoutColumns),this.gridLayoutColumns=this._columns),this._columns||[]},enumerable:!1,configurable:!0}),t.prototype.generateColumns=function(e){var t,n=null===(t=this.survey)||void 0===t?void 0:t.gridLayoutEnabled,o=[].concat(e);if(n){var i=this.calcMaxRowColSpan();if(i<=e.length)o=e.slice(0,i);else for(var r=e.length;r<i;r++){var s=new Ni;o.push(s)}}this._columns=o;try{this._columnsReady=!1,this.updateColumnWidth(o)}finally{this._columnsReady=!0}},t.prototype.createGridLayoutColumns=function(){return this.generateColumns([]),this._columns},t.prototype.updateGridColumns=function(){this.updateColumns(),this.elements.forEach(function(e){e.isPanel&&e.updateGridColumns()})},t.prototype.getColumsForElement=function(e){var t=this.findRowByElement(e);if(!t||!this.survey||!this.survey.gridLayoutEnabled)return[];for(var n=t.elements.length-1;n>=0&&t.elements[n].getPropertyValueWithoutDefault("colSpan");)n--;for(var o=t.elements.indexOf(e),i=0,r=0;r<o;r++)i+=t.elements[r].colSpan;var s=e.getPropertyValueWithoutDefault("colSpan");if(!s&&o===n){var a=0;for(r=0;r<t.elements.length;r++)r!==n&&(a+=t.elements[r].colSpan);s=this.columns.length-a}var l=this.columns.slice(i,i+(s||1));return e.setPropertyValueDirectly("effectiveColSpan",l.length),l},t.prototype.isQuestionIndexRecursive=function(){return!!this.survey&&"recursive"===this.survey.showQuestionNumbers},t.prototype.getQuestionStartIndex=function(){var e=this.getStartIndex();return this.isQuestionIndexRecursive()?this.getStartIndexSubs(e,!0):e},t.prototype.getStartIndexSubs=function(e,t){if(!e||!this.isComplexIndex(e))return e;var n="."===e[e.length-1]?".":"";n&&(e=e.substring(0,e.length-1));var o=e.lastIndexOf(".");return e+=n,t?e.substring(o+1):e.substring(0,o+1)},t.prototype.getQuestionStartIndexVsVisibleIndex=function(e,t){var n=this.getStartIndexSubs(e,!1),o=this.getStartIndexSubs(e,!0);return r.getNumberByIndex(t,n)+o},t.prototype.isComplexIndex=function(e){var t=e.indexOf(".");return t>-1&&t<e.length-1},t.prototype.getChildrenLayoutType=function(){return"row"},t.prototype.getProgressInfo=function(){return Tt.getProgressInfoByElements(this.elements,this.isRequired)},Object.defineProperty(t.prototype,"root",{get:function(){for(var e=this;e.parent;)e=e.parent;return e},enumerable:!1,configurable:!0}),t.prototype.childVisibilityChanged=function(){this.isRunningConditions||this.getIsPageVisible(null)!==this.getPropertyValue("isVisible",!0)&&this.onVisibleChanged()},t.prototype.canRenderFirstRows=function(){return this.isPage},t.prototype.isLazyRenderInRow=function(e){return!(!this.survey||!this.survey.isLazyRendering)&&(e>=this.survey.lazyRenderFirstBatchSize||!this.canRenderFirstRows())},t.prototype.createRowAndSetLazy=function(e){var t=this.createRow();return t.setIsLazyRendering(this.isLazyRenderInRow(e)),t},t.prototype.createRow=function(){return new Bi(this)},t.prototype.onSurveyLoad=function(){this.blockAnimations(),e.prototype.onSurveyLoad.call(this);for(var t=0;t<this.elements.length;t++)this.elements[t].onSurveyLoad();this.onElementVisibilityChanged(this),this.releaseAnimations()},t.prototype.onFirstRenderingCore=function(){e.prototype.onFirstRenderingCore.call(this),this.onRowsChanged(),this.elements.forEach(function(e){return e.onFirstRendering()})},t.prototype.updateRows=function(){this.isLoadingFromJson||(this.getElementsForRows().forEach(function(e){e.isPanel&&e.updateRows()}),this.onRowsChanged())},Object.defineProperty(t.prototype,"rows",{get:function(){return this.getPropertyValue("rows")},enumerable:!1,configurable:!0}),t.prototype.ensureRowsVisibility=function(){this.rows.forEach(function(e){e.ensureVisibility()})},t.prototype.onRowsChanged=function(){this.isLoadingFromJson||(this.blockAnimations(),this.setArrayPropertyDirectly("rows",this.buildRows()),this.updateColumns(),this.releaseAnimations())},t.prototype.blockRowsUpdates=function(){this.locCountRowUpdates++},t.prototype.releaseRowsUpdates=function(){this.locCountRowUpdates--},t.prototype.updateRowsBeforeElementRemoved=function(e){var t=this,n=this.findRowByElement(e),o=this.rows.indexOf(n),i=n.elements.indexOf(e);n.elements.splice(i,1),0==n.elements.length?this.rows.splice(o,1):!n.elements[0].startWithNewLine&&this.rows[o-1]?(n.elements.forEach(function(e){return t.rows[o-1].addElement(e)}),this.rows.splice(o,1)):n.updateVisible()},t.prototype.updateRowsOnElementAdded=function(e){var t=this;if(this.wasRendered||0!==this.rows.length||!(this.elements.length>1)){var n=this.elements.indexOf(e),o=this.elements[n+1],i=function(e){var n=t.createRowAndSetLazy(e);return t.isDesignMode&&n.setIsLazyRendering(!1),t.rows.splice(e,0,n),n},r=function(e,t,n){for(var o,i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];var s=(o=e.elements).splice.apply(o,Fi([t,n],i,!1));return e.updateVisible(),s};if(o){var s=this.findRowByElement(o);if(s){var a=this.rows.indexOf(s),l=s.elements.indexOf(o);0==l?o.startWithNewLine?e.startWithNewLine||a<1?i(a).addElement(e):this.rows[a-1].addElement(e):r(s,0,0,e):e.startWithNewLine?r.apply(void 0,Fi([i(a+1),0,0],[e].concat(r(s,l,s.elements.length)),!1)):r(s,l,0,e)}}else 0==n||e.startWithNewLine?r(i(this.rows.length),0,0,e):this.rows[this.rows.length-1].addElement(e)}},t.prototype.canFireAddRemoveNotifications=function(e){return!!this.survey&&e.prevSurvey!==this.survey},t.prototype.onAddElement=function(e,t){var n=this,o=this.survey,i=this.canFireAddRemoveNotifications(e);this.surveyImpl&&e.setSurveyImpl(this.surveyImpl),e.parent=this,this.markQuestionListDirty(),this.canBuildRows()&&this.updateRowsOnElementAdded(e),i&&(e.isPanel?o.panelAdded(e,t,this,this.root):o.questionAdded(e,t,this,this.root)),this.addElementCallback&&this.addElementCallback(e),e.registerPropertyChangedHandlers(["visible","isVisible"],function(){n.onElementVisibilityChanged(e)},this.id),e.registerPropertyChangedHandlers(["startWithNewLine"],function(){n.onElementStartWithNewLineChanged(e)},this.id),this.onElementVisibilityChanged(this)},t.prototype.onRemoveElement=function(e){e.parent=null,this.unregisterElementPropertiesChanged(e),this.markQuestionListDirty(),this.updateRowsOnElementRemoved(e),this.isRandomizing||(this.onRemoveElementNotifySurvey(e),this.removeElementCallback&&this.removeElementCallback(e),this.onElementVisibilityChanged(this))},t.prototype.unregisterElementPropertiesChanged=function(e){e.unregisterPropertyChangedHandlers(["visible","isVisible","startWithNewLine"],this.id)},t.prototype.onRemoveElementNotifySurvey=function(e){this.canFireAddRemoveNotifications(e)&&(e.isPanel?this.survey.panelRemoved(e):this.survey.questionRemoved(e))},t.prototype.onElementVisibilityChanged=function(e){this.isLoadingFromJson||this.isRandomizing||(this.updateRowsVisibility(e),this.childVisibilityChanged(),this.parent&&this.parent.onElementVisibilityChanged(this))},t.prototype.onElementStartWithNewLineChanged=function(e){this.locCountRowUpdates>0||(this.blockAnimations(),this.updateRowsBeforeElementRemoved(e),this.updateRowsOnElementAdded(e),this.releaseAnimations())},t.prototype.updateRowsVisibility=function(e){for(var t=this.rows,n=0;n<t.length;n++){var o=t[n];if(o.elements.indexOf(e)>-1){o.updateVisible(),o.visible&&!o.isNeedRender&&(o.isNeedRender=!0);break}}},t.prototype.canBuildRows=function(){return!this.isLoadingFromJson&&"row"==this.getChildrenLayoutType()},t.prototype.buildRows=function(){if(!this.canBuildRows())return[];for(var e=new Array,t=this.getElementsForRows(),n=0;n<t.length;n++){var o=t[n],i=0==n||o.startWithNewLine,r=i?this.createRowAndSetLazy(e.length):e[e.length-1];i&&e.push(r),r.addElement(o)}return e.forEach(function(e){return e.updateVisible()}),e},t.prototype.getElementsForRows=function(){return this.elements},t.prototype.getDragDropInfo=function(){var e=this.getPage(this.parent);return e?e.getDragDropInfo():void 0},t.prototype.updateRowsOnElementRemoved=function(e){this.canBuildRows()&&(this.updateRowsRemoveElementFromRow(e,this.findRowByElement(e)),this.updateColumns())},t.prototype.updateRowsRemoveElementFromRow=function(e,t){if(t&&t.panel){var n=t.elements.indexOf(e);n<0||(t.elements.splice(n,1),t.elements.length>0?(this.blockRowsUpdates(),t.elements[0].startWithNewLine=!0,this.releaseRowsUpdates(),t.updateVisible()):t.index>=0&&t.panel.rows.splice(t.index,1))}},t.prototype.getAllRows=function(){var e=this,t=[];return this.rows.forEach(function(n){var o=[];n.elements.forEach(function(t){t.isPanel?o.push.apply(o,t.getAllRows()):"paneldynamic"==t.getType()&&(e.isDesignMode?o.push.apply(o,t.template.getAllRows()):t.panels.forEach(function(e){return o.push.apply(o,e.getAllRows())}))}),t.push(n),t.push.apply(t,o)}),t},t.prototype.findRowAndIndexByElement=function(e,t){if(!e)return{row:void 0,index:this.rows.length-1};t=t||this.rows;for(var n=0;n<t.length;n++)if(t[n].elements.indexOf(e)>-1)return{row:t[n],index:n};return{row:null,index:-1}},t.prototype.forceRenderRow=function(e){e&&!e.isNeedRender&&(e.isNeedRender=!0,e.stopLazyRendering())},t.prototype.forceRenderElement=function(e,t,n){void 0===t&&(t=function(){}),void 0===n&&(n=0);var o=this.getAllRows(),i=this.findRowAndIndexByElement(e,o),r=i.row,s=i.index;if(s>=0&&s<o.length){var a=[];a.push(r);for(var l=s-1;l>=s-n&&l>=0;l--)a.push(o[l]);this.forceRenderRows(a,t)}},t.prototype.forceRenderRows=function(e,t){var n=this;void 0===t&&(t=function(){});var o,i=(o=e.length,function(){--o<=0&&t()});e.forEach(function(e){return new Rt(e.visibleElements,i)}),e.forEach(function(e){return n.forceRenderRow(e)})},t.prototype.findRowByElement=function(e){return this.findRowAndIndexByElement(e).row},t.prototype.elementWidthChanged=function(e){if(!this.isLoadingFromJson){var t=this.findRowByElement(e);t&&t.updateVisible()}},Object.defineProperty(t.prototype,"ariaTitleId",{get:function(){return this.id+"_ariaTitle"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabelledBy",{get:function(){return this.hasTitle?this.ariaTitleId:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this.hasTitle?null:this.title||this.name||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRole",{get:function(){return"group"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processedTitle",{get:function(){return this.getRenderedTitle(this.locTitle.textOrHtml)},enumerable:!1,configurable:!0}),t.prototype.getRenderedTitle=function(e){return null!=this.textProcessor?this.textProcessor.processText(e,!0):e},Object.defineProperty(t.prototype,"visible",{get:function(){return this.getPropertyValue("visible")},set:function(e){e!==this.visible&&(this.setPropertyValue("visible",e),this.setPropertyValue("isVisible",this.isVisible),this.isLoadingFromJson||this.onVisibleChanged())},enumerable:!1,configurable:!0}),t.prototype.onHidingContent=function(){this.questions.forEach(function(e){return e.onHidingContent()})},t.prototype.onVisibleChanged=function(){if(!this.isRandomizing&&(this.setPropertyValue("isVisible",this.isVisible),this.canUpdateValueOnVisibleChanged()))for(var e=this.questions,t=this.isVisible,n=0;n<e.length;n++){var o=e[n];t?o.updateValueWithDefaults():(o.clearValueIfInvisible("onHiddenContainer"),o.onHidingContent())}},t.prototype.notifyStateChanged=function(t){e.prototype.notifyStateChanged.call(this,t),this.isCollapsed&&this.questions.forEach(function(e){return e.onHidingContent()})},Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.areInvisibleElementsShowing||this.getIsPageVisible(null)},enumerable:!1,configurable:!0}),t.prototype.getIsContentVisible=function(e){if(this.areInvisibleElementsShowing)return!0;for(var t=0;t<this.elements.length;t++)if(this.elements[t]!=e&&this.elements[t].isVisible)return!0;return!1},t.prototype.getIsPageVisible=function(e){var t=this.getIsContentVisible(e);return this.visible&&t},t.prototype.setVisibleIndex=function(e){if(!this.isVisible||e<0)return this.resetVisibleIndexes(),0;this.lastVisibleIndex=e;var t=e;e+=this.beforeSetVisibleIndex(e);for(var n=this.getPanelStartIndex(e),o=n,i=this.elements,r=0;r<i.length;r++)o+=i[r].setVisibleIndex(o);return this.isContinueNumbering()&&(e+=o-n),e-t},t.prototype.updateVisibleIndexes=function(){void 0!==this.lastVisibleIndex&&(this.resetVisibleIndexes(),this.setVisibleIndex(this.lastVisibleIndex))},t.prototype.resetVisibleIndexes=function(){for(var e=this.elements,t=0;t<e.length;t++)e[t].setVisibleIndex(-1)},t.prototype.beforeSetVisibleIndex=function(e){return 0},t.prototype.getPanelStartIndex=function(e){return e},t.prototype.isContinueNumbering=function(){return!0},Object.defineProperty(t.prototype,"isReadOnly",{get:function(){var e=!!this.parent&&this.parent.isReadOnly,t=!!this.survey&&this.survey.isDisplayMode;return this.readOnly||e||t},enumerable:!1,configurable:!0}),t.prototype.onReadOnlyChanged=function(){for(var t=0;t<this.elements.length;t++){var n=this.elements[t];n.setPropertyValue("isReadOnly",n.isReadOnly)}e.prototype.onReadOnlyChanged.call(this)},t.prototype.updateElementCss=function(t){e.prototype.updateElementCss.call(this,t);for(var n=0;n<this.elements.length;n++)this.elements[n].updateElementCss(t)},Object.defineProperty(t.prototype,"enableIf",{get:function(){return this.getPropertyValue("enableIf","")},set:function(e){this.setPropertyValue("enableIf",e)},enumerable:!1,configurable:!0}),t.prototype.addElement=function(e,t){return void 0===t&&(t=-1),!!this.canAddElement(e)&&(t<0||t>=this.elements.length?this.elements.push(e):this.elements.splice(t,0,e),this.wasRendered&&e.onFirstRendering(),this.updateColumns(),!0)},t.prototype.insertElement=function(e,t,n){if(void 0===n&&(n="bottom"),t){this.blockRowsUpdates();var o=this.elements.indexOf(t),i=this.findRowByElement(t);"left"==n||"right"==n?"right"==n?(e.startWithNewLine=!1,o++):0==i.elements.indexOf(t)?(t.startWithNewLine=!1,e.startWithNewLine=!0):e.startWithNewLine=!1:(e.startWithNewLine=!0,o="top"==n?this.elements.indexOf(i.elements[0]):this.elements.indexOf(i.elements[i.elements.length-1])+1),this.releaseRowsUpdates(),this.addElement(e,o)}else this.addElement(e)},t.prototype.insertElementAfter=function(e,t){var n=this.elements.indexOf(t);n>=0&&this.addElement(e,n+1)},t.prototype.insertElementBefore=function(e,t){var n=this.elements.indexOf(t);n>=0&&this.addElement(e,n)},t.prototype.canAddElement=function(e){return!!e&&e.isLayoutTypeSupported(this.getChildrenLayoutType())},t.prototype.addQuestion=function(e,t){return void 0===t&&(t=-1),this.addElement(e,t)},t.prototype.addPanel=function(e,t){return void 0===t&&(t=-1),this.addElement(e,t)},t.prototype.addNewQuestion=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=-1);var o=Io.Instance.createQuestion(e,t);return this.addQuestion(o,n)?o:null},t.prototype.addNewPanel=function(e){void 0===e&&(e=null);var t=this.createNewPanel(e);return this.addPanel(t)?t:null},t.prototype.indexOf=function(e){return this.elements.indexOf(e)},t.prototype.createNewPanel=function(e){var t=D.createClass("panel");return t.name=e,t},t.prototype.removeElement=function(e){var t=this.elements.indexOf(e);if(t<0){for(var n=0;n<this.elements.length;n++)if(this.elements[n].removeElement(e))return!0;return!1}return this.elements.splice(t,1),this.updateColumns(),!0},t.prototype.removeQuestion=function(e){this.removeElement(e)},t.prototype.runCondition=function(e){if(!this.isDesignMode&&!this.isLoadingFromJson){var t=this.elements.slice(),n=this.getIsPageVisible();this.isRunningConditions=!0;for(var o=0;o<t.length;o++)t[o].runCondition(e);this.runConditionCore(e);var i=this.getIsPageVisible();this.isRunningConditions=!1,n!==i&&this.childVisibilityChanged()}},t.prototype.onAnyValueChanged=function(e,t){for(var n=this.elements,o=0;o<n.length;o++)n[o].onAnyValueChanged(e,t)},t.prototype.checkBindings=function(e,t){for(var n=this.elements,o=0;o<n.length;o++)n[o].checkBindings(e,t)},t.prototype.needResponsiveWidth=function(){var e=!1;return this.elements.forEach(function(t){t.needResponsiveWidth()&&(e=!0)}),this.rows.forEach(function(t){t.elements.length>1&&(e=!0)}),e},Object.defineProperty(t.prototype,"hasDescriptionUnderTitle",{get:function(){return this.hasDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeader",{get:function(){return this.cssClasses.panel.header},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssDescription",{get:function(){return this.cssClasses.panel.description},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionErrorLocation",{get:function(){return this.getPropertyValue("questionErrorLocation")},set:function(e){this.setPropertyValue("questionErrorLocation",e)},enumerable:!1,configurable:!0}),t.prototype.getQuestionErrorLocation=function(){return"default"!==this.questionErrorLocation?this.questionErrorLocation:this.parent?this.parent.getQuestionErrorLocation():this.survey?this.survey.questionErrorLocation:"top"},t.prototype.getTitleOwner=function(){return this},Object.defineProperty(t.prototype,"no",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssTitleNumber",{get:function(){return this.cssClasses.panel.number},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssRequiredMark",{get:function(){return this.cssClasses.panel.requiredMark},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssError",{get:function(){return this.getCssError(this.cssClasses)},enumerable:!1,configurable:!0}),t.prototype.getCssError=function(e){return(new _e).append(e.error.root).toString()},t.prototype.getSerializableColumnsValue=function(){for(var e=-1,t=this.gridLayoutColumns.length-1;t>=0;t--)if(!this.gridLayoutColumns[t].isEmpty()){e=t;break}return this.gridLayoutColumns.slice(0,e+1)},t.prototype.afterRender=function(e){this.afterRenderCore(e)},t.prototype.dispose=function(){if(e.prototype.dispose.call(this),this.rows){for(var t=0;t<this.rows.length;t++)this.rows[t].dispose();this.rows.splice(0,this.rows.length)}this.disposeElements(),this.elements.splice(0,this.elements.length)},t.prototype.disposeElements=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].dispose()},ki([y({defaultValue:!0})],t.prototype,"showTitle",void 0),ki([y({defaultValue:!0})],t.prototype,"showDescription",void 0),ki([y()],t.prototype,"questionTitleWidth",void 0),t}(Tt),Qi=function(e){function t(t){void 0===t&&(t="");var n=e.call(this,t)||this;return n.forcusFirstQuestionOnExpand=!0,n.createNewArray("footerActions"),n.registerPropertyChangedHandlers(["width"],function(){n.parent&&n.parent.elementWidthChanged(n)}),n.registerPropertyChangedHandlers(["indent","innerIndent","rightIndent"],function(){n.resetIndents()}),n.registerPropertyChangedHandlers(["colSpan"],function(){var e;null===(e=n.parent)||void 0===e||e.updateColumns()}),n}return Mi(t,e),t.prototype.getType=function(){return"panel"},Object.defineProperty(t.prototype,"contentId",{get:function(){return this.id+"_content"},enumerable:!1,configurable:!0}),t.prototype.getSurvey=function(t){return void 0===t&&(t=!1),t&&this.isPanel?this.parent?this.parent.getSurvey(t):null:e.prototype.getSurvey.call(this,t)},Object.defineProperty(t.prototype,"isPanel",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"page",{get:function(){return this.getPage(this.parent)},set:function(e){this.setPage(this.parent,e)},enumerable:!1,configurable:!0}),t.prototype.removeFromParent=function(){this.parent&&this.removeSelfFromList(this.parent.elements)},t.prototype.moveTo=function(e,t){return void 0===t&&(t=null),this.moveToBase(this.parent,e,t)},Object.defineProperty(t.prototype,"visibleIndex",{get:function(){return this.getPropertyValue("visibleIndex",-1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showNumber",{get:function(){return this.getPropertyValue("showNumber")},set:function(e){this.setPropertyValue("showNumber",e),this.notifySurveyOnVisibilityChanged()},enumerable:!1,configurable:!0}),t.prototype.addNoFromChild=function(t){if(this.isQuestionIndexRecursive()){var n=this.calcNo();return n&&"."!==n[n.length-1]&&this.canAddDot(t)&&(n+="."),n+t}return e.prototype.addNoFromChild.call(this,t)},t.prototype.canAddDot=function(e){return!!e&&new RegExp("^[\\p{L}\\d]","u").test(e[0])},Object.defineProperty(t.prototype,"showQuestionNumbers",{get:function(){return this.getPropertyValue("showQuestionNumbers")},set:function(e){this.setPropertyValue("showQuestionNumbers",e),this.notifySurveyOnVisibilityChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionStartIndex",{get:function(){return this.getPropertyValue("questionStartIndex","")},set:function(e){this.setPropertyValue("questionStartIndex",e)},enumerable:!1,configurable:!0}),t.prototype.getQuestionStartIndex=function(){var t=this.questionStartIndex;return t&&this.isQuestionIndexOnPanel&&this.isComplexIndex(t)?this.getQuestionStartIndexVsVisibleIndex(t,this.visibleIndex):t||e.prototype.getQuestionStartIndex.call(this)},Object.defineProperty(t.prototype,"no",{get:function(){var e=this;return this.getPropertyValue("no",void 0,function(){return e.calcNo()})},enumerable:!1,configurable:!0}),t.prototype.calcNo=function(){var e=this.hasTitle?r.getNumberByIndex(this.visibleIndex,this.getStartIndex()):"";return this.onGetNoCallback&&(e=this.onGetNoCallback(e)),this.parent&&(e=this.parent.addNoFromChild(e)),this.survey&&(e=this.survey.getUpdatedPanelNo(this,e)),e||""},t.prototype.notifyStateChanged=function(t){this.isLoadingFromJson||this.locTitle.strChanged(),e.prototype.notifyStateChanged.call(this,t)},t.prototype.createLocTitleProperty=function(){var t=this,n=e.prototype.createLocTitleProperty.call(this);return n.onGetTextCallback=function(e){return e||"default"===t.state||(e=t.name),e},n},t.prototype.beforeSetVisibleIndex=function(t){if(this.isPage||!this.parent)return e.prototype.beforeSetVisibleIndex.call(this,t);var n=-1;return!this.showNumber&&!this.isQuestionIndexRecursive()||!this.isDesignMode&&this.locTitle.isEmpty&&!this.hasParentInQuestionIndex()||(n=t),this.setPropertyValue("visibleIndex",n),this.resetPropertyValue("no"),n<0?0:1},t.prototype.getPanelStartIndex=function(e){return"off"===this.showQuestionNumbers?-1:this.isQuestionIndexOnPanel?0:e},Object.defineProperty(t.prototype,"isQuestionIndexOnPanel",{get:function(){return"onpanel"===this.showQuestionNumbers||this.isQuestionIndexRecursive()},enumerable:!1,configurable:!0}),t.prototype.isQuestionIndexRecursive=function(){var t=this.showQuestionNumbers;return"default"!==t?"recursive"===t:e.prototype.isQuestionIndexRecursive.call(this)},t.prototype.hasParentInQuestionIndex=function(){if(!this.isQuestionIndexOnPanel)return!1;var e=this.questionStartIndex,t=e.indexOf(".");return t>-1&&t<e.length-1},t.prototype.isContinueNumbering=function(){return"off"!==this.showQuestionNumbers&&!this.isQuestionIndexOnPanel},t.prototype.notifySurveyOnVisibilityChanged=function(){null==this.survey||this.isLoadingFromJson||this.survey.panelVisibilityChanged(this,this.isVisible)},t.prototype.getRenderedTitle=function(t){if(this.isPanel&&!t){if(this.isCollapsed||this.isExpanded)return this.name;if(this.isDesignMode)return"["+this.name+"]"}return e.prototype.getRenderedTitle.call(this,t)},Object.defineProperty(t.prototype,"innerIndent",{get:function(){return this.getPropertyValue("innerIndent")},set:function(e){this.setPropertyValue("innerIndent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startWithNewLine",{get:function(){return this.getPropertyValue("startWithNewLine")},set:function(e){this.setPropertyValue("startWithNewLine",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowAdaptiveActions",{get:function(){return this.getPropertyValue("allowAdaptiveActions")},set:function(e){this.setPropertyValue("allowAdaptiveActions",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"innerPaddingLeft",{get:function(){var e=this;return this.getPropertyValue("innerPaddingLeft",void 0,function(){return e.getIndentSize(e.innerIndent)})},set:function(e){this.setPropertyValue("innerPaddingLeft",e)},enumerable:!1,configurable:!0}),t.prototype.calcPaddingLeft=function(){return this.getIndentSize(this.indent)},t.prototype.calcPaddingRight=function(){return this.getIndentSize(this.rightIndent)},t.prototype.resetIndents=function(){this.resetPropertyValue("innerPaddingLeft"),e.prototype.resetIndents.call(this)},t.prototype.getIndentSize=function(e){if(this.survey){if(e<1)return"";var t=this.survey.css;return t&&t.question&&t.question.indent?e*t.question.indent+"px":""}},t.prototype.clearOnDeletingContainer=function(){this.elements.forEach(function(e){(e instanceof Xn||e instanceof t)&&e.clearOnDeletingContainer()})},Object.defineProperty(t.prototype,"footerActions",{get:function(){return this.getPropertyValue("footerActions")},enumerable:!1,configurable:!0}),t.prototype.getFooterToolbar=function(){var e,t,n=this;if(!this.footerToolbarValue){var o=this.footerActions;this.hasEditButton&&o.push({id:"cancel-preview",locTitle:this.survey.locEditText,innerCss:this.survey.cssNavigationEdit,component:"sv-nav-btn",action:function(){n.cancelPreview()}}),o=this.onGetFooterActionsCallback?this.onGetFooterActionsCallback():null===(e=this.survey)||void 0===e?void 0:e.getUpdatedPanelFooterActions(this,o),this.footerToolbarValue=this.createActionContainer(this.allowAdaptiveActions);var i=this.onGetFooterToolbarCssCallback?this.onGetFooterToolbarCssCallback():"";i||(i=null===(t=this.cssClasses.panel)||void 0===t?void 0:t.footer),i&&(this.footerToolbarValue.containerCss=i),this.footerToolbarValue.setItems(o),this.footerToolbarValue.flushUpdates()}return this.footerToolbarValue},Object.defineProperty(t.prototype,"hasEditButton",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.cancelPreview=function(){this.hasEditButton&&this.survey.cancelPreviewByPage(this)},Object.defineProperty(t.prototype,"cssTitle",{get:function(){return this.getCssPanelTitle()},enumerable:!1,configurable:!0}),t.prototype.getCssPanelTitle=function(){return this.getCssTitle(this.cssClasses.panel)},t.prototype.getCssTitleExpandableSvg=function(){return"default"===this.state?null:this.cssClasses.panel.titleExpandableSvg},Object.defineProperty(t.prototype,"showErrorsAbovePanel",{get:function(){return!this.showPanelAsPage},enumerable:!1,configurable:!0}),t.prototype.getCssError=function(t){if(this.isPage)return e.prototype.getCssError.call(this,t);var n=(new _e).append(e.prototype.getCssError.call(this,t)).append(t.panel.errorsContainer);return n.append("panel-error-root",n.isEmpty()).toString()},t.prototype.onVisibleChanged=function(){e.prototype.onVisibleChanged.call(this),this.notifySurveyOnVisibilityChanged()},t.prototype.needResponsiveWidth=function(){return!this.startWithNewLine||e.prototype.needResponsiveWidth.call(this)},t.prototype.focusIn=function(){this.survey&&this.survey.whenPanelFocusIn(this)},t.prototype.getHasFrameV2=function(){return e.prototype.getHasFrameV2.call(this)&&!this.showPanelAsPage},t.prototype.getIsNested=function(){return e.prototype.getIsNested.call(this)&&void 0!==this.parent},Object.defineProperty(t.prototype,"showPanelAsPage",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.expand=function(t){void 0===t&&(t=!0),this.forcusFirstQuestionOnExpand=t,e.prototype.expand.call(this)},t.prototype.onElementExpanded=function(e){var t=this;if(this.forcusFirstQuestionOnExpand&&null!=this.survey&&!this.isLoadingFromJson){var n=this.getFirstQuestionToFocus(!1);n&&setTimeout(function(){!t.isDisposed&&t.survey&&t.survey.scrollElementToTop(n,n,null,n.inputId,!1,{behavior:"smooth"})},e?0:15)}},t.prototype.getCssRoot=function(t){return(new _e).append(e.prototype.getCssRoot.call(this,t)).append(t.container).append(t.asPage,this.showPanelAsPage).append(t.invisible,!this.isDesignMode&&this.areInvisibleElementsShowing&&!this.visible).toString()},t.prototype.getContainerCss=function(){return this.getCssRoot(this.cssClasses.panel)},t.prototype.afterRenderCore=function(t){var n;e.prototype.afterRenderCore.call(this,t),this.isPanel&&(null===(n=this.survey)||void 0===n||n.afterRenderPanel(this,t))},t}(qi);D.addClass("panelbase",["name",{name:"elements",alternativeName:"questions",baseClassName:"question",visible:!1,isLightSerializable:!1},{name:"visible:switch",default:!0,overridingProperty:"visibleIf"},{name:"readOnly:boolean",overridingProperty:"enableIf"},"visibleIf:condition","enableIf:condition","requiredIf:condition",{name:"questionTitleWidth",visibleIf:function(e){return!!e&&e.availableQuestionTitleWidth()}},{name:"questionTitleLocation",default:"default",choices:["default","top","bottom","left","hidden"]},{name:"gridLayoutColumns:panellayoutcolumns",className:"panellayoutcolumn",isArray:!0,onSerializeValue:function(e){return e.getSerializableColumnsValue()},visibleIf:function(e){return!!e&&!!e.survey&&e.survey.gridLayoutEnabled}},{name:"title:text",serializationProperty:"locTitle"},{name:"description:text",serializationProperty:"locDescription"},{name:"questionOrder",alternativeName:"questionsOrder",default:"default",choices:["default","initial","random"]},{name:"questionErrorLocation",default:"default",choices:["default","top","bottom"]}],function(){return new qi}),D.addClass("panel",[{name:"state",default:"default",choices:["default","collapsed","expanded"]},{name:"isRequired:switch",overridingProperty:"requiredIf"},{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},{name:"startWithNewLine:boolean",default:!0},{name:"width"},{name:"minWidth",defaultFunc:function(){return"auto"}},{name:"maxWidth",defaultFunc:function(){return gn.maxWidth}},{name:"colSpan:number",visible:!1,onSerializeValue:function(e){return e.getPropertyValue("colSpan")}},{name:"effectiveColSpan:number",minValue:1,isSerializable:!1,visibleIf:function(e){return!!e.survey&&e.survey.gridLayoutEnabled}},{name:"innerIndent:number",default:0,choices:[0,1,2,3]},{name:"indent:number",default:0,choices:[0,1,2,3],visible:!1},{name:"page",isSerializable:!1,visibleIf:function(e){var t=e?e.survey:null;return!t||!t.pages||t.pages.length>1},choices:function(e){var t=e?e.survey:null;return t?t.pages.map(function(e){return{value:e.name,text:e.title}}):[]}},{name:"showNumber:boolean"},{name:"showQuestionNumbers",default:"default",choices:["default","onpanel","recursive","off"]},{name:"questionStartIndex",visibleIf:function(e){return e.isPanel}},{name:"allowAdaptiveActions:boolean",default:!0,visible:!1}],function(){return new Qi},"panelbase"),To.Instance.registerElement("panel",function(e){return new Qi(e)});var zi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Hi=function(e){function t(t){void 0===t&&(t="");var n=e.call(this,t)||this;return n.timeSpent=0,n._isReadyForClean=!0,n.createLocalizableString("navigationDescription",n,!0),n}return zi(t,e),t.prototype.getType=function(){return"page"},t.prototype.toString=function(){return this.name},Object.defineProperty(t.prototype,"isPage",{get:function(){return!this.isPanel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPanel",{get:function(){return!!this.parent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPanelAsPage",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasEditButton",{get:function(){return this.isPanel&&this.survey&&"preview"===this.survey.state&&!!this.parent&&!this.parent.isPanel},enumerable:!1,configurable:!0}),t.prototype.getElementsForRows=function(){var t;if(!this.isStartPage){var n=null===(t=this.survey)||void 0===t?void 0:t.currentSingleElement;if(n)return n.page===this?[n]:[]}return e.prototype.getElementsForRows.call(this)},t.prototype.disposeElements=function(){this.isPageContainer||e.prototype.disposeElements.call(this)},t.prototype.onRemoveElement=function(t){this.isPageContainer?(t.parent=null,this.unregisterElementPropertiesChanged(t)):e.prototype.onRemoveElement.call(this,t)},t.prototype.getTemplate=function(){return this.isPanel?"panel":e.prototype.getTemplate.call(this)},Object.defineProperty(t.prototype,"no",{get:function(){if(!this.canShowPageNumber()||!this.survey)return"";var e=this.isStartPage?"":this.num+". ";return this.survey.getUpdatedPageNo(this,e)},enumerable:!1,configurable:!0}),t.prototype.addNoFromChild=function(e){return e},Object.defineProperty(t.prototype,"cssTitleNumber",{get:function(){return this.isPanel?this.cssClasses.panel.number:this.cssClasses.page.number},enumerable:!1,configurable:!0}),t.prototype.getCssTitleExpandableSvg=function(){return null},Object.defineProperty(t.prototype,"cssRequiredMark",{get:function(){return""},enumerable:!1,configurable:!0}),t.prototype.canShowPageNumber=function(){return this.survey&&this.survey.showPageNumbers},t.prototype.canShowTitle=function(e){return!e||e.showPageTitles},t.prototype.setTitleValue=function(t){e.prototype.setTitleValue.call(this,t),this.navigationLocStrChanged()},t.prototype.getDefaultTitleTagName=function(){return gn.titleTags.page},Object.defineProperty(t.prototype,"navigationTitle",{get:function(){return this.getLocalizableStringText("navigationTitle")},set:function(e){this.setLocalizableStringText("navigationTitle",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"navigationDescription",{get:function(){return this.getLocalizableStringText("navigationDescription")},set:function(e){this.setLocalizableStringText("navigationDescription",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locNavigationDescription",{get:function(){return this.getLocalizableString("navigationDescription")},enumerable:!1,configurable:!0}),t.prototype.navigationLocStrChanged=function(){this.locNavigationTitle.isEmpty&&this.locTitle.strChanged(),this.locNavigationTitle.strChanged(),this.locNavigationDescription.strChanged()},t.prototype.getMarkdownHtml=function(t,n,o){var i=e.prototype.getMarkdownHtml.call(this,t,n,o);return"navigationTitle"===n&&this.canShowPageNumber()&&i?this.num+". "+i:i},Object.defineProperty(t.prototype,"passed",{get:function(){return this.getPropertyValue("passed",!1)},set:function(e){this.setPropertyValue("passed",e)},enumerable:!1,configurable:!0}),t.prototype.removeFromParent=function(){this.survey&&this.removeSelfFromList(this.survey.pages)},Object.defineProperty(t.prototype,"visibleIndex",{get:function(){return this.getPropertyValue("visibleIndex",-1)},set:function(e){this.setPropertyValue("visibleIndex",e)},enumerable:!1,configurable:!0}),t.prototype.canRenderFirstRows=function(){return!this.isDesignMode||0==this.visibleIndex},t.prototype.isQuestionIndexRecursive=function(){return e.prototype.isQuestionIndexRecursive.call(this)&&this.isComplexIndex(this.getStartIndex())},t.prototype.getPanelStartIndex=function(e){return this.isQuestionIndexRecursive()?0:e},t.prototype.getQuestionStartIndex=function(){var e=this.getStartIndex();return this.isQuestionIndexRecursive()?this.getQuestionStartIndexVsVisibleIndex(e,this.visibleIndex):e},Object.defineProperty(t.prototype,"isStartPage",{get:function(){return this.survey&&this.survey.isPageStarted(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStarted",{get:function(){return this.isStartPage},enumerable:!1,configurable:!0}),t.prototype.calcCssClasses=function(t){if(this.isPanel)return e.prototype.calcCssClasses.call(this,t);var n={page:{},error:{},pageTitle:"",pageDescription:"",row:"",rowMultiple:"",pageRow:"",rowCompact:"",rowEnter:"",rowLeave:"",rowDelayedEnter:"",rowReplace:""};return this.copyCssClasses(n.page,t.page),this.copyCssClasses(n.error,t.error),t.pageTitle&&(n.pageTitle=t.pageTitle),t.pageDescription&&(n.pageDescription=t.pageDescription),t.row&&(n.row=t.row),t.pageRow&&(n.pageRow=t.pageRow),t.rowMultiple&&(n.rowMultiple=t.rowMultiple),t.rowCompact&&(n.rowCompact=t.rowCompact),t.rowEnter&&(n.rowEnter=t.rowEnter),t.rowDelayedEnter&&(n.rowDelayedEnter=t.rowDelayedEnter),t.rowLeave&&(n.rowLeave=t.rowLeave),t.rowReplace&&(n.rowReplace=t.rowReplace),this.survey&&this.survey.updatePageCssClasses(this,n),n},t.prototype.getCssPanelTitle=function(){return this.isPanel?e.prototype.getCssPanelTitle.call(this):this.cssClasses.page?(new _e).append(this.cssClasses.page.title).toString():""},Object.defineProperty(t.prototype,"cssRoot",{get:function(){return!this.isPanel&&this.cssClasses.page&&this.survey?(new _e).append(this.cssClasses.page.root).append(this.cssClasses.page.emptyHeaderRoot,!(this.survey.renderedHasHeader||this.survey.isShowProgressBarOnTop&&!this.survey.isStaring)).toString():""},enumerable:!1,configurable:!0}),t.prototype.getCssError=function(t){return this.isPanel?e.prototype.getCssError.call(this,t):(new _e).append(e.prototype.getCssError.call(this,t)).append(t.page.errorsContainer).toString()},Object.defineProperty(t.prototype,"navigationButtonsVisibility",{get:function(){var e=this.showNavigationButtons;return null==e?"inherit":e?"show":"hide"},set:function(e){this.showNavigationButtons=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showNavigationButtons",{get:function(){return this.getPropertyValue("showNavigationButtons",void 0)},set:function(e){this.setShowNavigationButtonsProperty(e)},enumerable:!1,configurable:!0}),t.prototype.setShowNavigationButtonsProperty=function(e){"string"==typeof e&&(e=e.toLowerCase()),!0===e||!1===e?this.setPropertyValue("showNavigationButtons",e):"show"===e?this.setPropertyValue("showNavigationButtons",!0):"hide"===e?this.setPropertyValue("showNavigationButtons",!1):this.setPropertyValue("showNavigationButtons",void 0)},Object.defineProperty(t.prototype,"isActive",{get:function(){return!!this.survey&&this.survey.currentPage===this},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wasShown",{get:function(){return this.wasRendered},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasShown",{get:function(){return this.wasRendered},enumerable:!1,configurable:!0}),t.prototype.setWasShown=function(e){e||this.resetWasRendered()},t.prototype.onFirstRenderingCore=function(){var t;if(e.prototype.onFirstRenderingCore.call(this),!this.isDesignMode){for(var n=this.elements,o=0;o<n.length;o++)n[o].isPanel&&n[o].randomizeElements(this.areQuestionsRandomized);if(this.randomizeElements(this.areQuestionsRandomized)){var i=null===(t=this.survey)||void 0===t?void 0:t.currentSingleElement;(null==i?void 0:i.page)===this&&(this.survey.currentSingleElement=this.getFirstVisibleElement())}}},t.prototype.scrollToTop=function(){this.survey&&this.survey.scrollElementToTop(this,null,this,this.id,!1,{block:"start"})},t.prototype.getAllPanels=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var n=new Array;return this.addPanelsIntoList(n,e,t),n},t.prototype.getPanels=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!1),this.getAllPanels(e,t)},Object.defineProperty(t.prototype,"timeLimit",{get:function(){return this.getPropertyValue("timeLimit",0)},set:function(e){this.setPropertyValue("timeLimit",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxTimeToFinish",{get:function(){return this.timeLimit},set:function(e){this.timeLimit=e},enumerable:!1,configurable:!0}),t.prototype.getMaxTimeToFinish=function(){if(0!==this.timeLimit)return this.timeLimit;var e=this.survey?this.survey.timeLimitPerPage:0;return e>0?e:0},t.prototype.onNumChanged=function(e){},t.prototype.onVisibleChanged=function(){this.isRandomizing||(e.prototype.onVisibleChanged.call(this),null!=this.survey&&this.survey.pageVisibilityChanged(this,this.isVisible))},t.prototype.ensureRowsVisibility=function(){e.prototype.ensureRowsVisibility.call(this),this.getPanels().forEach(function(e){return e.ensureRowsVisibility()})},Object.defineProperty(t.prototype,"isReadyForClean",{get:function(){return this._isReadyForClean},set:function(e){var t=this._isReadyForClean;this._isReadyForClean=e,this._isReadyForClean!==t&&this.isReadyForCleanChangedCallback&&this.isReadyForCleanChangedCallback()},enumerable:!1,configurable:!0}),t.prototype.enableOnElementRerenderedEvent=function(){e.prototype.enableOnElementRerenderedEvent.call(this),this.isReadyForClean=!1},t.prototype.disableOnElementRerenderedEvent=function(){e.prototype.disableOnElementRerenderedEvent.call(this),this.isReadyForClean=!0},function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([y({defaultValue:-1,onSet:function(e,t){return t.onNumChanged(e)}})],t.prototype,"num",void 0),t}(Qi);D.addClass("page",[{name:"showNavigationButtons:boolean",defaultFunc:function(){},onSetValue:function(e,t){e&&e.setShowNavigationButtonsProperty(t)},alternativeName:"navigationButtonsVisibility"},{name:"timeLimit:number",alternativeName:"maxTimeToFinish",default:0,minValue:0,visibleIf:function(e){return!!e.survey&&e.survey.showTimer}},{name:"navigationTitle",serializationProperty:"locNavigationTitle"},{name:"navigationDescription",visibleIf:function(e){return!!e.survey&&"buttons"===e.survey.progressBarType},serializationProperty:"locNavigationDescription"},{name:"title:text",serializationProperty:"locTitle"},{name:"description:text",serializationProperty:"locDescription"},{name:"state",visible:!1},{name:"isRequired",visible:!1},{name:"startWithNewLine",visible:!1},{name:"width",visible:!1},{name:"minWidth",visible:!1},{name:"maxWidth",visible:!1},{name:"colSpan",visible:!1,isSerializable:!1},{name:"effectiveColSpan:number",visible:!1,isSerializable:!1},{name:"innerIndent",visible:!1},{name:"indent",visible:!1},{name:"page",visible:!1,isSerializable:!1},{name:"showNumber",visible:!1},{name:"showQuestionNumbers",visible:!1},{name:"questionStartIndex",visible:!1},{name:"allowAdaptiveActions",visible:!1},{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText",visible:!1}],function(){return new Hi},"panel");var Ui=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Wi=function(e){function t(t){var n=e.call(this)||this;return n.survey=t,n.onResize=n.addEvent(),n}return Ui(t,e),t.prototype.isListElementClickable=function(e){return!(this.survey.onServerValidateQuestions&&!this.survey.onServerValidateQuestions.isEmpty&&"onComplete"!==this.survey.checkErrorsMode)||e<=this.survey.currentPageNo+1},t.prototype.getRootCss=function(e){void 0===e&&(e="center");var t=this.survey.css.progressButtonsContainerCenter;return this.survey.css.progressButtonsRoot&&(t+=" "+this.survey.css.progressButtonsRoot+" "+this.survey.css.progressButtonsRoot+"--"+(-1!==["footer","contentBottom"].indexOf(e)?"bottom":"top"),t+=" "+this.survey.css.progressButtonsRoot+"--"+(this.showItemTitles?"with-titles":"no-titles")),this.showItemNumbers&&this.survey.css.progressButtonsNumbered&&(t+=" "+this.survey.css.progressButtonsNumbered),this.isFitToSurveyWidth&&(t+=" "+this.survey.css.progressButtonsFitSurveyWidth),t},t.prototype.getListElementCss=function(e){if(!(e>=this.survey.visiblePages.length))return(new _e).append(this.survey.css.progressButtonsListElementPassed,this.survey.visiblePages[e].passed).append(this.survey.css.progressButtonsListElementCurrent,this.survey.currentPageNo===e).append(this.survey.css.progressButtonsListElementNonClickable,!this.isListElementClickable(e)).toString()},t.prototype.getScrollButtonCss=function(e,t){return(new _e).append(this.survey.css.progressButtonsImageButtonLeft,t).append(this.survey.css.progressButtonsImageButtonRight,!t).append(this.survey.css.progressButtonsImageButtonHidden,!e).toString()},t.prototype.clickListElement=function(e){e instanceof Hi||(e=this.survey.visiblePages[e]),this.survey.tryNavigateToPage(e)},t.prototype.isListContainerHasScroller=function(e){var t=e.querySelector("."+this.survey.css.progressButtonsListContainer);return!!t&&t.scrollWidth>t.offsetWidth},t.prototype.isCanShowItemTitles=function(e){var t=e.querySelector("ul");if(!t||t.children.length<2)return!0;if(t.clientWidth>t.parentElement.clientWidth)return!1;for(var n=t.children[0].clientWidth,o=0;o<t.children.length;o++)if(Math.abs(t.children[o].clientWidth-n)>5)return!1;return!0},t.prototype.clearConnectorsWidth=function(e){for(var t=e.querySelectorAll(".sd-progress-buttons__connector"),n=0;n<t.length;n++)t[n].style.width=""},t.prototype.adjustConnectors=function(e){var t=e.querySelector("ul");if(t)for(var n=e.querySelectorAll(".sd-progress-buttons__connector"),o=this.showItemNumbers?36:20,i=(t.clientWidth-o)/(t.children.length-1)-o,r=0;r<n.length;r++)n[r].style.width=i+"px"},Object.defineProperty(t.prototype,"isFitToSurveyWidth",{get:function(){return"default"===yi.currentType&&"survey"===this.survey.progressBarInheritWidthFrom&&"static"==this.survey.widthMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressWidth",{get:function(){return this.isFitToSurveyWidth?this.survey.renderedWidth:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showItemNumbers",{get:function(){return"default"===yi.currentType&&this.survey.progressBarShowPageNumbers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showItemTitles",{get:function(){return"default"!==yi.currentType||this.survey.progressBarShowPageTitles},enumerable:!1,configurable:!0}),t.prototype.getItemNumber=function(e){var t="";return this.showItemNumbers&&(t+=this.survey.visiblePages.indexOf(e)+1),t},Object.defineProperty(t.prototype,"headerText",{get:function(){return this.survey.currentPage?this.survey.currentPage.renderedNavigationTitle:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerText",{get:function(){return this.progressText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressText",{get:function(){var e=this;return this.getPropertyValue("progressText",void 0,function(){return e.survey.getProgressText()})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressBarAriaLabel",{get:function(){return l("progressbar",this.survey.getLocale())},enumerable:!1,configurable:!0}),t.prototype.resetProgressText=function(){this.resetPropertyValue("progressText")},t.prototype.processResponsiveness=function(e){this.onResize.fire(this,{width:e})},t}(Te),Gi=function(){function e(e,t,n){var o=this;this.model=e,this.element=t,this.viewModel=n,this.criticalProperties=["progressBarType","progressBarShowPageTitles"],this.canShowItemTitles=!0,this.processResponsiveness=function(e,t){if(o.viewModel.onUpdateScroller(e.isListContainerHasScroller(o.element)),o.model.clearConnectorsWidth(o.element),e.showItemTitles){if(e.survey.isMobile)return o.prevWidth=t.width,o.canShowItemTitles=!1,o.model.adjustConnectors(o.element),void o.viewModel.onResize(o.canShowItemTitles);void 0!==o.timer&&clearTimeout(o.timer),o.timer=setTimeout(function(){(void 0===o.prevWidth||o.prevWidth<t.width&&!o.canShowItemTitles||o.prevWidth>t.width&&o.canShowItemTitles)&&(o.prevWidth=t.width,o.canShowItemTitles=e.isCanShowItemTitles(o.element),o.viewModel.onResize(o.canShowItemTitles),o.timer=void 0)},10)}else o.model.adjustConnectors(o.element)},this.model.survey.registerFunctionOnPropertiesValueChanged(this.criticalProperties,function(){return o.forceUpdate()},"ProgressButtonsResponsivityManager"+this.viewModel.container),this.model.onResize.add(this.processResponsiveness),this.forceUpdate()}return e.prototype.forceUpdate=function(){this.viewModel.onUpdateSettings(),this.processResponsiveness(this.model,{})},e.prototype.dispose=function(){clearTimeout(this.timer),this.model.onResize.remove(this.processResponsiveness),this.model.survey.unRegisterFunctionOnPropertiesValueChanged(this.criticalProperties,"ProgressButtonsResponsivityManager"+this.viewModel.container),this.element=void 0,this.model=void 0},e}();function Ji(e,t){return e.isDesignMode||t.focusFirstQuestion(),!0}function Ki(e){if(e.parentQuestion)return Ki(e.parentQuestion);for(var t=e.parent;t&&"page"!==t.getType()&&t.parent;)t=t.parent;return t&&"page"===t.getType()?t:null}function Yi(e,t){var n=Xi(e,t),o={items:n,searchEnabled:!1,locOwner:e,listRole:"menu",listItemRole:"menuitemradio",listAriaLabel:l("toc",e.getLocale())},i=new tt(o);i.allowSelection=!1;var r=function(e,t){i.selectedItem=!!e&&i.actions.filter(function(t){return t.id===e.name})[0]||t};r(e.currentPage,n[0]),e.onCurrentPageChanged.add(function(t,n){r(e.currentPage)}),e.onFocusInQuestion.add(function(e,t){r(Ki(t.question))});var s=function(){i.setItems(Xi(e,t))};return e.registerFunctionOnPropertyValueChanged("pages",s,"toc"),e.onEndLoadingFromJson.add(s),i}function Xi(e,t){return(e.pages||[]).map(function(n){return new dt({id:n.name,locTitle:n.locNavigationTitle,action:function(){return o.activeElementBlur(),t&&t(),n.isPage?e.tryNavigateToPage(n):n.isPanel?Ji(e,n):void 0},visible:new Ie(function(){return n.isVisible&&!n.isStartPage})})})}function Zi(e,t){void 0===t&&(t=!1);var n=$i.RootStyle;return t?n+" "+$i.RootStyle+"--mobile":(n+=" "+$i.RootStyle+"--"+(e.tocLocation||"").toLowerCase(),$i.StickyPosition&&(n+=" "+$i.RootStyle+"--sticky"),n)}var $i=function(){function e(t){var n=this;this.survey=t,this.icon="icon-navmenu_24x24",this.togglePopup=function(){n.popupModel.toggleVisibility()},this.listModel=Yi(t,function(){n.popupModel.isVisible=!1}),this.popupModel=new it("sv-list",{model:this.listModel}),this.popupModel.overlayDisplayMode="tablet-dropdown-overlay",this.popupModel.displayMode=new Ie(function(){return n.isMobile?"overlay":"popup"}),e.StickyPosition&&(t.onAfterRenderSurvey.add(function(e,t){return n.initStickyTOCSubscriptions(t.htmlElement)}),this.initStickyTOCSubscriptions(t.rootElement))}return e.prototype.initStickyTOCSubscriptions=function(t){var n=this;e.StickyPosition&&t&&(t.addEventListener("scroll",function(e){n.updateStickyTOCSize(t)}),this.updateStickyTOCSize(t))},e.prototype.updateStickyTOCSize=function(t){if(t){var n=t.querySelector("."+e.RootStyle);if(n&&(n.style.height="",!this.isMobile&&e.StickyPosition&&t)){var o=t.getBoundingClientRect().height,i=this.survey.findLayoutElement("advanced-header"),r=i&&i.data,s=!r||r.hasBackground,a="advanced"===this.survey.headerView?".sv-header":".sv_custom_header+div div."+(this.survey.css.title||"sd-title"),l=t.querySelector(a),u=l&&s?l.getBoundingClientRect().height:0,c=t.querySelector(".sv-scroll__scroller")||t,p=c.scrollTop>u?0:u-c.scrollTop;n.style.height=o-p-1+"px"}}},Object.defineProperty(e.prototype,"isMobile",{get:function(){return this.survey.isMobile},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerCss",{get:function(){return Zi(this.survey,this.isMobile)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){var e=this.survey.unRegisterFunctionOnPropertyValueChanged("pages","toc")[0];this.survey.onEndLoadingFromJson.remove(e),this.survey.onPageAdded.remove(e),this.popupModel.dispose(),this.listModel.dispose()},e.RootStyle="sv_progress-toc",e.StickyPosition=!0,e}(),er=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),tr=function(e){function t(t){var n=e.call(this)||this;return n.survey=t,n.locOwner=t,n.setItems(n.createNavigationActions()),n.updateCss(),n}return er(t,e),t.prototype.createNavigationActions=function(){var e=this,t="sv-nav-btn",n=new dt({id:"sv-nav-start",visible:new Ie(function(){return e.survey.isStartPageActive}),visibleIndex:10,locTitle:this.survey.locStartSurveyText,action:function(){return e.survey.start()},component:t}),o=new dt({id:"sv-nav-prev",visible:new Ie(function(){return e.survey.isShowPrevButton}),visibleIndex:20,data:{mouseDown:function(){return e.survey.navigationMouseDown()}},locTitle:this.survey.locPagePrevText,action:function(){return e.survey.performPrevious()},component:t}),i=new dt({id:"sv-nav-next",visible:new Ie(function(){return e.survey.isShowNextButton}),visibleIndex:30,data:{mouseDown:function(){return e.survey.nextPageMouseDown()}},locTitle:this.survey.locPageNextText,action:function(){return e.survey.nextPageUIClick()},component:t}),r=new dt({id:"sv-nav-preview",visible:new Ie(function(){return e.survey.isPreviewButtonVisible}),visibleIndex:40,data:{mouseDown:function(){return e.survey.navigationMouseDown()}},locTitle:this.survey.locPreviewText,action:function(){return e.survey.showPreview()},component:t}),s=new dt({id:"sv-nav-complete",visible:new Ie(function(){return e.survey.isCompleteButtonVisible}),visibleIndex:50,data:{mouseDown:function(){return e.survey.navigationMouseDown()}},locTitle:this.survey.locCompleteText,action:function(){return e.survey.waitAndExecute(function(){return e.survey.tryComplete()})},component:t});return this._updateNavigationItemCssCallback=function(){n.innerCss=e.cssNavigationStart,o.innerCss=e.cssNavigationPrev,i.innerCss=e.cssNavigationNext,r.innerCss=e.cssNavigationPreview,s.innerCss=e.cssNavigationComplete},[n,o,i,r,s]},t.prototype.getNavigationCss=function(e,t){return(new _e).append(e).append(t).toString()},Object.defineProperty(t.prototype,"cssNavigationComplete",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.survey.css.navigation.complete)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationPreview",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.survey.css.navigation.preview)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationPrev",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.survey.css.navigation.prev)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationStart",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.survey.css.navigation.start)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationNext",{get:function(){return this.getNavigationCss(this.cssSurveyNavigationButton,this.survey.css.navigation.next)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssSurveyNavigationButton",{get:function(){return(new _e).append(this.survey.css.navigationButton).append(this.survey.css.bodyNavigationButton).toString()},enumerable:!1,configurable:!0}),t.prototype.updateCss=function(){this.cssClasses=this.survey.css.actionBar,this.containerCss=this.survey.css.footer,this._updateNavigationItemCssCallback()},t.prototype.removeActionById=function(e){var t=this.getActionById(e);return!!t&&(this.actions.splice(this.actions.indexOf(t),1),!0)},t.prototype.addAction=function(t){var n=this;t.component||(t.component="sv-nav-btn"),t.innerCss||(t.innerCss=this.cssSurveyNavigationButton);var o=t.action;return t.action=function(){n.survey.waitAndExecute(function(){return o()})},e.prototype.addAction.call(this,t)},t}(qe),nr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),or=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},ir=function(e){function t(t,n,o){var i=e.call(this)||this;return i.survey=t,i.valuesHash=n,i.variablesHash=o,i}return nr(t,e),t.prototype.getValue=function(t,n,o,i){if(1===t.length){var r=t[0].name,s=this.getBuiltInVariableValue(r);if("locale"===r&&(s=this.survey.locale||a.defaultLocale),void 0!==s)return{value:s,isFound:!0}}var l=new N(this.variablesHash).getValue(t,n,o,i);return l&&l.isFound||(l=e.prototype.getValue.call(this,t,n,o,i))&&l.isFound?l:new N(this.valuesHash).getValue(t,n,o,i)},t.prototype.updateValueByItem=function(e,t){var n=gn.expressionVariables.unwrapPostfix,o=e.endsWith(n);o&&(e=e.substring(0,e.length-n.length));var i=this.survey.getQuestionByValueName(e,!0);i&&(t.isFound=!0,t.context=i.getValueGetterContext(o))},t.prototype.isSearchNameRevert=function(){return!0},t.prototype.getBuiltInVariableValue=function(e){var t=this.survey;if("pageno"===(e=e.toLocaleLowerCase())){var n=t.currentPage;return null!=n?t.visiblePages.indexOf(n)+1:0}return"pagecount"===e?t.visiblePageCount:"correctedanswers"===e||"correctanswers"===e||"correctedanswercount"===e?t.getCorrectedAnswerCount():"incorrectedanswers"===e||"incorrectanswers"===e||"incorrectedanswercount"===e?t.getInCorrectedAnswerCount():"questioncount"===e?t.getQuizQuestionCount():void 0},t}(_),rr=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var o=e.call(this)||this;return o.valuesHash={},o.variablesHash={},o.onEndLoadingFromJson=o.addEvent(),o.onTriggerExecuted=o.addEvent(),o.onCompleting=o.addEvent(),o.onComplete=o.addEvent(),o.onShowingPreview=o.addEvent(),o.onNavigateToUrl=o.addEvent(),o.onStarted=o.addEvent(),o.onPartialSend=o.addEvent(),o.onCurrentPageChanging=o.addEvent(),o.onCurrentPageChanged=o.addEvent(),o.onValueChanging=o.addEvent(),o.onValueChanged=o.addEvent(),o.onVariableChanged=o.addEvent(),o.onQuestionVisibleChanged=o.addEvent(),o.onVisibleChanged=o.onQuestionVisibleChanged,o.onPageVisibleChanged=o.addEvent(),o.onPanelVisibleChanged=o.addEvent(),o.onQuestionCreated=o.addEvent(),o.onQuestionAdded=o.addEvent(),o.onQuestionRemoved=o.addEvent(),o.onPanelAdded=o.addEvent(),o.onPanelRemoved=o.addEvent(),o.onPageAdded=o.addEvent(),o.onValidateQuestion=o.addEvent(),o.onSettingQuestionErrors=o.addEvent(),o.onServerValidateQuestions=o.addEvent(),o.onValidatePanel=o.addEvent(),o.onErrorCustomText=o.addEvent(),o.onValidatePage=o.addEvent(),o.onValidatedErrorsOnCurrentPage=o.onValidatePage,o.onProcessHtml=o.addEvent(),o.onGetQuestionDisplayValue=o.addEvent(),o.onGetQuestionTitle=o.addEvent(),o.onGetTitleTagName=o.addEvent(),o.onGetQuestionNumber=o.addEvent(),o.onGetQuestionNo=o.onGetQuestionNumber,o.onGetPanelNumber=o.addEvent(),o.onGetPageNumber=o.addEvent(),o.onGetProgressText=o.addEvent(),o.onProgressText=o.onGetProgressText,o.onTextMarkdown=o.addEvent(),o.onTextRenderAs=o.addEvent(),o.onSendResult=o.addEvent(),o.onGetResult=o.addEvent(),o.onOpenFileChooser=o.addEvent(),o.onUploadFiles=o.addEvent(),o.onDownloadFile=o.addEvent(),o.onClearFiles=o.addEvent(),o.onChoicesLoaded=o.addEvent(),o.onLoadChoicesFromServer=o.onChoicesLoaded,o.onLoadedSurveyFromService=o.addEvent(),o.onProcessDynamicText=o.addEvent(),o.onProcessTextValue=o.onProcessDynamicText,o.onUpdateQuestionCssClasses=o.addEvent(),o.onUpdatePanelCssClasses=o.addEvent(),o.onUpdatePageCssClasses=o.addEvent(),o.onUpdateChoiceItemCss=o.addEvent(),o.onAfterRenderSurvey=o.addEvent(),o.onAfterRenderHeader=o.addEvent(),o.onAfterRenderPage=o.addEvent(),o.onAfterRenderQuestion=o.addEvent(),o.onAfterRenderQuestionInput=o.addEvent(),o.onAfterRenderPanel=o.addEvent(),o.onFocusInQuestion=o.addEvent(),o.onFocusInPanel=o.addEvent(),o.onShowingChoiceItem=o.addEvent(),o.onChoicesLazyLoad=o.addEvent(),o.onChoicesSearch=o.addEvent(),o.onGetChoiceDisplayValue=o.addEvent(),o.onMatrixRowAdded=o.addEvent(),o.onMatrixRowAdding=o.addEvent(),o.onMatrixBeforeRowAdded=o.onMatrixRowAdding,o.onMatrixRowRemoving=o.addEvent(),o.onMatrixRowRemoved=o.addEvent(),o.onMatrixRenderRemoveButton=o.addEvent(),o.onMatrixAllowRemoveRow=o.onMatrixRenderRemoveButton,o.onMatrixDetailPanelVisibleChanged=o.addEvent(),o.onMatrixCellCreating=o.addEvent(),o.onMatrixCellCreated=o.addEvent(),o.onAfterRenderMatrixCell=o.addEvent(),o.onMatrixAfterCellRender=o.onAfterRenderMatrixCell,o.onMatrixCellValueChanged=o.addEvent(),o.onMatrixCellValueChanging=o.addEvent(),o.onMatrixCellValidate=o.addEvent(),o.onMatrixColumnAdded=o.addEvent(),o.onMultipleTextItemAdded=o.addEvent(),o.onDynamicPanelAdded=o.addEvent(),o.onDynamicPanelRemoved=o.addEvent(),o.onDynamicPanelRemoving=o.addEvent(),o.onTimerTick=o.addEvent(),o.onTimer=o.onTimerTick,o.onTimerPanelInfoText=o.addEvent(),o.onDynamicPanelValueChanged=o.addEvent(),o.onDynamicPanelItemValueChanged=o.onDynamicPanelValueChanged,o.onDynamicPanelValueChanging=o.addEvent(),o.onGetDynamicPanelTabTitle=o.addEvent(),o.onDynamicPanelCurrentIndexChanged=o.addEvent(),o.onCheckAnswerCorrect=o.addEvent(),o.onIsAnswerCorrect=o.onCheckAnswerCorrect,o.onDragDropAllow=o.addEvent(),o.onMatrixRowDragOver=o.addEvent(),o.onExpressionRunning=o.addEvent(),o.onScrollToTop=o.addEvent(),o.onScrollingElementToTop=o.onScrollToTop,o.onLocaleChangedEvent=o.addEvent(),o.onGetQuestionTitleActions=o.addEvent(),o.onGetPanelTitleActions=o.addEvent(),o.onGetPageTitleActions=o.addEvent(),o.onGetPanelFooterActions=o.addEvent(),o.onGetMatrixRowActions=o.addEvent(),o.onElementContentVisibilityChanged=o.addEvent(),o.onGetExpressionDisplayValue=o.addEvent(),o.onCheckSingleInputPerPageMode=o.addEvent(),o.onGetLoopQuestions=o.addEvent(),o.onPopupVisibleChanged=o.addEvent(),o.onOpenDropdownMenu=o.addEvent(),o.onElementWrapperComponentName=o.addEvent(),o.onElementWrapperComponentData=o.addEvent(),o.onCreateCustomChoiceItem=o.addEvent(),o.jsonErrors=null,o.cssValue=null,o.showHeaderOnCompletePage="auto",o._isLazyRenderingSuspended=!1,o.hideRequiredErrors=!1,o.cssVariables={},o._isMobile=!1,o._isCompact=!1,o.setValueOnExpressionCounter=0,o._isDesignMode=!1,o.validationAllowSwitchPages=!1,o.validationAllowComplete=!1,o.isNavigationButtonPressed=!1,o.mouseDownPage=null,o.isSmoothScrollEnabled=!1,o.onResize=new Ae,o.isCurrentPageRendering=!0,o.isCurrentPageRendered=void 0,o.skeletonHeight=void 0,o.isTriggerIsRunning=!1,o.triggerKeys=null,o.isValueChangedOnRunningCondition=!1,o.conditionRunnerCounter=0,o.conditionUpdateVisibleIndexes=!1,o.conditionNotifyElementsOnAnyValueOrVariableChanged=!1,o.isEndLoadingFromJson=null,o.nofifyQuesitonHash={},o.questionHashes={names:{},namesInsensitive:{},valueNames:{},valueNamesInsensitive:{}},o.setValueFromTriggerCounter=0,o.isMovingPage=!1,o.needRenderIcons=!0,o.skippedPages=[],o.skeletonComponentName="sv-skeleton",o.taskManager=new Li,o.questionErrorComponent="sv-question-error",o.onBeforeRunConstructor(),o.createHtmlLocString("completedHtml","completingSurvey"),o.createHtmlLocString("completedBeforeHtml","completingSurveyBefore","completed-before"),o.createHtmlLocString("loadingHtml","loadingSurvey","loading"),o.createLocalizableString("emptySurveyText",o,!0,"emptySurvey"),o.createLocalizableString("logo",o,!1),o.createLocalizableString("startSurveyText",o,!1,!0),o.createLocalizableString("pagePrevText",o,!1,!0),o.createLocalizableString("pageNextText",o,!1,!0),o.createLocalizableString("completeText",o,!1,!0),o.createLocalizableString("previewText",o,!1,!0),o.createLocalizableString("editText",o,!1,!0),o.createLocalizableString("questionTitleTemplate",o,!0),o.timerModelValue=new Vi(o),o.timerModelValue.onTimerTick=function(e){o.doTimer(e)},o.createNewArray("pages",function(e){e.isReadyForCleanChangedCallback&&e.isReadyForCleanChangedCallback(),o.doOnPageAdded(e)},function(e){e.isReadyForClean?o.doOnPageRemoved(e):e.isReadyForCleanChangedCallback=function(){o.doOnPageRemoved(e),e.isReadyForCleanChangedCallback=void 0}}),o.createNewArray("triggers",function(e){e.setOwner(o)}),o.createNewArray("calculatedValues",function(e){e.setOwner(o)}),o.createNewArray("completedHtmlOnCondition",function(e){e.locOwner=o}),o.createNewArray("navigateToUrlOnCondition",function(e){e.locOwner=o}),o.registerPropertyChangedHandlers(["locale"],function(){o.onSurveyLocaleChanged()}),o.registerPropertyChangedHandlers(["firstPageIsStartPage"],function(){o.onFirstPageIsStartedChanged()}),o.registerPropertyChangedHandlers(["readOnly"],function(){o.onReadOnlyChanged()}),o.registerPropertyChangedHandlers(["progressBarType"],function(){o.updateProgressText()}),o.registerPropertyChangedHandlers(["questionStartIndex","requiredMark","questionTitlePattern"],function(){o.resetVisibleIndexes()}),o.registerPropertyChangedHandlers(["isLoading","isCompleted","isCompletedBefore","readOnly","isStartedState","currentPage","isShowingPreview"],function(){o.updateState()}),o.registerPropertyChangedHandlers(["state","currentPage","showPreviewBeforeComplete"],function(){o.onStateAndCurrentPageChanged()}),o.registerPropertyChangedHandlers(["logo","logoPosition"],function(){o.resetHasLogo()}),o.registerPropertyChangedHandlers(["backgroundImage"],function(){o.resetPropertyValue("renderBackgroundImage")}),o.registerPropertyChangedHandlers(["backgroundImage","backgroundOpacity","backgroundImageFit","fitToContainer","backgroundImageAttachment"],function(){o.resetPropertyValue("backgroundImageStyle")}),o.registerPropertyChangedHandlers(["showPrevButton","showCompleteButton"],function(){o.updateButtonsVisibility()}),o.onGetQuestionNumber.onCallbacksChanged=function(){o.resetVisibleIndexes()},o.onGetPanelNumber.onCallbacksChanged=function(){o.resetVisibleIndexes()},o.onGetProgressText.onCallbacksChanged=function(){o.updateProgressText()},o.onTextMarkdown.onCallbacksChanged=function(){o.locStrsChanged()},o.onProcessHtml.onCallbacksChanged=function(){o.locStrsChanged()},o.onGetQuestionTitle.onCallbacksChanged=function(){o.locStrsChanged()},o.onUpdatePageCssClasses.onCallbacksChanged=function(){o.currentPage&&o.currentPage.updateElementCss()},o.onUpdatePanelCssClasses.onCallbacksChanged=function(){o.currentPage&&o.currentPage.updateElementCss()},o.onUpdateQuestionCssClasses.onCallbacksChanged=function(){o.currentPage&&o.currentPage.updateElementCss()},o.onShowingChoiceItem.onCallbacksChanged=function(){o.rebuildQuestionChoices()},o.locTitle.onStringChanged.add(function(){return o.resetPropertyValue("titleIsEmpty")}),o.onBeforeCreating(),t&&(("string"==typeof t||t instanceof String)&&(t=JSON.parse(t)),t&&t.clientId&&(o.clientId=t.clientId),o.fromJSON(t),o.surveyId&&o.loadSurveyFromService(o.surveyId,o.clientId)),o.onCreating(),n&&o.render(n),o.updateCss(),o.setCalculatedWidthModeUpdater(),o.notifier=new Si(o.css.saveData),o.notifier.addAction(o.createTryAgainAction(),"error"),o.onPopupVisibleChanged.add(function(e,t){t.visible?o.onScrollCallback=function(){t.popup.hide()}:o.onScrollCallback=void 0}),o.layoutElements.push({id:"timerpanel",template:"survey-timerpanel",component:"sv-timerpanel",data:o.timerModel}),o.layoutElements.push({id:"progress-buttons",component:"sv-progress-buttons",getData:function(){return o.progressBar},processResponsiveness:function(e){return o.progressBar.processResponsiveness&&o.progressBar.processResponsiveness(e)}}),o.layoutElements.push({id:"progress-questions",component:"sv-progress-questions",data:o}),o.layoutElements.push({id:"progress-pages",component:"sv-progress-pages",data:o}),o.layoutElements.push({id:"progress-correctquestions",component:"sv-progress-correctquestions",data:o}),o.layoutElements.push({id:"progress-requiredquestions",component:"sv-progress-requiredquestions",data:o}),o.addLayoutElement({id:"toc-navigation",component:"sv-navigation-toc",getData:function(){return o.tocModel},processResponsiveness:function(e){return o.tocModel.updateStickyTOCSize(o.rootElement)}}),o.layoutElements.push({id:"buttons-navigation",component:"sv-action-bar",getData:function(){return o.navigationBar}}),o.layoutElements.push({id:"buttons-navigation-top",component:"sv-action-bar",getData:function(){return o.navigationBarTop}}),o}return nr(t,e),Object.defineProperty(t.prototype,"platformName",{get:function(){return t.platform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentSuffix",{get:function(){return gn.commentSuffix},set:function(e){gn.commentSuffix=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentPrefix",{get:function(){return this.commentSuffix},set:function(e){this.commentSuffix=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tocModel",{get:function(){return this.tocModelValue||(this.tocModelValue=new $i(this)),this.tocModelValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sjsVersion",{get:function(){return this.getPropertyValue("sjsVersion")},set:function(e){this.setPropertyValue("sjsVersion",e)},enumerable:!1,configurable:!0}),t.prototype.processClosedPopup=function(e,t){throw new Error("Method not implemented.")},t.prototype.createTryAgainAction=function(){var e=this;return{id:"save-again",title:this.getLocalizationString("saveAgainButton"),action:function(){e.isCompleted?e.saveDataOnComplete():e.doComplete()}}},t.prototype.createHtmlLocString=function(e,t,n){var o=this,i=this.createLocalizableString(e,this,!1,t);n&&(i.onGetTextCallback=function(e){return o.processHtml(e,n)})},t.prototype.getType=function(){return"survey"},t.prototype.onPropertyValueChanged=function(e,t,n){"questionsOnPageMode"===e&&this.onQuestionsOnPageModeChanged(t)},Object.defineProperty(t.prototype,"pages",{get:function(){return this.getPropertyValue("pages")},enumerable:!1,configurable:!0}),t.prototype.render=function(e){void 0===e&&(e=null),this.renderCallback&&this.renderCallback()},t.prototype.updateSurvey=function(e,t){var n=function(){if("model"==i||"children"==i)return"continue";if(0==i.indexOf("on")&&o[i]&&o[i].add){var t=e[i];o[i].add(function(e,n){t(e,n)})}else o[i]=e[i]},o=this;for(var i in e)n();e&&e.data&&this.onValueChanged.add(function(t,n){e.data[n.name]=n.value})},t.prototype.getCss=function(){return this.css},t.prototype.updateCompletedPageCss=function(){this.containerCss=this.css.container,this.completedCss=(new _e).append(this.css.body).append(this.css.completedPage).toString(),this.completedBeforeCss=(new _e).append(this.css.body).append(this.css.completedBeforePage).toString(),this.loadingBodyCss=(new _e).append(this.css.body).append(this.css.bodyLoading).toString()},t.prototype.updateCss=function(){var e,t;this.rootCss=this.getRootCss(),null===(e=this.navigationBarValue)||void 0===e||e.updateCss(),null===(t=this.navigationBarTopValue)||void 0===t||t.updateCss(),this.updateCompletedPageCss(),this.updateWrapperFormCss()},Object.defineProperty(t.prototype,"css",{get:function(){return this.cssValue||(this.cssValue={},this.copyCssClasses(this.cssValue,yi.getCss())),this.cssValue},set:function(e){this.setCss(e)},enumerable:!1,configurable:!0}),t.prototype.setCss=function(e,t){void 0===t&&(t=!0),t?this.mergeValues(e,this.css):this.cssValue=e,this.updateElementCss(!1)},Object.defineProperty(t.prototype,"cssTitle",{get:function(){return this.css.title},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodyCss",{get:function(){return(new _e).append(this.css.body).append(this.css.bodyWithTimer,this.showTimer&&"running"===this.state).append(this.css.body+"--"+this.calculatedWidthMode).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodyContainerCss",{get:function(){return this.css.bodyContainer},enumerable:!1,configurable:!0}),t.prototype.insertAdvancedHeader=function(e){e.survey=this,this.layoutElements.push({id:"advanced-header",container:"header",component:"sv-header",index:-100,data:e,processResponsiveness:function(t){return e.processResponsiveness()}})},Object.defineProperty(t.prototype,"lazyRenderEnabled",{get:function(){return!0===this.lazyRenderEnabledValue},set:function(e){if(this.lazyRenderEnabled!==e){this.lazyRenderEnabledValue=e;var t=this.currentPage;t&&t.updateRows()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lazyRendering",{get:function(){return this.lazyRenderEnabled},set:function(e){this.lazyRenderEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLazyRendering",{get:function(){return this.lazyRenderEnabled||gn.lazyRender.enabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lazyRenderFirstBatchSize",{get:function(){return this.lazyRenderFirstBatchSizeValue||gn.lazyRender.firstBatchSize},set:function(e){this.lazyRenderFirstBatchSizeValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLazyRenderingSuspended",{get:function(){return this._isLazyRenderingSuspended},enumerable:!1,configurable:!0}),t.prototype.suspendLazyRendering=function(){this.isLazyRendering&&(this._isLazyRenderingSuspended=!0)},t.prototype.releaseLazyRendering=function(){this.isLazyRendering&&(this._isLazyRenderingSuspended=!1)},t.prototype.updateLazyRenderingRowsOnRemovingElements=function(){var e,t;if(this.isLazyRendering){var n=this.currentPage;n&&Ft(null===(t=this.rootElement||(null===(e=this.creator)||void 0===e?void 0:e.rootElement))||void 0===t?void 0:t.querySelector("#".concat(n.id)))}},Object.defineProperty(t.prototype,"triggers",{get:function(){return this.getPropertyValue("triggers")},set:function(e){this.setPropertyValue("triggers",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"calculatedValues",{get:function(){return this.getPropertyValue("calculatedValues")},set:function(e){this.setPropertyValue("calculatedValues",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"surveyId",{get:function(){return this.getPropertyValue("surveyId","")},set:function(e){this.setPropertyValue("surveyId",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"surveyPostId",{get:function(){return this.getPropertyValue("surveyPostId","")},set:function(e){this.setPropertyValue("surveyPostId",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientId",{get:function(){return this.getPropertyValue("clientId","")},set:function(e){this.setPropertyValue("clientId",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cookieName",{get:function(){return this.getPropertyValue("cookieName","")},set:function(e){this.setPropertyValue("cookieName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"partialSendEnabled",{get:function(){return this.getPropertyValue("partialSendEnabled")},set:function(e){this.setPropertyValue("partialSendEnabled",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sendResultOnPageNext",{get:function(){return this.partialSendEnabled},set:function(e){this.partialSendEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"surveyShowDataSaving",{get:function(){return this.getPropertyValue("surveyShowDataSaving")},set:function(e){this.setPropertyValue("surveyShowDataSaving",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoFocusFirstQuestion",{get:function(){return this.getPropertyValue("autoFocusFirstQuestion")},set:function(e){this.setPropertyValue("autoFocusFirstQuestion",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusFirstQuestionAutomatic",{get:function(){return this.autoFocusFirstQuestion},set:function(e){this.autoFocusFirstQuestion=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoFocusFirstError",{get:function(){return this.getPropertyValue("autoFocusFirstError")},set:function(e){this.setPropertyValue("autoFocusFirstError",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusOnFirstError",{get:function(){return this.autoFocusFirstError},set:function(e){this.autoFocusFirstError=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showNavigationButtons",{get:function(){return this.getPropertyValue("showNavigationButtons")},set:function(e){"both"===e&&(e="topBottom");var t=["top","bottom","topBottom"].indexOf(e)>-1,n=!0===e||t;this.setPropertyValue("showNavigationButtons",n),t&&(this.navigationButtonsLocation=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"navigationButtonsLocation",{get:function(){return this.getPropertyValue("navigationButtonsLocation")},set:function(e){this.setPropertyValue("navigationButtonsLocation",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPrevButton",{get:function(){return this.getPropertyValue("showPrevButton")},set:function(e){this.setPropertyValue("showPrevButton",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCompleteButton",{get:function(){return this.getPropertyValue("showCompleteButton",!0)},set:function(e){this.setPropertyValue("showCompleteButton",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTOC",{get:function(){return this.getPropertyValue("showTOC")},set:function(e){this.setPropertyValue("showTOC",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tocLocation",{get:function(){return this.getPropertyValue("tocLocation")},set:function(e){this.setPropertyValue("tocLocation",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTitle",{get:function(){return this.getPropertyValue("showTitle")},set:function(e){this.setPropertyValue("showTitle",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPageTitles",{get:function(){return this.getPropertyValue("showPageTitles")},set:function(e){this.setPropertyValue("showPageTitles",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCompletePage",{get:function(){return this.getPropertyValue("showCompletePage")},set:function(e){this.setPropertyValue("showCompletePage",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCompletedPage",{get:function(){return this.showCompletePage},set:function(e){this.showCompletePage=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"navigateToUrl",{get:function(){return this.getPropertyValue("navigateToUrl")},set:function(e){this.setPropertyValue("navigateToUrl",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"navigateToUrlOnCondition",{get:function(){return this.getPropertyValue("navigateToUrlOnCondition")},set:function(e){this.setPropertyValue("navigateToUrlOnCondition",e)},enumerable:!1,configurable:!0}),t.prototype.getNavigateToUrl=function(){var e=this.getExpressionItemOnRunCondition(this.navigateToUrlOnCondition),t=e?e.url:this.navigateToUrl;return t&&(t=this.processText(t,!1)),t},t.prototype.navigateTo=function(){var e,t,o={url:this.getNavigateToUrl(),allow:!0};this.onNavigateToUrl.fire(this,o),o.url&&o.allow&&(e=o.url,t=n.getLocation(),e&&t&&(t.href=function(e){return e&&e.toLocaleLowerCase().indexOf("javascript:")>-1?encodeURIComponent(e):e}(e)))},Object.defineProperty(t.prototype,"requiredMark",{get:function(){return this.getPropertyValue("requiredMark")},set:function(e){this.setPropertyValue("requiredMark",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredText",{get:function(){return this.requiredMark},set:function(e){this.requiredMark=e},enumerable:!1,configurable:!0}),t.prototype.beforeSettingQuestionErrors=function(e,t){this.makeRequiredErrorsInvisible(t),this.onSettingQuestionErrors.fire(this,{question:e,errors:t})},t.prototype.makeRequiredErrorsInvisible=function(e){if(this.hideRequiredErrors)for(var t=0;t<e.length;t++){var n=e[t].getErrorType();"required"!=n&&"requireoneanswer"!=n||(e[t].visible=!1)}},Object.defineProperty(t.prototype,"questionStartIndex",{get:function(){return this.getPropertyValue("questionStartIndex")||""},set:function(e){this.setPropertyValue("questionStartIndex",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storeOthersAsComment",{get:function(){return this.getPropertyValue("storeOthersAsComment")},set:function(e){this.setPropertyValue("storeOthersAsComment",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxTextLength",{get:function(){return this.getPropertyValue("maxTextLength")},set:function(e){this.setPropertyValue("maxTextLength",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxCommentLength",{get:function(){return this.getPropertyValue("maxCommentLength")},set:function(e){this.setPropertyValue("maxCommentLength",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOthersLength",{get:function(){return this.maxCommentLength},set:function(e){this.maxCommentLength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoAdvanceEnabled",{get:function(){return this.getPropertyValue("autoAdvanceEnabled")},set:function(e){this.setPropertyValue("autoAdvanceEnabled",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"goNextPageAutomatic",{get:function(){return this.autoAdvanceEnabled},set:function(e){this.autoAdvanceEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoAdvanceAllowComplete",{get:function(){return this.getPropertyValue("autoAdvanceAllowComplete")},set:function(e){this.setPropertyValue("autoAdvanceAllowComplete",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowCompleteSurveyAutomatic",{get:function(){return this.autoAdvanceAllowComplete},set:function(e){this.autoAdvanceAllowComplete=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"checkErrorsMode",{get:function(){return this.getPropertyValue("checkErrorsMode")},set:function(e){this.setPropertyValue("checkErrorsMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validateVisitedEmptyFields",{get:function(){return this.getPropertyValue("validateVisitedEmptyFields")},set:function(e){this.setPropertyValue("validateVisitedEmptyFields",e)},enumerable:!1,configurable:!0}),t.prototype.getValidateVisitedEmptyFields=function(){return this.validateVisitedEmptyFields&&this.isValidateOnValueChange},Object.defineProperty(t.prototype,"autoGrowComment",{get:function(){return this.getPropertyValue("autoGrowComment")},set:function(e){this.setPropertyValue("autoGrowComment",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowResizeComment",{get:function(){return this.getPropertyValue("allowResizeComment")},set:function(e){this.setPropertyValue("allowResizeComment",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentAreaRows",{get:function(){return this.getPropertyValue("commentAreaRows")},set:function(e){this.setPropertyValue("commentAreaRows",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textUpdateMode",{get:function(){return this.getPropertyValue("textUpdateMode")},set:function(e){this.setPropertyValue("textUpdateMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearInvisibleValues",{get:function(){return this.getPropertyValue("clearInvisibleValues")},set:function(e){!0===e&&(e="onComplete"),!1===e&&(e="none"),this.setPropertyValue("clearInvisibleValues",e)},enumerable:!1,configurable:!0}),t.prototype.clearIncorrectValues=function(e){void 0===e&&(e=!1);for(var t=0;t<this.pages.length;t++)this.pages[t].clearIncorrectValues();if(e){var n=this.data,o=!1;for(var i in n)if(!this.getQuestionByValueName(i)&&!this.iscorrectValueWithPostPrefix(i,gn.commentSuffix)&&!this.iscorrectValueWithPostPrefix(i,gn.matrix.totalsSuffix)){var r=this.getCalculatedValueByName(i);r&&r.includeIntoResult||(o=!0,delete n[i])}o&&(this.data=n)}},t.prototype.iscorrectValueWithPostPrefix=function(e,t){return e.indexOf(t)===e.length-t.length&&!!this.getQuestionByValueName(e.substring(0,e.indexOf(t)))},Object.defineProperty(t.prototype,"keepIncorrectValues",{get:function(){return this.getPropertyValue("keepIncorrectValues")},set:function(e){this.setPropertyValue("keepIncorrectValues",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.getPropertyValueWithoutDefault("locale")||a.currentLocale},set:function(e){e!==a.defaultLocale||a.currentLocale||(e=""),this.setPropertyValue("locale",e)},enumerable:!1,configurable:!0}),t.prototype.onSurveyLocaleChanged=function(){this.notifyElementsOnAnyValueOrVariableChanged("locale"),this.localeChanged(),this.onLocaleChangedEvent.fire(this,this.locale)},Object.defineProperty(t.prototype,"localeDir",{get:function(){return a.localeDirections[this.locale]},enumerable:!1,configurable:!0}),t.prototype.getUsedLocales=function(){var e=new Array;this.addUsedLocales(e);var t=e.indexOf("default");if(t>-1){var n=a.defaultLocale,o=e.indexOf(n);o>-1&&e.splice(o,1),t=e.indexOf("default"),e[t]=n}return e},t.prototype.localeChanged=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].localeChanged()},t.prototype.getLocale=function(){return this.locale},t.prototype.locStrsChanged=function(){var t,n;if(!this.isClearingUnsedValues&&(e.prototype.locStrsChanged.call(this),this.currentPage)){if(this.isDesignMode)this.pages.forEach(function(e){return e.locStrsChanged()});else{var o=this.activePage;o&&o.locStrsChanged();for(var i=this.visiblePages,r=0;r<i.length;r++)i[r].navigationLocStrChanged()}this.isStartPageActive||this.updateProgressText(),null===(t=this.navigationBarValue)||void 0===t||t.locStrsChanged(),null===(n=this.navigationBarTopValue)||void 0===n||n.locStrsChanged()}},t.prototype.getMarkdownHtml=function(e,t,n){return this.getSurveyMarkdownHtml(this,e,t,n)},t.prototype.getRenderer=function(e){return this.getRendererForString(this,e)},t.prototype.getRendererContext=function(e){return this.getRendererContextForString(this,e)},t.prototype.getRendererForString=function(e,t,n){var o=this.getBuiltInRendererForString(e,t,n),i={element:e,name:t,renderAs:o=this.elementWrapperComponentNameCore(o,e,"string",t)};return this.onTextRenderAs.fire(this,i),i.renderAs},t.prototype.getRendererContextForString=function(e,t,n){return this.elementWrapperDataCore(t,e,"string")},t.prototype.getExpressionDisplayValue=function(e,t,n){var o={question:e,value:t,displayValue:n};return this.onGetExpressionDisplayValue.fire(this,o),o.displayValue},t.prototype.getBuiltInRendererForString=function(e,t,n){if(this.isDesignMode)return Et.editableRenderer},t.prototype.getProcessedText=function(e){return this.processText(e,!0)},t.prototype.getLocString=function(e){return this.getLocalizationString(e)},t.prototype.getErrorCustomText=function(e,t){return this.getSurveyErrorCustomText(this,e,t)},t.prototype.getSurveyErrorCustomText=function(e,t,n){var o={text:t,name:n.getErrorType(),obj:e,error:n};return this.onErrorCustomText.fire(this,o),o.text},t.prototype.getQuestionDisplayValue=function(e,t){var n={question:e,displayValue:t};return this.onGetQuestionDisplayValue.fire(this,n),n.displayValue},Object.defineProperty(t.prototype,"emptySurveyText",{get:function(){return this.getLocalizableStringText("emptySurveyText")},set:function(e){this.setLocalizableStringText("emptySurveyText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logo",{get:function(){return this.getLocalizableStringText("logo")},set:function(e){this.setLocalizableStringText("logo",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLogo",{get:function(){return this.getLocalizableString("logo")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logoWidth",{get:function(){return this.getPropertyValue("logoWidth")},set:function(e){this.setPropertyValue("logoWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedLogoWidth",{get:function(){return this.logoWidth?Wt(this.logoWidth):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedStyleLogoWidth",{get:function(){return this.logoWidth?Gt(this.logoWidth):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logoHeight",{get:function(){return this.getPropertyValue("logoHeight")},set:function(e){this.setPropertyValue("logoHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedLogoHeight",{get:function(){return this.logoHeight?Wt(this.logoHeight):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedStyleLogoHeight",{get:function(){return this.logoHeight?Gt(this.logoHeight):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logoPosition",{get:function(){return this.getPropertyValue("logoPosition")},set:function(e){this.setPropertyValue("logoPosition",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasLogo",{get:function(){var e=this;return this.getPropertyValue("hasLogo",void 0,function(){return!!e.logo&&"none"!==e.logoPosition})},enumerable:!1,configurable:!0}),t.prototype.resetHasLogo=function(){this.resetPropertyValue("hasLogo")},Object.defineProperty(t.prototype,"isLogoBefore",{get:function(){return!this.isDesignMode&&this.renderedHasLogo&&("left"===this.logoPosition||"top"===this.logoPosition)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLogoAfter",{get:function(){return this.isDesignMode?this.renderedHasLogo:this.renderedHasLogo&&("right"===this.logoPosition||"bottom"===this.logoPosition)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logoClassNames",{get:function(){return(new _e).append(this.css.logo).append({left:"sv-logo--left",right:"sv-logo--right",top:"sv-logo--top",bottom:"sv-logo--bottom"}[this.logoPosition]).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleIsEmpty",{get:function(){var e=this;return this.getPropertyValue("titleIsEmpty",void 0,function(){return e.locTitle.isEmpty})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHasTitle",{get:function(){return this.isDesignMode?this.isPropertyVisible("title"):!this.titleIsEmpty&&this.showTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHasDescription",{get:function(){return this.isDesignMode?this.isPropertyVisible("description"):!!this.hasDescription&&this.showTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitle",{get:function(){return this.renderedHasTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHasLogo",{get:function(){return this.isDesignMode?this.isPropertyVisible("logo"):this.hasLogo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHasHeader",{get:function(){return this.renderedHasTitle||this.renderedHasLogo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logoFit",{get:function(){return this.getPropertyValue("logoFit")},set:function(e){this.setPropertyValue("logoFit",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"themeVariables",{get:function(){return Object.assign({},this.cssVariables)},enumerable:!1,configurable:!0}),t.prototype.setIsMobile=function(e){void 0===e&&(e=!0),this._isMobile!==e&&(this._isMobile=e,this.updateCss(),this.getAllQuestions().forEach(function(t){return t.setIsMobile(e)}))},Object.defineProperty(t.prototype,"isMobile",{get:function(){return this._isMobile&&!this.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCompact",{get:function(){return this._isCompact},set:function(e){e!==this._isCompact&&(this._isCompact=e,this.updateElementCss(),this.triggerResponsiveness(!0))},enumerable:!1,configurable:!0}),t.prototype.isLogoImageChoosen=function(){return this.locLogo.renderedHtml},Object.defineProperty(t.prototype,"titleMaxWidth",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderBackgroundImage",{get:function(){var e=this;return this.getPropertyValue("renderBackgroundImage",void 0,function(){return Bt(e.backgroundImage)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundOpacity",{get:function(){return this.getPropertyValue("backgroundOpacity")},set:function(e){this.setPropertyValue("backgroundOpacity",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundImageStyle",{get:function(){var e=this;return this.getPropertyValue("backgroundImageStyle",void 0,function(){return e.calcBackgroundImageStyle()})},enumerable:!1,configurable:!0}),t.prototype.calcBackgroundImageStyle=function(){return{opacity:this.backgroundOpacity,backgroundImage:this.renderBackgroundImage,backgroundSize:this.backgroundImageFit,backgroundAttachment:this.fitToContainer?void 0:this.backgroundImageAttachment}},t.prototype.updateWrapperFormCss=function(){this.wrapperFormCss=(new _e).append(this.css.rootWrapper).append(this.css.rootWrapperHasImage,!!this.backgroundImage).append(this.css.rootWrapperFixed,!this.formScrollDisabled).toString()},Object.defineProperty(t.prototype,"completedHtml",{get:function(){return this.getLocalizableStringText("completedHtml")},set:function(e){this.setLocalizableStringText("completedHtml",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCompletedHtml",{get:function(){return this.getLocalizableString("completedHtml")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completedHtmlOnCondition",{get:function(){return this.getPropertyValue("completedHtmlOnCondition")},set:function(e){this.setPropertyValue("completedHtmlOnCondition",e)},enumerable:!1,configurable:!0}),t.prototype.runExpression=function(e,t){if(!e)return null;var n=this.getFilteredProperties(),o=this.createExpressionRunner(e),i=void 0;return o.onRunComplete=function(e){i=e,t&&t(e)},o.runContext(this.getValueGetterContext(),n)||i},t.prototype.beforeExpressionRunning=function(e,t,n){var o={element:e,propertyName:t,expression:n,allow:!0};return this.onExpressionRunning.fire(this,o),o.allow?o.expression:""},Object.defineProperty(t.prototype,"isSettingValueOnExpression",{get:function(){return this.setValueOnExpressionCounter>0},enumerable:!1,configurable:!0}),t.prototype.startSetValueOnExpression=function(){this.setValueOnExpressionCounter++},t.prototype.finishSetValueOnExpression=function(){this.setValueOnExpressionCounter--},t.prototype.runCondition=function(e){if(!e)return!1;var t=this.getFilteredProperties();return new Pe(e).runContext(this.getValueGetterContext(),t)},t.prototype.runTriggers=function(){this.checkTriggers(this.getFilteredValues(),!1)},Object.defineProperty(t.prototype,"renderedCompletedHtml",{get:function(){var e=this.getExpressionItemOnRunCondition(this.completedHtmlOnCondition);return e?e.html:this.completedHtml},enumerable:!1,configurable:!0}),t.prototype.getExpressionItemOnRunCondition=function(e){if(0==e.length)return null;for(var t=this.getFilteredProperties(),n=0;n<e.length;n++)if(e[n].runCondition(t))return e[n];return null},Object.defineProperty(t.prototype,"completedBeforeHtml",{get:function(){return this.getLocalizableStringText("completedBeforeHtml")},set:function(e){this.setLocalizableStringText("completedBeforeHtml",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCompletedBeforeHtml",{get:function(){return this.getLocalizableString("completedBeforeHtml")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadingHtml",{get:function(){return this.getLocalizableStringText("loadingHtml")},set:function(e){this.setLocalizableStringText("loadingHtml",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLoadingHtml",{get:function(){return this.getLocalizableString("loadingHtml")},enumerable:!1,configurable:!0}),t.prototype.getNavigationCss=function(e,t){return(new _e).append(e).append(t).toString()},Object.defineProperty(t.prototype,"cssNavigationEdit",{get:function(){return this.getNavigationCss(this.css.navigationButton,this.css.navigation.edit)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"navigationBar",{get:function(){return this.navigationBarValue||(this.navigationBarValue=new tr(this)),this.navigationBarValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"navigationBarTop",{get:function(){return this.navigationBarTopValue||(this.navigationBarTopValue=new tr(this)),this.navigationBarTopValue},enumerable:!1,configurable:!0}),t.prototype.addNavigationItem=function(e){return this.navigationBarTop.addAction(e),this.navigationBar.addAction(e)},t.prototype.removeNavigationItem=function(e){this.navigationBar.removeActionById(e),this.navigationBarTop.removeActionById(e)},Object.defineProperty(t.prototype,"startSurveyText",{get:function(){return this.getLocalizableStringText("startSurveyText")},set:function(e){this.setLocalizableStringText("startSurveyText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locStartSurveyText",{get:function(){return this.getLocalizableString("startSurveyText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pagePrevText",{get:function(){return this.getLocalizableStringText("pagePrevText")},set:function(e){this.setLocalizableStringText("pagePrevText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPagePrevText",{get:function(){return this.getLocalizableString("pagePrevText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageNextText",{get:function(){return this.getLocalizableStringText("pageNextText")},set:function(e){this.setLocalizableStringText("pageNextText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPageNextText",{get:function(){return this.getLocalizableString("pageNextText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completeText",{get:function(){return this.getLocalizableStringText("completeText")},set:function(e){this.setLocalizableStringText("completeText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCompleteText",{get:function(){return this.getLocalizableString("completeText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previewText",{get:function(){return this.getLocalizableStringText("previewText")},set:function(e){this.setLocalizableStringText("previewText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPreviewText",{get:function(){return this.getLocalizableString("previewText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"editText",{get:function(){return this.getLocalizableStringText("editText")},set:function(e){this.setLocalizableStringText("editText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locEditText",{get:function(){return this.getLocalizableString("editText")},enumerable:!1,configurable:!0}),t.prototype.getElementTitleTagName=function(e,t){if(this.onGetTitleTagName.isEmpty)return t;var n={element:e,tagName:t};return this.onGetTitleTagName.fire(this,n),n.tagName},Object.defineProperty(t.prototype,"questionTitlePattern",{get:function(){return this.getPropertyValue("questionTitlePattern","numTitleRequire")},set:function(e){"numRequireTitle"!==e&&"requireNumTitle"!==e&&"numTitle"!=e&&(e="numTitleRequire"),this.setPropertyValue("questionTitlePattern",e)},enumerable:!1,configurable:!0}),t.prototype.getQuestionTitlePatternOptions=function(){var e=new Array,t=this.getLocalizationString("questionTitlePatternText"),n=this.questionStartIndex?this.questionStartIndex:"1.";return e.push({value:"numTitleRequire",text:n+" "+t+" "+this.requiredMark}),e.push({value:"numRequireTitle",text:n+" "+this.requiredMark+" "+t}),e.push({value:"numTitle",text:n+" "+t}),e},Object.defineProperty(t.prototype,"questionTitleTemplate",{get:function(){return this.getLocalizableStringText("questionTitleTemplate")},set:function(e){this.setLocalizableStringText("questionTitleTemplate",e),this.questionTitlePattern=this.getNewTitlePattern(e),this.questionStartIndex=this.getNewQuestionTitleElement(e,"no",this.questionStartIndex,"1"),this.requiredMark=this.getNewQuestionTitleElement(e,"require",this.requiredMark,"*")},enumerable:!1,configurable:!0}),t.prototype.getNewTitlePattern=function(e){if(e){for(var t=[];e.indexOf("{")>-1;){var n=(e=e.substring(e.indexOf("{")+1)).indexOf("}");if(n<0)break;t.push(e.substring(0,n)),e=e.substring(n+1)}if(t.length>1){if("require"==t[0])return"requireNumTitle";if("require"==t[1]&&3==t.length)return"numRequireTitle";if(t.indexOf("require")<0)return"numTitle"}if(1==t.length&&"title"==t[0])return"numTitle"}return"numTitleRequire"},t.prototype.getNewQuestionTitleElement=function(e,t,n,o){if(t="{"+t+"}",!e||e.indexOf(t)<0)return n;for(var i=e.indexOf(t),r="",s="",a=i-1;a>=0&&"}"!=e[a];a--);for(a<i-1&&(r=e.substring(a+1,i)),a=i+=t.length;a<e.length&&"{"!=e[a];a++);for(a>i&&(s=e.substring(i,a)),a=0;a<r.length&&r.charCodeAt(a)<33;)a++;for(r=r.substring(a),a=s.length-1;a>=0&&s.charCodeAt(a)<33;)a--;return s=s.substring(0,a+1),r||s?r+(n||o)+s:n},Object.defineProperty(t.prototype,"locQuestionTitleTemplate",{get:function(){return this.getLocalizableString("questionTitleTemplate")},enumerable:!1,configurable:!0}),t.prototype.getUpdatedQuestionTitle=function(e,t){if(this.onGetQuestionTitle.isEmpty)return t;var n={question:e,title:t};return this.onGetQuestionTitle.fire(this,n),n.title},t.prototype.getUpdatedQuestionNo=function(e,t){if(this.onGetQuestionNumber.isEmpty)return t;var n={question:e,number:t,no:t};return this.onGetQuestionNumber.fire(this,n),n.no===t?n.number:n.no},t.prototype.getUpdatedPanelNo=function(e,t){if(this.onGetPanelNumber.isEmpty)return t;var n={panel:e,number:t};return this.onGetPanelNumber.fire(this,n),n.number},t.prototype.getUpdatedPageNo=function(e,t){if(this.onGetPageNumber.isEmpty)return t;var n={page:e,number:t};return this.onGetPageNumber.fire(this,n),n.number},Object.defineProperty(t.prototype,"showPageNumbers",{get:function(){return this.getPropertyValue("showPageNumbers")},set:function(e){e!==this.showPageNumbers&&(this.setPropertyValue("showPageNumbers",e),this.updateVisibleIndexes())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showQuestionNumbers",{get:function(){return this.getPropertyValue("showQuestionNumbers")},set:function(e){!0===e&&(e="on"),!1===e&&(e="off"),(e="onpage"===(e=e.toLowerCase())?"onPage":e)!==this.showQuestionNumbers&&(this.setPropertyValue("showQuestionNumbers",e),this.updateVisibleIndexes())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressBar",{get:function(){return this.progressBarValue||(this.progressBarValue=new Wi(this)),this.progressBarValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showProgressBar",{get:function(){return this.getPropertyValue("showProgressBar")},set:function(e){this.setShowProgressBar(e)},enumerable:!1,configurable:!0}),t.prototype.setShowProgressBar=function(e){"off"===e&&(e=!1),!0===e||!1===e?this.setPropertyValue("showProgressBar",e):(this.setPropertyValue("showProgressBar",!0),this.progressBarLocation=e)},Object.defineProperty(t.prototype,"progressBarLocation",{get:function(){return this.getPropertyValue("progressBarLocation")},set:function(e){this.setPropertyValue("progressBarLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressBarType",{get:function(){return this.getPropertyValue("progressBarType")},set:function(e){"correctquestion"===e&&(e="correctQuestion"),"requiredquestion"===e&&(e="requiredQuestion"),this.setPropertyValue("progressBarType",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressBarComponentName",{get:function(){var e=this.progressBarType;return gn.legacyProgressBarView||"default"!==yi.currentType||sr(e,"pages")&&(e="buttons"),"progress-"+e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowProgressBarOnTop",{get:function(){return!!this.canShowProgressBar()&&!!this.showProgressBar&&-1!==["auto","aboveheader","belowheader","topbottom","top","both"].indexOf(this.progressBarLocation)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowProgressBarOnBottom",{get:function(){return!(!this.canShowProgressBar()||!this.showProgressBar||"bottom"!==this.progressBarLocation&&"both"!==this.progressBarLocation&&"topbottom"!==this.progressBarLocation)},enumerable:!1,configurable:!0}),t.prototype.getProgressTypeComponent=function(){return"sv-progress-"+this.progressBarType.toLowerCase()},t.prototype.getProgressCssClasses=function(e){return void 0===e&&(e=""),(new _e).append(this.css.progress).append(this.css.progressTop,this.isShowProgressBarOnTop&&(!e||"header"==e)).append(this.css.progressBottom,this.isShowProgressBarOnBottom&&(!e||"footer"==e)).toString()},t.prototype.canShowProgressBar=function(){return!this.isShowingPreview||!this.showPreviewBeforeComplete||"allQuestions"!=this.previewMode},Object.defineProperty(t.prototype,"processedTitle",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionTitleLocation",{get:function(){return this.getPropertyValue("questionTitleLocation")},set:function(e){this.setPropertyValue("questionTitleLocation",e.toLowerCase()),this.isLoadingFromJson||this.updateElementCss(!0)},enumerable:!1,configurable:!0}),t.prototype.updateElementCss=function(e){this.startPage&&this.startPage.updateElementCss(e);for(var t=this.visiblePages,n=0;n<t.length;n++)t[n].updateElementCss(e);this.updateCss()},Object.defineProperty(t.prototype,"questionErrorLocation",{get:function(){return this.getPropertyValue("questionErrorLocation")},set:function(e){this.setPropertyValue("questionErrorLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionDescriptionLocation",{get:function(){return this.getPropertyValue("questionDescriptionLocation")},set:function(e){this.setPropertyValue("questionDescriptionLocation",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mode",{get:function(){return this.readOnly?"display":"edit"},set:function(e){(e=e.toLowerCase())!=this.mode&&("edit"!=e&&"display"!=e||(this.readOnly="display"==e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this.getPropertyValue("readOnly")},set:function(e){this.setPropertyValue("readOnly",e)},enumerable:!1,configurable:!0}),t.prototype.onReadOnlyChanged=function(){for(var e=0;e<this.pages.length;e++){var t=this.pages[e];t.setPropertyValue("isReadOnly",t.isReadOnly)}this.updateButtonsVisibility(),this.updateCss()},Object.defineProperty(t.prototype,"data",{get:function(){for(var e={},t=this.getValuesKeys(),n=0;n<t.length;n++){var o=t[n],i=this.getDataValueCore(this.valuesHash,o);void 0!==i&&(e[o]=i)}return this.setCalculatedValuesIntoResult(e),e},set:function(e){this.valuesHash={},this.setDataCore(e,!e)},enumerable:!1,configurable:!0}),t.prototype.mergeData=function(e){if(e){var t=this.data;this.mergeValues(e,t),this.setDataCore(t)}},t.prototype.setDataCore=function(e,t){if(void 0===t&&(t=!1),t&&(this.valuesHash={}),e)for(var n in e){var o="string"==typeof n?n.trim():n;this.setDataValueCore(this.valuesHash,o,e[n])}this.isSettingDataValue=!0,this.updateAllQuestionsValue(t),this.notifyAllQuestionsOnValueChanged(),this.notifyElementsOnAnyValueOrVariableChanged(""),this.isSettingDataValue=!1,this.runConditions(),this.updateAllQuestionsValue(t)},t.prototype.isSettingData=function(){return!0===this.isSettingDataValue},Object.defineProperty(t.prototype,"isSurvey",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getData=function(e){var t=e||{includePages:!1,includePanels:!1};return t.includePages||t.includePanels?this.getStructuredData(!!t.includePages,t.includePanels?100:t.includePages?1:0):this.data},t.prototype.getStructuredData=function(e,t){if(void 0===e&&(e=!0),void 0===t&&(t=-1),0===t)return this.data;var n={};return this.pages.forEach(function(o){if(e){var i={};o.collectValues(i,t-1)&&(n[o.name]=i)}else o.collectValues(n,t)}),n},t.prototype.setStructuredData=function(e,t){if(void 0===t&&(t=!1),e){var n={};for(var o in e)if(this.getQuestionByValueName(o))n[o]=e[o];else{var i=this.getPageByName(o);i||(i=this.getPanelByName(o)),i&&this.collectDataFromPanel(i,n,e[o])}t?this.mergeData(n):this.data=n}},t.prototype.collectDataFromPanel=function(e,t,n){for(var o in n){var i=e.getElementByName(o);i&&(i.isPanel?this.collectDataFromPanel(i,t,n[o]):t[o]=n[o])}},Object.defineProperty(t.prototype,"editingObj",{get:function(){return this.editingObjValue},set:function(e){var t=this;if(this.editingObj!=e&&(this.unConnectEditingObj(),this.editingObjValue=e,!this.isDisposed)){if(!e)for(var n=this.getAllQuestions(),o=0;o<n.length;o++)n[o].unbindValue();this.editingObj&&(this.setDataCore({}),this.onEditingObjPropertyChanged=function(e,n){D.hasOriginalProperty(t.editingObj,n.name)&&("locale"===n.name&&t.setDataCore({}),t.updateOnSetValue(n.name,t.editingObj[n.name],n.oldValue))},this.editingObj.onPropertyChanged.add(this.onEditingObjPropertyChanged))}},enumerable:!1,configurable:!0}),t.prototype.unConnectEditingObj=function(){this.editingObj&&!this.editingObj.isDisposed&&this.editingObj.onPropertyChanged.remove(this.onEditingObjPropertyChanged)},Object.defineProperty(t.prototype,"isEditingSurveyElement",{get:function(){return!!this.editingObj},enumerable:!1,configurable:!0}),t.prototype.setCalculatedValuesIntoResult=function(e){for(var t=0;t<this.calculatedValues.length;t++){var n=this.calculatedValues[t];n.includeIntoResult&&n.name&&void 0!==this.getVariable(n.name)&&(e[n.name]=this.getVariable(n.name))}},t.prototype.getAllValues=function(){return this.data},t.prototype.getPlainData=function(e){e||(e={includeEmpty:!0,includeQuestionTypes:!1,includeValues:!1});var t=[],n=[];if(this.getAllQuestions().forEach(function(o){var i=o.getPlainData(e);i&&(t.push(i),n.push(o.valueName||o.name))}),e.includeValues)for(var o=this.getValuesKeys(),i=0;i<o.length;i++){var r=o[i];if(-1==n.indexOf(r)){var s=this.getDataValueCore(this.valuesHash,r);s&&t.push({name:r,title:r,value:s,displayValue:s,isNode:!1,getString:function(e){return"object"==typeof e?JSON.stringify(e):e}})}}return t},t.prototype.getFilteredValues=function(){var e={};for(var t in this.variablesHash)e[t]=this.variablesHash[t];if(this.addCalculatedValuesIntoFilteredValues(e),!this.isDesignMode){for(var n=this.getValuesKeys(),o=0;o<n.length;o++)t=n[o],e[t]=this.getDataValueCore(this.valuesHash,t);this.getAllQuestions().forEach(function(t){t.hasFilteredValue&&(e[t.getFilteredName()]=t.getFilteredValue(!0))})}return e},t.prototype.addCalculatedValuesIntoFilteredValues=function(e){for(var t=this.calculatedValues,n=0;n<t.length;n++)e[t[n].name]=t[n].value},t.prototype.getFilteredProperties=function(){return{survey:this}},t.prototype.getValuesKeys=function(){if(!this.editingObj)return Object.keys(this.valuesHash);for(var e=D.getPropertiesByObj(this.editingObj),t=[],n=0;n<e.length;n++)t.push(e[n].name);return t},t.prototype.getDataValueCore=function(e,t){return this.editingObj?D.getObjPropertyValue(this.editingObj,t):this.getDataFromValueHash(e,t)},t.prototype.setDataValueCore=function(e,t,n){this.editingObj?D.setObjPropertyValue(this.editingObj,t,n):this.setDataToValueHash(e,t,n)},t.prototype.deleteDataValueCore=function(e,t){this.editingObj?this.editingObj[t]=null:this.deleteDataFromValueHash(e,t)},t.prototype.getDataFromValueHash=function(e,t){return this.valueHashGetDataCallback?this.valueHashGetDataCallback(e,t):e[t]},t.prototype.setDataToValueHash=function(e,t,n){this.valueHashSetDataCallback?this.valueHashSetDataCallback(e,t,n):e[t]=n},t.prototype.deleteDataFromValueHash=function(e,t){this.valueHashDeleteDataCallback?this.valueHashDeleteDataCallback(e,t):delete e[t]},Object.defineProperty(t.prototype,"comments",{get:function(){for(var e={},t=this.getValuesKeys(),n=0;n<t.length;n++){var o=t[n];o.indexOf(this.commentSuffix)>0&&(e[o]=this.getDataValueCore(this.valuesHash,o))}return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePages",{get:function(){if(this.isDesignMode)return this.pages;if(this.pageContainerValue&&(this.isShowingPreview||this.isSinglePage))return[this.pageContainerValue];for(var e=new Array,t=0;t<this.pages.length;t++)this.isPageInVisibleList(this.pages[t])&&e.push(this.pages[t]);return e},enumerable:!1,configurable:!0}),t.prototype.isPageInVisibleList=function(e){return this.isDesignMode||e.isVisible&&!e.isStartPage},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0==this.pages.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"PageCount",{get:function(){return this.pageCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageCount",{get:function(){return this.pages.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePageCount",{get:function(){return this.visiblePages.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startPage",{get:function(){var e=this.firstPageIsStartPage&&this.pages.length>1?this.pages[0]:null;return e&&e.onFirstRendering(),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startedPage",{get:function(){return this.startPage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentPage",{get:function(){return this.getPropertyValue("currentPage",null)},set:function(e){if(!this.isLoadingFromJson){var t=this.getPageByObject(e);if((!e||t)&&(t||!this.isCurrentPageAvailable)){var n=this.visiblePages;if(!(null!=t&&n.indexOf(t)<0)&&t!=this.currentPage){var o=this.currentSingleElement;if(this.isShowingPreview||!o||t===o.page){var i=this.currentPage;(this.isShowingPreview||o||this.currentPageChanging(t,i))&&(this.setPropertyValue("currentPage",t),t&&(t.onFirstRendering(),t.updateCustomWidgets()),this.locStrsChanged(),this.isShowingPreview||this.currentPageChanged(t,i))}else this.currentSingleElement=t.getFirstVisibleElement()}}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentElementName",{get:function(){var e;return(null===(e=this.currentElement)||void 0===e?void 0:e.name)||""},set:function(e){e&&(this.currentElement=this.getElementByName(e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentElement",{get:function(){return this.currentSingleElement||this.currentPage},set:function(e){if(e)if(e.isPage)this.currentPage=e;else{var t=e.page;t&&!this.isSingleVisibleQuestion?this.currentPage=t:this.currentSingleElement=e}},enumerable:!1,configurable:!0}),t.prototype.getElementByName=function(e){return e?this.getPageByName(e)||this.getPanelByName(e)||this.getQuestionByName(e):null},t.prototype.tryNavigateToPage=function(e){if(!this.performValidationOnPageChanging(e))return!1;var t=this.visiblePages.indexOf(e)<this.currentPageNo||!this.doServerValidation(!1,!1,e);return t&&(this.currentPage=e),t},t.prototype.performValidationOnPageChanging=function(e){if(this.isDesignMode)return!1;if(this.canGoTroughValidation())return!0;var t=this.visiblePages.indexOf(e);if(t<0||t>=this.visiblePageCount)return!1;if(t===this.currentPageNo)return!1;if(t<this.currentPageNo||"onComplete"===this.checkErrorsMode||this.validationAllowSwitchPages)return!0;if(!this.validateCurrentPage())return!1;for(var n=this.currentPageNo+1;n<t;n++){var o=this.visiblePages[n];if(!o.validate(!0,!0))return!1;o.passed=!0}return!0},t.prototype.updateCurrentPage=function(){this.isCurrentPageAvailable||(this.currentPage=this.firstVisiblePage)},Object.defineProperty(t.prototype,"isCurrentPageAvailable",{get:function(){var e=this.currentPage;return!!e&&this.isPageInVisibleList(e)&&this.isPageExistsInSurvey(e)},enumerable:!1,configurable:!0}),t.prototype.isPageExistsInSurvey=function(e){return this.pages.indexOf(e)>-1||!!this.onContainsPageCallback&&this.onContainsPageCallback(e)},Object.defineProperty(t.prototype,"activePage",{get:function(){return this.getPropertyValue("activePage")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStartPageActive",{get:function(){return"starting"===this.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowStartingPage",{get:function(){return this.isStartPageActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"matrixDragHandleArea",{get:function(){return this.getPropertyValue("matrixDragHandleArea","entireItem")},set:function(e){this.setPropertyValue("matrixDragHandleArea",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowingPage",{get:function(){return"running"==this.state||"preview"==this.state||this.isStartPageActive},enumerable:!1,configurable:!0}),t.prototype.updateActivePage=function(){var e=this.isStartPageActive?this.startPage:this.currentPage;e!==this.activePage&&this.setPropertyValue("activePage",e)},t.prototype.onStateAndCurrentPageChanged=function(){this.updateActivePage(),this.updateButtonsVisibility()},t.prototype.getPageByObject=function(e){if(!e)return null;if(e.getType&&"page"==e.getType())return e;if("string"==typeof e||e instanceof String)return this.getPageByName(String(e));if(!isNaN(e)){var t=Number(e),n=this.visiblePages;return e<0||e>=n.length?null:n[t]}return e},Object.defineProperty(t.prototype,"currentPageNo",{get:function(){return this.visiblePages.indexOf(this.currentPage)},set:function(e){var t=this.visiblePages;e<0||e>=t.length||(this.currentPage=t[e])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionOrder",{get:function(){return this.getPropertyValue("questionOrder")},set:function(e){this.setPropertyValue("questionOrder",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionsOrder",{get:function(){return this.questionOrder},set:function(e){this.questionOrder=e},enumerable:!1,configurable:!0}),t.prototype.focusFirstQuestion=function(){if(!this.focusingQuestionInfo){var e=this.activePage;e&&(e.scrollToTop(),e.focusFirstQuestion())}},t.prototype.scrollToTopOnPageChange=function(e){void 0===e&&(e=!0);var t=this.activePage;t&&(e&&t.scrollToTop(),this.isCurrentPageRendering&&this.autoFocusFirstQuestion&&!this.focusingQuestionInfo&&(t.focusFirstQuestion(),this.isCurrentPageRendering=!1))},Object.defineProperty(t.prototype,"state",{get:function(){return this.getPropertyValue("state","empty")},enumerable:!1,configurable:!0}),t.prototype.updateState=function(){this.setPropertyValue("state",this.calcState())},t.prototype.calcState=function(){return this.isLoading?"loading":this.isCompleted?"completed":this.isCompletedBefore?"completedbefore":!this.isDesignMode&&this.isEditMode&&this.isStartedState&&this.startPage?"starting":this.isShowingPreview?this.currentPage?"preview":"empty":this.currentPage?"running":"empty"},Object.defineProperty(t.prototype,"isCompleted",{get:function(){return this.getPropertyValue("isCompleted",!1)},set:function(e){this.setPropertyValue("isCompleted",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowingPreview",{get:function(){return this.getPropertyValue("isShowingPreview",!1)},set:function(e){this.isShowingPreview!=e&&(this.setPropertyValue("isShowingPreview",e),this.onShowingPreviewChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStartedState",{get:function(){return this.getPropertyValue("isStartedState",!1)},set:function(e){this.setPropertyValue("isStartedState",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCompletedBefore",{get:function(){return this.getPropertyValue("isCompletedBefore",!1)},set:function(e){this.setPropertyValue("isCompletedBefore",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this.getPropertyValue("isLoading",!1)},set:function(e){this.setPropertyValue("isLoading",e)},enumerable:!1,configurable:!0}),t.prototype.beginLoading=function(){this.isLoading=!0},t.prototype.endLoading=function(){this.isLoading=!1},Object.defineProperty(t.prototype,"completedState",{get:function(){return this.getPropertyValue("completedState","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completedStateText",{get:function(){return this.getPropertyValue("completedStateText","")},enumerable:!1,configurable:!0}),t.prototype.setCompletedState=function(e,t){this.setPropertyValue("completedState",e),t||("saving"==e&&(t=this.getLocalizationString("savingData")),"error"==e&&(t=this.getLocalizationString("savingDataError")),"success"==e&&(t=this.getLocalizationString("savingDataSuccess"))),this.setPropertyValue("completedStateText",t),"completed"===this.state&&this.showCompletePage&&this.completedState&&this.notify(this.completedStateText,this.completedState,"error"===e)},t.prototype.notify=function(e,t,n){void 0===n&&(n=!1),this.notifier.showActions=n,this.notifier.notify(e,t,n)},t.prototype.clear=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.isCompleted=!1,this.isCompletedBefore=!1,this.isLoading=!1,this.completedByTriggers=void 0,this.skippedPages=[],e&&this.setDataCore(null,!0),this.timerModel.spent=0;for(var n=0;n<this.pages.length;n++)this.pages[n].timeSpent=0,this.pages[n].setWasShown(!1),this.pages[n].passed=!1;if(this.onFirstPageIsStartedChanged(),t&&(this.currentPage=this.firstVisiblePage,this.currentSingleElement)){var o=this.getSingleElements();this.currentSingleElement=o.length>0?o[0]:void 0}e&&this.updateValuesWithDefaults()},t.prototype.mergeValues=function(e,t){sn(e,t)},t.prototype.updateValuesWithDefaults=function(){if(!this.isDesignMode&&!this.isLoading)for(var e=0;e<this.pages.length;e++)for(var t=this.pages[e].questions,n=0;n<t.length;n++)t[n].updateValueWithDefaults()},t.prototype.updateCustomWidgets=function(e){e&&e.updateCustomWidgets()},t.prototype.currentPageChanging=function(e,t,n,o){var i=this.createPageChangeEventOptions(e,t,n,o);return this.currentPageChangingFromOptions(i)},t.prototype.currentPageChangingFromOptions=function(e){e.allow=!0,e.allowChanging=!0,this.onCurrentPageChanging.fire(this,e);var t=e.allowChanging&&e.allow;return t&&e.newCurrentPage!==e.oldCurrentPage&&(this.isCurrentPageRendering=!0),t},t.prototype.currentPageChanged=function(e,t){if(this.notifyQuestionsOnHidingContent(t),!t||t.isDisposed||t.passed||t.validate(!1)&&(t.passed=!0),!0===this.isCurrentPageRendered&&(this.isCurrentPageRendered=!1),!this.currentSingleElement){var n=this.createPageChangeEventOptions(e,t);this.onCurrentPageChanged.fire(this,n)}},t.prototype.notifyQuestionsOnHidingContent=function(e){e&&!e.isDisposed&&e.questions.forEach(function(e){return e.onHidingContent()})},t.prototype.createPageChangeEventOptions=function(e,t,n,o){var i=e&&t?e.visibleIndex-t.visibleIndex:0,r=i;return 0===r&&o&&n&&(r=e.elements.indexOf(n)-e.elements.indexOf(o)),{oldCurrentQuestion:o,newCurrentQuestion:n,oldCurrentPage:t,newCurrentPage:e,isNextPage:1===i,isPrevPage:-1===i,isGoingForward:r>0,isGoingBackward:r<0,isAfterPreview:!0===this.changeCurrentPageFromPreview}},t.prototype.getProgress=function(){if(null==this.currentPage)return 0;if("pages"!==this.progressBarType){var e=this.getProgressInfo();return"requiredQuestions"===this.progressBarType?e.requiredQuestionCount>=1?Math.ceil(100*e.requiredAnsweredQuestionCount/e.requiredQuestionCount):100:e.questionCount>=1?Math.ceil(100*e.answeredQuestionCount/e.questionCount):100}var t=this.visiblePages,n=t.indexOf(this.currentPage);return Math.ceil(100*n/t.length)},Object.defineProperty(t.prototype,"isNavigationButtonsShowing",{get:function(){if(this.isDesignMode)return"none";var e=this.activePage;return e?!1===e.showNavigationButtons?"none":!0===e.showNavigationButtons?this.showNavigationButtons?this.navigationButtonsLocation:"bottom":this.showNavigationButtons?this.navigationButtonsLocation:"none":"none"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNavigationButtonsShowingOnTop",{get:function(){return this.getIsNavigationButtonsShowingOn("top")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNavigationButtonsShowingOnBottom",{get:function(){return this.getIsNavigationButtonsShowingOn("bottom")},enumerable:!1,configurable:!0}),t.prototype.getIsNavigationButtonsShowingOn=function(e){var t=this.isNavigationButtonsShowing;return"both"==t||"topBottom"==t||t==e},Object.defineProperty(t.prototype,"isEditMode",{get:function(){return!this.readOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDisplayMode",{get:function(){return this.readOnly&&!this.isDesignMode||"preview"==this.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUpdateValueTextOnTyping",{get:function(){return"onTyping"==this.textUpdateMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDesignMode",{get:function(){return this._isDesignMode},enumerable:!1,configurable:!0}),t.prototype.setDesignMode=function(e){!!this._isDesignMode!=!!e&&(this._isDesignMode=!!e,this.onQuestionsOnPageModeChanged("standard"))},Object.defineProperty(t.prototype,"showInvisibleElements",{get:function(){return this.getPropertyValue("showInvisibleElements",!1)},set:function(e){var t=this.visiblePages;this.setPropertyValue("showInvisibleElements",e),this.isLoadingFromJson||(this.runConditions(),this.updateAllElementsVisibility(t))},enumerable:!1,configurable:!0}),t.prototype.updateAllElementsVisibility=function(e){for(var t=0;t<this.pages.length;t++){var n=this.pages[t];n.updateElementVisibility(),e.indexOf(n)>-1!=n.isVisible&&this.onPageVisibleChanged.fire(this,{page:n,visible:n.isVisible})}},Object.defineProperty(t.prototype,"areInvisibleElementsShowing",{get:function(){return this.isDesignMode||this.showInvisibleElements},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"areEmptyElementsHidden",{get:function(){return this.isShowingPreview&&this.showPreviewBeforeComplete&&"answeredQuestions"==this.previewMode&&this.isAnyQuestionAnswered},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAnyQuestionAnswered",{get:function(){for(var e=this.getAllQuestions(!0),t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCookie",{get:function(){if(!this.cookieName)return!1;var e=o.getCookie();return e&&e.indexOf(this.cookieName+"=true")>-1},enumerable:!1,configurable:!0}),t.prototype.setCookie=function(){this.cookieName&&o.setCookie(this.cookieName+"=true; expires=Fri, 31 Dec 9999 0:0:0 GMT")},t.prototype.deleteCookie=function(){this.cookieName&&o.setCookie(this.cookieName+"=;")},Object.defineProperty(t.prototype,"ignoreValidation",{get:function(){return!this.validationEnabled},set:function(e){this.validationEnabled=!e},enumerable:!1,configurable:!0}),t.prototype.nextPage=function(){return this.currentSingleElement?this.performNext():!this.isLastPage&&this.doCurrentPageComplete(!1)},t.prototype.performNext=function(){var e=this,t=this.currentSingleElement;if(!t)return this.nextPage();if(this.resetNavigationButton(),this.isSingleVisibleInput){if(!t.validateSingleInput())return!1;if(t.nextSingleInput())return this.updateButtonsVisibility(),!0}return this.validationEnabled?!0===this.validateElements([t],!0,!1,function(n){n||e.performNextAfterValidation(t)}):(this.performNextAfterValidation(t),!0)},t.prototype.performNextAfterValidation=function(e){this.sendPartialResult();var t=this.getSingleElements(),n=t.indexOf(e);if(n<0||n===t.length-1)return!1;var o={};e.isQuestion?o[e.name]=e.value:e.isPanel&&(o=e.getValue()),this.checkTriggers(o,!0,!1,!0,e.name),e===this.currentSingleElement&&(this.currentSingleElement=t[n+1])},t.prototype.performPrevious=function(){return this.prevPage()},t.prototype.validateOnNavigate=function(e,t){var n=this,o=this.canGoTroughValidation()||e&&this.validationAllowComplete||!e&&(this.validationAllowSwitchPages||this.isValidateOnComplete)||t&&this.isValidateOnComplete,i=function(){t?n.showPreviewCore():n.doCurrentPageCompleteCore(e)};if(o)return i(),!0;var r=function(e){e||i()};return this.isValidateOnComplete?this.isLastPage?!0!==this.validate(!0,this.autoFocusFirstError,r,!0):(i(),!0):!1!==this.validateCurrentPage(r)},t.prototype.canGoTroughValidation=function(){return!this.isEditMode||!this.validationEnabled},Object.defineProperty(t.prototype,"isCurrentPageHasErrors",{get:function(){return!1===this.validateActivePage()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCurrentPageValid",{get:function(){return this.validateActivePage()},enumerable:!1,configurable:!0}),t.prototype.hasCurrentPageErrors=function(e){return this.hasPageErrors(void 0,e)},t.prototype.validateCurrentPage=function(e){return this.validatePage(void 0,e)},t.prototype.hasPageErrors=function(e,t){var n=this.validatePage(e,t);return void 0===n?n:!n},t.prototype.validatePage=function(e,t){return e||(e=this.activePage),!e||this.validatePageCore(e,!0,t)},t.prototype.hasErrors=function(e,t,n){void 0===e&&(e=!0),void 0===t&&(t=!1);var o=this.validate(e,t,n);return void 0===o?o:!o},t.prototype.validate=function(e,t,n,o){return void 0===e&&(e=!0),void 0===t&&(t=!1),this.validateElements(this.visiblePages,e,t,n,o)},t.prototype.validateElements=function(e,t,n,o,i){void 0===t&&(t=!0),void 0===n&&(n=!1),o&&(t=!0);for(var r=new Yn({fireCallback:t,focusOnFirstError:n,callbackResult:o?function(e){o(!e)}:void 0,changeCurrentPage:!!i}),s=0,a=e;s<a.length;s++)a[s].validateElement(r);return r.finish(),r.runningResult},t.prototype.ensureUniqueNames=function(e){if(void 0===e&&(e=null),null==e)for(var t=0;t<this.pages.length;t++)this.ensureUniqueName(this.pages[t]);else this.ensureUniqueName(e)},t.prototype.ensureUniqueName=function(e){if(e.isPage&&this.ensureUniquePageName(e),e.isPanel&&this.ensureUniquePanelName(e),e.isPage||e.isPanel)for(var t=e.elements,n=0;n<t.length;n++)this.ensureUniqueNames(t[n]);else this.ensureUniqueQuestionName(e)},t.prototype.ensureUniquePageName=function(e){var t=this;return this.ensureUniqueElementName(e,function(e){return t.getPageByName(e)})},t.prototype.ensureUniquePanelName=function(e){var t=this;return this.ensureUniqueElementName(e,function(e){return t.getPanelByName(e)})},t.prototype.ensureUniqueQuestionName=function(e){var t=this;return this.ensureUniqueElementName(e,function(e){return t.getQuestionByName(e)})},t.prototype.ensureUniqueElementName=function(e,t){var n=t(e.name);if(n&&n!=e){for(var o=this.getNewName(e.name);t(o);)o=this.getNewName(e.name);e.name=o}},t.prototype.getNewName=function(e){for(var t=e.length;t>0&&e[t-1]>="0"&&e[t-1]<="9";)t--;var n=e.substring(0,t),o=0;return t<e.length&&(o=parseInt(e.substring(t))),n+ ++o},t.prototype.validateActivePage=function(e){return this.validatePageCore(this.activePage,e)},t.prototype.validatePageCore=function(e,t,n){if(void 0===t&&(t=this.focusOnFirstError),!e)return!0;var o=void 0;n&&(o=function(e){n(!e)});var i=e.validate(!0,t,o);return this.fireValidatedErrorsOnPage(e),i},t.prototype.fireValidatedErrorsOnPage=function(e){if(!this.onValidatePage.isEmpty&&e){for(var t=this.getNestedQuestionsByQuestionArray(e.questions,!0),n=new Array,o=new Array,i=0;i<t.length;i++){var r=t[i];if(r.errors.length>0){n.push(r);for(var s=0;s<r.errors.length;s++)o.push(r.errors[s])}}this.onValidatePage.fire(this,{questions:n,errors:o,page:e})}},t.prototype.prevPage=function(){if(this.isFirstPage||"starting"===this.state)return!1;this.resetNavigationButton();var e=this.currentSingleElement;if(this.doSkipOnPrevPage(e))return!0;if(e)return this.prevPageSingleElement(e);var t=this.visiblePages,n=t.indexOf(this.currentPage);return this.currentPage=t[n-1],!0},t.prototype.doSkipOnPrevPage=function(e){var t=e||this.currentPage,n=this.skippedPages.find(function(e){return e.to===t}),o=void 0;if(n){this.skippedPages.splice(this.skippedPages.indexOf(n),1);var i=n.from;!i.isDisposed&&i.isVisible&&(o=i)}return o&&(e?this.currentSingleElement=o:this.currentPage=o),!!o},t.prototype.prevPageSingleElement=function(e){if(this.isSingleVisibleInput&&e.prevSingleInput())return this.updateButtonsVisibility(),!0;var t=this.getSingleElements(),n=t.indexOf(e);return 0!==n&&(this.currentSingleElement=t[n-1],!0)},t.prototype.tryComplete=function(){return this.isValidateOnComplete&&this.cancelPreview(),this.doCurrentPageComplete(!0),this.isCompleted},t.prototype.completeLastPage=function(){return this.tryComplete()},t.prototype.navigationMouseDown=function(){return this.isNavigationButtonPressed=!0,!0},t.prototype.resetNavigationButton=function(){this.isNavigationButtonPressed=!1},t.prototype.nextPageUIClick=function(){return(!this.mouseDownPage||this.mouseDownPage===this.activePage)&&(this.mouseDownPage=null,this.performNext())},t.prototype.nextPageMouseDown=function(){return this.mouseDownPage=this.activePage,this.navigationMouseDown()},t.prototype.showPreview=function(){return this.resetNavigationButton(),!(!this.isValidateOnComplete&&this.doServerValidation(!0,!0))&&!!this.validateOnNavigate(!0,!0)&&this.isShowingPreview},t.prototype.showPreviewCore=function(){var e={allowShowPreview:!0,allow:!0};this.onShowingPreview.fire(this,e),this.isShowingPreview=e.allowShowPreview&&e.allow},t.prototype.cancelPreview=function(e){var t;if(void 0===e&&(e=null),this.isShowingPreview){this.gotoPageFromPreview=e,this.isShowingPreview=!1;var n=null===(t=this.currentSingleElement)||void 0===t?void 0:t.page;n&&(n.updateRows(),this.currentPage=n)}},t.prototype.cancelPreviewByPage=function(e){this.cancelPreview(e)},t.prototype.doCurrentPageComplete=function(e){return!this.isValidatingOnServer&&(this.resetNavigationButton(),!0===this.validateOnNavigate(e))},t.prototype.doCurrentPageCompleteCore=function(e){if(this.doServerValidation(e))return!1;if(e){this.currentPage.passed=!0;var t=this.doComplete(this.canBeCompletedByTrigger,this.completedTrigger);return t&&this.cancelPreview(),t}return this.doNextPage(),!0},Object.defineProperty(t.prototype,"isSinglePage",{get:function(){return"singlePage"==this.questionsOnPageMode},set:function(e){this.questionsOnPageMode=e?"singlePage":"standard"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSingleVisibleQuestion",{get:function(){return!this.isDesignMode&&(this.isSingleVisibleQuestionVal(this.questionsOnPageMode)||this.isSingleVisibleInput)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSingleVisibleInput",{get:function(){return!this.isDesignMode&&"inputPerPage"==this.questionsOnPageMode},enumerable:!1,configurable:!0}),t.prototype.isSingleVisibleQuestionVal=function(e){return"questionPerPage"===e||"questionOnPage"===e},Object.defineProperty(t.prototype,"questionsOnPageMode",{get:function(){return this.getPropertyValue("questionsOnPageMode")},set:function(e){this.setPropertyValue("questionsOnPageMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstPageIsStartPage",{get:function(){return this.getPropertyValue("firstPageIsStartPage")},set:function(e){this.setPropertyValue("firstPageIsStartPage",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstPageIsStarted",{get:function(){return this.firstPageIsStartPage},set:function(e){this.firstPageIsStartPage=e},enumerable:!1,configurable:!0}),t.prototype.isPageStarted=function(e){return this.firstPageIsStartPage&&this.pages.length>1&&this.pages[0]===e},Object.defineProperty(t.prototype,"showPreviewBeforeComplete",{get:function(){return this.getPropertyValue("showPreviewBeforeComplete")},set:function(e){this.setShowPreviewBeforeComplete(e)},enumerable:!1,configurable:!0}),t.prototype.setShowPreviewBeforeComplete=function(e){void 0===e||"noPreview"===e||!1===e?this.setPropertyValue("showPreviewBeforeComplete",!1):(this.setPropertyValue("showPreviewBeforeComplete",!0),"showAllQuestions"===e&&(this.previewMode="allQuestions"),"showAnsweredQuestions"===e&&(this.previewMode="answeredQuestions"))},Object.defineProperty(t.prototype,"previewMode",{get:function(){return this.getPropertyValue("previewMode")},set:function(e){this.setPropertyValue("previewMode",e)},enumerable:!1,configurable:!0}),t.prototype.onFirstPageIsStartedChanged=function(){this.isStartedState=this.firstPageIsStartPage&&this.pages.length>1,this.pageVisibilityChanged(this.pages[0],!this.isStartedState)},t.prototype.onShowingPreviewChanged=function(){this.updatePagesContainer()},t.prototype.createRootPage=function(e,t){var n=D.createClass("page");return n.name=e,n.isPageContainer=!0,t.forEach(function(e){e.isStartPage||n.addElement(e)}),n},t.prototype.disposeContainerPage=function(){var e=this.pageContainerValue;[].concat(e.elements).forEach(function(t){return e.removeElement(t)}),e.dispose(),this.pageContainerValue=void 0},t.prototype.updatePagesContainer=function(){if(!this.isDesignMode){this.getAllQuestions().forEach(function(e){return e.updateElementVisibility()}),this.setPropertyValue("currentPage",void 0);var e="preview-page",t=void 0;if(this.isSinglePage){var n=this.pageContainerValue;n&&n.name===e?(t=n.elements[0],this.disposeContainerPage()):t=this.createRootPage("single-page",this.pages)}if(this.isShowingPreview&&(t=this.createRootPage(e,t?[t]:this.pages)),t&&(t.setSurveyImpl(this),this.pageContainerValue=t,this.currentPage=t,this.currentSingleElementValue&&this.visiblePages.forEach(function(e){return e.updateRows()})),!this.isSinglePage&&!this.isShowingPreview){this.disposeContainerPage();var o=this.gotoPageFromPreview;this.gotoPageFromPreview=null,r.isValueEmpty(o)&&this.visiblePageCount>0&&(o=this.visiblePages[this.visiblePageCount-1]),o&&(this.changeCurrentPageFromPreview=!0,this.currentPage=o,this.changeCurrentPageFromPreview=!1)}!this.currentPage&&this.visiblePageCount>0&&(this.currentPage=this.visiblePages[0]),this.isShowingPreview&&this.pages.forEach(function(e){e.onFirstRendering()}),this.pages.forEach(function(e){e.wasRendered&&e.updateElementCss(!0)}),this.updateButtonsVisibility()}},t.prototype.getSingleElements=function(e){for(var t=new Array,n=this.pages,o=this.isSingleVisibleInput,i=function(){var i=n[r];if(!i.isStartPage&&i.isVisible){var s=[];o?i.addQuestionsToList(s,!0):i.elements.forEach(function(e){return s.push(e)}),s.forEach(function(n){(n===e||n.isVisible)&&t.push(n)})}},r=0;r<n.length;r++)i();return t},Object.defineProperty(t.prototype,"currentSingleElement",{get:function(){return this.isShowingPreview?void 0:this.currentSingleElementValue},set:function(e){if(e&&e.isQuestion&&this.isSingleVisibleQuestionVal(this.questionsOnPageMode))for(;e.parent&&e.parent.isPanel;)e=e.parent;var t=this.currentSingleElement;if(e!==t&&!this.isCompleted){var n=(null==e?void 0:e.isQuestion)?e:void 0,o=(null==t?void 0:t.isQuestion)?t:void 0,i=null==e?void 0:e.page,r=i&&t?this.createPageChangeEventOptions(i,t.page,n,o):void 0;if(r&&!this.currentPageChangingFromOptions(r))return;this.currentSingleElementValue=e,e?(this.isSingleVisibleInput&&e.isQuestion&&e.onSetAsSingleInput(),i.updateRows(),i!==this.currentPage?this.currentPage=i:n&&this.autoFocusFirstQuestion&&n.focus(),this.updateButtonsVisibility(),r&&this.onCurrentPageChanged.fire(this,r)):this.visiblePages.forEach(function(e){return e.updateRows()})}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentSingleQuestion",{get:function(){var e=this.currentSingleElement;return e&&e.isQuestion?e:void 0},set:function(e){this.currentSingleElement=e},enumerable:!1,configurable:!0}),t.prototype.supportsNestedSingleInput=function(e){var t={question:e,enabled:!0};return this.onCheckSingleInputPerPageMode.fire(this,t),t.enabled},t.prototype.updateNestedSingleQuestions=function(e,t){var n={question:e,nestedQuestions:t};this.onGetLoopQuestions.fire(this,n)},t.prototype.changeCurrentSingleElementOnVisibilityChanged=function(){var e=this.currentSingleElement;if(e&&!e.isVisible){var t=this.getSingleElements(e),n=t.indexOf(e),o=n>0?t[n-1]:n<t.length-1?t[n+1]:void 0;this.currentSingleElement=o}},t.prototype.onQuestionsOnPageModeChanged=function(e){if(!this.isShowingPreview&&!this.isDesignMode&&(this.skippedPages=[],this.currentSingleElement=void 0,"singlePage"===e&&this.updatePagesContainer(),"inputPerPage"===e&&this.getAllQuestions().forEach(function(e){return e.resetSingleInput()}),this.isSinglePage&&this.updatePagesContainer(),this.setupSingleInputNavigationActions(),this.isSingleVisibleQuestion)){var t=this.getSingleElements();t.length>0&&(this.currentSingleElement=t[0])}},t.prototype.setupSingleInputNavigationActions=function(){var e=this,t="sv-singleinput-add";this.isSingleVisibleInput?this.addNavigationItem({id:t,visible:!1,action:function(){return e.currentSingleQuestion.singleInputAddItem(!0),void e.resetNavigationButton()}}):this.removeNavigationItem(t)},t.prototype.getPageStartIndex=function(){return this.firstPageIsStartPage&&this.pages.length>0?1:0},Object.defineProperty(t.prototype,"isFirstPage",{get:function(){return this.getPropertyValue("isFirstPage")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLastPage",{get:function(){return this.getPropertyValue("isLastPage")},enumerable:!1,configurable:!0}),t.prototype.updateNavigationElements=function(){this.updateButtonsVisibility()},t.prototype.updateButtonsVisibility=function(){this.updateIsFirstLastPageState(),this.setPropertyValue("isShowPrevButton",this.calcIsShowPrevButton()),this.setPropertyValue("isShowNextButton",this.calcIsShowNextButton()),this.setPropertyValue("isCompleteButtonVisible",this.calcIsCompleteButtonVisible()),this.setPropertyValue("isPreviewButtonVisible",this.calcIsPreviewButtonVisible()),this.setPropertyValue("isCancelPreviewButtonVisible",this.calcIsCancelPreviewButtonVisible()),this.updateSingleInputActions()},t.prototype.updateSingleInputActions=function(){if(this.isSingleVisibleInput){var e=this.currentSingleQuestion;e&&(t(this.navigationBar.getActionById("sv-singleinput-add")),t(this.navigationBarTop.getActionById("sv-singleinput-add")))}function t(t){t&&(t.title=e.getSingleInputAddText(),t.visible=!!t.title)}},Object.defineProperty(t.prototype,"isShowPrevButton",{get:function(){return this.getPropertyValue("isShowPrevButton")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowNextButton",{get:function(){return this.getPropertyValue("isShowNextButton")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCompleteButtonVisible",{get:function(){return this.getPropertyValue("isCompleteButtonVisible")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPreviewButtonVisible",{get:function(){return this.getPropertyValue("isPreviewButtonVisible")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCancelPreviewButtonVisible",{get:function(){return this.getPropertyValue("isCancelPreviewButtonVisible")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFirstElement",{get:function(){return this.getPropertyValue("isFirstElement")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLastElement",{get:function(){return this.getPropertyValue("isLastElement")},enumerable:!1,configurable:!0}),t.prototype.updateIsFirstLastPageState=function(){var e=this.currentPage,t=void 0,n=void 0,o=this.currentSingleElement;if(o){var i=!0,r=!0;if(this.isSingleVisibleInput){var s=o.getSingleInputElementPos();0!==s&&(i=-1===s,r=1===s)}var a=this.getSingleElements(),l=a.indexOf(o);l>=0&&(t=i&&0===l,n=r&&l===a.length-1)}this.setPropertyValue("isFirstPage",!(!e||e!==this.firstVisiblePage||o&&!0!==t)),this.setPropertyValue("isLastPage",!(!e||e!==this.lastVisiblePage||o&&!0!==n)),this.setPropertyValue("isFirstElement",t),this.setPropertyValue("isLastElement",n)},Object.defineProperty(t.prototype,"isLastPageOrElement",{get:function(){return void 0!==this.isLastElement?this.isLastElement:this.isLastPage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFirstPageOrElement",{get:function(){return void 0!==this.isFirstElement?this.isFirstElement:this.isFirstPage},enumerable:!1,configurable:!0}),t.prototype.calcIsShowPrevButton=function(){if(this.isFirstPageOrElement||!this.showPrevButton||"running"!==this.state)return!1;if(void 0!==this.isFirstElement)return!0;var e=this.visiblePages[this.currentPageNo-1];return e&&e.getMaxTimeToFinish()<=0},t.prototype.calcIsShowNextButton=function(){return"running"===this.state&&!this.isLastPageOrElement&&!this.canBeCompletedByTrigger},t.prototype.calcIsCompleteButtonVisible=function(){var e=this.state;return this.isEditMode&&("running"===this.state&&(this.isLastPageOrElement&&!this.showPreviewBeforeComplete||this.canBeCompletedByTrigger)||"preview"===e)&&this.showCompleteButton},t.prototype.calcIsPreviewButtonVisible=function(){return this.isEditMode&&this.showPreviewBeforeComplete&&"running"==this.state&&this.isLastPageOrElement},t.prototype.calcIsCancelPreviewButtonVisible=function(){return this.isEditMode&&this.showPreviewBeforeComplete&&"preview"==this.state},Object.defineProperty(t.prototype,"firstVisiblePage",{get:function(){if(1===this.visiblePageCount)return this.visiblePages[0];for(var e=this.pages,t=0;t<e.length;t++)if(this.isPageInVisibleList(e[t]))return e[t];return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastVisiblePage",{get:function(){if(1===this.visiblePageCount)return this.visiblePages[0];for(var e=this.pages,t=e.length-1;t>=0;t--)if(this.isPageInVisibleList(e[t]))return e[t];return null},enumerable:!1,configurable:!0}),t.prototype.doComplete=function(e,t){if(void 0===e&&(e=!1),!this.isCompleted)return this.checkOnCompletingEvent(e,t)?(this.checkOnPageTriggers(!0),this.stopTimer(),this.notifyQuestionsOnHidingContent(this.currentPage),this.isCompleted=!0,this.clearUnusedValues(),this.saveDataOnComplete(e,t),this.setCookie(),!0):(this.isCompleted=!1,!1)},t.prototype.saveDataOnComplete=function(e,t){var n=this;void 0===e&&(e=!1);var o=this.hasCookie,i=function(e){l=!0,n.setCompletedState("saving",e)},r=function(e){n.setCompletedState("error",e)},s=function(e){n.setCompletedState("success",e),n.navigateTo()},a=function(e){n.setCompletedState("","")},l=!1,u={isCompleteOnTrigger:e,completeTrigger:t,showSaveInProgress:i,showSaveError:r,showSaveSuccess:s,clearSaveMessages:a,showDataSaving:i,showDataSavingError:r,showDataSavingSuccess:s,showDataSavingClear:a};this.onComplete.fire(this,u),!o&&this.surveyPostId&&this.sendResult(),l||this.navigateTo()},t.prototype.checkOnCompletingEvent=function(e,t){var n={allowComplete:!0,allow:!0,isCompleteOnTrigger:e,completeTrigger:t};return this.onCompleting.fire(this,n),n.allowComplete&&n.allow},t.prototype.start=function(){return!!this.firstPageIsStartPage&&(this.isCurrentPageRendering=!0,!!this.validatePageCore(this.startPage,!0)&&(this.isStartedState=!1,this.notifyQuestionsOnHidingContent(this.pages[0]),this.startTimerFromUI(),this.onStarted.fire(this,{}),this.updateVisibleIndexes(),this.currentPageNo=0,this.currentPage&&this.currentPage.locStrsChanged(),!0))},Object.defineProperty(t.prototype,"isValidatingOnServer",{get:function(){return this.getPropertyValue("isValidatingOnServer",!1)},enumerable:!1,configurable:!0}),t.prototype.setIsValidatingOnServer=function(e){e!=this.isValidatingOnServer&&(this.setPropertyValue("isValidatingOnServer",e),this.onIsValidatingOnServerChanged())},t.prototype.createServerValidationOptions=function(e,t,n){var o=this,i={data:{},errors:{},survey:this,complete:function(){o.completeServerValidation(i,t,n)}};if(e&&this.isValidateOnComplete)i.data=this.data;else for(var r=this.activePage.questions,s=0;s<r.length;s++){var a=r[s];if(a.visible){var l=this.getValue(a.getValueName());this.isValueEmpty(l)||(i.data[a.getValueName()]=l)}}return i},t.prototype.onIsValidatingOnServerChanged=function(){},t.prototype.doServerValidation=function(e,t,n){var o=this;if(void 0===t&&(t=!1),!this.onServerValidateQuestions||this.onServerValidateQuestions.isEmpty)return!1;if(!e&&this.isValidateOnComplete)return!1;this.setIsValidatingOnServer(!0);var i="function"==typeof this.onServerValidateQuestions;return this.serverValidationEventCount=i?1:this.onServerValidateQuestions.length,i?this.onServerValidateQuestions(this,this.createServerValidationOptions(e,t,n)):this.onServerValidateQuestions.fireByCreatingOptions(this,function(){return o.createServerValidationOptions(e,t,n)}),!0},t.prototype.completeServerValidation=function(e,t,n){if(!(this.serverValidationEventCount>1&&(this.serverValidationEventCount--,e&&e.errors&&0===Object.keys(e.errors).length))&&(this.serverValidationEventCount=0,this.setIsValidatingOnServer(!1),e||e.survey)){var o=e.survey,i=!0;if(e.errors){var r=this.autoFocusFirstError;for(var s in e.errors){var a=o.getQuestionByName(s);a&&a.errors&&(i=!1,a.addError(new En(e.errors[s],this)),r&&(r=!1,a.page&&(this.currentPage=a.page),a.focus(!0)))}this.fireValidatedErrorsOnPage(this.currentPage)}i&&(t?this.showPreviewCore():n?this.currentPage=n:o.isLastPage?o.doComplete():o.doNextPage())}},t.prototype.doNextPage=function(){var e=this.currentPage;if(this.checkOnPageTriggers(!1),this.sendPartialResult(),this.isCompleted)this.doComplete(!0);else if(e===this.currentPage){var t=this.visiblePages,n=t.indexOf(this.currentPage);this.currentPage=t[n+1]}},t.prototype.setCompleted=function(e){this.doComplete(!0,e)},t.prototype.sendPartialResult=function(){this.partialSendEnabled&&!this.isCompleted&&this.sendResult(this.surveyPostId,this.clientId,!0)},t.prototype.canBeCompleted=function(e,t){var n;if(gn.triggers.changeNavigationButtonsOnComplete){var o=this.canBeCompletedByTrigger;this.completedByTriggers||(this.completedByTriggers={}),t?this.completedByTriggers[e.id]={trigger:e,pageId:null===(n=this.currentPage)||void 0===n?void 0:n.id}:delete this.completedByTriggers[e.id],o!==this.canBeCompletedByTrigger&&this.updateButtonsVisibility()}},Object.defineProperty(t.prototype,"canBeCompletedByTrigger",{get:function(){var e;if(!this.completedByTriggers)return!1;var t=Object.keys(this.completedByTriggers);if(0===t.length)return!1;var n=null===(e=this.currentPage)||void 0===e?void 0:e.id;if(!n)return!0;for(var o=0;o<t.length;o++)if(n===this.completedByTriggers[t[o]].pageId)return!0;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completedTrigger",{get:function(){if(this.canBeCompletedByTrigger){var e=Object.keys(this.completedByTriggers)[0];return this.completedByTriggers[e].trigger}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processedCompletedHtml",{get:function(){var e=this.renderedCompletedHtml;return e?this.processHtml(e,"completed"):""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processedCompletedBeforeHtml",{get:function(){return this.locCompletedBeforeHtml.textOrHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processedLoadingHtml",{get:function(){return this.locLoadingHtml.textOrHtml},enumerable:!1,configurable:!0}),t.prototype.getProgressInfo=function(){var e=this.isDesignMode?this.pages:this.visiblePages;return Tt.getProgressInfoByElements(e,!1)},Object.defineProperty(t.prototype,"progressBarAriaLabel",{get:function(){return l("progressbar",this.getLocale())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressText",{get:function(){return this.progressBar.progressText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressValue",{get:function(){var e=this;return this.getPropertyValue("progressValue",void 0,function(){return e.getProgress()})},enumerable:!1,configurable:!0}),t.prototype.updateProgressText=function(e){void 0===e&&(e=!1),this.isShowingPreview||e&&"pages"==this.progressBarType&&this.onGetProgressText.isEmpty||(this.progressBarValue&&this.progressBarValue.resetProgressText(),this.resetPropertyValue("progressValue"))},t.prototype.getProgressText=function(){if(!this.isDesignMode&&null==this.currentPage)return"";var e={questionCount:0,answeredQuestionCount:0,requiredQuestionCount:0,requiredAnsweredQuestionCount:0,text:""},t=this.progressBarType.toLowerCase();if("questions"===t||"requiredquestions"===t||"correctquestions"===t||!this.onGetProgressText.isEmpty){var n=this.getProgressInfo();e.questionCount=n.questionCount,e.answeredQuestionCount=n.answeredQuestionCount,e.requiredQuestionCount=n.requiredQuestionCount,e.requiredAnsweredQuestionCount=n.requiredAnsweredQuestionCount}return e.text=this.getProgressTextCore(e),this.onGetProgressText.fire(this,e),e.text},t.prototype.getProgressTextCore=function(e){var t=this.progressBarType.toLowerCase();if("questions"===t)return this.getLocalizationFormatString("questionsProgressText",e.answeredQuestionCount,e.questionCount);if("requiredquestions"===t)return this.getLocalizationFormatString("questionsProgressText",e.requiredAnsweredQuestionCount,e.requiredQuestionCount);if("correctquestions"===t){var n=this.getCorrectedAnswerCount();return this.getLocalizationFormatString("questionsProgressText",n,e.questionCount)}var o=this.isDesignMode?this.pages:this.visiblePages,i=o.indexOf(this.currentPage)+1;return this.getLocalizationFormatString("progressText",i,o.length)},t.prototype.getRootCss=function(){return(new _e).append(this.css.root).append(this.css.rootProgress+"--"+this.progressBarType).append(this.css.rootMobile,this.isMobile).append(this.css.rootAnimationDisabled,!gn.animationEnabled).append(this.css.rootReadOnly,this.readOnly&&!this.isDesignMode).append(this.css.rootCompact,this.isCompact).append(this.css.rootFitToContainer,this.fitToContainer).toString()},t.prototype.afterRenderSurvey=function(e){var t=this;if(n.isAvailable()){this.destroyResizeObserver(),Array.isArray(e)&&(e=Tt.GetFirstNonTextElement(e));var i=e,r=this.css.variables;if(r){var s=Number.parseFloat(o.getComputedStyle(i).getPropertyValue(r.mobileWidth));if(s){var a=!1;this.resizeObserver=new ResizeObserver(function(e){n.requestAnimationFrame(function(){a=!(a||!on(i))&&t.processResponsiveness(i.offsetWidth,s,i.offsetHeight)})}),this.resizeObserver.observe(i)}}this.onAfterRenderSurvey.fire(this,{survey:this,htmlElement:e}),this.rootElement=e,this.scrollerElement=e.getElementsByClassName("sv-scroll__scroller")[0],this.addScrollEventListener()}},t.prototype.beforeDestroySurveyElement=function(){this.destroyResizeObserver(),this.removeScrollEventListener(),this.rootElement=void 0,this.scrollerElement=void 0},t.prototype.processResponsiveness=function(e,t,n){var o=e<t,i=this.isMobile!==o;this.setIsMobile(o),this.layoutElements.forEach(function(t){return t.processResponsiveness&&t.processResponsiveness(e)});var r={height:n,width:e};return this.onResize.fire(this,r),i},t.prototype.triggerResponsiveness=function(e){this.getAllQuestions().forEach(function(t){t.triggerResponsiveness(e)})},t.prototype.destroyResizeObserver=function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0)},t.prototype.updateQuestionCssClasses=function(e,t){this.onUpdateQuestionCssClasses.fire(this,{question:e,cssClasses:t})},t.prototype.updatePanelCssClasses=function(e,t){this.onUpdatePanelCssClasses.fire(this,{panel:e,cssClasses:t})},t.prototype.updatePageCssClasses=function(e,t){this.onUpdatePageCssClasses.fire(this,{page:e,cssClasses:t})},t.prototype.updateChoiceItemCss=function(e,t){t.question=e,this.onUpdateChoiceItemCss.fire(this,t)},t.prototype.afterRenderPage=function(e){var t=this;if(!this.isDesignMode&&!this.focusingQuestionInfo){var n=!1===this.isCurrentPageRendered;setTimeout(function(){return t.scrollToTopOnPageChange(n)},1)}this.focusQuestionInfo(),this.isCurrentPageRendered=!0,this.onAfterRenderPage.isEmpty||this.onAfterRenderPage.fire(this,{page:this.activePage,htmlElement:e})},t.prototype.afterRenderHeader=function(e){this.onAfterRenderHeader.isEmpty||this.onAfterRenderHeader.fire(this,{htmlElement:e})},t.prototype.afterRenderQuestion=function(e,t){this.onAfterRenderQuestion.fire(this,{question:e,htmlElement:t})},t.prototype.afterRenderQuestionInput=function(e,t){if(!this.onAfterRenderQuestionInput.isEmpty){var n=e.inputId,o=gn.environment.root;if(n&&(!t||t.id!==n)&&void 0!==o){var i=o.getElementById(n);i&&(t=i)}this.onAfterRenderQuestionInput.fire(this,{question:e,htmlElement:t})}},t.prototype.afterRenderPanel=function(e,t){this.onAfterRenderPanel.fire(this,{panel:e,htmlElement:t})},t.prototype.whenQuestionFocusIn=function(e){this.onFocusInQuestion.fire(this,{question:e})},t.prototype.whenPanelFocusIn=function(e){this.onFocusInPanel.fire(this,{panel:e})},t.prototype.rebuildQuestionChoices=function(){this.getAllQuestions().forEach(function(e){return e.surveyChoiceItemVisibilityChange()})},t.prototype.canChangeChoiceItemsVisibility=function(){return!this.onShowingChoiceItem.isEmpty},t.prototype.getChoiceItemVisibility=function(e,t,n){var o={question:e,item:t,visible:n};return this.onShowingChoiceItem.fire(this,o),o.visible},t.prototype.loadQuestionChoices=function(e){this.onChoicesLazyLoad.fire(this,e)},t.prototype.getChoiceDisplayValue=function(e){this.onGetChoiceDisplayValue.isEmpty?e.setItems(null):this.onGetChoiceDisplayValue.fire(this,e)},t.prototype.matrixBeforeRowAdded=function(e){this.onMatrixRowAdding.fire(this,e)},t.prototype.matrixRowAdded=function(e,t){this.onMatrixRowAdded.fire(this,{question:e,row:t})},t.prototype.matrixColumnAdded=function(e,t){this.onMatrixColumnAdded.fire(this,{question:e,column:t})},t.prototype.multipleTextItemAdded=function(e,t){this.onMultipleTextItemAdded.fire(this,{question:e,item:t})},t.prototype.getQuestionByValueNameFromArray=function(e,t,n){var o=this.getQuestionsByValueName(e);if(o){for(var i=0;i<o.length;i++){var r=o[i].getQuestionFromArray(t,n);if(r)return r}return null}},t.prototype.matrixRowRemoved=function(e,t,n){this.onMatrixRowRemoved.fire(this,{question:e,rowIndex:t,row:n})},t.prototype.matrixRowRemoving=function(e,t,n){var o={question:e,rowIndex:t,row:n,allow:!0};return this.onMatrixRowRemoving.fire(this,o),o.allow},t.prototype.matrixAllowRemoveRow=function(e,t,n){var o={question:e,rowIndex:t,row:n,allow:!0};return this.onMatrixRenderRemoveButton.fire(this,o),o.allow},t.prototype.matrixDetailPanelVisibleChanged=function(e,t,n,o){var i={question:e,rowIndex:t,row:n,visible:o,detailPanel:n.detailPanel};this.onMatrixDetailPanelVisibleChanged.fire(this,i)},t.prototype.matrixCellCreating=function(e,t){t.question=e,this.onMatrixCellCreating.fire(this,t)},t.prototype.matrixCellCreated=function(e,t){t.question=e,this.onMatrixCellCreated.fire(this,t)},t.prototype.matrixAfterCellRender=function(e){var t,n=this.onAfterRenderMatrixCell;n.isEmpty||(e.question=null===(t=e.cellQuestion)||void 0===t?void 0:t.parentQuestion,n.fire(this,e))},t.prototype.matrixCellValueChanged=function(e,t){t.question=e,this.onMatrixCellValueChanged.fire(this,t)},t.prototype.matrixCellValueChanging=function(e,t){t.question=e,this.onMatrixCellValueChanging.fire(this,t)},Object.defineProperty(t.prototype,"isValidateOnValueChanging",{get:function(){return"onValueChanging"===this.checkErrorsMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValidateOnValueChanged",{get:function(){return"onValueChanged"===this.checkErrorsMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValidateOnValueChange",{get:function(){return this.isValidateOnValueChanged||this.isValidateOnValueChanging},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValidateOnComplete",{get:function(){return"onComplete"===this.checkErrorsMode||this.validationAllowSwitchPages&&!this.validationAllowComplete},enumerable:!1,configurable:!0}),t.prototype.matrixCellValidate=function(e,t){return t.question=e,this.onMatrixCellValidate.fire(this,t),t.error?new En(t.error,this):null},t.prototype.dynamicPanelAdded=function(e,t,n,o){!this.isLoadingFromJson&&o&&this.updateVisibleIndexes(e.page),this.onDynamicPanelAdded.fire(this,{question:e,panel:n,panelIndex:t})},t.prototype.dynamicPanelRemoved=function(e,t,n,o){for(var i=n?n.questions:[],r=0;r<i.length;r++)i[r].clearOnDeletingContainer();o&&this.updateVisibleIndexes(e.page),this.onDynamicPanelRemoved.fire(this,{question:e,panelIndex:t,panel:n})},t.prototype.dynamicPanelRemoving=function(e,t,n){var o={question:e,panelIndex:t,panel:n,allow:!0};return this.onDynamicPanelRemoving.fire(this,o),o.allow},t.prototype.dynamicPanelGetTabTitle=function(e,t){t.question=e,this.onGetDynamicPanelTabTitle.fire(this,t)},t.prototype.dynamicPanelCurrentIndexChanged=function(e,t){t.question=e,this.onDynamicPanelCurrentIndexChanged.fire(this,t)},t.prototype.dragAndDropAllow=function(e){return this.onDragDropAllow.fire(this,e),e.allow},t.prototype.elementContentVisibilityChanged=function(e){this.currentPage&&this.currentPage.ensureRowsVisibility(),this.onElementContentVisibilityChanged.fire(this,{element:e})},t.prototype.getUpdatedPanelFooterActions=function(e,t,n){var o={question:n,panel:e,actions:t};return this.onGetPanelFooterActions.fire(this,o),o.actions},t.prototype.getUpdatedElementTitleActions=function(e,t){return e.isPage?this.getUpdatedPageTitleActions(e,t):e.isPanel?this.getUpdatedPanelTitleActions(e,t):this.getUpdatedQuestionTitleActions(e,t)},t.prototype.getTitleActionsResult=function(e,t){return e!=t.actions?t.actions:e!=t.titleActions?t.titleActions:e},t.prototype.getUpdatedQuestionTitleActions=function(e,t){var n={question:e,actions:t,titleActions:t};return this.onGetQuestionTitleActions.fire(this,n),this.getTitleActionsResult(t,n)},t.prototype.getUpdatedPanelTitleActions=function(e,t){var n={panel:e,actions:t,titleActions:t};return this.onGetPanelTitleActions.fire(this,n),this.getTitleActionsResult(t,n)},t.prototype.getUpdatedPageTitleActions=function(e,t){var n={page:e,actions:t,titleActions:t};return this.onGetPageTitleActions.fire(this,n),this.getTitleActionsResult(t,n)},t.prototype.getUpdatedMatrixRowActions=function(e,t,n){var o={question:e,actions:n,row:t};return this.onGetMatrixRowActions.fire(this,o),o.actions},t.prototype.scrollElementToTop=function(e,t,n,o,i,r,s,a){var l=this,u={element:e,question:t,page:n,elementId:o,cancel:!1,allow:!0};if(this.onScrollToTop.fire(this,u),!u.cancel&&u.allow){var c=this.getPageByElement(e),p=gn.environment.rootElement,h=this.rootElement||s||p;if(this.isLazyRendering&&c){var d=1;this.skeletonHeight&&h&&"function"==typeof h.getBoundingClientRect&&(d=h.getBoundingClientRect().height/this.skeletonHeight-1),c.forceRenderElement(e,function(){var e=null==h?void 0:h.querySelector("#".concat(u.elementId));l.suspendLazyRendering(),Tt.ScrollElementToTop(e,i,r,function(){l.releaseLazyRendering(),Ft(h.querySelector("#".concat(c.id))),a&&a()})},d)}else if(e.isPage&&!this.isSinglePage&&!this.isDesignMode&&this.rootElement){var f=h.querySelector(tn(this.css.rootWrapper));Tt.ScrollElementToViewCore(f,!1,i,r,a)}else{var g=null==h?void 0:h.querySelector("#".concat(u.elementId));this.suspendLazyRendering(),Tt.ScrollElementToTop(g,i,r,function(){l.releaseLazyRendering(),Ft(g),a&&a()})}}},t.prototype.chooseFiles=function(e,t,n){this.onOpenFileChooser.isEmpty?un(e,t):this.onOpenFileChooser.fire(this,{input:e,element:n&&n.element||this.survey,elementType:n&&n.elementType,item:n&&n.item,propertyName:n&&n.propertyName,callback:t,context:n})},t.prototype.uploadFiles=function(e,t,n,o){var i=this;this.onUploadFiles.isEmpty?o("error",this.getLocString("noUploadFilesHandler")):this.taskManager.runTask("file",function(r){i.onUploadFiles.fire(i,{question:e,name:t,files:n||[],callback:function(e,t){o(e,t),r()}})}),this.surveyPostId&&this.uploadFilesCore(t,n,o)},t.prototype.downloadFile=function(e,t,n,o){this.onDownloadFile.isEmpty&&o&&o("skipped",n.content||n),this.onDownloadFile.fire(this,{question:e,name:t,content:n.content||n,fileValue:n,callback:o})},t.prototype.clearFiles=function(e,t,n,o,i){this.onClearFiles.isEmpty&&i&&i("success",n),this.onClearFiles.fire(this,{question:e,name:t,value:n,fileName:o,callback:i})},t.prototype.updateChoicesFromServer=function(e,t,n){var o={question:e,choices:t,serverResult:n};return this.onChoicesLoaded.fire(this,o),o.choices},t.prototype.loadedChoicesFromServer=function(e){this.locStrsChanged()},t.prototype.uploadFilesCore=function(e,t,n){this.reportWarningOnUsingService()},t.prototype.getPage=function(e){return this.pages[e]},t.prototype.addPage=function(e,t){void 0===t&&(t=-1),null!=e&&(t<0||t>=this.pages.length?this.pages.push(e):this.pages.splice(t,0,e))},t.prototype.addNewPage=function(e,t){void 0===e&&(e=null),void 0===t&&(t=-1);var n=this.createNewPage(e);return this.addPage(n,t),n},t.prototype.removePage=function(e){var t=this.pages.indexOf(e);t<0||(this.pages.splice(t,1),this.currentPage==e&&(this.currentPage=this.pages.length>0?this.pages[0]:null))},t.prototype.getQuestionByName=function(e,t){void 0===t&&(t=!1);var n=this.getQuestionsFromHash(this.questionHashes.names,this.questionHashes.namesInsensitive,e,t);return n?n[0]:null},t.prototype.findQuestionByName=function(e){return this.getQuestionByName(e)},t.prototype.getEditingSurveyElement=function(){return this.editingObjValue},t.prototype.getQuestionByValueName=function(e,t){void 0===t&&(t=!1);var n=this.getQuestionsByValueName(e,t);return n?n[0]:null},t.prototype.getQuestionsByValueName=function(e,t){return void 0===t&&(t=!1),this.getQuestionsFromHash(this.questionHashes.valueNames,this.questionHashes.valueNamesInsensitive,e,t)},t.prototype.getCalculatedValueByName=function(e){for(var t=0;t<this.calculatedValues.length;t++)if(e==this.calculatedValues[t].name)return this.calculatedValues[t];return null},t.prototype.getQuestionsFromHash=function(e,t,n,o){if(!n)return null;var i=e[n];return i||(o&&(i=t[n=n.toLowerCase()])?i:null)},t.prototype.getQuestionsByNames=function(e,t){void 0===t&&(t=!1);var n=[];if(!e)return n;for(var o=0;o<e.length;o++)if(e[o]){var i=this.getQuestionByName(e[o],t);i&&n.push(i)}return n},t.prototype.getPageByElement=function(e){for(var t=0;t<this.pages.length;t++){var n=this.pages[t];if(n.containsElement(e))return n}return null},t.prototype.getPageByQuestion=function(e){return this.getPageByElement(e)},t.prototype.getPageByName=function(e){for(var t=0;t<this.pages.length;t++)if(this.pages[t].name==e)return this.pages[t];return null},t.prototype.getPagesByNames=function(e){var t=[];if(!e)return t;for(var n=0;n<e.length;n++)if(e[n]){var o=this.getPageByName(e[n]);o&&t.push(o)}return t},t.prototype.getAllQuestions=function(e,t,n){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),n&&(t=!1,(e?this.visiblePages:this.pages).forEach(function(e){return e.onFirstRendering()}));for(var o=[],i=0;i<this.pages.length;i++)this.pages[i].addQuestionsToList(o,e,t);return n?this.getNestedQuestionsByQuestionArray(o,e):o},t.prototype.getNestedQuestionsByQuestionArray=function(e,t){var n=[];return e.forEach(function(e){e.getNestedQuestions(t,!0,!0).forEach(function(e){return n.push(e)})}),n},t.prototype.getQuizQuestions=function(){for(var e=new Array,t=this.getPageStartIndex();t<this.pages.length;t++)if(this.pages[t].isVisible)for(var n=this.pages[t].questions,o=0;o<n.length;o++){var i=n[o];i.quizQuestionCount>0&&e.push(i)}return e},t.prototype.getPanelByName=function(e,t){void 0===t&&(t=!1);var n=this.getAllPanels();t&&(e=e.toLowerCase());for(var o=0;o<n.length;o++){var i=n[o].name;if(t&&(i=i.toLowerCase()),i==e)return n[o]}return null},t.prototype.getAllPanels=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);for(var n=new Array,o=0;o<this.pages.length;o++)this.pages[o].addPanelsIntoList(n,e,t);return n},t.prototype.createNewPage=function(e){var t=D.createClass("page");return t.name=e,t},t.prototype.getValueChangeReason=function(){return this.isSettingValueOnExpression?"expression":this.isSettingValueFromTrigger?"trigger":void 0},t.prototype.questionOnValueChanging=function(e,t,n){if(this.editingObj){var o=D.findProperty(this.editingObj.getType(),e);o&&(t=o.settingValue(this.editingObj,t))}if(this.onValueChanging.isEmpty)return t;var i={name:e,question:this.getQuestionByValueName(n||e),value:this.getUnbindValue(t),oldValue:this.getValue(e),reason:this.getValueChangeReason()};return this.onValueChanging.fire(this,i),i.value},t.prototype.getLocNotification=function(e,t,n){return e||r.isTwoValueEquals(t,n,!1,!0,!1)},t.prototype.updateQuestionValue=function(e,t){if(!this.isLoadingFromJson){var n=this.getQuestionsByValueName(e);if(n)for(var o=0;o<n.length;o++){var i=n[o].value;(i===t&&Array.isArray(i)&&this.editingObj||!this.isTwoValueEquals(i,t))&&n[o].updateValueFromSurvey(t,!1)}}},t.prototype.validateQuestionOnValueChanged=function(e){!this.isNavigationButtonPressed&&(this.isValidateOnValueChanged||e.getAllErrors().length>0)&&this.validateQuestionOnValueChangedCore(e)},t.prototype.validateQuestionOnValueChangedCore=function(e){var t=e.getAllErrors().length,n=e.validate(!0,!1,!this.isValidateOnValueChanging);return e.page&&this.isValidateOnValueChange&&(t>0||e.getAllErrors().length>0)&&this.fireValidatedErrorsOnPage(e.page),n},t.prototype.validateOnValueChanging=function(e,t){if(this.isLoadingFromJson)return!1;var n=this.getQuestionsByValueName(e);if(!n)return!1;for(var o=!0,i=0;i<n.length;i++){var r=n[i];this.isTwoValueEquals(r.valueForSurvey,t)||(r.value=t),o=this.validateQuestionOnValueChangedCore(r)&&o&&0==r.errors.length}return o},t.prototype.fireOnValueChanged=function(e,t,n){this.onValueChanged.fire(this,{name:e,question:n,value:t,reason:this.getValueChangeReason()})},t.prototype.notifyQuestionOnValueChanged=function(e,t,n){if(!this.isLoadingFromJson){var o=this.getQuestionsByValueName(e);if(o)for(var i=0;i<o.length;i++){var r=o[i];this.validateQuestionOnValueChanged(r),r.onSurveyValueChanged(t)}this.updateProgressText(!0),this.fireOnValueChanged(e,t,n?this.getQuestionByName(n):void 0),this.isDisposed||(this.checkElementsBindings(e,t),this.notifyElementsOnAnyValueOrVariableChanged(e,n))}},t.prototype.checkElementsBindings=function(e,t){this.isRunningElementsBindings=!0;for(var n=0;n<this.pages.length;n++)this.pages[n].checkBindings(e,t);this.isRunningElementsBindings=!1,this.updateVisibleIndexAfterBindings&&(this.updateVisibleIndexes(),this.updateVisibleIndexAfterBindings=!1)},t.prototype.notifyElementsOnAnyValueOrVariableChanged=function(e,t){if("processing"!==this.isEndLoadingFromJson)if(this.isRunningConditions)this.conditionNotifyElementsOnAnyValueOrVariableChanged=!0;else{for(var n=0;n<this.pages.length;n++)this.pages[n].onAnyValueChanged(e,t);this.isEndLoadingFromJson||this.locStrsChanged()}},t.prototype.updateAllQuestionsValue=function(e){for(var t=this.getAllQuestions(),n=0;n<t.length;n++){var o=t[n],i=o.getValueName();o.updateValueFromSurvey(this.getValue(i),e),o.requireUpdateCommentValue&&o.updateCommentFromSurvey(this.getComment(i))}},t.prototype.notifyAllQuestionsOnValueChanged=function(){for(var e=this.getAllQuestions(),t=0;t<e.length;t++)e[t].onSurveyValueChanged(this.getValue(e[t].getValueName()))},t.prototype.checkOnPageTriggers=function(e){for(var t=this.getCurrentPageQuestions(!0),n={},o=0;o<t.length;o++){var i=t[o].getValueName();n[i]=this.getValue(i)}this.addCalculatedValuesIntoFilteredValues(n),this.checkTriggers(n,!0,e)},t.prototype.getCurrentPageQuestions=function(e){void 0===e&&(e=!1);var t=[],n=this.currentPage;if(!n)return t;for(var o=0;o<n.questions.length;o++){var i=n.questions[o];(e||i.visible)&&i.name&&t.push(i)}return t},t.prototype.checkTriggers=function(e,t,n,o,i){if(void 0===n&&(n=!1),void 0===o&&(o=!1),!this.isCompleted&&0!=this.triggers.length&&!this.isDisplayMode)if(this.isTriggerIsRunning)for(var r in e)this.triggerKeys[r]=e[r];else{var s=!1;if(!n&&i&&this.hasRequiredValidQuestionTrigger){var a=this.getQuestionByValueName(i);s=a&&!a.validate(!1)}this.isTriggerIsRunning=!0,this.triggerKeys=e;for(var l=this.getFilteredProperties(),u=this.canBeCompletedByTrigger,c=0;c<this.triggers.length;c++){var p=this.triggers[c];if(!s||!p.requireValidQuestion){var h={isOnNextPage:t,isOnComplete:n,isOnNavigation:o,keys:this.triggerKeys,properties:l};p.checkExpression(h)}}u!==this.canBeCompletedByTrigger&&this.updateButtonsVisibility(),this.isTriggerIsRunning=!1}},t.prototype.checkTriggersAndRunConditions=function(e,t,n){var o={};o[e]={newValue:t,oldValue:n},this.runConditionOnValueChanged(e,t),this.checkTriggers(o,!1,!1,!1,e)},Object.defineProperty(t.prototype,"hasRequiredValidQuestionTrigger",{get:function(){for(var e=0;e<this.triggers.length;e++)if(this.triggers[e].requireValidQuestion)return!0;return!1},enumerable:!1,configurable:!0}),t.prototype.doElementsOnLoad=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].onSurveyLoad()},Object.defineProperty(t.prototype,"isRunningConditions",{get:function(){return this.isRunningConditionsValue},enumerable:!1,configurable:!0}),t.prototype.runExpressions=function(){this.runConditions()},t.prototype.runConditions=function(){if(!this.isCompleted&&"processing"!==this.isEndLoadingFromJson&&!this.isRunningConditions){this.isRunningConditionsValue=!0;var e=this.getFilteredProperties();this.runConditionsCore(e),this.isRunningConditionsValue=!1,this.isValueChangedOnRunningCondition&&this.conditionRunnerCounter<gn.maxConditionRunCountOnValueChanged?(this.isValueChangedOnRunningCondition=!1,this.conditionRunnerCounter++,this.runConditions()):(this.isValueChangedOnRunningCondition=!1,this.conditionRunnerCounter=0,this.conditionUpdateVisibleIndexes&&(this.conditionUpdateVisibleIndexes=!1,this.updateVisibleIndexes()),this.conditionNotifyElementsOnAnyValueOrVariableChanged&&(this.conditionNotifyElementsOnAnyValueOrVariableChanged=!1,this.notifyElementsOnAnyValueOrVariableChanged("")))}},t.prototype.runConditionOnValueChanged=function(e,t){this.questionTriggersKeys||(this.questionTriggersKeys={}),this.questionTriggersKeys[e]=t,this.isRunningConditions?this.isValueChangedOnRunningCondition=!0:(this.runConditions(),this.runQuestionsTriggers(e,t),this.questionTriggersKeys=void 0)},t.prototype.runConditionsCore=function(t){for(var n=this.pages,o=0;o<this.calculatedValues.length;o++)this.calculatedValues[o].resetCalculation();for(o=0;o<this.calculatedValues.length;o++)this.calculatedValues[o].doCalculation(this.calculatedValues,t);e.prototype.runConditionCore.call(this,t);for(var i=0;i<n.length;i++)n[i].runCondition(t)},t.prototype.runQuestionsTriggers=function(e,t){var n=this;this.isDisplayMode||this.isDesignMode||this.getAllQuestions().forEach(function(o){o.runTriggers(e,t,n.questionTriggersKeys)})},t.prototype.sendResult=function(e,t,n){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=!1),this.isEditMode&&(n&&this.onPartialSend&&this.onPartialSend.fire(this,null),!e&&this.surveyPostId&&(e=this.surveyPostId),e&&(t&&(this.clientId=t),n&&!this.clientId||this.reportWarningOnUsingService()))},t.prototype.getResult=function(e,t){this.reportWarningOnUsingService()},t.prototype.loadSurveyFromService=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),e&&(this.surveyId=e),t&&(this.clientId=t),this.reportWarningOnUsingService()},t.prototype.reportWarningOnUsingService=function(){F.warn("Self-hosted Form Library no longer supports integration with SurveyJS Demo Service. Learn more: https://surveyjs.io/stay-updated/release-notes/v2.0.0#form-library-removes-apis-for-integration-with-surveyjs-demo-service")},t.prototype.loadSurveyFromServiceJson=function(e){e&&(this.fromJSON(e),this.notifyAllQuestionsOnValueChanged(),this.onLoadSurveyFromService(),this.onLoadedSurveyFromService.fire(this,{}))},t.prototype.onLoadingSurveyFromService=function(){},t.prototype.onLoadSurveyFromService=function(){},t.prototype.resetVisibleIndexes=function(){for(var e=this.getAllQuestions(!0),t=0;t<e.length;t++)e[t].setVisibleIndex(-1);this.updateVisibleIndexes()},t.prototype.updateVisibleIndexes=function(e){this.isLoadingFromJson||this.isEndLoadingFromJson||(this.isRunningConditions&&this.onQuestionVisibleChanged.isEmpty&&this.onPageVisibleChanged.isEmpty?this.conditionUpdateVisibleIndexes=!0:this.isRunningElementsBindings?this.updateVisibleIndexAfterBindings=!0:(this.updatePageVisibleIndexes(),this.updatePageElementsVisibleIndexes(e),this.updateProgressText(!0)))},t.prototype.updatePageElementsVisibleIndexes=function(e){if("onPage"==this.showQuestionNumbers)for(var t=e?[e]:this.visiblePages,n=0;n<t.length;n++)t[n].setVisibleIndex(0);else for(var o=this.getStartVisibleIndex(),i=this.pages,r=0;r<i.length;r++)o+=i[r].setVisibleIndex(o)},t.prototype.getStartVisibleIndex=function(){var e=this.showQuestionNumbers;return"on"===e||"recursive"===e?0:-1},t.prototype.updatePageVisibleIndexes=function(){this.updateButtonsVisibility();for(var e=0,t=0;t<this.pages.length;t++){var n=this.pages[t],o=n.isVisible&&(t>0||!n.isStartPage);n.visibleIndex=o?e++:-1,n.num=o?n.visibleIndex+1:-1}},t.prototype.fromJSON=function(e,t){if(e){this.resetHasLogo(),this.resetPropertyValue("titleIsEmpty"),this.questionHashesClear(),this.jsonErrors=null,this.sjsVersion=void 0;var n=new A;n.toObject(e,this,t),n.errors.length>0&&(this.jsonErrors=n.errors),this.onStateAndCurrentPageChanged(),this.endLoading(),this.updateState(),this.sjsVersion&&gn.version&&r.compareVerions(this.sjsVersion,gn.version)>0&&F.warn("The version of the survey JSON schema (v"+this.sjsVersion+") is newer than your current Form Library version ("+gn.version+"). Please update the Form Library to make sure that all survey features work as expected.")}},t.prototype.startLoadingFromJson=function(t){e.prototype.startLoadingFromJson.call(this,t),t&&t.locale&&(this.locale=t.locale)},t.prototype.setJsonObject=function(e){this.fromJSON(e)},t.prototype.endLoadingFromJson=function(){this.isEndLoadingFromJson="processing",this.onFirstPageIsStartedChanged(),e.prototype.endLoadingFromJson.call(this),this.hasCookie&&(this.isCompletedBefore=!0),this.doElementsOnLoad(),this.onQuestionsOnPageModeChanged("standard"),this.isEndLoadingFromJson="conditions",this.runConditions(),this.notifyElementsOnAnyValueOrVariableChanged(""),this.isEndLoadingFromJson=null,this.updateVisibleIndexes(),this.updateCurrentPage(),this.setCalculatedWidthModeUpdater(),this.onEndLoadingFromJson.fire(this,{})},t.prototype.onBeforeRunConstructor=function(){},t.prototype.onBeforeCreating=function(){},t.prototype.onCreating=function(){},t.prototype.getProcessedTextValue=function(e){if(this.getProcessedTextValueCore(e),!this.onProcessDynamicText.isEmpty){var t=this.isValueEmpty(e.value);this.onProcessDynamicText.fire(this,e),e.isExists=e.isExists||t&&!this.isValueEmpty(e.value)}},t.prototype.getProcessedTextValueCore=function(e){var t=e.name.toLocaleLowerCase();if(-1===["no","require","title"].indexOf(t)){var n=(new j).getValueInfo({name:t,context:this.getValueGetterContext(),isText:!0,isDisplayValue:e.returnDisplayValue});n.isFound&&(e.isExists=!0,e.value=n.value)}},t.prototype.clearUnusedValues=function(){this.isClearingUnsedValues=!0;for(var e=this.getAllQuestions(),t=0;t<e.length;t++)e[t].clearUnusedValues();this.clearInvisibleQuestionValues(),this.isClearingUnsedValues=!1},t.prototype.hasVisibleQuestionByValueName=function(e){var t=e,n=this.getQuestionsByValueName(t.getValueName());if(!Array.isArray(n)||n.length<2)return!1;for(var o=0;o<n.length;o++){var i=n[o];if(i!==t&&i.isVisible&&i.isParentVisible&&!i.parentQuestion&&i.parentQuestion===t.parentQuestion)return!0}return!1},t.prototype.questionsByValueName=function(e){return this.getQuestionsByValueName(e)||[]},t.prototype.clearInvisibleQuestionValues=function(){for(var e="none"===this.clearInvisibleValues?"none":"onComplete",t=this.getAllQuestions(),n=0;n<t.length;n++)t[n].clearValueIfInvisible(e)},t.prototype.getVariable=function(e){if(!e)return null;e=e.toLowerCase();var t=this.variablesHash[e];return this.isValueEmpty(t)&&(e.indexOf(".")>-1||e.indexOf("[")>-1)?(new j).getValue(e,new N(this.variablesHash)):t},t.prototype.setVariable=function(e,t){if(e){var n=this.getVariable(e);this.valuesHash&&delete this.valuesHash[e],e=e.toLowerCase(),this.variablesHash[e]=t,this.notifyElementsOnAnyValueOrVariableChanged(e),r.isTwoValueEquals(n,t)||(this.checkTriggersAndRunConditions(e,t,n),this.onVariableChanged.fire(this,{name:e,value:t}))}},t.prototype.getVariableNames=function(){var e=[];for(var t in this.variablesHash)e.push(t);return e},t.prototype.getUnbindValue=function(e){return this.editingObj?e:r.getUnbindValue(e)},t.prototype.getValue=function(e){if(!e||0==e.length)return null;var t=this.getDataValueCore(this.valuesHash,e);return this.getUnbindValue(t)},t.prototype.setValue=function(e,t,n,o,i){void 0===n&&(n=!1),void 0===o&&(o=!0);var r=t;if(o&&(r=this.questionOnValueChanging(e,t)),(!this.isValidateOnValueChanging||this.validateOnValueChanging(e,r))&&(this.editingObj||!this.isValueEqual(e,r)||!this.isTwoValueEquals(r,t))){var s=this.getValue(e);this.isValueEmpyOnSetValue(e,r)?this.deleteDataValueCore(this.valuesHash,e):(r=this.getUnbindValue(r),this.setDataValueCore(this.valuesHash,e,r)),n=this.getLocNotification(n,r,s),this.updateOnSetValue(e,r,s,n,o,i)}},t.prototype.questionValueChanging=function(e,t){var n=e,o=n.parentQuestion;if(!o)return t;if(o.isDescendantOf("paneldynamic")&&!this.onDynamicPanelValueChanging.isEmpty){var i=o.getValueChangingOptions(n);if(i)return i.value=t,this.onDynamicPanelValueChanging.fire(this,i),i.value}return t},t.prototype.questionValueChanged=function(e,t){var n=e,o=n.parentQuestion;if(o&&o.isDescendantOf("paneldynamic")&&!this.onDynamicPanelValueChanged.isEmpty){var i=o.getValueChangingOptions(n);i&&(i.value=n.value,i.oldValue=t,this.onDynamicPanelValueChanged.fire(this,i))}},t.prototype.isValueEmpyOnSetValue=function(e,t){return!(!this.isValueEmpty(t,!1)||this.editingObj&&null!=t&&this.editingObj.getDefaultPropertyValue(e)!==t)},t.prototype.updateOnSetValue=function(e,t,n,o,i,r){void 0===o&&(o=!1),void 0===i&&(i=!0),this.updateQuestionValue(e,t),!0===o||this.isDisposed||this.isRunningElementsBindings||(r=r||e,this.nofifyQuesitonHash[e]=!0,this.checkTriggersAndRunConditions(e,t,n),this.nofifyQuesitonHash[e]&&(i&&this.notifyQuestionOnValueChanged(e,t,r),"text"!==o&&this.tryGoNextPageAutomatic(e),delete this.nofifyQuesitonHash[e]))},t.prototype.isValueEqual=function(e,t){""!==t&&void 0!==t||(t=null);var n=this.getValue(e);return""!==n&&void 0!==n||(n=null),null===t||null===n?t===n:this.isTwoValueEquals(t,n)},t.prototype.doOnPageAdded=function(e){if(e.setSurveyImpl(this),e.name||(e.name=this.generateNewName(this.pages,"page")),this.questionHashesPanelAdded(e),this.updateVisibleIndexes(),!this.runningPages&&(this.isLoadingFromJson||(this.updateProgressText(),this.updateCurrentPage()),this.canFireAddPage())){var t={page:e};this.onPageAdded.fire(this,t)}},t.prototype.canFireAddPage=function(){return!this.isMovingPage},t.prototype.doOnPageRemoved=function(e){e.setSurveyImpl(null),this.runningPages||(e===this.currentPage&&this.updateCurrentPage(),this.updateVisibleIndexes(),this.updateProgressText(),this.updateLazyRenderingRowsOnRemovingElements())},t.prototype.generateNewName=function(e,t){for(var n={},o=0;o<e.length;o++)n[e[o].name]=!0;for(var i=1;n[t+i];)i++;return t+i},t.prototype.tryGoNextPageAutomatic=function(e){var t=this;if(!this.isEndLoadingFromJson&&this.autoAdvanceEnabled&&this.currentPage){var n=this.getQuestionByValueName(e);if(n&&(!n||n.visible&&n.supportAutoAdvance())&&(n.validate(!1)||n.supportGoNextPageError())){if(this.currentSingleElement){var o=this.currentSingleElement;vi.safeTimeOut(function(){o===t.currentSingleElement&&(t.isLastElement?t.autoAdvanceAllowComplete&&t.tryCompleteOrShowPreview():t.performNext())},gn.autoAdvanceDelay)}var i=this.getCurrentPageQuestions();if(!(i.indexOf(n)<0)){for(var r=0;r<i.length;r++)if(i[r].hasInput&&i[r].isEmpty())return;if((!this.isLastPage||!0===this.autoAdvanceEnabled&&this.autoAdvanceAllowComplete)&&this.validateActivePage(!1)){var s=this.currentPage;vi.safeTimeOut(function(){s===t.currentPage&&(t.isLastPage?t.tryCompleteOrShowPreview():t.nextPage())},gn.autoAdvanceDelay)}}}}},t.prototype.tryCompleteOrShowPreview=function(){this.showPreviewBeforeComplete?this.showPreview():this.tryComplete()},t.prototype.getComment=function(e){return this.getValue(e+this.commentSuffix)||""},t.prototype.setComment=function(e,t,n){if(void 0===n&&(n=!1),t||(t=""),!this.isTwoValueEquals(t,this.getComment(e))){var o=e+this.commentSuffix;t=this.questionOnValueChanging(o,t,e),n=this.getLocNotification(n,t,this.getComment(e)),this.isValueEmpty(t)?this.deleteDataValueCore(this.valuesHash,o):this.setDataValueCore(this.valuesHash,o,t);var i=this.getQuestionsByValueName(e);if(i)for(var r=0;r<i.length;r++)i[r].updateCommentFromSurvey(t),this.validateQuestionOnValueChanged(i[r]);n||this.checkTriggersAndRunConditions(e,this.getValue(e),void 0),"text"!==n&&this.tryGoNextPageAutomatic(e);var s=this.getQuestionByValueName(e);s&&(this.fireOnValueChanged(o,t,s),s.comment=t,s.comment!=t&&(s.comment=t))}},t.prototype.clearValue=function(e){this.setValue(e,null),this.setComment(e,null)},Object.defineProperty(t.prototype,"clearDisabledChoices",{get:function(){return this.getPropertyValue("clearDisabledChoices",!1)},set:function(e){this.setPropertyValue("clearDisabledChoices",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearValueOnDisableItems",{get:function(){return this.clearDisabledChoices},set:function(e){this.clearDisabledChoices=e},enumerable:!1,configurable:!0}),t.prototype.getQuestionClearIfInvisible=function(e){return this.isShowingPreview||this.runningPages?"none":"default"!==e?e:this.clearInvisibleValues},t.prototype.questionVisibilityChanged=function(e,t,n){n&&this.updateVisibleIndexes(e.page),t||this.changeCurrentSingleElementOnVisibilityChanged(),this.onQuestionVisibleChanged.fire(this,{question:e,name:e.name,visible:t})},t.prototype.pageVisibilityChanged=function(e,t){if(!this.isLoadingFromJson){(t&&!this.currentPage||e===this.currentPage)&&this.updateCurrentPage(),this.updateVisibleIndexes(),t||this.changeCurrentSingleElementOnVisibilityChanged();var n=this.currentSingleElement,o=this.currentPage;n&&o&&n.page!==o&&(this.currentSingleElement=o.getFirstVisibleElement()),this.onPageVisibleChanged.fire(this,{page:e,visible:t})}},t.prototype.panelVisibilityChanged=function(e,t){e.page&&(this.updateVisibleIndexes(e.page),t||this.changeCurrentSingleElementOnVisibilityChanged()),this.onPanelVisibleChanged.fire(this,{panel:e,visible:t})},t.prototype.questionCreated=function(e){this.onQuestionCreated.fire(this,{question:e})},t.prototype.questionAdded=function(e,t,n,o){e.name||(e.name=this.generateNewName(this.getAllQuestions(!1,!0),"question")),e.page&&this.questionHashesAdded(e),this.isLoadingFromJson||(this.currentPage||this.updateCurrentPage(),this.updateVisibleIndexes(e.page),this.setCalculatedWidthModeUpdater()),this.canFireAddElement()&&this.onQuestionAdded.fire(this,{question:e,name:e.name,index:t,parent:n,page:o,parentPanel:n,rootPanel:o})},t.prototype.canFireAddElement=function(){return!this.isMovingQuestion},t.prototype.questionRemoved=function(e){this.questionHashesRemoved(e,e.name,e.getValueName()),this.updateVisibleIndexes(e.page),this.onQuestionRemoved.fire(this,{question:e,name:e.name}),this.updateLazyRenderingRowsOnRemovingElements()},t.prototype.questionRenamed=function(e,t,n){this.questionHashesRemoved(e,t,n),this.questionHashesAdded(e)},t.prototype.questionHashesClear=function(){this.questionHashes.names={},this.questionHashes.namesInsensitive={},this.questionHashes.valueNames={},this.questionHashes.valueNamesInsensitive={}},t.prototype.questionHashesPanelAdded=function(e){if(!this.isLoadingFromJson)for(var t=e.questions,n=0;n<t.length;n++)this.questionHashesAdded(t[n])},t.prototype.questionHashesAdded=function(e){this.questionHashAddedCore(this.questionHashes.names,e,e.name),this.questionHashAddedCore(this.questionHashes.namesInsensitive,e,e.name.toLowerCase()),this.questionHashAddedCore(this.questionHashes.valueNames,e,e.getValueName()),this.questionHashAddedCore(this.questionHashes.valueNamesInsensitive,e,e.getValueName().toLowerCase())},t.prototype.questionHashesRemoved=function(e,t,n){t&&(this.questionHashRemovedCore(this.questionHashes.names,e,t),this.questionHashRemovedCore(this.questionHashes.namesInsensitive,e,t.toLowerCase())),n&&(this.questionHashRemovedCore(this.questionHashes.valueNames,e,n),this.questionHashRemovedCore(this.questionHashes.valueNamesInsensitive,e,n.toLowerCase()))},t.prototype.questionHashAddedCore=function(e,t,n){var o;(o=e[n])?(o=e[n]).indexOf(t)<0&&o.push(t):e[n]=[t]},t.prototype.questionHashRemovedCore=function(e,t,n){var o=e[n];if(o){var i=o.indexOf(t);i>-1&&o.splice(i,1),0==o.length&&delete e[n]}},t.prototype.panelAdded=function(e,t,n,o){e.name||(e.name=this.generateNewName(this.getAllPanels(!1,!0),"panel")),this.questionHashesPanelAdded(e),this.updateVisibleIndexes(e.page),this.canFireAddElement()&&this.onPanelAdded.fire(this,{panel:e,name:e.name,index:t,parent:n,page:o,parentPanel:n,rootPanel:o})},t.prototype.panelRemoved=function(e){this.updateVisibleIndexes(e.page),this.onPanelRemoved.fire(this,{panel:e,name:e.name}),this.updateLazyRenderingRowsOnRemovingElements()},t.prototype.validateQuestion=function(e,t,n){if(!this.onValidateQuestion.isEmpty){var o={name:e.name,question:e,value:e.value,errors:t,error:null};this.onValidateQuestion.fire(this,o),o.error&&t.push(new En(o.error,this))}n&&this.beforeSettingQuestionErrors(e,t)},t.prototype.validatePanel=function(e,t,n){if(e.isPanel&&!this.onValidatePanel.isEmpty){var o={name:e.name,panel:e,error:null,errors:t};this.onValidatePanel.fire(this,o),o.error&&t.push(new En(o.error,this))}n&&this.makeRequiredErrorsInvisible(t)},t.prototype.processHtml=function(e,t){t||(t="");var n={html:e,reason:t};return this.onProcessHtml.fire(this,n),this.processText(n.html,!0)},t.prototype.getValueGetterContext=function(){return new ir(this,this.valuesHash,this.variablesHash)},t.prototype.processText=function(e,t){return this.processTextEx({text:e,returnDisplayValue:t,doEncoding:!1}).text},t.prototype.processTextEx=function(e){var t=void 0===e.doEncoding?gn.web.encodeUrlParams:e.doEncoding,n=e.text;!e.runAtDesign&&this.isDesignMode||(n=this.textPreProcessor.process(n,!0===e.returnDisplayValue,t,e.replaceUndefinedValues));var o={text:n,hasAllValuesOnLastRun:!0};return o.hasAllValuesOnLastRun=this.textPreProcessor.hasAllValuesOnLastRun,o},Object.defineProperty(t.prototype,"textPreProcessor",{get:function(){var e=this;return this.textPreProcessorValue||(this.textPreProcessorValue=new bo,this.textPreProcessorValue.onProcess=function(t){e.getProcessedTextValue(t)}),this.textPreProcessorValue},enumerable:!1,configurable:!0}),t.prototype.getSurveyMarkdownHtml=function(e,t,n,o){var i={element:e,text:t,name:n,item:o,html:null};return this.onTextMarkdown.fire(this,i),i.html},t.prototype.getCorrectedAnswerCount=function(){return this.getCorrectAnswerCount()},t.prototype.getCorrectAnswerCount=function(){return this.getCorrectedAnswerCountCore(!0)},t.prototype.getQuizQuestionCount=function(){for(var e=this.getQuizQuestions(),t=0,n=0;n<e.length;n++)t+=e[n].quizQuestionCount;return t},t.prototype.getInCorrectedAnswerCount=function(){return this.getIncorrectAnswerCount()},t.prototype.getInCorrectAnswerCount=function(){return this.getIncorrectAnswerCount()},t.prototype.getIncorrectAnswerCount=function(){return this.getCorrectedAnswerCountCore(!1)},t.prototype.onCorrectQuestionAnswer=function(e,t){this.onIsAnswerCorrect.isEmpty||(t.question=e,this.onIsAnswerCorrect.fire(this,t))},t.prototype.getCorrectedAnswerCountCore=function(e){for(var t=this.getQuizQuestions(),n=0,o=0;o<t.length;o++){var i=t[o],r=i.correctAnswerCount;n+=e?r:i.quizQuestionCount-r}return n},t.prototype.getCorrectedAnswers=function(){return this.getCorrectedAnswerCount()},t.prototype.getInCorrectedAnswers=function(){return this.getInCorrectedAnswerCount()},Object.defineProperty(t.prototype,"showTimerPanel",{get:function(){return this.showTimer?this.timerLocation:"none"},set:function(e){this.showTimer="none"!==e,this.showTimer&&(this.timerLocation=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTimer",{get:function(){return this.getPropertyValue("showTimer")},set:function(e){this.setPropertyValue("showTimer",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timerLocation",{get:function(){return this.getPropertyValue("timerLocation")},set:function(e){this.setPropertyValue("timerLocation",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTimerPanelShowingOnTop",{get:function(){return this.showTimer&&"top"===this.timerLocation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTimerPanelShowingOnBottom",{get:function(){return this.showTimer&&"bottom"===this.timerLocation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timerInfoMode",{get:function(){return this.getTimerInfoVal(this.getPropertyValue("timerInfoMode"))},set:function(e){this.setPropertyValue("timerInfoMode",e)},enumerable:!1,configurable:!0}),t.prototype.getTimerInfoVal=function(e){return"all"===e?"combined":e},Object.defineProperty(t.prototype,"showTimerPanelMode",{get:function(){var e=this.timerInfoMode;return"combined"===e?"all":e},set:function(e){this.timerInfoMode=this.getTimerInfoVal(e)},enumerable:!1,configurable:!0}),t.prototype.updateGridColumns=function(){this.pages.forEach(function(e){return e.updateGridColumns()})},Object.defineProperty(t.prototype,"widthMode",{get:function(){return this.getPropertyValue("widthMode")},set:function(e){this.setPropertyValue("widthMode",e)},enumerable:!1,configurable:!0}),t.prototype.setCalculatedWidthModeUpdater=function(){var e=this;this.isLoadingFromJson||(this.calculatedWidthModeUpdater&&this.calculatedWidthModeUpdater.dispose(),this.calculatedWidthModeUpdater=new Ie(function(){return e.calculateWidthMode()}),this.calculatedWidthMode=this.calculatedWidthModeUpdater)},t.prototype.calculateWidthMode=function(){if("auto"==this.widthMode){var e=!1;return this.isSingleVisibleInput||this.pages.forEach(function(t){t.needResponsiveWidth()&&(e=!0)}),e?"responsive":"static"}return this.widthMode},Object.defineProperty(t.prototype,"width",{get:function(){return this.getPropertyValue("width")},set:function(e){this.setPropertyValue("width",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedWidth",{get:function(){var e="static"==this.getPropertyValue("calculatedWidthMode"),t=this.getPropertyValue("width");if(this.isScaled&&this.responsiveStartWidth>1){var n=this.responsiveStartWidth;try{t=t||this.staticStartWidth,n=isNaN(t)?parseFloat(t.toString().replace("px","")):t}catch(e){}return(e?n:this.responsiveStartWidth)*this.widthScale/100+"px"}return t&&!isNaN(t)&&(t+="px"),e&&t||void 0},enumerable:!1,configurable:!0}),t.prototype.setStaticStartWidth=function(e){this.staticStartWidth=e},t.prototype.setResponsiveStartWidth=function(e){this.responsiveStartWidth=e},Object.defineProperty(t.prototype,"isScaled",{get:function(){return Math.abs(this.widthScale-100)>.001},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timerInfo",{get:function(){return this.getTimerInfo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timerClock",{get:function(){var e,t;if(this.currentPage){var n=this.getTimerInfo(),o=n.spent,i=n.limit,r=n.minorSpent,s=n.minorLimit;e=i>0?this.getDisplayClockTime(i-o):this.getDisplayClockTime(o),void 0!==r&&(t=s>0?this.getDisplayClockTime(s-r):this.getDisplayClockTime(r))}return{majorText:e,minorText:t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timerInfoText",{get:function(){var e={text:this.getTimerInfoText()};this.onTimerPanelInfoText.fire(this,e);var t=new Et(this,!0);return t.text=e.text,t.textOrHtml},enumerable:!1,configurable:!0}),t.prototype.getTimerInfo=function(){var e=this.currentPage;if(!e)return{spent:0,limit:0};var t=e.timeSpent,n=this.timeSpent,o=e.getMaxTimeToFinish(),i=this.timeLimit;return"page"==this.timerInfoMode?{spent:t,limit:o}:"survey"==this.timerInfoMode?{spent:n,limit:i}:o>0&&i>0?{spent:t,limit:o,minorSpent:n,minorLimit:i}:o>0?{spent:t,limit:o,minorSpent:n}:i>0?{spent:n,limit:i,minorSpent:t}:{spent:t,minorSpent:n}},t.prototype.getTimerInfoText=function(){var e=this.currentPage;if(!e)return"";var t=this.getDisplayTime(e.timeSpent),n=this.getDisplayTime(this.timeSpent),o=e.getMaxTimeToFinish(),i=this.getDisplayTime(o),r=this.getDisplayTime(this.timeLimit);return"page"==this.timerInfoMode?this.getTimerInfoPageText(e,t,i):"survey"==this.timerInfoMode?this.getTimerInfoSurveyText(n,r):"combined"==this.timerInfoMode?o<=0&&this.timeLimit<=0?this.getLocalizationFormatString("timerSpentAll",t,n):o>0&&this.timeLimit>0?this.getLocalizationFormatString("timerLimitAll",t,i,n,r):this.getTimerInfoPageText(e,t,i)+" "+this.getTimerInfoSurveyText(n,r):""},t.prototype.getTimerInfoPageText=function(e,t,n){return e&&e.getMaxTimeToFinish()>0?this.getLocalizationFormatString("timerLimitPage",t,n):this.getLocalizationFormatString("timerSpentPage",t,n)},t.prototype.getTimerInfoSurveyText=function(e,t){var n=this.timeLimit>0?"timerLimitSurvey":"timerSpentSurvey";return this.getLocalizationFormatString(n,e,t)},t.prototype.getDisplayClockTime=function(e){e<0&&(e=0);var t=Math.floor(e/60),n=e%60,o=n.toString();return n<10&&(o="0"+o),"".concat(t,":").concat(o)},t.prototype.getDisplayTime=function(e){var t=Math.floor(e/60),n=e%60,o="";return t>0&&(o+=t+" "+this.getLocalizationString("timerMin")),o&&0==n?o:(o&&(o+=" "),o+n+" "+this.getLocalizationString("timerSec"))},Object.defineProperty(t.prototype,"timerModel",{get:function(){return this.timerModelValue},enumerable:!1,configurable:!0}),t.prototype.startTimer=function(){this.isEditMode&&this.timerModel.start()},t.prototype.startTimerFromUI=function(){this.showTimer&&"running"===this.state&&this.startTimer()},t.prototype.stopTimer=function(){this.timerModel.stop()},Object.defineProperty(t.prototype,"timeSpent",{get:function(){return this.timerModel.spent},set:function(e){this.timerModel.spent=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeLimit",{get:function(){return this.getPropertyValue("timeLimit",0)},set:function(e){this.setPropertyValue("timeLimit",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxTimeToFinish",{get:function(){return this.timeLimit},set:function(e){this.timeLimit=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeLimitPerPage",{get:function(){return this.getPropertyValue("timeLimitPerPage",0)},set:function(e){this.setPropertyValue("timeLimitPerPage",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxTimeToFinishPage",{get:function(){return this.timeLimitPerPage},set:function(e){this.timeLimitPerPage=e},enumerable:!1,configurable:!0}),t.prototype.doTimer=function(e){if(this.onTimerTick.fire(this,{}),this.timeLimit>0&&this.timeLimit<=this.timeSpent&&(this.timeSpent=this.timeLimit,this.tryComplete()),e){var t=e.getMaxTimeToFinish();t>0&&t==e.timeSpent&&(this.isLastPage?this.tryComplete():this.nextPage())}},Object.defineProperty(t.prototype,"inSurvey",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getSurveyData=function(){return this},t.prototype.getSurvey=function(){return this},t.prototype.getTextProcessor=function(){return this},t.prototype.getObjects=function(e,t){var n=[];return Array.prototype.push.apply(n,this.getPagesByNames(e)),Array.prototype.push.apply(n,this.getQuestionsByNames(t)),n},t.prototype.setTriggerValue=function(e,t,n){if(e)if(n)this.setVariable(e,t);else{this.startSetValueFromTrigger();var o=(new j).getValueInfo({name:e,context:this.getValueGetterContext(),createObjects:!0});o.isFound&&o.question?o.question.value=t:e.indexOf(".")<0&&this.setValue(e,t),this.finishSetValueFromTrigger()}},t.prototype.copyTriggerValue=function(e,t,n){if(e&&t){var o=(new j).getValueInfo({name:t,context:this.getValueGetterContext(),createObjects:!0,isText:n,isDisplayValue:n});o.isFound&&this.setTriggerValue(e,r.getUnbindValue(o.value),!1)}},t.prototype.triggerExecuted=function(e){this.onTriggerExecuted.fire(this,{trigger:e})},Object.defineProperty(t.prototype,"isSettingValueFromTrigger",{get:function(){return this.setValueFromTriggerCounter>0},enumerable:!1,configurable:!0}),t.prototype.startSetValueFromTrigger=function(){this.setValueFromTriggerCounter++},t.prototype.finishSetValueFromTrigger=function(){this.setValueFromTriggerCounter--},t.prototype.startMovingQuestion=function(){this.isMovingQuestion=!0},t.prototype.stopMovingQuestion=function(){this.isMovingQuestion=!1},Object.defineProperty(t.prototype,"isQuestionDragging",{get:function(){return this.isMovingQuestion},enumerable:!1,configurable:!0}),t.prototype.startMovingPage=function(){this.isMovingPage=!0},t.prototype.stopMovingPage=function(){this.isMovingPage=!1},t.prototype.focusQuestion=function(e){return this.focusQuestionByInstance(this.getQuestionByName(e,!0))},t.prototype.focusQuestionByInstance=function(e,t){var n;if(void 0===t&&(t=!1),!e||!e.isVisible||!e.page)return!1;if((null===(n=this.focusingQuestionInfo)||void 0===n?void 0:n.question)===e)return!1;this.focusingQuestionInfo={question:e,onError:t};var o=this.currentSingleElement;this.skippedPages.push({from:o||this.currentPage,to:o?e:e.page});var i=this.activePage!==e.page&&!e.page.isStartPage;return i&&(this.currentPage=e.page),this.isSingleVisibleQuestion&&!this.isDesignMode&&(this.currentSingleElement=e),i||this.focusQuestionInfo(),!0},t.prototype.focusQuestionInfo=function(){var e,t=null===(e=this.focusingQuestionInfo)||void 0===e?void 0:e.question;t&&!t.isDisposed&&t.focus(this.focusingQuestionInfo.onError),this.focusingQuestionInfo=void 0},t.prototype.questionEditFinishCallback=function(e,t){var n=this.enterKeyAction||gn.enterKeyAction;if("loseFocus"==n&&t.target.blur(),"moveToNextEditor"==n){var o=this.currentPage.questions,i=o.indexOf(e);i>-1&&i<o.length-1?o[i+1].focus():t.target.blur()}},t.prototype.elementWrapperComponentNameCore=function(e,t,n,o,i){if(this.onElementWrapperComponentName.isEmpty)return e;var r={componentName:e,element:t,wrapperName:n,reason:o,item:i};return this.onElementWrapperComponentName.fire(this,r),r.componentName},t.prototype.elementWrapperDataCore=function(e,t,n,o,i){if(this.onElementWrapperComponentData.isEmpty)return e;var r={data:e,element:t,wrapperName:n,reason:o,item:i};return this.onElementWrapperComponentData.fire(this,r),r.data},t.prototype.getElementWrapperComponentName=function(e,n){var o="logo-image"===n?"sv-logo-image":t.TemplateRendererComponentName;return this.elementWrapperComponentNameCore(o,e,"component",n)},t.prototype.getQuestionContentWrapperComponentName=function(e){return this.elementWrapperComponentNameCore(t.TemplateRendererComponentName,e,"content-component")},t.prototype.getRowWrapperComponentName=function(e){return this.elementWrapperComponentNameCore(t.TemplateRendererComponentName,e,"row")},t.prototype.getItemValueWrapperComponentName=function(e,n){return this.elementWrapperComponentNameCore(t.TemplateRendererComponentName,n,"itemvalue",void 0,e)},t.prototype.getElementWrapperComponentData=function(e,t){return this.elementWrapperDataCore(e,e,"component",t)},t.prototype.getRowWrapperComponentData=function(e){return this.elementWrapperDataCore(e,e,"row")},t.prototype.getItemValueWrapperComponentData=function(e,t){return this.elementWrapperDataCore(e,t,"itemvalue",void 0,e)},t.prototype.getMatrixCellTemplateData=function(e){var t=e.question;return this.elementWrapperDataCore(t,t,"cell")},t.prototype.searchText=function(e){e&&(e=e.toLowerCase());for(var t=[],n=0;n<this.pages.length;n++)this.pages[n].searchText(e,t);return t},t.prototype.getSkeletonComponentName=function(e){return this.skeletonComponentName},t.prototype.addLayoutElement=function(e){var t=this.removeLayoutElement(e.id);return this.layoutElements.push(e),t},t.prototype.findLayoutElement=function(e){var t=this.layoutElements.filter(function(t){return t.id===e})[0];return t},t.prototype.removeLayoutElement=function(e){var t=this.findLayoutElement(e);if(t){var n=this.layoutElements.indexOf(t);this.layoutElements.splice(n,1)}return t},t.prototype.getContainerContent=function(e){for(var t=new Array,n=0,o=this.layoutElements;n<o.length;n++){var i=o[n];if("display"!==this.mode&&sr(i.id,"timerpanel"))"header"===e&&this.isTimerPanelShowingOnTop&&!this.isStartPageActive&&t.push(i),"footer"===e&&this.isTimerPanelShowingOnBottom&&!this.isStartPageActive&&t.push(i);else if("running"===this.state&&sr(i.id,this.progressBarComponentName)){if("singlePage"!=this.questionsOnPageMode||"questions"==this.progressBarType){var r=this.findLayoutElement("advanced-header"),s=!(a=r&&r.data)||a.hasBackground;sr(this.progressBarLocation,"aboveHeader")&&(s=!1),sr(this.progressBarLocation,"belowHeader")&&(s=!0),!this.showTOC||a&&a.hasBackground||!this.isShowProgressBarOnTop||this.isStartPageActive?("header"!==e||s||(i.index=-150,this.isShowProgressBarOnTop&&!this.isStartPageActive&&t.push(i)),"center"===e&&s&&(i.index&&delete i.index,this.isShowProgressBarOnTop&&!this.isStartPageActive&&t.push(i))):"center"===e&&(s?delete i.index:i.index=-150,t.push(i)),"footer"===e&&this.isShowProgressBarOnBottom&&!this.isStartPageActive&&t.push(i)}}else if(sr(i.id,"buttons-navigation-top"))"contentTop"===e&&this.isNavigationButtonsShowingOnTop&&t.push(i);else if(sr(i.id,"buttons-navigation"))"contentBottom"===e&&this.isNavigationButtonsShowingOnBottom&&t.push(i);else if("running"===this.state&&sr(i.id,"toc-navigation")&&this.showTOC)"left"===e&&-1!==["left","both"].indexOf(this.tocLocation)&&t.push(i),"right"===e&&-1!==["right","both"].indexOf(this.tocLocation)&&t.push(i);else if(sr(i.id,"advanced-header")){if("running"===this.state||"starting"===this.state||!0===this.showHeaderOnCompletePage&&"completed"===this.state){var a=i&&i.data;!this.showTOC||a&&a.hasBackground?i.container===e&&t.push(i):"contentTop"===e&&t.push(i)}}else(Array.isArray(i.container)&&-1!==i.container.indexOf(e)||i.container===e)&&t.push(i)}return t.sort(function(e,t){return(e.index||0)-(t.index||0)}),t.forEach(function(e){e.getData&&(e.data=e.getData())}),t},t.prototype.processPopupVisiblityChanged=function(e,t,n){this.onPopupVisibleChanged.fire(this,{question:e,popup:t,visible:n})},t.prototype.processOpenDropdownMenu=function(e,t){var n=Object.assign({question:e},t);this.onOpenDropdownMenu.fire(this,n),t.menuType=n.menuType},t.prototype.getCssTitleExpandableSvg=function(){return null},t.prototype.createCustomChoiceItem=function(e){this.onCreateCustomChoiceItem.fire(this,e)},t.prototype.applyTheme=function(e){var t=this;if(e){if(Object.keys(e).forEach(function(n){"header"!==n&&("isPanelless"===n?t.isCompact=e[n]:t[n]=e[n])}),"header"in e&&!e.headerView&&(this.headerView="advanced"),"basic"!==this.headerView){this.removeLayoutElement("advanced-header");var n=new Ei;n.fromTheme(e),this.insertAdvancedHeader(n)}this.themeChanged(e)}},t.prototype.themeChanged=function(e){this.getAllQuestions().forEach(function(t){return t.themeChanged(e)})},t.prototype.waitAndExecute=function(e){this.taskManager.waitAndExecute(e)},t.prototype.dispose=function(){if(this.unConnectEditingObj(),this.removeScrollEventListener(),this.destroyResizeObserver(),this.rootElement=void 0,this.layoutElements){for(var t=0;t<this.layoutElements.length;t++)this.layoutElements[t].data&&this.layoutElements[t].data!==this&&this.layoutElements[t].data.dispose&&this.layoutElements[t].data.dispose();this.layoutElements.splice(0,this.layoutElements.length)}if(e.prototype.dispose.call(this),this.editingObj=null,this.pages){for(this.currentPage=null,t=0;t<this.pages.length;t++)this.pages[t].setSurveyImpl(void 0),this.pages[t].dispose();this.pages.splice(0,this.pages.length),this.disposeCallback&&this.disposeCallback()}},t.prototype._isElementShouldBeSticky=function(e){var t;if(!e)return!1;var n=null===(t=this.scrollerElement)||void 0===t?void 0:t.querySelector(e);return!!n&&!!this.scrollerElement&&this.scrollerElement.scrollTop>0&&n.getBoundingClientRect().y<=this.scrollerElement.getBoundingClientRect().y},Object.defineProperty(t.prototype,"rootScrollDisabled",{get:function(){return!(this.fitToContainer&&this.formScrollDisabled)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"formScrollDisabled",{get:function(){return!this.backgroundImage||"fixed"!==this.backgroundImageAttachment},enumerable:!1,configurable:!0}),t.prototype.onScroll=function(){this.rootElement&&(this._isElementShouldBeSticky(".sv-components-container-center")?this.rootElement.classList&&this.rootElement.classList.add("sv-root--sticky-top"):this.rootElement.classList&&this.rootElement.classList.remove("sv-root--sticky-top"),this.tocModel&&this.tocModel.updateStickyTOCSize(this.rootElement)),this.onScrollCallback&&this.onScrollCallback()},t.prototype.addScrollEventListener=function(){var e=this;this.scrollHandler=function(){e.onScroll()},this.rootElement.addEventListener("scroll",this.scrollHandler),this.rootElement.getElementsByTagName("form")[0]&&this.rootElement.getElementsByTagName("form")[0].addEventListener("scroll",this.scrollHandler),this.scrollerElement&&this.scrollerElement.addEventListener("scroll",this.scrollHandler)},t.prototype.removeScrollEventListener=function(){this.rootElement&&this.scrollHandler&&(this.rootElement.removeEventListener("scroll",this.scrollHandler),this.rootElement.getElementsByTagName("form")[0]&&this.rootElement.getElementsByTagName("form")[0].removeEventListener("scroll",this.scrollHandler),this.scrollerElement&&this.scrollerElement.removeEventListener("scroll",this.scrollHandler))},t.TemplateRendererComponentName="sv-template-renderer",t.platform="unknown",or([y()],t.prototype,"completedCss",void 0),or([y()],t.prototype,"completedBeforeCss",void 0),or([y()],t.prototype,"loadingBodyCss",void 0),or([y()],t.prototype,"containerCss",void 0),or([y({onSet:function(e,t){t.updateCss()}})],t.prototype,"fitToContainer",void 0),or([y({onSet:function(e,t){if("basic"===e)t.removeLayoutElement("advanced-header");else if(!t.findLayoutElement("advanced-header")){var n=new Ei;t.insertAdvancedHeader(n)}}})],t.prototype,"headerView",void 0),or([y()],t.prototype,"showBrandInfo",void 0),or([y()],t.prototype,"enterKeyAction",void 0),or([y()],t.prototype,"lazyRenderFirstBatchSizeValue",void 0),or([y({defaultValue:{}})],t.prototype,"cssVariables",void 0),or([y()],t.prototype,"_isMobile",void 0),or([y()],t.prototype,"_isCompact",void 0),or([y({onSet:function(e,t){t.updateCss()}})],t.prototype,"backgroundImage",void 0),or([y()],t.prototype,"backgroundImageFit",void 0),or([y({onSet:function(e,t){t.updateCss()}})],t.prototype,"backgroundImageAttachment",void 0),or([y()],t.prototype,"wrapperFormCss",void 0),or([y({getDefaultValue:function(e){return"buttons"===e.progressBarType}})],t.prototype,"progressBarShowPageTitles",void 0),or([y()],t.prototype,"progressBarShowPageNumbers",void 0),or([y()],t.prototype,"progressBarInheritWidthFrom",void 0),or([y({defaultValue:!0})],t.prototype,"validationEnabled",void 0),or([y()],t.prototype,"rootCss",void 0),or([y({onSet:function(e,t){t.updateGridColumns()}})],t.prototype,"gridLayoutEnabled",void 0),or([y()],t.prototype,"calculatedWidthMode",void 0),or([y({defaultValue:100,onSet:function(e,t,n){t.pages.forEach(function(e){return e.updateRootStyle()})}})],t.prototype,"widthScale",void 0),or([y()],t.prototype,"staticStartWidth",void 0),or([y()],t.prototype,"responsiveStartWidth",void 0),or([b()],t.prototype,"layoutElements",void 0),t}(It);function sr(e,t){return!!e&&!!t&&e.toUpperCase()===t.toUpperCase()}D.addClass("survey",[{name:"locale",choices:function(){return a.getLocales(!0)},onGetValue:function(e){return e.locale==a.defaultLocale?null:e.locale}},{name:"title",serializationProperty:"locTitle",dependsOn:"locale"},{name:"description:text",serializationProperty:"locDescription",dependsOn:"locale"},{name:"logo:file",serializationProperty:"locLogo"},{name:"logoWidth",default:"auto",minValue:0},{name:"logoHeight",default:"40px",minValue:0},{name:"logoFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"logoPosition",default:"left",choices:["none","left","right","top","bottom"]},{name:"autoFocusFirstQuestion:boolean",alternativeName:"focusFirstQuestionAutomatic"},{name:"autoFocusFirstError:boolean",default:!0,alternativeName:"focusOnFirstError"},{name:"completedHtml:html",serializationProperty:"locCompletedHtml"},{name:"completedBeforeHtml:html",serializationProperty:"locCompletedBeforeHtml"},{name:"completedHtmlOnCondition:htmlconditions",className:"htmlconditionitem",isArray:!0},{name:"loadingHtml:html",serializationProperty:"locLoadingHtml"},{name:"pages:surveypages",className:"page",isArray:!0,onSerializeValue:function(e){return e.originalPages||e.pages}},{name:"elements",alternativeName:"questions",baseClassName:"question",visible:!1,isLightSerializable:!1,onGetValue:function(e){return null},onSetValue:function(e,t,n){e.pages.splice(0,e.pages.length);var o=e.addNewPage("");n.toObject({questions:t},o,null==n?void 0:n.options)}},{name:"triggers:triggers",baseClassName:"surveytrigger",classNamePart:"trigger"},{name:"calculatedValues:calculatedvalues",className:"calculatedvalue",isArray:!0},{name:"sjsVersion",visible:!1},{name:"surveyId",visible:!1},{name:"surveyPostId",visible:!1},{name:"surveyShowDataSaving:boolean",visible:!1},"cookieName",{name:"partialSendEnabled:boolean",alternativeName:"sendResultOnPageNext"},{name:"showNavigationButtons:boolean",default:!0},{name:"navigationButtonsLocation",default:"bottom",choices:["top","bottom","topBottom"]},{name:"showPrevButton:boolean",default:!0,visibleIf:function(e){return"none"!==e.showNavigationButtons}},{name:"showTitle:boolean",default:!0},{name:"showPageTitles:boolean",default:!0},{name:"showCompletePage:boolean",default:!0,alternativeName:"showCompletedPage"},"navigateToUrl",{name:"navigateToUrlOnCondition:urlconditions",className:"urlconditionitem",isArray:!0},{name:"questionOrder",alternativeName:"questionsOrder",default:"initial",choices:["initial","random"]},{name:"matrixDragHandleArea",visible:!1,default:"entireItem",choices:["entireItem","icon"]},"showPageNumbers:boolean",{name:"showQuestionNumbers",default:"off",choices:["on","onPage","recursive","off"]},{name:"questionTitleLocation",default:"top",choices:["top","bottom","left"]},{name:"questionDescriptionLocation",default:"underTitle",choices:["underInput","underTitle"]},{name:"questionErrorLocation",default:"top",choices:["top","bottom"]},{name:"showProgressBar:boolean",default:!1,onSetValue:function(e,t,n){e&&e.setShowProgressBar(t)}},{name:"progressBarLocation",default:"auto",choices:["auto","aboveheader","belowheader","bottom","topbottom"],visibleIf:function(e){return e.showProgressBar}},{name:"progressBarType",default:"pages",choices:["pages","questions","requiredQuestions","correctQuestions"],visibleIf:function(e){return e.showProgressBar}},{name:"progressBarShowPageTitles:switch",category:"navigation",visibleIf:function(e){return e.showProgressBar&&"pages"===e.progressBarType}},{name:"progressBarShowPageNumbers:switch",default:!1,category:"navigation",visibleIf:function(e){return e.showProgressBar&&"pages"===e.progressBarType}},{name:"progressBarInheritWidthFrom",default:"container",choices:["container","survey"],category:"navigation",visibleIf:function(e){return e.showProgressBar&&"pages"===e.progressBarType}},{name:"showTOC:switch",default:!1},{name:"tocLocation",default:"left",choices:["left","right"],dependsOn:["showTOC"],visibleIf:function(e){return!!e&&e.showTOC}},{name:"readOnly:boolean"},{name:"mode",visible:!1,isSerializable:!1},{name:"storeOthersAsComment:boolean",default:!0},{name:"maxTextLength:number",default:0,minValue:0},{name:"maxCommentLength:number",default:0,minValue:0,alternativeName:"maxOthersLength"},{name:"autoAdvanceEnabled:boolean",alternativeName:"goNextPageAutomatic",onSetValue:function(e,t){"autogonext"!==t&&(t=r.isTwoValueEquals(t,!0)),"autogonext"===t&&(t=!0),e.setPropertyValue("autoAdvanceEnabled",t)}},{name:"autoAdvanceAllowComplete:boolean",default:!0,alternativeName:"allowCompleteSurveyAutomatic",visibleIf:function(e){return!0===e.autoAdvanceEnabled}},{name:"clearInvisibleValues",default:"onComplete",choices:["none","onComplete","onHidden","onHiddenContainer"]},{name:"checkErrorsMode",default:"onNextPage",choices:["onNextPage","onValueChanged","onComplete"]},{name:"validateVisitedEmptyFields:boolean",dependsOn:"checkErrorsMode",visibleIf:function(e){return"onValueChanged"===e.checkErrorsMode}},{name:"textUpdateMode",default:"onBlur",choices:["onBlur","onTyping"]},{name:"autoGrowComment:boolean",default:!1},{name:"allowResizeComment:boolean",default:!0},{name:"commentAreaRows:number",minValue:1},{name:"startSurveyText",serializationProperty:"locStartSurveyText",visibleIf:function(e){return e.firstPageIsStartPage}},{name:"pagePrevText",serializationProperty:"locPagePrevText",visibleIf:function(e){return"none"!==e.showNavigationButtons&&e.showPrevButton}},{name:"pageNextText",serializationProperty:"locPageNextText",visibleIf:function(e){return"none"!==e.showNavigationButtons}},{name:"completeText",serializationProperty:"locCompleteText",visibleIf:function(e){return"none"!==e.showNavigationButtons}},{name:"previewText",serializationProperty:"locPreviewText",visibleIf:function(e){return e.showPreviewBeforeComplete}},{name:"editText",serializationProperty:"locEditText",visibleIf:function(e){return e.showPreviewBeforeComplete}},{name:"requiredMark",default:"*",alternativeName:"requiredText"},{name:"questionStartIndex",dependsOn:["showQuestionNumbers"],visibleIf:function(e){return!e||"off"!==e.showQuestionNumbers}},{name:"questionTitlePattern",default:"numTitleRequire",dependsOn:["questionStartIndex","requiredMark"],choices:function(e){return e?e.getQuestionTitlePatternOptions():[]}},{name:"questionTitleTemplate",visible:!1,isSerializable:!1,serializationProperty:"locQuestionTitleTemplate"},{name:"firstPageIsStartPage:boolean",default:!1,alternativeName:"firstPageIsStarted"},{name:"isSinglePage:boolean",default:!1,visible:!1,isSerializable:!1},{name:"questionsOnPageMode",default:"standard",choices:["standard","singlePage","questionPerPage","inputPerPage"]},{name:"showPreviewBeforeComplete:boolean",default:!1,onSetValue:function(e,t,n){e&&e.setShowPreviewBeforeComplete(t)}},{name:"previewMode",default:"allQuestions",choices:["allQuestions","answeredQuestions"],visibleIf:function(e){return e.showPreviewBeforeComplete}},{name:"showTimer:boolean"},{name:"timeLimit:number",alternativeName:"maxTimeToFinish",default:0,minValue:0,enableIf:function(e){return e.showTimer}},{name:"timeLimitPerPage:number",alternativeName:"maxTimeToFinishPage",default:0,minValue:0,enableIf:function(e){return e.showTimer}},{name:"timerLocation",default:"top",choices:["top","bottom"],enableIf:function(e){return e.showTimer}},{name:"timerInfoMode",alternativeName:"showTimerPanelMode",default:"combined",choices:["page","survey","combined"],enableIf:function(e){return e.showTimer}},{name:"showTimerPanel",visible:!1,isSerializable:!1},{name:"widthMode",default:"auto",choices:["auto","static","responsive"]},{name:"gridLayoutEnabled:boolean",default:!1},{name:"width",visibleIf:function(e){return"static"===e.widthMode}},{name:"fitToContainer:boolean",default:!0,visible:!1},{name:"headerView",default:"basic",choices:["basic","advanced"],visible:!1},{name:"backgroundImage:file",visible:!1},{name:"backgroundImageFit",default:"cover",choices:["auto","contain","cover"],visible:!1},{name:"backgroundImageAttachment",default:"scroll",choices:["scroll","fixed"],visible:!1},{name:"backgroundOpacity:number",minValue:0,maxValue:1,default:1,visible:!1},{name:"showBrandInfo:boolean",default:!1,visible:!1}]);var ar=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),lr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ar(t,e),t.prototype.getBaseType=function(){return"choiceitem"},Object.defineProperty(t.prototype,"choiceOwner",{get:function(){return this.locOwner},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCommentArea",{get:function(){return this.getPropertyValue("showCommentArea")},set:function(e){e&&!this.supportComment&&(e=!1),this.setPropertyValue("showCommentArea",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportElements",{get:function(){var e;return!0===(null===(e=this.choiceOwner)||void 0===e?void 0:e.supportElementsInChoice())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCommentRequired",{get:function(){return this.getPropertyValue("isCommentRequired")},set:function(e){this.setPropertyValue("isCommentRequired",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCommentShowing",{get:function(){return this.getPropertyValue("isCommentShowing",!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCommentPlaceholder",{get:function(){return this.locCommentPlaceholderValue||this.createCommentPlaceholder(),this.locCommentPlaceholderValue},enumerable:!1,configurable:!0}),t.prototype.createCommentPlaceholder=function(){var e=this,t=new Et(this,!0,"commentPlaceholder");t.onChanged=function(){e.setPropertyValue("commentPlaceholder",e.locCommentPlaceholderValue.text)},this.locCommentPlaceholderValue=t},Object.defineProperty(t.prototype,"commentPlaceholder",{get:function(){return this.locCommentPlaceholder.text},set:function(e){this.locCommentPlaceholder.text=e},enumerable:!1,configurable:!0}),t.prototype.setIsCommentShowing=function(e){this.setPropertyValue("isCommentShowing",e)},Object.defineProperty(t.prototype,"supportComment",{get:function(){var e=this.locOwner;return!(!e||!e.supportMultipleComment)&&e.supportMultipleComment(this)},enumerable:!1,configurable:!0}),t.prototype.canAddPpropertyToJSON=function(t){return"commentPlaceholder"===t.name?!!this.locCommentPlaceholderValue:e.prototype.canAddPpropertyToJSON.call(this,t)},t.prototype.onLocOwnerChanged=function(){this.showCommentArea&&!this.supportComment&&(this.showCommentArea=!1),this.setPanelSurvey(this.panelValue)},Object.defineProperty(t.prototype,"onExpandPanelAtDesign",{get:function(){return this.onExpandPanelAtDesignValue||(this.onExpandPanelAtDesignValue=new Ae),this.onExpandPanelAtDesignValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPanelShowing",{get:function(){return!(!this.panelValue||!this.choiceOwner)&&this.hasElements&&!0===this.choiceOwner.isItemSelected(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasElements",{get:function(){var e=this.panelValue;return!!e&&e.elements.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panel",{get:function(){return this.panelValue||(this.panelValue=this.createPanel()),this.panelValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPanelCreated",{get:function(){return!!this.panelValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"elements",{get:function(){return this.panel.elements},enumerable:!1,configurable:!0}),t.prototype.panelFirstRendering=function(){this.hasElements&&this.isPanelShowing&&this.panel.onFirstRendering()},t.prototype.createPanel=function(){var e=D.createClass("panel");return e.renderWidth="100%",e.isInteractiveDesignElement=!1,e.showTitle=!1,e.isInternalNested=!0,e.choiceItem=this,this.setPanelSurvey(e),e},t.prototype.setPanelSurvey=function(e){var t;if(e&&!e.survey){e.selectedElementInDesign=this.choiceOwner;var n=null===(t=this.choiceOwner)||void 0===t?void 0:t.getSurvey();n&&(e.name="choicePanel"+e.uniqueId,e.parent=this.choiceOwner.parent,e.setSurveyImpl(n))}},t.prototype.dispose=function(){var t;e.prototype.dispose.call(this),null===(t=this.panelValue)||void 0===t||t.dispose(),this.panelValue=void 0},t}(to),ur=function(e){function t(t){var n=e.call(this,t)||this;n.isRunningChoices=!1,n.isFirstLoadChoicesFromUrl=!0,n.isUpdatingChoicesDependedQuestions=!1,n._renderedChoices=[],n.renderedChoicesAnimation=new Vt(n.getRenderedChoicesAnimationOptions(),function(e){n._renderedChoices=e,n.renderedChoicesChangedCallback&&n.renderedChoicesChangedCallback()},function(){return n._renderedChoices}),n.headItemsCount=0,n.footItemsCount=0,n.otherItemValue=n.createItemValue("other"),n.otherItem.showCommentArea=!0,n.otherItem.isCommentRequired=!0,n.noneItemValue=n.createNoneItem(gn.noneItemValue,"noneText","noneItemText"),n.refuseItemValue=n.createNoneItem(gn.refuseItemValue,"refuseText","refuseItemText"),n.dontKnowItemValue=n.createNoneItem(gn.dontKnowItemValue,"dontKnowText","dontKnowItemText"),n.createItemValues("choices"),n.registerPropertyChangedHandlers(["choices"],function(){n.filterItems()||n.onVisibleChoicesChanged()}),n.createItemValues("customChoices"),n.registerPropertyChangedHandlers(["customChoices"],function(){n.onVisibleChoicesChanged()}),n.registerPropertyChangedHandlers(["choicesFromQuestion","choicesFromQuestionMode","choiceValuesFromQuestion","choiceTextsFromQuestion","showNoneItem","showRefuseItem","showDontKnowItem","isUsingRestful","isMessagePanelVisible"],function(){n.onVisibleChoicesChanged()}),n.registerPropertyChangedHandlers(["hideIfChoicesEmpty"],function(){n.onVisibleChanged()}),n.registerPropertyChangedHandlers(["selecteditemValues"],function(e){n.onSelectedItemValuesChangedHandler(e)}),n.createNewArray("visibleChoices",function(){return n.updateRenderedChoices()},function(){return n.updateRenderedChoices()}),n.setNewRestfulProperty();var o=n.createLocalizableString("otherText",n.otherItemValue,!0,"otherItemText");return n.createLocalizableString("otherErrorText",n,!0,"otherRequiredError"),n.createLocalizableString("otherPlaceholder",n,!1,!0),n.otherItemValue.setLocText(o),n.choicesByUrl.createItemValue=function(e){return n.createItemValue(e)},n.choicesByUrl.beforeSendRequestCallback=function(){n.onBeforeSendRequest()},n.choicesByUrl.getResultCallback=function(e){n.onLoadChoicesFromUrl(e)},n.choicesByUrl.updateResultCallback=function(e,t){return n.survey?n.survey.updateChoicesFromServer(n,e,t):e},n}return ar(t,e),Object.defineProperty(t.prototype,"waitingChoicesByURL",{get:function(){return!this.isChoicesLoaded&&this.hasChoicesUrl},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedItemValues",{get:function(){return this.getPropertyValue("selectedItemValues")},set:function(e){this.setPropertyValue("selectedItemValues",e)},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"selectbase"},t.prototype.dispose=function(){e.prototype.dispose.call(this);var t=this.getQuestionWithChoices();t&&t.removeDependedQuestion(this);var n=this.commentAreaModelValues;n&&Object.keys(n).forEach(function(e){n[e].dispose()}),this.doForPanels(void 0,function(e){return e.dispose()})},t.prototype.supportElementsInChoice=function(){return!1},t.prototype.getPanels=function(){if(!this.supportElementsInChoice())return e.prototype.getPanels.call(this);var t=new Array;return this.choices.forEach(function(e){e.isPanelCreated&&t.push(e.panel)}),t},t.prototype.getVisiblePanels=function(e){if(!this.supportElementsInChoice())return null;var t=new Array;return this.choices.forEach(function(n){n.isPanelCreated&&n.isPanelShowing===e&&t.push(n.panel)}),t},t.prototype.doForPanels=function(e,t){var n=void 0!==e?this.getVisiblePanels(e):this.getPanels();Array.isArray(n)&&n.forEach(t)},t.prototype.collectNestedQuestionsCore=function(e,t,n,o){e.push(this),n&&this.supportElementsInChoice()&&this.choices.forEach(function(i){!i.hasElements||t&&!i.isPanelShowing||i.panel.questions.forEach(function(i){return i.addNestedQuestion(e,t,n,o)})})},t.prototype.getElementsInDesign=function(e){if(void 0===e&&(e=!1),!this.supportElementsInChoice())return[];var t=new Array;return this.choices.forEach(function(n){n.hasElements&&(e?t.push(n.panel):t.push.apply(t,n.elements))}),t},Object.defineProperty(t.prototype,"otherTextAreaModel",{get:function(){return this.getCommentTextAreaModel(this.otherItem)},enumerable:!1,configurable:!0}),t.prototype.getCommentTextAreaModel=function(e){var t=null==e?void 0:e.value;if(void 0===t)return null;this.commentAreaModelValues||(this.commentAreaModelValues={});var n=this.commentAreaModelValues;return n[t]||(n[t]=new Un(this.getOtherTextAreaOptions(e))),n[t]},t.prototype.getOtherTextAreaOptions=function(e){var t=this;return{question:this,id:function(){return t.getItemCommentId(e)},propertyNames:[this.getCommentPropertyValue(e)],className:function(){return t.cssClasses.comment},placeholder:function(){return t.getCommentPlaceholder(e)},isDisabledAttr:function(){return t.isInputReadOnly||!1},rows:function(){return t.commentAreaRows},maxLength:function(){return t.getOthersMaxLength()},autoGrow:function(){return t.survey&&t.survey.autoGrowComment},ariaRequired:function(){return t.ariaRequired||t.a11y_input_ariaRequired},ariaLabel:function(){return t.ariaLabel||t.a11y_input_ariaLabel},getTextValue:function(){return t.getCommentValueCore(e)},onTextAreaChange:function(n){t.onOtherValueChange(e,n)},onTextAreaInput:function(n){t.onOtherValueInput(e,n)}}},t.prototype.getCommentPlaceholder=function(e){if(e.commentPlaceholder)return e.commentPlaceholder;if(this.isOtherItemByValue(e))return this.otherPlaceholder;var t=this.commentPlaceholder;return new vo(e).processText(t,!0)},t.prototype.resetDependedQuestion=function(){this.choicesFromQuestion=""},Object.defineProperty(t.prototype,"otherId",{get:function(){return this.getItemCommentId(this.otherItem)},enumerable:!1,configurable:!0}),t.prototype.getItemCommentId=function(e){return this.id+"_"+e.uniqueId},t.prototype.getCommentElementsId=function(){return[this.commentId,this.otherId]},t.prototype.getItemValueType=function(){return"choiceitem"},t.prototype.createItemValue=function(e,t){var n=D.createClass(this.getItemValueType(),{value:e});return n.locOwner=this,t&&(n.text=t),n},t.prototype.validateElementCore=function(t){!0!==t.isOnValueChanged&&this.clearIncorrectValues();var n=!0;return this.doForPanels(!0,function(e){n&&(n=e.validateElement(t))}),e.prototype.validateElementCore.call(this,t)&&n},Object.defineProperty(t.prototype,"isUsingCarryForward",{get:function(){return!!this.carryForwardQuestionType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"carryForwardQuestionType",{get:function(){return this.getPropertyValue("carryForwardQuestionType")},enumerable:!1,configurable:!0}),t.prototype.setCarryForwardQuestionType=function(e,t){var n=e?"select":t?"array":void 0;this.setPropertyValue("carryForwardQuestionType",n)},Object.defineProperty(t.prototype,"isUsingRestful",{get:function(){return this.getPropertyValueWithoutDefault("isUsingRestful")||!1},enumerable:!1,configurable:!0}),t.prototype.updateIsUsingRestful=function(){this.setPropertyValueDirectly("isUsingRestful",this.hasChoicesUrl)},t.prototype.supportGoNextPageError=function(){return!this.isOtherSelected||!!this.otherValue},t.prototype.isLayoutTypeSupported=function(e){return!0},t.prototype.localeChanged=function(){e.prototype.localeChanged.call(this),"none"!==this.choicesOrder&&(this.updateVisibleChoices(),this.onVisibleChoicesChanged())},t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.choicesFromUrl&&(to.locStrsChanged(this.choicesFromUrl),to.locStrsChanged(this.visibleChoices)),this.isUsingCarryForward&&to.locStrsChanged(this.visibleChoices)},t.prototype.updatePrevOtherErrorValue=function(e){var t=this.otherValue;e!==t&&(this.prevOtherErrorValue=t)},Object.defineProperty(t.prototype,"otherValue",{get:function(){return this.getStoreOthersAsComment()?this.getQuestionComment():this.otherValueCore},set:function(e){e=this.trimCommentValue(e),this.isSettingComment||this.otherValue===e||(this.onUpdateCommentOnAutoOtherMode(e),this.updatePrevOtherErrorValue(e),this.isSettingComment=!0,this.getStoreOthersAsComment()?this.setNewComment(e):(this.otherValueCore=e,this.isOtherSelected&&!this.isRenderedValueSetting&&(this.value=this.getValueOnSettingOther(e))),this.isSettingComment=!1,this.updateChoicesDependedQuestions())},enumerable:!1,configurable:!0}),t.prototype.trimCommentValue=function(e){if(!(""===e||e&&""===e.toString().trim()))return e},Object.defineProperty(t.prototype,"otherValueCore",{get:function(){return this.getPropertyValue("otherValue")},set:function(e){this.setPropertyValue("otherValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherItem",{get:function(){return this.otherItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOtherSelected",{get:function(){return this.showOtherItem&&this.getHasOther(this.renderedValue)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNoneSelected",{get:function(){return this.showNoneItem&&this.getIsItemValue(this.renderedValue,this.noneItem)},enumerable:!1,configurable:!0}),t.prototype.supportMultipleComment=function(e){return!0},t.prototype.isCommentShowing=function(e){return e&&e.showCommentArea&&this.isItemSelected(e)},t.prototype.getCommentValue=function(e){return this.isCommentShowing(e)&&this.getCommentValueCore(e)||""},t.prototype.setCommentValue=function(e,t){this.isCommentShowing(e)&&this.setCommentValueCore(e,t)},Object.defineProperty(t.prototype,"commentPropertyValue",{get:function(){return"comment"},enumerable:!1,configurable:!0}),t.prototype.getCommentValueCore=function(e){return this.isOtherItemByValue(e)?this.otherValue:this.getPropertyValue(this.getCommentPropertyValue(e),this.getCommentValueByItem(e))||""},t.prototype.getCommentValueByItem=function(e){var t=this.value;return"object"==typeof t&&t[this.commentPropertyValue]||""},t.prototype.setCommentValueCore=function(e,t){this.isOtherItemByValue(e)?this.otherValue=t:(this.setCommentPropertyValue(e,t),this.isItemSelectedCore(e)&&(this.value=t?{value:e.value,comment:t}:e.value))},t.prototype.setCommentPropertyValue=function(e,t){this.setPropertyValue(this.getCommentPropertyValue(e),t)},t.prototype.isOtherItemByValue=function(e){return e.value===this.otherItem.value},t.prototype.getCommentPropertyValue=function(e){return this.isOtherItemByValue(e)?this.getStoreOthersAsComment()?"comment":"otherValue":"other_"+e.uniqueId},Object.defineProperty(t.prototype,"showNoneItem",{get:function(){return this.getPropertyValue("showNoneItem")},set:function(e){this.setPropertyValue("showNoneItem",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasNone",{get:function(){return this.showNoneItem},set:function(e){this.showNoneItem=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noneItem",{get:function(){return this.noneItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noneText",{get:function(){return this.getLocalizableStringText("noneText")},set:function(e){this.setLocalizableStringText("noneText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locNoneText",{get:function(){return this.getLocalizableString("noneText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showRefuseItem",{get:function(){return this.getPropertyValue("showRefuseItem")},set:function(e){this.setPropertyValue("showRefuseItem",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"refuseItem",{get:function(){return this.refuseItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"refuseText",{get:function(){return this.getLocalizableStringText("refuseText")},set:function(e){this.setLocalizableStringText("refuseText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRefuseText",{get:function(){return this.getLocalizableString("refuseText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showDontKnowItem",{get:function(){return this.getPropertyValue("showDontKnowItem")},set:function(e){this.setPropertyValue("showDontKnowItem",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dontKnowItem",{get:function(){return this.dontKnowItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dontKnowText",{get:function(){return this.getLocalizableStringText("dontKnowText")},set:function(e){this.setLocalizableStringText("dontKnowText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locDontKnowText",{get:function(){return this.getLocalizableString("dontKnowText")},enumerable:!1,configurable:!0}),t.prototype.createNoneItem=function(e,t,n){var o=this.createItemValue(e);o.isExclusive=!0;var i=this.createLocalizableString(t,o,!0,n);return o.setLocText(i),o},Object.defineProperty(t.prototype,"choicesVisibleIf",{get:function(){return this.getPropertyValue("choicesVisibleIf","")},set:function(e){this.setPropertyValue("choicesVisibleIf",e),this.filterItems()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesEnableIf",{get:function(){return this.getPropertyValue("choicesEnableIf","")},set:function(e){this.setPropertyValue("choicesEnableIf",e),this.filterItems()},enumerable:!1,configurable:!0}),t.prototype.surveyChoiceItemVisibilityChange=function(){this.filterItems()},t.prototype.addUsedLocales=function(t){e.prototype.addUsedLocales.call(this,t),this.doForPanels(void 0,function(e){e.addUsedLocales(t)})},t.prototype.runConditionCore=function(t){e.prototype.runConditionCore.call(this,t),this.runItemsEnableCondition(t),this.runItemsCondition(t),this.choices.forEach(function(e){e.runConditionCore(t)}),this.doForPanels(void 0,function(e){e.runCondition(t)})},t.prototype.isTextValue=function(){return!0},t.prototype.setDefaultIntoValue=function(t){!this.isValueEmpty(t)&&this.showOtherItem&&this.hasUnknownValue(t,!0)?this.setDefaultUnknownValue(t):e.prototype.setDefaultIntoValue.call(this,t)},t.prototype.setDefaultUnknownValue=function(e){this.renderedValue=this.setOtherValueIntoValue(e),this.otherValue=e},t.prototype.valueToData=function(e){return r.isValueEmpty(e)?e:Array.isArray(e)?e.length>0?e[0]:void 0:e},t.prototype.filterItems=function(){if(this.isLoadingFromJson||!this.data||this.areInvisibleElementsShowing)return!1;var e=this.getDataFilteredProperties();return this.runItemsEnableCondition(e),this.runItemsCondition(e)},t.prototype.runItemsCondition=function(e){this.setConditionalChoicesRunner();var t=this.runConditionsForItems(e);return this.filteredChoicesValue&&this.filteredChoicesValue.length===this.activeChoices.length&&(this.filteredChoicesValue=void 0),t&&(this.onVisibleChoicesChanged(),this.clearIncorrectValues()),t},t.prototype.runItemsEnableCondition=function(e){var t=this;this.setConditionalEnableChoicesRunner(),to.runEnabledConditionsForItems(this.activeChoices,this.conditionChoicesEnableIfRunner,e,function(e,n){return n&&t.onEnableItemCallBack(e)})&&this.clearDisabledValues(),this.onAfterRunItemsEnableCondition()},t.prototype.onAfterRunItemsEnableCondition=function(){},t.prototype.onEnableItemCallBack=function(e){return!0},t.prototype.onSelectedItemValuesChangedHandler=function(e){var t;null===(t=this.survey)||void 0===t||t.loadedChoicesFromServer(this)},t.prototype.getItemIfChoicesNotContainThisValue=function(e,t){return this.waitingChoicesByURL?this.createItemValue(e,t):null},t.prototype.getSingleSelectedItem=function(){var e=this.selectedItemValues;if(this.isEmpty())return null;var t=this.getItemByValue(this.value);return this.onGetSingleSelectedItem(t),t||e&&this.value==e.id||this.updateSelectedItemValues(),t||e||(this.isOtherSelected?this.otherItem:this.getItemIfChoicesNotContainThisValue(this.value))},t.prototype.onGetSingleSelectedItem=function(e){},t.prototype.getMultipleSelectedItems=function(){return[]},t.prototype.setConditionalChoicesRunner=function(){var e=this.getExpressionFromSurvey("choicesVisibleIf");e?(this.conditionChoicesVisibleIfRunner||(this.conditionChoicesVisibleIfRunner=new Pe(e)),this.conditionChoicesVisibleIfRunner.expression=e):this.conditionChoicesVisibleIfRunner=null},t.prototype.setConditionalEnableChoicesRunner=function(){var e=this.getExpressionFromSurvey("choicesEnableIf");e?(this.conditionChoicesEnableIfRunner||(this.conditionChoicesEnableIfRunner=new Pe(e)),this.conditionChoicesEnableIfRunner.expression=e):this.conditionChoicesEnableIfRunner=null},t.prototype.canSurveyChangeItemVisibility=function(){return!!this.survey&&this.survey.canChangeChoiceItemsVisibility()},t.prototype.changeItemVisibility=function(){var e=this;return this.canSurveyChangeItemVisibility()?function(t,n){return e.survey.getChoiceItemVisibility(e,t,n)}:null},t.prototype.runConditionsForItems=function(e){this.filteredChoicesValue=[];var t=this.changeItemVisibility();return to.runConditionsForItems(this.activeChoices,this.getFilteredChoices(),this.areInvisibleElementsShowing?null:this.conditionChoicesVisibleIfRunner,e,!this.survey||!this.survey.areInvisibleElementsShowing,function(e,n){return t?t(e,n):n})},t.prototype.getHasOther=function(e){return this.getIsItemValue(e,this.otherItem)},t.prototype.getIsItemValue=function(e,t){return e===t.value},Object.defineProperty(t.prototype,"validatedValue",{get:function(){return this.renderedValueToDataCore(this.value)},enumerable:!1,configurable:!0}),t.prototype.createRestful=function(){return new co},t.prototype.setNewRestfulProperty=function(){this.setPropertyValue("choicesByUrl",this.createRestful()),this.choicesByUrl.owner=this,this.choicesByUrl.loadingOwner=this},Object.defineProperty(t.prototype,"autoOtherMode",{get:function(){return this.getPropertyValue("autoOtherMode")},set:function(e){this.setPropertyValue("autoOtherMode",e)},enumerable:!1,configurable:!0}),t.prototype.getQuestionComment=function(){return this.showCommentArea?e.prototype.getQuestionComment.call(this):this.otherValueCore?this.otherValueCore:this.showCommentArea||this.getStoreOthersAsComment()?e.prototype.getQuestionComment.call(this):this.otherValueCore},t.prototype.selectOtherValueFromComment=function(e){e&&(this.prevIsOtherSelected=!0),this.value=e?this.otherItem.value:void 0},t.prototype.onUpdateCommentOnAutoOtherMode=function(e){if(this.autoOtherMode){var t=this.isOtherSelected;(!t&&e||t&&!e)&&this.selectOtherValueFromComment(!!e)}},t.prototype.getValueOnSettingOther=function(e){var t=this.rendredValueToData(this.renderedValue);if(this.showCommentArea||this.getStoreOthersAsComment())return t;var n=this.getItemByValue(e);if(!n||n===this.otherItem)return t;if(this.otherValueCore="",!Array.isArray(t))return e;var o=t.indexOf(this.otherItem.value);return o>-1&&t.splice(o,1),t.indexOf(e)<0&&t.push(e),t},t.prototype.clearValue=function(t,n){e.prototype.clearValue.call(this,t,n),this.selectedItemValues=void 0},Object.defineProperty(t.prototype,"renderedValue",{get:function(){return this.getPropertyValue("renderedValue",null)},set:function(e){this.setRenderedValue(e,!0)},enumerable:!1,configurable:!0}),t.prototype.setRenderedValue=function(e,t){this.setPropertyValue("renderedValue",e),t&&!this.isReadOnlyAttr&&(e=this.rendredValueToData(e),this.isTwoValueEquals(e,this.value)||(this.value=e)),this.onRenderedValueChagned(t)},t.prototype.onRenderedValueChagned=function(e){var t=this;this.choices.forEach(function(n){return t.updateItemIsCommentShowing(n,e)}),this.showOtherItem&&this.updateItemIsCommentShowing(this.otherItem,e)},t.prototype.updateItemIsCommentShowing=function(e,t){if(e.showCommentArea){var n=this.isCommentShowing(e);e.setIsCommentShowing(n),!n&&t&&this.setCommentValueCore(e,void 0)}},t.prototype.selectItem=function(e){if(!this.isReadOnlyAttr&&e){var t=this.getSingleSelectedItem();this.renderedValue=e.value,t&&t!==this.getSingleSelectedItem()&&this.onItemDeselected(t),this.onItemSelected(e)}},t.prototype.onItemSelected=function(e){e.showCommentArea&&this.focusOtherComment(e)},t.prototype.onItemDeselected=function(e){e.showCommentArea&&this.setCommentValueCore(e,void 0)},t.prototype.setQuestionValue=function(t,n,o){void 0===n&&(n=!0),void 0===o&&(o=!0),this.isLoadingFromJson||this.isTwoValueEquals(this.value,t)||(this.setRenderedValue(this.rendredValueFromData(t),!1),e.prototype.setQuestionValue.call(this,t,n),this.updateChoicesDependedQuestions(),this.updateChoicesPanels(),!this.showCommentArea&&o&&!this.isOtherSelected&&this.otherValue&&(this.makeCommentEmpty=!0,this.otherValueCore="",this.setPropertyValue("comment","")))},t.prototype.setValueCore=function(t){e.prototype.setValueCore.call(this,t),this.makeCommentEmpty&&(this.setCommentIntoData(""),this.makeCommentEmpty=!1)},t.prototype.setNewValue=function(t){t=this.valueFromData(t),(this.choicesByUrl.isRunning||this.choicesByUrl.isWaitingForParameters)&&this.isValueEmpty(t)||(this.cachedValueForUrlRequests=t),e.prototype.setNewValue.call(this,t)},t.prototype.valueFromData=function(t){var n=this.getItemByValue(t,this.activeChoices);return n?this.getChoiceValue(n,t,!1):e.prototype.valueFromData.call(this,t)},t.prototype.updateChoicesPanels=function(){this.supportElementsInChoice()&&this.wasRendered&&this.choices.forEach(function(e){e.isDescendantOf("choiceitem")&&e.panelFirstRendering()})},t.prototype.getChoiceValue=function(e,t,n){var o="object"==typeof t,i=o?t[this.commentPropertyValue]:"",s=!r.isValueEmpty(i);if(o&&e.showCommentArea&&(n||s)){var a={value:e.value};return s&&(a[this.commentPropertyValue]=i),a}return e.value},t.prototype.getItemByValue=function(e,t){var n=t||this.visibleChoices;return e&&"object"==typeof e&&!r.isValueEmpty(e.value)&&(e=e.value),to.getItemByValue(n,e)},t.prototype.rendredValueFromData=function(e){if(e&&"object"==typeof e&&!r.isValueEmpty(e.value)){var t=this.getItemByValue(e.value);t&&(this.setCommentPropertyValue(t,e[this.commentPropertyValue]),e=e.value)}return this.getStoreOthersAsComment()||!this.showOtherItem?e:this.renderedValueFromDataCore(e)},t.prototype.getValueFromValueWithComment=function(e){return e&&"object"==typeof e&&!r.isValueEmpty(e.value)?e.value:e},t.prototype.rendredValueToData=function(e){return this.getStoreOthersAsComment()?e:this.renderedValueToDataCore(e)},t.prototype.renderedValueFromDataCore=function(e){return this.hasUnknownValue(e,!0,!1)?(this.otherValue=e,this.otherItem.value):this.valueFromData(e)},t.prototype.renderedValueToDataCore=function(e){return e==this.otherItem.value&&this.needConvertRenderedOtherToDataValue()&&(e=this.otherValue),e},t.prototype.needConvertRenderedOtherToDataValue=function(){var e=this.otherValue;return!!e&&!!(e=e.trim())&&this.hasUnknownValue(e,!0,!1)},t.prototype.getIsQuestionReady=function(){return e.prototype.getIsQuestionReady.call(this)&&!this.waitingChoicesByURL&&!this.waitingGetChoiceDisplayValueResponse},t.prototype.updateSelectedItemValues=function(){var e=this;if(!this.waitingGetChoiceDisplayValueResponse&&this.survey&&!this.isEmpty()){var t=this.value,n=Array.isArray(t)?t:[t];n.some(function(t){return!e.getItemByValue(t,e.choices)})&&(this.choicesLazyLoadEnabled||this.hasChoicesUrl)&&(this.waitingGetChoiceDisplayValueResponse=!0,this.updateIsReady(),this.survey.getChoiceDisplayValue({question:this,values:n,setItems:function(o){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];if(e.waitingGetChoiceDisplayValueResponse=!1,o&&o.length){var s=o.map(function(t,o){return e.createItemValue(n[o],t)});e.setCustomValuesIntoItems(s,i),Array.isArray(t)?e.selectedItemValues=s:e.selectedItemValues=s[0],e.updateIsReady(),e.onSelectedItemValuesUpdated()}else e.updateIsReady()}}))}},t.prototype.onSelectedItemValuesUpdated=function(){},t.prototype.setCustomValuesIntoItems=function(e,t){Array.isArray(t)&&0!==t.length&&t.forEach(function(t){var n=t.values,o=t.propertyName;if(Array.isArray(n))for(var i=0;i<e.length&&i<n.length;i++)e[i][o]=n[i]})},t.prototype.hasUnknownValue=function(e,t,n,o){if(void 0===t&&(t=!1),void 0===n&&(n=!0),void 0===o&&(o=!1),!Array.isArray(e))return this.hasUnknownValueItem(e,t,n,o);for(var i=0;i<e.length;i++)if(this.hasUnknownValueItem(e[i],t,n,o))return!0;return!1},t.prototype.hasUnknownValueItem=function(e,t,n,o){if(void 0===t&&(t=!1),void 0===n&&(n=!0),void 0===o&&(o=!1),!o&&this.isValueEmpty(e))return!1;if(t&&e==this.otherItem.value)return!1;if(this.showNoneItem&&e==this.noneItem.value)return!1;if(this.showRefuseItem&&e==this.refuseItem.value)return!1;if(this.showDontKnowItem&&e==this.dontKnowItem.value)return!1;var i=n?this.getFilteredChoices():this.activeChoices;return null==this.getItemByValue(e,i)},t.prototype.isValueDisabled=function(e){var t=this.getItemByValue(e,this.getFilteredChoices());return!!t&&!t.isEnabled},t.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.updateVisibleChoices()},Object.defineProperty(t.prototype,"customChoices",{get:function(){return this.getPropertyValue("customChoices")},set:function(e){this.setPropertyValue("customChoices",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesByUrl",{get:function(){return this.getPropertyValue("choicesByUrl")},set:function(e){e&&(this.setNewRestfulProperty(),this.choicesByUrl.fromJSON(e.toJSON()))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choices",{get:function(){return this.getPropertyValue("choices")},set:function(e){this.setPropertyValue("choices",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesFromQuestion",{get:function(){return this.getPropertyValue("choicesFromQuestion")},set:function(e){var t=this.getQuestionWithChoices();this.isLockVisibleChoices=!!t&&t.name===e,t&&t.name!==e&&(t.removeDependedQuestion(this),this.isInDesignMode&&!this.isLoadingFromJson&&e&&this.setPropertyValue("choicesFromQuestion",void 0)),this.setPropertyValue("choicesFromQuestion",e),this.isLockVisibleChoices=!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesFromQuestionMode",{get:function(){return this.getPropertyValue("choicesFromQuestionMode")},set:function(e){this.setPropertyValue("choicesFromQuestionMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choiceValuesFromQuestion",{get:function(){return this.getPropertyValue("choiceValuesFromQuestion")},set:function(e){this.setPropertyValue("choiceValuesFromQuestion",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choiceTextsFromQuestion",{get:function(){return this.getPropertyValue("choiceTextsFromQuestion")},set:function(e){this.setPropertyValue("choiceTextsFromQuestion",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideIfChoicesEmpty",{get:function(){return this.getPropertyValue("hideIfChoicesEmpty")},set:function(e){this.setPropertyValue("hideIfChoicesEmpty",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keepIncorrectValues",{get:function(){return this.getPropertyValue("keepIncorrectValues",!1)},set:function(e){this.setPropertyValue("keepIncorrectValues",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storeOthersAsComment",{get:function(){return this.getPropertyValue("storeOthersAsComment")},set:function(e){this.setPropertyValue("storeOthersAsComment",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesOrder",{get:function(){return this.getPropertyValue("choicesOrder")},set:function(e){(e=e.toLowerCase())!=this.choicesOrder&&(this.setPropertyValue("choicesOrder",e),this.onVisibleChoicesChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherText",{get:function(){return this.getLocalizableStringText("otherText")},set:function(e){this.setLocalizableStringText("otherText",e),this.onVisibleChoicesChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locOtherText",{get:function(){return this.getLocalizableString("otherText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"separateSpecialChoices",{get:function(){return this.getPropertyValue("separateSpecialChoices")},set:function(e){this.setPropertyValue("separateSpecialChoices",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherPlaceholder",{get:function(){return this.getLocalizableStringText("otherPlaceholder")},set:function(e){this.setLocalizableStringText("otherPlaceholder",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locOtherPlaceholder",{get:function(){return this.getLocalizableString("otherPlaceholder")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherPlaceHolder",{get:function(){return this.otherPlaceholder},set:function(e){this.otherPlaceholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherErrorText",{get:function(){return this.getLocalizableStringText("otherErrorText")},set:function(e){this.setLocalizableStringText("otherErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locOtherErrorText",{get:function(){return this.getLocalizableString("otherErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleChoices",{get:function(){return this.getPropertyValue("visibleChoices")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabledChoices",{get:function(){for(var e=[],t=this.visibleChoices,n=0;n<t.length;n++)t[n].isEnabled&&e.push(t[n]);return e},enumerable:!1,configurable:!0}),t.prototype.updateVisibleChoices=function(){if(!this.isLoadingFromJson&&!this.isDisposed){var e=this.calcVisibleChoices(),t=new Array;(e||[]).forEach(function(e){return t.push(e)});var n=this.visibleChoices;this.isTwoValueEquals(n,t)&&!this.choicesLazyLoadEnabled||(this.setArrayPropertyDirectly("visibleChoices",t),this.updateRenderedChoices())}},t.prototype.calcVisibleChoices=function(){var e=new Array;return this.customChoices.forEach(function(t){return e.push(t)}),this.getFilteredChoices().forEach(function(t){return e.push(t)}),e=this.sortArrayByChoicesOrder(e),this.addToVisibleChoices(e,this.isAddDefaultItems),e},t.prototype.setCanShowOptionItemCallback=function(e){this.canShowOptionItemCallback=e,e&&this.onVisibleChoicesChanged()},Object.defineProperty(t.prototype,"newItem",{get:function(){return this.newItemValue},enumerable:!1,configurable:!0}),t.prototype.addToVisibleChoices=function(e,t){this.headItemsCount=0,this.footItemsCount=0,this.isEmptyActiveChoicesInDesign||this.addNewItemToVisibleChoices(e,t);var n=new Array;this.addNonChoicesItems(n,t),n.sort(function(e,t){return e.index===t.index?0:e.index<t.index?-1:1});for(var o=0;o<n.length;o++){var i=n[o];i.index<0?(e.splice(o,0,i.item),this.headItemsCount++):(e.push(i.item),this.footItemsCount++)}},t.prototype.addNewItemToVisibleChoices=function(e,t){var n=this;t&&(this.newItemValue||(this.newItemValue=this.createItemValue("newitem"),this.newItemValue.isGhost=!0,this.newItemValue.registerFunctionOnPropertyValueChanged("isVisible",function(){n.updateVisibleChoices()})),this.newItemValue.isVisible&&!this.isUsingCarryForward&&this.canShowOptionItem(this.newItemValue,t,!1)&&(this.footItemsCount=1,e.push(this.newItemValue)))},t.prototype.addNonChoicesItems=function(e,t){this.supportNone()&&this.addNonChoiceItem(e,this.noneItem,t,this.showNoneItem,gn.specialChoicesOrder.noneItem),this.supportRefuse()&&this.addNonChoiceItem(e,this.refuseItem,t,this.showRefuseItem,gn.specialChoicesOrder.refuseItem),this.supportDontKnow()&&this.addNonChoiceItem(e,this.dontKnowItem,t,this.showDontKnowItem,gn.specialChoicesOrder.dontKnowItem),this.supportOther()&&this.addNonChoiceItem(e,this.otherItem,t,this.showOtherItem,gn.specialChoicesOrder.otherItem)},t.prototype.addNonChoiceItem=function(e,t,n,o,i){this.canShowOptionItem(t,n,o)&&i.forEach(function(n){return e.push({index:n,item:t})})},t.prototype.canShowOptionItem=function(e,t,n){var o=t&&(!this.canShowOptionItemCallback||this.canShowOptionItemCallback(e))||n;return this.canSurveyChangeItemVisibility()?this.changeItemVisibility()(e,o):o},t.prototype.isItemInList=function(e){return e===this.otherItem?this.showOtherItem:e===this.noneItem?this.showNoneItem:e===this.refuseItem?this.showRefuseItem:e===this.dontKnowItem?this.showDontKnowItem:e!==this.newItemValue},Object.defineProperty(t.prototype,"isAddDefaultItems",{get:function(){return gn.showDefaultItemsInCreator&&this.isInDesignMode&&!this.customWidget},enumerable:!1,configurable:!0}),t.prototype.getPlainData=function(t){var n=this;void 0===t&&(t={includeEmpty:!0,includeQuestionTypes:!1});var o=e.prototype.getPlainData.call(this,t);if(o){var i=Array.isArray(this.value)?this.value:[this.value];o.isNode=!0,o.data=(o.data||[]).concat(i.map(function(e,o){var i=n.getItemByValue(e),r={name:o,title:n.getLocalizationString("choices_Choice"),value:e,displayValue:n.getChoicesDisplayValue(n.visibleChoices,e),getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!1};return i&&(t.calculations||[]).forEach(function(e){r[e.propertyName]=i[e.propertyName]}),n.isOtherSelected&&n.otherItemValue===i&&(r.isOther=!0,r.displayValue=n.otherValue),r}))}return o},t.prototype.getDisplayValueCore=function(e,t){return t=this.getValueFromValueWithComment(t),this.useDisplayValuesInDynamicTexts?this.getChoicesDisplayValue(this.visibleChoices,t):t},t.prototype.getDisplayValueEmpty=function(){return to.getTextOrHtmlByValue(this.visibleChoices,void 0)},t.prototype.getChoicesDisplayValue=function(e,t){if(t==this.otherItemValue.value)return this.otherValue?this.otherValue:this.locOtherText.textOrHtml;var n=this.getSingleSelectedItem();if(n&&this.isTwoValueEquals(n.value,t))return n.locText.textOrHtml;var o=to.getTextOrHtmlByValue(e,t);return""==o&&t?t:o},t.prototype.getDisplayArrayValue=function(e,t,n){for(var o=this,i=this.visibleChoices,s=[],a=[],l=0;l<t.length;l++)a.push(n?n(l):t[l]);if(r.isTwoValueEquals(this.value,a)&&this.getMultipleSelectedItems().forEach(function(e,t){return s.push(o.getItemDisplayValue(e,a[t]))}),0===s.length)for(l=0;l<a.length;l++){var u=this.getChoicesDisplayValue(i,a[l]);u&&s.push(u)}return s.join(gn.choicesSeparator)},t.prototype.getItemDisplayValue=function(e,t){if(e===this.otherItem){if(this.showOtherItem&&this.showCommentArea&&t)return t;if(this.comment)return this.comment}return e.locText.textOrHtml},t.prototype.getFilteredChoices=function(){return this.filteredChoicesValue?this.filteredChoicesValue:this.activeChoices},Object.defineProperty(t.prototype,"activeChoices",{get:function(){var e=this.getCarryForwardQuestion();return"select"===this.carryForwardQuestionType?(e.addDependedQuestion(this),this.getChoicesFromSelectQuestion(e)):"array"===this.carryForwardQuestionType?(e.addDependedQuestion(this),this.getChoicesFromArrayQuestion(e)):this.isEmptyActiveChoicesInDesign?[]:this.choicesFromUrl?this.choicesFromUrl:this.getChoices()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMessagePanelVisible",{get:function(){return this.getPropertyValue("isMessagePanelVisible",!1)},set:function(e){this.setPropertyValue("isMessagePanelVisible",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmptyActiveChoicesInDesign",{get:function(){return this.isInDesignMode&&(this.hasChoicesUrl||this.isMessagePanelVisible)},enumerable:!1,configurable:!0}),t.prototype.getCarryForwardQuestion=function(e){var t=this.findCarryForwardQuestion(e),n=this.getQuestionWithChoicesCore(t),o=n?null:this.getQuestionWithArrayValue(t);return this.setCarryForwardQuestionType(!!n,!!o),n||o?t:null},t.prototype.getIsReadyDependsOn=function(){var t=e.prototype.getIsReadyDependsOn.call(this);return this.carryForwardQuestion&&t.push(this.carryForwardQuestion),t},t.prototype.getQuestionWithChoices=function(){return this.getQuestionWithChoicesCore(this.findCarryForwardQuestion())},t.prototype.findCarryForwardQuestion=function(e){var t;return e||(e=this.data||(null===(t=this.parentQuestion)||void 0===t?void 0:t.data)),this.carryForwardQuestion=null,this.choicesFromQuestion&&e&&(this.carryForwardQuestion=e.findQuestionByName(this.choicesFromQuestion)),this.carryForwardQuestion},t.prototype.getQuestionWithChoicesCore=function(e){return e&&e.visibleChoices&&D.isDescendantOf(e.getType(),"selectbase")&&e!==this?e:null},t.prototype.getQuestionWithArrayValue=function(e){return e&&e.isValueArray?e:null},t.prototype.getChoicesFromArrayQuestion=function(e){if(this.isInDesignMode)return[];var t=e.value;if(!Array.isArray(t))return[];for(var n=[],o=0;o<t.length;o++){var i=t[o];if(r.isValueObject(i)){var s=this.getValueKeyName(i);if(s&&!this.isValueEmpty(i[s])){var a=this.choiceTextsFromQuestion?i[this.choiceTextsFromQuestion]:void 0;n.push(this.createItemValue(i[s],a))}}}return n},t.prototype.getValueKeyName=function(e){if(this.choiceValuesFromQuestion)return this.choiceValuesFromQuestion;var t=Object.keys(e);return t.length>0?t[0]:void 0},t.prototype.getChoicesFromSelectQuestion=function(e){if(this.isInDesignMode)return[];for(var t=[],n="selected"==this.choicesFromQuestionMode||"unselected"!=this.choicesFromQuestionMode&&void 0,o=e.visibleChoices,i=0;i<o.length;i++)if(!e.isBuiltInChoice(o[i]))if(void 0!==n){var r=e.isItemSelected(o[i]);(r&&n||!r&&!n)&&t.push(this.copyChoiceItem(o[i]))}else t.push(this.copyChoiceItem(o[i]));return"selected"===this.choicesFromQuestionMode&&!this.showOtherItem&&e.isOtherSelected&&e.otherValue&&t.push(this.createItemValue(e.otherItem.value,e.otherValue)),t},t.prototype.copyChoiceItem=function(e){var t=this.createItemValue(e.value);return t.setData(e),t},Object.defineProperty(t.prototype,"hasActiveChoices",{get:function(){var e=this.visibleChoices;e&&0!=e.length||(this.onVisibleChoicesChanged(),e=this.visibleChoices);for(var t=0;t<e.length;t++)if(!this.isBuiltInChoice(e[t]))return!0;return!1},enumerable:!1,configurable:!0}),t.prototype.isBuiltInChoice=function(e){return[this.otherItem,this.noneItem,this.refuseItem,this.dontKnowItem,this.newItemValue].indexOf(e)>-1},t.prototype.isNoneItem=function(e){return!0===e.isExclusive},t.prototype.getChoices=function(){return this.choices},Object.defineProperty(t.prototype,"showOtherItem",{get:function(){return this.getPropertyValue("showOtherItem",!1)},set:function(e){this.supportOther()&&this.showOtherItem!=e&&(this.setPropertyValue("showOtherItem",e),this.onVisibleChoicesChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasOther",{get:function(){return this.showOtherItem},set:function(e){this.showOtherItem=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requireUpdateCommentValue",{get:function(){return this.showCommentArea||this.showOtherItem},enumerable:!1,configurable:!0}),t.prototype.supportOther=function(){return this.isSupportProperty("showOtherItem")},t.prototype.supportNone=function(){return this.isSupportProperty("showNoneItem")},t.prototype.supportRefuse=function(){return this.isSupportProperty("showRefuseItem")},t.prototype.supportDontKnow=function(){return this.isSupportProperty("showDontKnowItem")},t.prototype.isSupportProperty=function(e){return!this.isDesignMode||this.getPropertyByName(e).visible},t.prototype.onCheckForErrors=function(t,n,o){var i=this;if(e.prototype.onCheckForErrors.call(this,t,n,o),this.hasEmptyComments()&&(!n||this.prevOtherErrorValue)){var r=new xn(this.otherErrorText,this);r.onUpdateErrorTextCallback=function(e){e.text=i.otherErrorText},t.push(r)}},t.prototype.hasEmptyComments=function(){for(var e=this.visibleChoices,t=0;t<e.length;t++){var n=e[t];if(n.isCommentRequired&&this.isCommentShowing(n)&&!this.getCommentValue(e[t]))return!0}return!1},t.prototype.setSurveyImpl=function(t,n){this.isRunningChoices=!0,e.prototype.setSurveyImpl.call(this,t,n),this.isRunningChoices=!1,this.runChoicesByUrl(),this.isAddDefaultItems&&this.updateVisibleChoices()},t.prototype.setSurveyCore=function(t){e.prototype.setSurveyCore.call(this,t),t&&this.choicesFromQuestion&&this.onVisibleChoicesChanged()},t.prototype.getStoreOthersAsComment=function(){return!this.showCommentArea&&(!!this.checkHasChoicesComments()||!0===this.storeOthersAsComment||"default"==this.storeOthersAsComment&&(null==this.survey||this.survey.storeOthersAsComment)||this.hasChoicesUrl&&!this.choicesFromUrl)},t.prototype.checkHasChoicesComments=function(){for(var e=this.choices,t=0;t<e.length;t++)if(e[t].showCommentArea)return!0;return!1},t.prototype.onSurveyLoad=function(){this.runChoicesByUrl(),this.onVisibleChoicesChanged(),this.doForPanels(void 0,function(e){e.onSurveyLoad()}),e.prototype.onSurveyLoad.call(this)},t.prototype.onFirstRenderingCore=function(){e.prototype.onFirstRenderingCore.call(this),this.doForPanels(!0,function(e){e.onFirstRendering()})},t.prototype.onAnyValueChanged=function(t,n){e.prototype.onAnyValueChanged.call(this,t,n),t!=this.getValueName()&&this.runChoicesByUrl();var o=this.choicesFromQuestion;t&&o&&(t===o||n===o)&&(this.onVisibleChoicesChanged(),this.clearIncorrectValues())},t.prototype.updateValueFromSurvey=function(t,n){var o="";this.showOtherItem&&this.activeChoices.length>0&&!this.isRunningChoices&&!this.choicesByUrl.isRunning&&this.getStoreOthersAsComment()&&(this.hasUnknownValue(t)&&!this.getHasOther(t)?(o=this.getCommentFromValue(t),t=this.setOtherValueIntoValue(t)):this.data&&(o=this.data.getComment(this.getValueName()))),e.prototype.updateValueFromSurvey.call(this,t,n),!this.isRunningChoices&&!this.choicesByUrl.isRunning||this.isEmpty()||(this.cachedValueForUrlRequests=this.value),o&&this.setNewComment(o),this.updateValueForPanels(n,!1)},t.prototype.updateCommentFromSurvey=function(t){e.prototype.updateCommentFromSurvey.call(this,t),this.updateValueForPanels(!1,!0)},t.prototype.updateValueForPanels=function(e,t){var n=this;this.data&&this.doForPanels(!0,function(o){o.questions.forEach(function(o){var i=o.getValueName();t?o.updateCommentFromSurvey(n.data.getComment(i)):o.updateValueFromSurvey(n.data.getValue(i),e)})})},t.prototype.getCommentFromValue=function(e){return e},t.prototype.setOtherValueIntoValue=function(e){return this.otherItem.value},t.prototype.onOtherValueInput=function(e,t){this.isInputTextUpdate&&t.target&&this.setCommentValueCore(e,t.target.value)},t.prototype.onOtherValueChange=function(e,t){var n;this.setCommentValueCore(e,((null===(n=t.target)||void 0===n?void 0:n.value)||"").trim());var o=this.getCommentValueCore(e);o!==t.target.value&&(t.target.value=o||"")},t.prototype.runChoicesByUrl=function(){if(this.updateIsUsingRestful(),this.choicesByUrl&&!this.isLoadingFromJson&&!this.isRunningChoices&&!this.isInDesignMode){var e=this.surveyImpl?this.surveyImpl.getTextProcessor():this.textProcessor;e||(e=this.survey),e&&(this.updateIsReady(),this.isRunningChoices=!0,this.choicesByUrl.run(e),this.isRunningChoices=!1)}},t.prototype.onBeforeSendRequest=function(){!0!==gn.web.disableQuestionWhileLoadingChoices||this.isReadOnly||(this.enableOnLoadingChoices=!0,this.readOnly=!0)},t.prototype.onLoadChoicesFromUrl=function(e){this.enableOnLoadingChoices&&(this.readOnly=!1);var t=[];this.isReadOnly||this.choicesByUrl&&this.choicesByUrl.error&&t.push(this.choicesByUrl.error);var n=null,o=!0;this.isFirstLoadChoicesFromUrl&&!this.cachedValueForUrlRequests&&this.defaultValue&&(this.cachedValueForUrlRequests=this.defaultValue,o=!1),this.isValueEmpty(this.cachedValueForUrlRequests)&&(this.cachedValueForUrlRequests=this.value);var i=this.createCachedValueForUrlRequests(this.cachedValueForUrlRequests,o);if(e&&(e.length>0||this.choicesByUrl.allowEmptyResponse)&&(n=new Array,to.setData(n,e)),n)for(var r=0;r<n.length;r++)n[r].locOwner=this;this.setChoicesFromUrl(n,t,i)},t.prototype.canAvoidSettChoicesFromUrl=function(e){return!this.isFirstLoadChoicesFromUrl&&!((!e||Array.isArray(e)&&0===e.length)&&!this.isEmpty())&&r.isTwoValueEquals(this.choicesFromUrl,e)},t.prototype.setChoicesFromUrl=function(e,t,n){if(!this.canAvoidSettChoicesFromUrl(e)){if(this.isFirstLoadChoicesFromUrl=!1,this.choicesFromUrl=e,this.filterItems(),this.onVisibleChoicesChanged(),e){var o=this.updateCachedValueForUrlRequests(n,e);if(o&&!this.isReadOnly){var i=!this.isTwoValueEquals(this.value,o.value);try{this.isValueEmpty(o.value)||(this.allowNotifyValueChanged=!1,this.setQuestionValue(void 0,!0,!1)),this.allowNotifyValueChanged=i,i?this.value=o.value:this.setQuestionValue(o.value)}finally{this.allowNotifyValueChanged=!0}}}this.isReadOnly||e||this.isFirstLoadChoicesFromUrl||(this.value=null),this.errors=t,this.choicesLoaded()}},t.prototype.createCachedValueForUrlRequests=function(e,t){if(this.isValueEmpty(e))return null;if(Array.isArray(e)){for(var n=[],o=0;o<e.length;o++)n.push(this.createCachedValueForUrlRequests(e[o],!0));return n}return{value:e,isExists:!t||!this.hasUnknownValue(e)}},t.prototype.updateCachedValueForUrlRequests=function(e,t){if(this.isValueEmpty(e))return null;if(Array.isArray(e)){for(var n=[],o=0;o<e.length;o++){var i=this.updateCachedValueForUrlRequests(e[o],t);if(i&&!this.isValueEmpty(i.value)){var r=i.value;(s=this.getItemByValue(i.value,t))&&(r=s.value),n.push(r)}}return{value:n}}var s,a=e.isExists&&this.hasUnknownValue(e.value)?null:e.value;return(s=this.getItemByValue(a,t))&&(a=s.value),{value:a}},t.prototype.updateChoicesDependedQuestions=function(){this.isLoadingFromJson||this.isUpdatingChoicesDependedQuestions||!this.allowNotifyValueChanged||this.choicesByUrl.isRunning||(this.isUpdatingChoicesDependedQuestions=!0,this.updateDependedQuestions(),this.isUpdatingChoicesDependedQuestions=!1)},t.prototype.updateDependedQuestion=function(){this.onVisibleChoicesChanged(),this.clearIncorrectValues()},t.prototype.onSurveyValueChanged=function(t){e.prototype.onSurveyValueChanged.call(this,t),this.updateChoicesDependedQuestions()},t.prototype.onVisibleChoicesChanged=function(){this.isLoadingFromJson||this.isLockVisibleChoices||(this.updateVisibleChoices(),this.renderedValue===this.otherItem.value&&this.setRenderedValue(this.rendredValueFromData(this.value),!1),this.onVisibleChanged(),this.visibleChoicesChangedCallback&&this.visibleChoicesChangedCallback(),this.updateChoicesDependedQuestions())},t.prototype.isVisibleCore=function(){var t=e.prototype.isVisibleCore.call(this);if(!this.hideIfChoicesEmpty||!t)return t;var n=this.isUsingCarryForward?this.visibleChoices:this.getFilteredChoices();return!n||n.length>0},t.prototype.sortArrayByChoicesOrder=function(e){var t=e.slice();if(this.isInDesignMode)return t;var n=this.choicesOrder.toLowerCase();return"asc"==n?this.sortArray(t,1):"desc"==n?this.sortArray(t,-1):"random"==n?this.randomizeArray(t):t},t.prototype.sortArray=function(e,t){return e.sort(function(e,n){return r.compareStrings(e.calculatedText,n.calculatedText)*t})},t.prototype.randomizeArray=function(e){return r.randomizeArray(e)},Object.defineProperty(t.prototype,"hasChoicesUrl",{get:function(){return this.choicesByUrl&&!!this.choicesByUrl.url},enumerable:!1,configurable:!0}),t.prototype.clearIncorrectValues=function(){this.canClearIncorrectValues()&&this.hasValueToClearIncorrectValues()&&(this.clearIncorrectValuesCallback?this.clearIncorrectValuesCallback():this.clearIncorrectValuesCore())},t.prototype.canClearIncorrectValues=function(){return!(this.canAddCustomChoices()||this.carryForwardQuestion&&!this.carryForwardQuestion.isReady||this.survey&&this.survey.questionsByValueName(this.getValueName()).length>1||this.hasChoicesUrl&&(!this.choicesFromUrl||0==this.choicesFromUrl.length))},t.prototype.canAddCustomChoices=function(){return!1},t.prototype.hasValueToClearIncorrectValues=function(){return!(this.survey&&this.survey.keepIncorrectValues||this.keepIncorrectValues||this.isEmpty())},t.prototype.clearValueIfInvisibleCore=function(t){e.prototype.clearValueIfInvisibleCore.call(this,t),this.clearIncorrectValues(),this.doForPanels(!1,function(e){e.questions.forEach(function(e){e.clearValue()}),e.questions.forEach(function(e){e.clearValueIfInvisible(t)})})},t.prototype.isItemSelected=function(e){return e===this.otherItem?this.isOtherSelected:this.isItemSelectedCore(e)},t.prototype.isItemSelectedCore=function(e){return e.value===this.renderedValue},t.prototype.clearDisabledValues=function(){this.survey&&this.survey.clearDisabledChoices&&this.clearDisabledValuesCore()},t.prototype.clearIncorrectValuesCore=function(){var e=this.value;this.canClearValueAnUnknown(e)&&this.clearValue(!0)},t.prototype.canClearValueAnUnknown=function(e){return!(!this.getStoreOthersAsComment()&&this.isOtherSelected)&&this.hasUnknownValue(e,!0,!0,!0)},t.prototype.clearDisabledValuesCore=function(){this.isValueDisabled(this.value)&&this.clearValue(!0)},t.prototype.clearUnusedValues=function(){e.prototype.clearUnusedValues.call(this),this.isOtherValueUnused()&&(this.otherValue="")},t.prototype.isOtherValueUnused=function(){return!this.isOtherSelected},t.prototype.getColumnClass=function(){return(new _e).append(this.cssClasses.column).append("sv-q-column-"+this.colCount,this.hasColumns).toString()},t.prototype.getItemIndex=function(e){return this.visibleChoices.indexOf(e)},t.prototype.getItemClass=function(e){var t={item:e},n=this.getItemClassCore(e,t);return t.css=n,this.survey&&this.survey.updateChoiceItemCss(this,t),t.css},t.prototype.getCurrentColCount=function(){return this.colCount},t.prototype.getItemClassCore=function(e,t){var n=(new _e).append(this.cssClasses.item).append(this.cssClasses.itemInline,!this.hasColumns&&0===this.colCount).append("sv-q-col-"+this.getCurrentColCount(),!this.hasColumns&&0!==this.colCount).append(this.cssClasses.itemOnError,this.hasCssError()),o=this.getIsDisableAndReadOnlyStyles(!e.isEnabled),i=o[0],r=o[1],s=this.isItemSelected(e),a=!(r||s||this.survey&&this.survey.isDesignMode),l=e===this.noneItem;return t.isDisabled=r||i,t.isChecked=s,t.isNone=l,n.append(this.cssClasses.itemDisabled,r).append(this.cssClasses.itemReadOnly,i).append(this.cssClasses.itemPreview,this.isPreviewStyle).append(this.cssClasses.itemChecked,s).append(this.cssClasses.itemHover,a).append(this.cssClasses.itemNone,l).toString()},t.prototype.getLabelClass=function(e){return(new _e).append(this.cssClasses.label).append(this.cssClasses.labelChecked,this.isItemSelected(e)).toString()},t.prototype.getControlLabelClass=function(e){return(new _e).append(this.cssClasses.controlLabel).append(this.cssClasses.controlLabelChecked,this.isItemSelected(e)).toString()||void 0},t.prototype.updateRenderedChoices=function(){this.renderedChoices=this.onGetRenderedChoicesCallback?this.onGetRenderedChoicesCallback(this.visibleChoices):this.visibleChoices},t.prototype.getRenderedChoicesAnimationOptions=function(){var e=this;return{isAnimationEnabled:function(){return e.animationAllowed},getRerenderEvent:function(){return e.onElementRerendered},getKey:function(t){return t!=e.newItemValue?t.value:e.newItemValue},getLeaveOptions:function(t){var n=e.cssClasses.itemLeave;if(e.hasColumns){var o=e.bodyItems.indexOf(t);-1!==o&&o!==e.bodyItems.length-1&&(n="")}return{cssClass:n,onBeforeRunAnimation:pn,onAfterRunAnimation:hn}},getAnimatedElement:function(e){return e.getRootElement()},getEnterOptions:function(t){var n=e.cssClasses.itemEnter;if(e.hasColumns){var o=e.bodyItems.indexOf(t);-1!==o&&o!==e.bodyItems.length-1&&(n="")}return{cssClass:n,onBeforeRunAnimation:function(n){if(0==e.getCurrentColCount()&&e.bodyItems.indexOf(t)>=0){var o=n.parentElement.firstElementChild.offsetLeft;n.offsetLeft>o&&cn(n,{moveAnimationDuration:"0s",fadeAnimationDelay:"0s"},"--")}pn(n)},onAfterRunAnimation:hn}}}},Object.defineProperty(t.prototype,"renderedChoices",{get:function(){return this._renderedChoices},set:function(e){this.renderedChoicesAnimation.sync(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headItems",{get:function(){for(var e=this.separateSpecialChoices||this.isInDesignMode?this.headItemsCount:0,t=[],n=0;n<e;n++)this.renderedChoices[n]&&t.push(this.renderedChoices[n]);return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footItems",{get:function(){for(var e=this.separateSpecialChoices||this.isInDesignMode?this.footItemsCount:0,t=[],n=this.renderedChoices,o=0;o<e;o++)this.renderedChoices[n.length-e+o]&&t.push(this.renderedChoices[n.length-e+o]);return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChoices",{get:function(){var e=this;return this.renderedChoices.filter(function(t){return!e.isBuiltInChoice(t)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodyItems",{get:function(){return this.hasHeadItems||this.hasFootItems?this.dataChoices:this.renderedChoices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasHeadItems",{get:function(){return this.headItems.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFootItems",{get:function(){return this.footItems.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemFlowDirection",{get:function(){return gn.itemFlowDirection},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){if(!this.hasColumns||0===this.renderedChoices.length)return[];var e=this.getCurrentColCount(),t=this.separateSpecialChoices||this.isInDesignMode?this.dataChoices:this.renderedChoices;return"column"===this.itemFlowDirection?this.getColumnsWithColumnItemFlow(t,e):this.getColumnsWithRowItemFlow(t,e)},enumerable:!1,configurable:!0}),t.prototype.getColumnsWithColumnItemFlow=function(e,t){var n=[],o=Math.floor(e.length/t);e.length%t&&(o+=1);for(var i=e.length,r=t,s=0,a=0;a<t;a++){for(var l=[],u=0;u<o;u++){i<=r&&(o=1);var c=e[u+s];c&&(l.push(c),i--)}n.push(l),r--,s+=l.length}return n},t.prototype.getColumnsWithRowItemFlow=function(e,t){for(var n=[],o=0;o<t;o++){for(var i=[],r=o;r<e.length;r+=t)i.push(e[r]);n.push(i)}return n},t.prototype.getItemsColumnKey=function(e){return(e||[]).map(function(e){return e.uniqueId}).join("-")},Object.defineProperty(t.prototype,"hasColumns",{get:function(){return!this.isMobile&&this.getCurrentColCount()>1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowLayout",{get:function(){return 0==this.getCurrentColCount()&&!(this.hasFootItems||this.hasHeadItems)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blockedRow",{get:function(){return 0==this.getCurrentColCount()&&(this.hasFootItems||this.hasHeadItems)},enumerable:!1,configurable:!0}),t.prototype.choicesLoaded=function(){this.isChoicesLoaded=!0,this.updateIsReady(),this.survey&&this.survey.loadedChoicesFromServer(this),this.loadedChoicesFromServerCallback&&this.loadedChoicesFromServerCallback()},t.prototype.getItemValueWrapperComponentName=function(e){var t=this.survey;return t?t.getItemValueWrapperComponentName(e,this):rr.TemplateRendererComponentName},t.prototype.getItemValueWrapperComponentData=function(e){var t=this.survey;return t?t.getItemValueWrapperComponentData(e,this):e},t.prototype.ariaItemChecked=function(e){return this.renderedValue===e.value?"true":"false"},t.prototype.isOtherItem=function(e){return this.showOtherItem&&e.value==this.otherItem.value},Object.defineProperty(t.prototype,"itemSvgIcon",{get:function(){return this.isPreviewStyle&&this.cssClasses.itemPreviewSvgIconId?this.cssClasses.itemPreviewSvgIconId:this.cssClasses.itemSvgIconId},enumerable:!1,configurable:!0}),t.prototype.getSelectBaseRootCss=function(){return(new _e).append(this.getQuestionRootCss()).append(this.cssClasses.rootRow,this.rowLayout).toString()},t.prototype.allowMobileInDesignMode=function(){return!0},t.prototype.getAriaItemLabel=function(e){return e.locText.renderedHtml},t.prototype.getItemId=function(e){return this.inputId+"_"+this.getItemIndex(e)},Object.defineProperty(t.prototype,"questionName",{get:function(){return this.name+"_"+this.id},enumerable:!1,configurable:!0}),t.prototype.getItemEnabled=function(e){return!this.isDisabledAttr&&e.isEnabled},t.prototype.focusOtherComment=function(e){var t;this.autoOtherMode||Tt.FocusElement(this.getItemCommentId(e),!1,null===(t=this.survey)||void 0===t?void 0:t.rootElement)},t.prototype.getDefaultItemComponent=function(){return""},Object.defineProperty(t.prototype,"itemComponent",{get:function(){return this.getPropertyValue("itemComponent",this.getDefaultItemComponent())},set:function(e){this.setPropertyValue("itemComponent",e)},enumerable:!1,configurable:!0}),function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([b()],t.prototype,"_renderedChoices",void 0),t}(Xn),cr=function(e){function t(t){return e.call(this,t)||this}return ar(t,e),Object.defineProperty(t.prototype,"colCount",{get:function(){return this.getPropertyValue("colCount",this.isFlowLayout?0:void 0)},set:function(e){e<0||e>5||this.isFlowLayout||(this.setPropertyValue("colCount",e),this.fireCallback(this.colCountChangedCallback))},enumerable:!1,configurable:!0}),t.prototype.onParentChanged=function(){e.prototype.onParentChanged.call(this),this.isFlowLayout&&this.setPropertyValue("colCount",null)},t.prototype.onParentQuestionChanged=function(){this.onVisibleChoicesChanged()},t.prototype.getSearchableItemValueKeys=function(e){e.push("choices")},t}(ur);function pr(e,t){var n;if(!e)return!1;if(e.templateQuestion){var o=null===(n=e.colOwner)||void 0===n?void 0:n.data;if(!(e=e.templateQuestion).getCarryForwardQuestion(o))return!1}return e.carryForwardQuestionType===t}D.addClass("choiceitem",[{name:"showCommentArea:boolean",locationInTable:"detail",visibleIf:function(e){return e.supportComment}},{name:"isCommentRequired:boolean",locationInTable:"detail",visibleIf:function(e){return e.showCommentArea}},{name:"commentPlaceholder",locationInTable:"detail",serializationProperty:"locCommentPlaceholder",visibleIf:function(e){return e.showCommentArea}},{name:"elements",baseClassName:"question",visible:!1,isLightSerializable:!1,isSerializableFunc:function(e){return e.hasElements}}],function(e){return new lr(e)},"itemvalue"),D.addClass("selectbase",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},"choicesFromQuestion:question_carryforward",{name:"choices:choiceitem[]",uniqueProperty:"value",baseValue:function(){return l("choices_Item")},dependsOn:"choicesFromQuestion",visibleIf:function(e){return!e.choicesFromQuestion}},{name:"choicesFromQuestionMode",default:"all",choices:["all","selected","unselected"],dependsOn:"choicesFromQuestion",visibleIf:function(e){return pr(e,"select")}},{name:"choiceValuesFromQuestion",dependsOn:"choicesFromQuestion",visibleIf:function(e){return pr(e,"array")}},{name:"choiceTextsFromQuestion",dependsOn:"choicesFromQuestion",visibleIf:function(e){return pr(e,"array")}},{name:"choicesOrder",default:"none",choices:["none","asc","desc","random"],dependsOn:"choicesFromQuestion",visibleIf:function(e){return!e.choicesFromQuestion}},{name:"choicesByUrl:restfull",className:"choicesByUrl",onGetValue:function(e){return e.choicesByUrl.getData()},onSetValue:function(e,t){e.choicesByUrl.setData(t)}},"hideIfChoicesEmpty:boolean","choicesVisibleIf:condition",{name:"choicesEnableIf:condition",dependsOn:"choicesFromQuestion",visibleIf:function(e){return!e.choicesFromQuestion}},{name:"defaultValue:value",visibleIf:function(e){return!e.choicesFromQuestion},dependsOn:"choicesFromQuestion"},{name:"correctAnswer:value",visibleIf:function(e){return!e.choicesFromQuestion},dependsOn:"choicesFromQuestion"},{name:"separateSpecialChoices:boolean",visible:!1},{name:"showOtherItem:boolean",alternativeName:"hasOther"},{name:"showNoneItem:boolean",alternativeName:"hasNone"},{name:"showRefuseItem:boolean",visible:!1,version:"1.9.128"},{name:"showDontKnowItem:boolean",visible:!1,version:"1.9.128"},{name:"otherPlaceholder",alternativeName:"otherPlaceHolder",serializationProperty:"locOtherPlaceholder",dependsOn:"showOtherItem",visibleIf:function(e){return e.showOtherItem}},{name:"noneText",serializationProperty:"locNoneText",dependsOn:"showNoneItem",visibleIf:function(e){return e.showNoneItem}},{name:"refuseText",serializationProperty:"locRefuseText",dependsOn:"showRefuseItem",visibleIf:function(e){return e.showRefuseItem}},{name:"dontKnowText",serializationProperty:"locDontKnowText",dependsOn:"showDontKnowItem",visibleIf:function(e){return e.showDontKnowItem}},{name:"otherText",serializationProperty:"locOtherText",dependsOn:"showOtherItem",visibleIf:function(e){return e.showOtherItem}},{name:"otherErrorText",serializationProperty:"locOtherErrorText",dependsOn:"showOtherItem",visibleIf:function(e){return e.showOtherItem}},{name:"storeOthersAsComment",default:"default",choices:["default",!0,!1],visible:!1}],null,"question"),D.addClass("checkboxbase",[{name:"colCount:number",default:1,choices:[0,1,2,3,4,5],layout:"row"}],null,"selectbase");var hr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),dr=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},fr=function(e){function t(t,n){var i=e.call(this)||this;i.question=t,i.onSelectionChanged=n,i.minPageSize=25,i.loadingItemHeight=40,i.timer=void 0,i._markdownMode=!1,i.filteredItems=void 0,i.selectedItemSelector=".sv-list__item--selected",i.itemSelector=".sv-list__item",i.itemsSettings={skip:0,take:0,totalCount:0,items:[]},i.listModelFilterStringChanged=function(e){i.filterString!==e&&(i.filterString=e,i.choicesLazyLoadEnabled||i.processCustomValue())},i.questionPropertyChangedHandler=function(e,t){i.onPropertyChangedHandler(e,t)},i.ariaExpanded="false",i.createLocalizableString("clearCaption",i.question,!1,!0),i.createLocalizableString("selectCaption",i.question,!1,!0),i.htmlCleanerElement=o.createElement("div"),t.onPropertyChanged.add(i.questionPropertyChangedHandler),i.showInputFieldComponent=i.question.showInputFieldComponent,i.listModel=i.createListModel(),i.setChoicesLazyLoadEnabled(i.question.choicesLazyLoadEnabled),i.setInputPlaceholder(i.question.placeholder),i.updateAfterListModelCreated(i.listModel),i.setSearchEnabled(i.question.searchEnabled),i.setAllowCustomChoices(i.question.allowCustomChoices),i.setTextWrapEnabled(i.question.textWrapEnabled),i.createPopup(),i.createButtons(),i.resetItemsSettings();var r=t.cssClasses;return i.updateCssClasses(r.popup,r.list),i}return hr(t,e),Object.defineProperty(t.prototype,"focusFirstInputSelector",{get:function(){return this.getFocusFirstInputSelector()},enumerable:!1,configurable:!0}),t.prototype.getFocusFirstInputSelector=function(){return Je?this.isValueEmpty(this.question.value)?this.itemSelector:this.selectedItemSelector:!this.listModel.showFilter&&this.question.value?this.selectedItemSelector:""},t.prototype.resetItemsSettings=function(){this.itemsSettings.skip=0,this.itemsSettings.take=Math.max(this.minPageSize,this.question.choicesLazyLoadPageSize),this.itemsSettings.totalCount=0,this.itemsSettings.items=[]},t.prototype.setItems=function(e,t){this.itemsSettings.items=[].concat(this.itemsSettings.items,e),this.itemsSettings.totalCount=t,this.listModel.isAllDataLoaded=this.choicesLazyLoadEnabled&&this.itemsSettings.items.length==this.itemsSettings.totalCount,this.question.choices=this.itemsSettings.items},t.prototype._loadQuestionChoices=function(e){var t=this,n=this.filterString;this.setIsChoicesLoading(!0),this.question.survey.loadQuestionChoices({question:this.question,filter:this.filterString,skip:this.itemsSettings.skip,take:this.itemsSettings.take,setItems:function(o,i){t.setItems(o||[],i||0),t.popupRecalculatePosition(t.itemsSettings.skip===t.itemsSettings.take),e&&e(),t.processCustomValue(n),t.setIsChoicesLoading(!1)}}),this.itemsSettings.skip+=this.itemsSettings.take},t.prototype.setIsChoicesLoading=function(e){this.question.setIsChoicesLoading&&this.question.setIsChoicesLoading(e)},t.prototype.processCustomValue=function(e){if(this.allowCustomChoices){var t=e||this.filterString;this.listModel.getVisibleActions().filter(function(e){return r.isTwoValueEquals(e.text,t,!1,!1)})[0]?this.customValue=void 0:(this.customValue=t,this.updateItems(),this.listModel.focusFirstVisibleItem())}},t.prototype.updateQuestionChoices=function(e){var t=this,n=this.itemsSettings.skip+1<this.itemsSettings.totalCount;this.itemsSettings.skip&&!n||(this.resetTimer(),this.filterString&&gn.dropdownSearchDelay>0?this.timer=setTimeout(function(){t._loadQuestionChoices(e)},gn.dropdownSearchDelay):this._loadQuestionChoices(e))},t.prototype.resetTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=void 0)},t.prototype.updatePopupFocusFirstInputSelector=function(){this._popupModel.focusFirstInputSelector=this.focusFirstInputSelector},t.prototype.getDropdownMenuOptions=function(){var e=n.getInnerWidth(),t=n.getInnerHeight(),o=function(e,t,o){if(void 0===o&&(o=600),void 0!==Ye)return Ye;var i=e||n.getInnerWidth(),r=t||n.getInnerHeight();return Math.min(i,r)>=o}(e,t),i="dropdown",r="desktop";return Je&&(i="popup",r=o?"tablet":"mobile"),{menuType:i,deviceType:r,hasTouchScreen:Je,screenHeight:t,screenWidth:e}},t.prototype.checkFocusRemainsWithinComponent=function(e){if(!this.question.cssClasses.root||!(null==e?void 0:e.target))return!1;var t=e.target.closest(tn(this.question.cssClasses.root));return t&&t.contains(e.relatedTarget)},t.prototype.createButtons=function(){var e=this;this.editorButtons=new qe,this.editorButtons.containerCss="sd-dropdown-action-bar",this.chevronButton=new dt({id:"chevron",css:"sd-editor-chevron-button",iconName:this.question.cssClasses.chevronButtonIconId||"icon-chevron",iconSize:"auto",showTitle:!1,locTitle:this.locSelectCaption,disableTabStop:!0,enabled:new Ie(function(){return!e.question.isInputReadOnly}),visible:new Ie(function(){return!e.question.isPreviewStyle}),action:function(t){e.onClick()}}),this.clearButton=new dt({id:"clear",css:"sd-editor-clean-button",iconName:this.question.cssClasses.cleanButtonIconId||"icon-cancel-24x24",iconSize:"auto",showTitle:!1,locTitle:this.locClearCaption,disableTabStop:!0,enabled:new Ie(function(){return!e.question.isInputReadOnly}),visible:new Ie(function(){var t=e.question.isEmpty(),n=e.question.isReadOnly;return e.question.allowClear&&!t&&!n}),action:function(t){e.onClear()}}),this.editorButtons.setItems([this.clearButton,this.chevronButton]),this.editorButtons.actions.forEach(function(e){return e.cssClasses={item:"sd-editor-button-item",itemIcon:"sv-editor-button-item__icon",itemPressed:"sd-editor-button-item--pressed"}})},t.prototype.createPopup=function(){var e=this;this._popupModel=new it("sv-list",{model:this.listModel},{verticalPosition:"bottom",horizontalPosition:"center",showPointer:!1}),this._popupModel.displayMode=Je?"overlay":"popup",this._popupModel.positionMode="fixed",this._popupModel.isFocusedContainer=!1,this._popupModel.isFocusedContent=Je,this._popupModel.setWidthByTarget=!Je,this._popupModel.locale=this.question.getLocale(),this.updatePopupFocusFirstInputSelector(),this.listModel.registerPropertyChangedHandlers(["showFilter"],function(){e.updatePopupFocusFirstInputSelector()}),this._popupModel.onVisibilityChanged.add(function(t,n){e.popupVisibilityChanged(n.isVisible),e.chevronButton.pressed=n.isVisible})},t.prototype.popupVisibilityChanged=function(e){if(e&&(this.listModel.renderElements=!0),e&&this.choicesLazyLoadEnabled&&(this.listModel.actions=[],this.resetItemsSettings(),this.updateQuestionChoices()),e){this.updatePopupFocusFirstInputSelector();var t=this.getDropdownMenuOptions();this.question.processOpenDropdownMenu(t),this._popupModel.updateDisplayMode(t.menuType)&&this.listModel.setSearchEnabled(this.inputAvailable&&"dropdown"!==t.menuType),this.question.onOpenedCallBack&&this.question.onOpenedCallBack()}e||this.onHidePopup(),this.ariaExpanded=e?"true":"false",this.question.processPopupVisiblilityChanged(this.popupModel,e)},t.prototype.setFilterStringToListModel=function(e){var t=this;if(this.listModel.filterString=e,this.listModel.resetFocusedItem(),this.question.selectedItem&&this.question.selectedItem.text.indexOf(e)>=0)return this.listModel.focusedItem=this.getAvailableItems().filter(function(e){return e.id==t.question.selectedItem.value})[0],void(this.listModel.filterString&&this.listModel.actions.map(function(e){return e.selectedValue=!1}));this.listModel.focusedItem&&this.listModel.isItemVisible(this.listModel.focusedItem)||this.listModel.focusFirstVisibleItem()},t.prototype.setTextWrapEnabled=function(e){this.listModel.textWrapEnabled=e},t.prototype.popupRecalculatePosition=function(e){var t=this;setTimeout(function(){t.popupModel.recalculatePosition(e)},1)},t.prototype.onHidePopup=function(){this.question.suggestedItem=null,this.choicesLazyLoadEnabled&&this.resetItemsSettings(),this.customValue=void 0,this.resetCustomItemValue()},t.prototype.getAvailableItems=function(){return this.allowCustomChoices?[].concat(this.question.visibleChoices,[this.customItemValue]):this.question.visibleChoices},t.prototype.setOnTextSearchCallbackForListModel=function(e){var t=this;e.setOnTextSearchCallback(function(e,n){if(e.id===t.customItemValue.id)return e.visible;if(t.filteredItems)return t.filteredItems.indexOf(e)>=0;var o=e.text.toLocaleLowerCase(),i=(o=gn.comparator.normalizeTextCallback(o,"filter")).indexOf(n.toLocaleLowerCase());return"startsWith"==t.question.searchMode?0==i:i>-1})},t.prototype.createListModel=function(){var e=this,t=this.getAvailableItems(),n=this.onSelectionChanged;n||(n=function(t){e.setQuestionValue(t),e.popupModel.hide()});var o={items:t,onSelectionChanged:n,allowSelection:!1,locOwner:this.question,elementId:this.listElementId},i=new tt(o);return this.setOnTextSearchCallbackForListModel(i),i.renderElements=!1,i.forceShowFilter=this.question.choicesLazyLoadEnabled,i.areSameItemsCallback=function(e,t){return e===t},i},t.prototype.setQuestionValue=function(e){var t=e;this.allowCustomChoices&&e.id===this.customItemValue.id&&(t=this.createCustomItem()),t&&(this.resetFilterString(),this.question.selectItem(t),this.searchEnabled&&this.applyInputString(t))},t.prototype.createCustomItem=function(){var e=new to(this.customValue),t={item:e,question:this.question,allow:!0};return this.question.survey.createCustomChoiceItem(t),t.allow?(this.question.customChoices.push(e),this.customValue=void 0,this.updateItems(),e):(this.clear(),null)},t.prototype.updateAfterListModelCreated=function(e){var t=this;e.isItemSelected=function(e){return!!e.selected},e.isAllDataLoaded=!this.choicesLazyLoadEnabled,e.disableSearch=this.choicesLazyLoadEnabled,e.actions.forEach(function(e){return e.disableTabStop=!0}),e.setOnFilterStringChangedCallback(this.listModelFilterStringChanged),e.setLoadingIndicatorVisibilityObserver(function(e){e&&t.updateQuestionChoices()})},t.prototype.getPopupCssClasses=function(){return"sv-single-select-list"},t.prototype.updateCssClasses=function(e,t){this.popupModel.cssClass=(new _e).append(e).append(this.getPopupCssClasses()).toString(),this.listModel.cssClasses=t},t.prototype.resetFilterString=function(){this.filterString&&(this.filterString=void 0,this.listModel.filterString=""),this.inputString=null,this.hintString=""},t.prototype.clear=function(){this.customValue=void 0,this.resetFilterString()},t.prototype.onSetFilterString=function(){var e=this;if(this.filteredItems=void 0,this.filterString||this.popupModel.isVisible){var t={question:this.question,choices:this.getAvailableItems(),filter:this.filterString,filteredChoices:void 0};this.question.survey.onChoicesSearch.fire(this.question.survey,t),this.filteredItems=t.filteredChoices,this.filterString&&!this.popupModel.isVisible&&this.popupModel.show();var n=function(){e.setFilterStringToListModel(e.filterString),e.filterString&&e.applyHintString(),e.popupRecalculatePosition(!0)};this.choicesLazyLoadEnabled?(this.resetItemsSettings(),this.updateQuestionChoices(n)):n()}},Object.defineProperty(t.prototype,"isAllDataLoaded",{get:function(){return!!this.itemsSettings.totalCount&&this.itemsSettings.items.length==this.itemsSettings.totalCount},enumerable:!1,configurable:!0}),t.prototype.loadQuestionChoices=function(e){this.isAllDataLoaded||this._loadQuestionChoices(e)},Object.defineProperty(t.prototype,"canShowSelectedItem",{get:function(){return!this.focused||this._markdownMode||!this.searchEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"needRenderInput",{get:function(){return!this.question.isInputReadOnly||!!this.placeholderRendered},enumerable:!1,configurable:!0}),t.prototype.updateCustomItemValue=function(){this.customValue?(this.customItemValue.text=this.getLocalizationFormatString("createCustomItem",this.customValue),this.customItemValue.visible=!0):this.resetCustomItemValue()},t.prototype.resetCustomItemValue=function(){this.customItemValue.text="",this.customItemValue.visible=!1},Object.defineProperty(t.prototype,"customItemValue",{get:function(){return this._customItemValue||(this._customItemValue=new to("newCustomItem",this.getLocalizationFormatString("createCustomItem",this.customValue)),this._customItemValue.css="sv-list-item--custom-value"),this._customItemValue},enumerable:!1,configurable:!0}),t.prototype.applyInputString=function(e){(null==e?void 0:e.locText.hasHtml)||this.question.inputFieldComponentName?(this._markdownMode=!0,this.inputString=this.cleanHtml(null==e?void 0:e.locText.getHtmlValue()),this.hintString=""):(this.inputString=null==e?void 0:e.title,this.hintString=null==e?void 0:e.title)},t.prototype.cleanHtml=function(e){return this.htmlCleanerElement?(this.htmlCleanerElement.innerHTML=e,this.htmlCleanerElement.textContent):""},t.prototype.fixInputCase=function(){var e=this.hintStringMiddle;e&&this.inputString!=e&&(this.inputString=e)},t.prototype.applyHintString=function(){var e=this.listModel.focusedItem||this.question.selectedItem;(null==e?void 0:e.locText.hasHtml)||this.question.inputFieldComponentName?(this._markdownMode=!0,this.hintString=""):e===this.customItemValue?this.hintString="":this.hintString=null==e?void 0:e.title},Object.defineProperty(t.prototype,"inputStringRendered",{get:function(){return this.inputString||""},set:function(e){var t;this.inputString=e,this.filterString=e,this.choicesLazyLoadEnabled||this.processCustomValue(),e&&this.searchEnabled&&(null===(t=this.listModel.focusedItem)||void 0===t?void 0:t.id)!==this.customItemValue.id||(this.hintString="")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeholderRendered",{get:function(){return this.hintString||this.question.readOnly||!this.question.isEmpty()?"":this.inputPlaceholder},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"listElementId",{get:function(){return this.question.inputId+"_list"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hintStringLC",{get:function(){var e;return(null===(e=this.hintString)||void 0===e?void 0:e.toLowerCase())||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputStringLC",{get:function(){var e;return(null===(e=this.inputString)||void 0===e?void 0:e.toLowerCase())||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHintPrefix",{get:function(){return!!this.inputString&&this.hintStringLC.indexOf(this.inputStringLC)>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hintStringPrefix",{get:function(){return this.inputString?this.hintString.substring(0,this.hintStringLC.indexOf(this.inputStringLC)):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHintString",{get:function(){return!!this.searchEnabled&&!(!this.hintStringLC&&!this.inputStringLC)||!this.searchEnabled&&this.hintStringLC&&this.question.isEmpty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hintStringSuffix",{get:function(){return this.hintStringLC.indexOf(this.inputStringLC)>=0?this.hintString.substring(this.hintStringLC.indexOf(this.inputStringLC)+this.inputStringLC.length):""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hintStringMiddle",{get:function(){var e=this.hintStringLC.indexOf(this.inputStringLC);return-1==e?null:this.hintString.substring(e,e+this.inputStringLC.length)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popupModel",{get:function(){return this._popupModel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearCaption",{get:function(){return this.getLocalizableStringText("clearCaption")},set:function(e){this.setLocalizableStringText("clearCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locClearCaption",{get:function(){return this.getLocalizableString("clearCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectCaption",{get:function(){return this.getLocalizableStringText("selectCaption")},set:function(e){this.setLocalizableStringText("selectCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locSelectCaption",{get:function(){return this.getLocalizableString("selectCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputAvailable",{get:function(){return this.searchEnabled||this.allowCustomChoices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noTabIndex",{get:function(){return this.question.isInputReadOnly||this.inputAvailable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filterReadOnly",{get:function(){return!this.filterStringEnabled||!this.focused},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filterStringEnabled",{get:function(){return!this.question.isInputReadOnly&&this.inputAvailable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputMode",{get:function(){return Je?"none":"text"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popupEnabled",{get:function(){return!this.question.isInputReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionRole",{get:function(){return this.filterStringEnabled?void 0:"combobox"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionRequired",{get:function(){return this.ariaQuestionRole?this.question.a11y_input_ariaRequired:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionInvalid",{get:function(){return this.ariaQuestionRole?this.question.a11y_input_ariaInvalid:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionErrorMessage",{get:function(){return this.ariaQuestionRole?this.question.a11y_input_ariaErrormessage:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionLabel",{get:function(){return this.ariaQuestionRole?this.question.a11y_input_ariaLabel:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionLabelledby",{get:function(){return this.ariaQuestionRole?this.question.a11y_input_ariaLabelledBy:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionDescribedby",{get:function(){return this.ariaQuestionRole?this.question.a11y_input_ariaDescribedBy:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionControls",{get:function(){return this.ariaQuestionRole&&this.popupEnabled?this.listElementId:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionExpanded",{get:function(){return this.ariaQuestionRole?this.popupEnabled?this.ariaExpanded:"false":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaQuestionActivedescendant",{get:function(){return this.ariaQuestionRole?this.ariaActivedescendant:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputRole",{get:function(){return this.filterStringEnabled?"combobox":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputRequired",{get:function(){return this.ariaInputRole?this.question.a11y_input_ariaRequired:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputInvalid",{get:function(){return this.ariaInputRole?this.question.a11y_input_ariaInvalid:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputErrorMessage",{get:function(){return this.ariaInputRole?this.question.a11y_input_ariaErrormessage:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputLabel",{get:function(){return this.ariaInputRole?this.question.a11y_input_ariaLabel:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputLabelledby",{get:function(){return this.ariaInputRole?this.question.a11y_input_ariaLabelledBy:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputDescribedby",{get:function(){return this.ariaInputRole?this.question.a11y_input_ariaDescribedBy:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputControls",{get:function(){return this.ariaInputRole&&this.popupEnabled?this.listElementId:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputExpanded",{get:function(){return this.ariaInputRole?this.popupEnabled?this.ariaExpanded:"false":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInputActivedescendant",{get:function(){return this.ariaInputRole?this.ariaActivedescendant:void 0},enumerable:!1,configurable:!0}),t.prototype.setSearchEnabled=function(e){this.listModel.setSearchEnabled(Je&&(e||this.question.allowCustomChoices)),this.searchEnabled=e},t.prototype.setAllowCustomChoices=function(e){this.allowCustomChoices=e,e&&(this.searchEnabled=e)},t.prototype.setChoicesLazyLoadEnabled=function(e){this.choicesLazyLoadEnabled=e,this.listModel.disableSearch=e,this.listModel.isAllDataLoaded=!e},t.prototype.setInputPlaceholder=function(e){this.inputPlaceholder=e},t.prototype.updateItems=function(){this.listModel.setItems(this.getAvailableItems())},t.prototype.onClick=function(e){this.question.readOnly||this.question.isDesignMode||this.question.isPreviewStyle||this.question.isReadOnlyAttr||(this._popupModel.toggleVisibility(),this.focusItemOnClickAndPopup(),this.question.focusInputElement(!1))},t.prototype.chevronPointerDown=function(e){this._popupModel.isVisible&&e.preventDefault()},t.prototype.onPropertyChangedHandler=function(e,t){"value"==t.name&&(this.showInputFieldComponent=this.question.showInputFieldComponent),"textWrapEnabled"==t.name&&this.setTextWrapEnabled(t.newValue)},t.prototype.focusItemOnClickAndPopup=function(){this._popupModel.isVisible&&this.question.value&&this.changeSelectionWithKeyboard(!1)},t.prototype.onClear=function(e){this.question.clearValueFromUI(),this._popupModel.hide(),e&&(e.preventDefault(),e.stopPropagation())},t.prototype.getSelectedAction=function(){return this.question.selectedItem||null},t.prototype.changeSelectionWithKeyboard=function(e){var t,n=this.listModel.focusedItem;!n&&this.question.selectedItem?to.getItemByValue(this.question.visibleChoices,this.question.value)&&(this.listModel.focusedItem=this.question.selectedItem):e?this.listModel.focusPrevVisibleItem():this.listModel.focusNextVisibleItem(),this.beforeScrollToFocusedItem(n),this.scrollToFocusedItem(),this.afterScrollToFocusedItem(),this.ariaActivedescendant=null===(t=this.listModel.focusedItem)||void 0===t?void 0:t.elementId},t.prototype.beforeScrollToFocusedItem=function(e){this.question.value&&e&&(e.selectedValue=!1,this.listModel.focusedItem.selectedValue=!this.listModel.filterString,this.question.suggestedItem=this.listModel.focusedItem)},t.prototype.afterScrollToFocusedItem=function(){var e;this.question.value&&!this.listModel.filterString&&this.searchEnabled?this.applyInputString(this.listModel.focusedItem||this.question.selectedItem):this.applyHintString(),this.fixInputCase(),this.ariaActivedescendant=null===(e=this.listModel.focusedItem)||void 0===e?void 0:e.elementId},t.prototype.keyHandler=function(e){var t=!1,n=e.which||e.keyCode;if(this.popupModel.isVisible&&38===e.keyCode)this.changeSelectionWithKeyboard(!0),t=!0;else if(40===e.keyCode)this.popupModel.show(),this.changeSelectionWithKeyboard(!1),t=!0;else if(this.popupModel.isVisible||32!==e.keyCode)if(this.popupModel.isVisible||13!==e.keyCode)if(!this.popupModel.isVisible||13!==e.keyCode&&(32!==e.keyCode||this.searchEnabled&&this.inputString))if(46===n||8===n)this.inputAvailable||this.onClear(e);else if(27===e.keyCode)this._popupModel.hide(),this.hintString="",this.onEscape();else{if((38===e.keyCode||40===e.keyCode||32===e.keyCode&&!this.searchEnabled)&&(t=!0),32===e.keyCode&&this.searchEnabled)return;Yt(e,{processEsc:!1,disableTabStop:this.question.isInputReadOnly})}else 13===e.keyCode&&this.searchEnabled&&!this.inputString&&this.question instanceof mr&&!this._markdownMode&&this.question.value?(this._popupModel.hide(),this.onClear(e)):(this.listModel.selectFocusedItem(),this.onFocus(e)),t=!0;else this.question.survey.questionEditFinishCallback(this.question,e),t=!0;else this.popupModel.show(),this.changeSelectionWithKeyboard(!1),t=!0;t&&(e.preventDefault(),e.stopPropagation())},t.prototype.onEscape=function(){this.searchEnabled&&this.applyInputString(this.question.selectedItem)},t.prototype.onScroll=function(e){var t=e.target;t.scrollHeight-(t.scrollTop+t.offsetHeight)<=this.loadingItemHeight&&this.updateQuestionChoices()},t.prototype.onBlur=function(e){this.checkFocusRemainsWithinComponent(e)||(this.focused=!1,this.popupModel.isVisible&&"overlay"==this.popupModel.displayMode||(Kt(e),this._popupModel.hide(),this.resetFilterString(),e.stopPropagation()))},t.prototype.onFocus=function(e){this.focused=!0,this.setInputStringFromSelectedItem(this.question.selectedItem)},t.prototype.setInputStringFromSelectedItem=function(e){this.focused&&this.searchEnabled&&e&&this.applyInputString(e)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.question&&this.question.onPropertyChanged.remove(this.questionPropertyChangedHandler),this.questionPropertyChangedHandler=void 0,this.listModel&&this.listModel.dispose(),this.popupModel&&this.popupModel.dispose(),this.htmlCleanerElement=void 0},t.prototype.scrollToFocusedItem=function(){this.listModel.scrollToFocusedItem()},dr([y({defaultValue:!1})],t.prototype,"focused",void 0),dr([y({defaultValue:!1})],t.prototype,"allowCustomChoices",void 0),dr([y({onSet:function(e,t){t.updateCustomItemValue()}})],t.prototype,"customValue",void 0),dr([y({defaultValue:!0})],t.prototype,"searchEnabled",void 0),dr([y()],t.prototype,"choicesLazyLoadEnabled",void 0),dr([y({defaultValue:"",onSet:function(e,t){t.onSetFilterString()}})],t.prototype,"filterString",void 0),dr([y({defaultValue:"",onSet:function(e,t){t.question.inputHasValue=!!e}})],t.prototype,"inputString",void 0),dr([y({})],t.prototype,"showInputFieldComponent",void 0),dr([y()],t.prototype,"ariaActivedescendant",void 0),dr([y()],t.prototype,"ariaExpanded",void 0),dr([y()],t.prototype,"inputPlaceholder",void 0),dr([y({defaultValue:""})],t.prototype,"hintString",void 0),t}(Te),gr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),yr=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},mr=function(e){function t(t){var n=e.call(this,t)||this;return n.lastSelectedItemValue=null,n.minMaxChoices=[],n.onOpened=n.addEvent(),n.createLocalizableString("placeholder",n,!1,!0),n.createLocalizableString("readOnlyText",n,!0),n.registerPropertyChangedHandlers(["choicesMin","choicesMax","choicesStep"],function(){n.onVisibleChoicesChanged()}),n.registerPropertyChangedHandlers(["value","renderAs","showOtherItem","otherText","placeholder","choices","visibleChoices"],function(){n.getSingleSelectedItem(),n.updateReadOnlyText()}),n.updateReadOnlyText(),n}return gr(t,e),t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.updateReadOnlyText(),this.updateInputPlaceholder(this.placeholder)},t.prototype.updateReadOnlyText=function(){this.readOnlyText=this.calculateReadOnlyText()},t.prototype.onSelectedItemValuesUpdated=function(){e.prototype.onSelectedItemValuesUpdated.call(this),this.updateReadOnlyText()},t.prototype.updateInputPlaceholder=function(e){this.dropdownListModelValue&&this.dropdownListModel.setInputPlaceholder(e)},Object.defineProperty(t.prototype,"showOptionsCaption",{get:function(){return this.allowClear},set:function(e){this.allowClear=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showClearButton",{get:function(){return this.allowClear&&!this.isEmpty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optionsCaption",{get:function(){return this.placeholder},set:function(e){this.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this.getLocalizableStringText("placeholder")},set:function(e){this.setLocalizableStringText("placeholder",e),this.updateInputPlaceholder(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceholder",{get:function(){return this.getLocalizableString("placeholder")},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"dropdown"},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11yQuestionAriaRole",{get:function(){return this.searchEnabled?null:"combobox"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11yInputAriaRole",{get:function(){return this.searchEnabled?"combobox":null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this.getSingleSelectedItem()},enumerable:!1,configurable:!0}),t.prototype.isOtherValueUnused=function(){var e;return!(null===(e=this.selectedItem)||void 0===e?void 0:e.showCommentArea)},t.prototype.onGetSingleSelectedItem=function(e){e&&(this.lastSelectedItemValue=e)},Object.defineProperty(t.prototype,"isShowingChoiceComment",{get:function(){var e;return null===(e=this.selectedItem)||void 0===e?void 0:e.showCommentArea},enumerable:!1,configurable:!0}),t.prototype.supportAutoAdvance=function(){return!this.isShowingChoiceComment},t.prototype.getChoices=function(){var t=e.prototype.getChoices.call(this);if(this.choicesMax<=this.choicesMin)return t;for(var n=[],o=0;o<t.length;o++)n.push(t[o]);if(0===this.minMaxChoices.length||this.minMaxChoices.length!==(this.choicesMax-this.choicesMin)/this.choicesStep+1)for(this.minMaxChoices=[],o=this.choicesMin;o<=this.choicesMax;o+=this.choicesStep)this.minMaxChoices.push(this.createItemValue(o));return n.concat(this.minMaxChoices)},Object.defineProperty(t.prototype,"choicesMin",{get:function(){return this.getPropertyValue("choicesMin")},set:function(e){this.setPropertyValue("choicesMin",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesMax",{get:function(){return this.getPropertyValue("choicesMax")},set:function(e){this.setPropertyValue("choicesMax",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesStep",{get:function(){return this.getPropertyValue("choicesStep")},set:function(e){e<1&&(e=1),this.setPropertyValue("choicesStep",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autocomplete",{get:function(){return this.getPropertyValue("autocomplete")},set:function(e){this.setPropertyValue("autocomplete",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readOnlyText",{get:function(){return this.getLocalizableStringText("readOnlyText")},set:function(e){this.setLocalizableStringText("readOnlyText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locReadOnlyText",{get:function(){return this.getLocalizableString("readOnlyText")},enumerable:!1,configurable:!0}),t.prototype.calculateReadOnlyText=function(){if("select"==this.renderAs){if(this.isOtherSelected)return this.otherText;if(this.isNoneSelected)return this.noneText;if(this.selectedItem)return this.selectedItemText}return this.selectedItem?this.selectedItemText:this.placeholder},t.prototype.getControlClass=function(){return(new _e).append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle).append(this.cssClasses.controlInputFieldComponent,!!this.inputFieldComponentName).toString()},t.prototype.updateCssClasses=function(t,n){e.prototype.updateCssClasses.call(this,t,n),this.useDropdownList&&an(t,n)},t.prototype.calcCssClasses=function(t){var n=e.prototype.calcCssClasses.call(this,t);return this.dropdownListModelValue&&this.dropdownListModel.updateCssClasses(n.popup,n.list),n},Object.defineProperty(t.prototype,"selectedItemLocText",{get:function(){var e=this.suggestedItem||this.selectedItem;return null==e?void 0:e.locText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputFieldComponentName",{get:function(){return this.inputFieldComponent||this.itemComponent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showSelectedItemLocText",{get:function(){return!this.inputHasValue&&!this.inputFieldComponentName&&!!this.selectedItemLocText&&this.dropdownListModel.canShowSelectedItem},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showInputFieldComponent",{get:function(){return!this.inputHasValue&&!!this.inputFieldComponentName&&!this.isEmpty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedItemText",{get:function(){var e=this.selectedItem;return e?e.text:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useDropdownList",{get:function(){return"select"!==this.renderAs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropdownListModel",{get:function(){return this.isDisposed||!this.useDropdownList||this.dropdownListModelValue||(this.dropdownListModelValue=new fr(this)),this.dropdownListModelValue},set:function(e){this.dropdownListModelValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popupModel",{get:function(){return this.dropdownListModel.popupModel},enumerable:!1,configurable:!0}),t.prototype.onOpenedCallBack=function(){this.onOpened.fire(this,{question:this,choices:this.choices})},t.prototype.onSelectedItemValuesChangedHandler=function(t){var n;null===(n=this.dropdownListModelValue)||void 0===n||n.setInputStringFromSelectedItem(t),e.prototype.onSelectedItemValuesChangedHandler.call(this,t)},t.prototype.hasUnknownValue=function(t,n,o,i){return!this.choicesLazyLoadEnabled&&e.prototype.hasUnknownValue.call(this,t,n,o,i)},t.prototype.needConvertRenderedOtherToDataValue=function(){var t,n=null===(t=this.otherValue)||void 0===t?void 0:t.trim();return!!n&&e.prototype.hasUnknownValue.call(this,n,!0,!1)},t.prototype.getItemIfChoicesNotContainThisValue=function(t,n){return this.choicesLazyLoadEnabled?this.createItemValue(t,n):e.prototype.getItemIfChoicesNotContainThisValue.call(this,t,n)},t.prototype.onVisibleChoicesChanged=function(){e.prototype.onVisibleChoicesChanged.call(this),this.dropdownListModelValue&&this.dropdownListModel.updateItems()},t.prototype.canAddCustomChoices=function(){return this.allowCustomChoices},t.prototype.getIsQuestionReady=function(){return e.prototype.getIsQuestionReady.call(this)&&!this.isChoicesLoading},t.prototype.ensureQuestionIsReady=function(){e.prototype.ensureQuestionIsReady.call(this),this.dropdownListModel&&this.choicesLazyLoadEnabled&&this.dropdownListModel.loadQuestionChoices()},t.prototype.onLoadChoicesFromUrl=function(t){this.updateCustomChoices(this.value,t),e.prototype.onLoadChoicesFromUrl.call(this,t)},t.prototype.valueFromData=function(t){var n=e.prototype.valueFromData.call(this,t);return this.survey&&this.survey.isSettingData()&&this.updateCustomChoices(n,this.visibleChoices),n},t.prototype.updateCustomChoices=function(e,t){null!=e&&this.allowCustomChoices&&!this.choicesLazyLoadEnabled&&(this.customChoices.splice(0,this.customChoices.length),t.filter(function(t){return r.isTwoValueEquals(t.id,e,!1,!1)})[0]||this.customChoices.splice(0,this.customChoices.length,new to(e)))},t.prototype.setIsChoicesLoading=function(e){this.isChoicesLoading=e,this.updateIsReady()},t.prototype.getFirstInputElementId=function(){return this.inputId+(this.searchEnabled||this.allowCustomChoices?"_0":"")},t.prototype.getInputId=function(){return this.inputId+"_0"},t.prototype.clearValue=function(t,n){var o;e.prototype.clearValue.call(this,t,n),this.lastSelectedItemValue=null,null===(o=this.dropdownListModelValue)||void 0===o||o.clear()},t.prototype.afterRenderCore=function(t){e.prototype.afterRenderCore.call(this,t),this.dropdownListModelValue&&this.dropdownListModelValue.clear()},t.prototype.onClick=function(e){this.onOpenedCallBack&&this.onOpenedCallBack()},t.prototype.onKeyUp=function(e){46===(e.which||e.keyCode)&&(this.clearValueFromUI(),e.preventDefault(),e.stopPropagation())},t.prototype.supportEmptyValidation=function(){return!0},t.prototype.onBlurCore=function(t){this.dropdownListModel.onBlur(t),e.prototype.onBlurCore.call(this,t)},t.prototype.onFocusCore=function(t){this.dropdownListModel.onFocus(t),e.prototype.onFocusCore.call(this,t)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.dropdownListModelValue&&(this.dropdownListModelValue.dispose(),this.dropdownListModelValue=void 0)},yr([y()],t.prototype,"allowClear",void 0),yr([y({onSet:function(e,t){t.dropdownListModelValue&&t.dropdownListModel.setSearchEnabled(e)}})],t.prototype,"searchEnabled",void 0),yr([y()],t.prototype,"searchMode",void 0),yr([y({onSet:function(e,t){t.dropdownListModelValue&&t.dropdownListModel.setAllowCustomChoices(e)}})],t.prototype,"allowCustomChoices",void 0),yr([y()],t.prototype,"textWrapEnabled",void 0),yr([y({defaultValue:!1})],t.prototype,"inputHasValue",void 0),yr([y({onSet:function(e,t){t.dropdownListModelValue&&t.dropdownListModel.setChoicesLazyLoadEnabled(e)}})],t.prototype,"choicesLazyLoadEnabled",void 0),yr([y()],t.prototype,"choicesLazyLoadPageSize",void 0),yr([y()],t.prototype,"suggestedItem",void 0),t}(ur);D.addClass("dropdown",[{name:"placeholder",alternativeName:"optionsCaption",serializationProperty:"locPlaceholder"},{name:"allowClear:boolean",alternativeName:"showOptionsCaption",default:!0},{name:"choicesMin:number",default:0},{name:"choicesMax:number",default:0},{name:"choicesStep:number",default:1,minValue:1},{name:"autocomplete",alternativeName:"autoComplete",choices:gn.questions.dataList},{name:"textWrapEnabled:boolean",default:!0},{name:"renderAs",default:"default",visible:!1},{name:"searchEnabled:boolean",default:!0,visible:!1},{name:"allowCustomChoices:boolean",default:!1,visibleIf:function(e){return!e.choicesFromQuestion},dependsOn:"choicesFromQuestion"},{name:"searchMode",default:"contains",choices:["contains","startsWith"]},{name:"choicesLazyLoadEnabled:boolean",default:!1,visible:!1},{name:"choicesLazyLoadPageSize:number",default:25,visible:!1},{name:"inputFieldComponent",visible:!1},{name:"itemComponent",visible:!1,default:""}],function(){return new mr("")},"selectbase"),Io.Instance.registerQuestion("dropdown",function(e){var t=new mr(e);return t.choices=Io.DefaultChoices,t});var br=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vr=function(){function e(e){this.row=e}return e.prototype.getValue=function(e,t,n,o){if(0===e.length)return{isFound:!0,value:this.row.value,context:this}},e.prototype.getTextValue=function(e,t,n){return n?this.row.getDisplayValue(t):t},e}(),Cr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return br(t,e),t.prototype.getBaseType=function(){return"matrixcolumn"},Object.defineProperty(t.prototype,"isExclusive",{get:function(){return this.getPropertyValue("isExclusive",!1)},set:function(e){this.setPropertyValue("isExclusive",e)},enumerable:!1,configurable:!0}),t}(to),Pr=function(e){function t(t,n,o,i){var r=e.call(this)||this;return r.item=t,r.fullName=n,r.data=o,r.setValueDirectly(i),r.registerPropertyChangedHandlers(["value"],function(){r.data.onMatrixRowChanged(r)}),r.data.hasErrorInRow(r)&&(r.hasError=!0),r}return br(t,e),t.prototype.cellClick=function(e){this.data.cellClick(this,e)},t.prototype.isChecked=function(e){return this.data.isCellChecked(this,e)},Object.defineProperty(t.prototype,"name",{get:function(){return this.item.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.item.text},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locText",{get:function(){return this.item.locText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.item.isVisible},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.getPropertyValue("value")},set:function(e){this.isReadOnly||this.setValueDirectly(this.data.getCorrectedRowValue(e))},enumerable:!1,configurable:!0}),t.prototype.setValueDirectly=function(e){this.setPropertyValue("value",e)},t.prototype.getDisplayValue=function(e){return this.data.getDisplayRowValue(e)},Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return!this.item.enabled||this.data.isInputReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnlyAttr",{get:function(){return this.data.isReadOnlyAttr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDisabledAttr",{get:function(){return!this.item.enabled||this.data.isDisabledAttr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowTextClasses",{get:function(){return(new _e).append(this.data.cssClasses.rowTextCell).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasError",{get:function(){return this.getPropertyValue("hasError",!1)},set:function(e){this.setPropertyValue("hasError",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowClasses",{get:function(){var e=this.data.cssClasses;return(new _e).append(e.row).append(e.rowError,this.hasError).append(e.rowReadOnly,this.isReadOnly).append(e.rowDisabled,this.data.isDisabledStyle).toString()},enumerable:!1,configurable:!0}),t.prototype.getValueGetterContext=function(){return new vr(this)},t}(Te),wr=function(e){function t(t){var n=e.call(this)||this;return n.cellsOwner=t,n.values={},n.locs={},n}return br(t,e),t.prototype.getType=function(){return"cells"},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0==Object.keys(this.values).length},enumerable:!1,configurable:!0}),t.prototype.valuesChanged=function(){!this.locNotification&&this.onValuesChanged&&this.onValuesChanged()},t.prototype.getDefaultCellLocText=function(e){return this.getCellLocCore(this.defaultRowValue,e)},t.prototype.getCellDisplayLocText=function(e,t){return this.getCellLocCore(e,t)},t.prototype.getCellLocCore=function(e,t){var n=this;if(e=this.getCellRowColumnValue(e,this.rows),t=this.getCellRowColumnValue(t,this.columns),r.isValueEmpty(e)||r.isValueEmpty(t))return null;this.locs[e]||(this.locs[e]={});var o=this.locs[e][t];return o||((o=this.createString()).setJson(this.getCellLocData(e,t)),o.onGetTextCallback=function(e){if(!e){var o=to.getItemByValue(n.columns,t);if(o)return o.locText.getJson()||o.value}return e},o.onStrChanged=function(o,i){n.updateValues(e,t,i)},this.locs[e][t]=o),o},Object.defineProperty(t.prototype,"defaultRowValue",{get:function(){return gn.matrix.defaultRowName},enumerable:!1,configurable:!0}),t.prototype.getCellLocData=function(e,t){return this.getCellLocDataFromValue(e,t)||this.getCellLocDataFromValue(this.defaultRowValue,t)},t.prototype.getCellLocDataFromValue=function(e,t){return this.values[e]&&this.values[e][t]?this.values[e][t]:null},t.prototype.getCellText=function(e,t){var n=this.getCellLocCore(e,t);return n?n.calculatedText:null},t.prototype.setCellText=function(e,t,n){var o=this.getCellLocCore(e,t);o&&(o.text=n)},t.prototype.updateValues=function(e,t,n){n?(this.values[e]||(this.values[e]={}),this.values[e][t]=n,this.valuesChanged()):this.values[e]&&this.values[e][t]&&(delete this.values[e][t],0==Object.keys(this.values[e]).length&&delete this.values[e],this.valuesChanged())},t.prototype.getDefaultCellText=function(e){var t=this.getCellLocCore(this.defaultRowValue,e);return t?t.calculatedText:null},t.prototype.setDefaultCellText=function(e,t){this.setCellText(this.defaultRowValue,e,t)},t.prototype.getCellDisplayText=function(e,t){var n=this.getCellDisplayLocText(e,t);return n?n.calculatedText:null},Object.defineProperty(t.prototype,"rows",{get:function(){return this.cellsOwner?this.cellsOwner.getRows():[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this.cellsOwner?this.cellsOwner.getColumns():[]},enumerable:!1,configurable:!0}),t.prototype.getCellRowColumnValue=function(e,t){if(null==e)return null;if("number"==typeof e){if(e<0||e>=t.length)return null;e=t[e].value}return e.value?e.value:e},t.prototype.getJson=function(){if(this.isEmpty)return null;var e=this.values[this.defaultRowValue],t={};for(var n in this.values){var o={},i=this.values[n];for(var r in i)if(n===this.defaultRowValue||!e||e[r]!==i[r]){var s=this.getCellLocCore(n,r);o[r]=s?s.getJson():i[r]}t[n]=o}return t},t.prototype.setJson=function(e,t){var n=this;if(this.values={},e)for(var o in e)if("pos"!=o){var i=e[o];for(var r in this.values[o]={},i)"pos"!=r&&(this.values[o][r]=i[r])}this.locNotification=!0,this.runFuncOnLocs(function(e,t,o){return o.setJson(n.getCellLocData(e,t))}),this.locNotification=!1,this.valuesChanged()},t.prototype.locStrsChanged=function(){this.runFuncOnLocs(function(e,t,n){return n.strChanged()})},t.prototype.runFuncOnLocs=function(e){for(var t in this.locs){var n=this.locs[t];for(var o in n)e(t,o,n[o])}},t.prototype.createString=function(){return new Et(this.cellsOwner,!0)},t}(Te),Vr=function(e){function t(t){var n=e.call(this)||this;return n.question=t,n}return br(t,e),t.prototype.getValue=function(t,n,o,i){if(t.length>0){var r=e.prototype.getValue.call(this,t,n,o,i);if(r&&r.isFound)return r}return new N(this.question.value).getValue(t,n,o,i)},t.prototype.getRootObj=function(){return this.question.data},t.prototype.updateValueByItem=function(e,t){var n,o=this.question.getMatrixRows();e=e.toLocaleLowerCase();for(var i=0;i<o.length;i++){var r=o[i];if(((null===(n=r.name)||void 0===n?void 0:n.toString())||"").toLocaleLowerCase()===e)return t.isFound=!0,void(t.context=r.getValueGetterContext())}},t}(_),xr=function(e){function t(t){var n=e.call(this,t)||this;return n.isRowChanging=!1,n.emptyLocalizableString=new Et(n),n.cellsValue=new wr(n),n.cellsValue.onValuesChanged=function(){n.updateHasCellText(),n.propertyValueChanged("cells",n.cells,n.cells)},n.registerPropertyChangedHandlers(["columns"],function(){n.onColumnsChanged()}),n.registerPropertyChangedHandlers(["rows"],function(){n.runCondition(n.getDataFilteredProperties()),n.onRowsChanged()}),n.registerPropertyChangedHandlers(["hideIfRowsEmpty"],function(){n.updateVisibilityBasedOnRows()}),n.registerPropertyChangedHandlers(["cellType"],function(){n.value=n.convertToCorrectValue(n.value)}),n}return br(t,e),t.prototype.getType=function(){return"matrix"},Object.defineProperty(t.prototype,"cellType",{get:function(){return this.getPropertyValue("cellType")},set:function(e){"checkbox"!==e&&(e="radio"),this.setPropertyValue("cellType",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMultiSelect",{get:function(){return"checkbox"===this.cellType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cellComponent",{get:function(){return this.getPropertyValue("cellComponent")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemComponent",{set:function(e){this.setPropertyValue("cellComponent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"eachRowRequired",{get:function(){return this.getPropertyValue("eachRowRequired")},set:function(e){this.setPropertyValue("eachRowRequired",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAllRowRequired",{get:function(){return this.eachRowRequired},set:function(e){this.eachRowRequired=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"eachRowUnique",{get:function(){return this.getPropertyValue("eachRowUnique")},set:function(e){this.setPropertyValue("eachRowUnique",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasRows",{get:function(){return this.rows.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowOrder",{get:function(){return this.getPropertyValue("rowOrder")},set:function(e){(e=e.toLowerCase())!=this.rowOrder&&(this.setPropertyValue("rowOrder",e),this.onRowsChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowsOrder",{get:function(){return this.rowOrder},set:function(e){this.rowOrder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideIfRowsEmpty",{get:function(){return this.getPropertyValue("hideIfRowsEmpty")},set:function(e){this.setPropertyValue("hideIfRowsEmpty",e)},enumerable:!1,configurable:!0}),t.prototype.getRows=function(){return this.rows},t.prototype.getColumns=function(){return this.visibleColumns},t.prototype.addColumn=function(e,t){var n=new Cr(e,t);return this.columns.push(n),n},Object.defineProperty(t.prototype,"checkType",{get:function(){return this.isMultiSelect?"checkbox":"radio"},enumerable:!1,configurable:!0}),t.prototype.formatCss=function(e){return(e||"").replace("{type}",this.checkType)},t.prototype.getItemClass=function(e,t){var n=e.isChecked(t),o=this.isReadOnly,i=!n&&!o,r=this.hasCellText,s=this.cssClasses;return(new _e).append(s.cell,r).append(r?s.cellText:this.formatCss(s.label)).append(s.itemOnError,!r&&(this.eachRowRequired||this.eachRowUnique?e.hasError:this.hasCssError())).append(r?s.cellTextSelected:this.formatCss(s.itemChecked),n).append(r?s.cellTextDisabled:this.formatCss(s.itemDisabled),this.isDisabledStyle).append(r?s.cellTextReadOnly:this.formatCss(s.itemReadOnly),this.isReadOnlyStyle).append(r?s.cellTextPreview:this.formatCss(s.itemPreview),this.isPreviewStyle).append(this.formatCss(s.itemHover),i&&!r).toString()},Object.defineProperty(t.prototype,"itemSvgIcon",{get:function(){return this.isPreviewStyle&&this.cssClasses.itemPreviewSvgIconId?this.cssClasses.itemPreviewSvgIconId:this.cssClasses.itemSvgIconId},enumerable:!1,configurable:!0}),t.prototype.getItemSvgIcon=function(e,t){return this.isMultiSelect&&e.isChecked(t)?this.cssClasses.itemPreviewSvgIconId:this.itemSvgIcon},Object.defineProperty(t.prototype,"cssItemValue",{get:function(){return this.formatCss(this.cssClasses.itemValue)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssMaterialDecorator",{get:function(){return this.formatCss(this.cssClasses.materialDecorator)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssItemDecorator",{get:function(){return this.formatCss(this.cssClasses.itemDecorator)},enumerable:!1,configurable:!0}),t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.cells.locStrsChanged()},t.prototype.getQuizQuestionCount=function(){for(var e=0,t=0;t<this.rows.length;t++)this.isValueEmpty(this.correctAnswer[this.rows[t].value])||e++;return e},t.prototype.convertToCorrectValue=function(e){if(null==e||"object"!=typeof e)return e;for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n],i=e[o];Array.isArray(i)&&!this.isMultiSelect&&(i.length>0?e[o]=i[0]:delete e[o]),!Array.isArray(i)&&this.isMultiSelect&&(e[o]=[i])}return e},t.prototype.getCorrectAnswerCount=function(){for(var e=0,t=this.value,n=0;n<this.rows.length;n++){var o=this.rows[n].value;!this.isValueEmpty(t[o])&&this.isTwoValueEquals(this.correctAnswer[o],t[o])&&e++}return e},t.prototype.runConditionCore=function(t){to.runEnabledConditionsForItems(this.rows,void 0,t),e.prototype.runConditionCore.call(this,t)},t.prototype.createRowsVisibleIfRunner=function(){var e=this.getExpressionFromSurvey("rowsVisibleIf");return e?new Pe(e):null},t.prototype.onRowsChanged=function(){this.clearGeneratedRows(),e.prototype.onRowsChanged.call(this)},t.prototype.getMatrixRows=function(){if(this.generatedVisibleRows)return this.generatedVisibleRows;var e=new Array,t=this.value;t||(t={});for(var n=this.rows,o=0;o<n.length;o++){var i=n[o];if(!this.isValueEmpty(i.value)){var r=this.id+"_"+i.value.toString().replace(/\s/g,"_");e.push(this.createMatrixRow(i,r,t[i.value]))}}return this.generatedVisibleRows=e,e},t.prototype.getVisibleRows=function(){var e=[];return this.getMatrixRows().forEach(function(t){t.isVisible&&e.push(t)}),e},t.prototype.getRowByName=function(e){for(var t=this.visibleRows,n=0;n<t.length;n++)if(t[n].name===e)return t[n];return null},t.prototype.getSingleInputQuestionsCore=function(e,t){var n=this;if(this.nestedQuestionsValue)return this.nestedQuestionsValue;var o=[],i=this.isMultiSelect?"checkbox":"radiogroup";return this.visibleRows.forEach(function(e){var t=D.createClass(i);t.name=e.name,t.locTitle.sharedData=e.locText,t.choices=n.visibleColumns,t.value=e.value,t.isRequired=n.eachRowRequired,t.setSurveyImpl(n),t.setParentQuestion(n),o.push(t)}),this.nestedQuestionsValue=o,o},t.prototype.resetSingleInput=function(){e.prototype.resetSingleInput.call(this),this.nestedQuestionsValue&&(this.nestedQuestionsValue.forEach(function(e){return e.dispose()}),this.nestedQuestionsValue=null)},t.prototype.getSurveyData=function(){return this},t.prototype.getTextProcessor=function(){var e;return null===(e=this.surveyImpl)||void 0===e?void 0:e.getTextProcessor()},t.prototype.getValue=function(e){var t=this.getRowByName(e);return t?t.value:void 0},t.prototype.setValue=function(e,t,n,o,i){this.getRowByName(e).value=t},t.prototype.getVariable=function(e){var t;return null===(t=this.data)||void 0===t?void 0:t.getVariable(e)},t.prototype.setVariable=function(e,t){var n;null===(n=this.data)||void 0===n||n.setVariable(e,t)},t.prototype.getComment=function(e){var t;return null===(t=this.data)||void 0===t?void 0:t.getComment(e)},t.prototype.setComment=function(e,t,n){var o;null===(o=this.data)||void 0===o||o.setComment(e,t,n)},t.prototype.getAllValues=function(){var e;return null===(e=this.data)||void 0===e?void 0:e.getAllValues()},t.prototype.getFilteredProperties=function(){var e;return null===(e=this.data)||void 0===e?void 0:e.getFilteredProperties()},t.prototype.findQuestionByName=function(e){var t;return null===(t=this.data)||void 0===t?void 0:t.findQuestionByName(e)},t.prototype.getEditingSurveyElement=function(){var e;return null===(e=this.data)||void 0===e?void 0:e.getEditingSurveyElement()},t.prototype.sortVisibleRows=function(e){return this.survey&&this.survey.isDesignMode?e:"random"===this.rowOrder.toLowerCase()?r.randomizeArray(e):e},t.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.rows=this.sortVisibleRows(this.rows),this.onRowsChanged(),this.onColumnsChanged()},t.prototype.isNewValueCorrect=function(e){return r.isValueObject(e,!0)},t.prototype.processRowsOnSet=function(e){return this.sortVisibleRows(e)},Object.defineProperty(t.prototype,"visibleRows",{get:function(){return this.getVisibleRows()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cells",{get:function(){return this.cellsValue},set:function(e){this.cells.setJson(e&&e.getJson?e.getJson():null)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCellText",{get:function(){return this.getPropertyValue("hasCellText",!1)},enumerable:!1,configurable:!0}),t.prototype.updateHasCellText=function(){this.setPropertyValue("hasCellText",!this.cells.isEmpty)},t.prototype.setCellText=function(e,t,n){this.cells.setCellText(e,t,n)},t.prototype.getCellText=function(e,t){return this.cells.getCellText(e,t)},t.prototype.setDefaultCellText=function(e,t){this.cells.setDefaultCellText(e,t)},t.prototype.getDefaultCellText=function(e){return this.cells.getDefaultCellText(e)},t.prototype.getCellDisplayText=function(e,t){return this.cells.getCellDisplayText(e,t)},t.prototype.getCellDisplayLocText=function(e,t){return this.cells.getCellDisplayLocText(e,t)||this.emptyLocalizableString},t.prototype.supportAutoAdvance=function(){return!0===this.isMouseDown&&this.hasValuesInAllRows()},t.prototype.onCheckForErrors=function(t,n,o){if(e.prototype.onCheckForErrors.call(this,t,n,o),!n||this.hasCssError()){var i={noValue:!1,isNotUnique:!1};this.checkErrorsAllRows(o,i),i.noValue&&t.push(new Sn(null,this)),i.isNotUnique&&t.push(new In(null,this))}},t.prototype.hasValuesInAllRows=function(){var e={noValue:!1,isNotUnique:!1};return this.checkErrorsAllRows(!1,e,!0),!e.noValue},t.prototype.checkErrorsAllRows=function(e,t,n){var o=this,i=this.eachRowRequired||n,r=this.eachRowUnique;if(t.noValue=!1,t.isNotUnique=!1,e&&(this.errorsInRow=void 0),i||r){var s=this.visibleRows;if(s){for(var a={},l=0;l<s.length;l++){var u=s[l].value,c=this.isValueEmpty(u),p=r&&!c&&!0===a[u];c=c&&i,e&&(c||p)&&this.addErrorIntoRow(s[l]),c||(a[u]=!0),t.noValue=t.noValue||c,t.isNotUnique=t.isNotUnique||p}e&&s.forEach(function(e){e.hasError=o.hasErrorInRow(e)})}}},t.prototype.addErrorIntoRow=function(e){this.errorsInRow||(this.errorsInRow={}),this.errorsInRow[e.name]=!0,e.hasError=!0},t.prototype.refreshRowsErrors=function(){this.errorsInRow&&this.checkErrorsAllRows(!0,{noValue:!1,isNotUnique:!1})},t.prototype.getIsAnswered=function(){return e.prototype.getIsAnswered.call(this)&&this.hasValuesInAllRows()},t.prototype.createMatrixRow=function(e,t,n){var o=new Pr(e,t,this,n);return this.onMatrixRowCreated(o),o},t.prototype.onMatrixRowCreated=function(e){},t.prototype.setQuestionValue=function(t,n){if(void 0===n&&(n=!0),e.prototype.setQuestionValue.call(this,t,this.isRowChanging||n),this.generatedVisibleRows&&0!=this.generatedVisibleRows.length){this.isRowChanging=!0;var o=this.value;if(o||(o={}),0==this.rows.length)this.generatedVisibleRows[0].setValueDirectly(o);else for(var i=0;i<this.generatedVisibleRows.length;i++){var r=o[this.generatedVisibleRows[i].name];this.isValueEmpty(r)&&(r=null),this.generatedVisibleRows[i].setValueDirectly(r)}this.refreshRowsErrors(),this.updateIsAnswered(),this.isRowChanging=!1}},t.prototype.getValueGetterContext=function(){return new Vr(this)},t.prototype.getDisplayValueCore=function(e,t){var n={};for(var o in t){var i=e?to.getTextOrHtmlByValue(this.rows,o):o;i||(i=o);var r=to.getTextOrHtmlByValue(this.columns,t[o]);r||(r=t[o]),n[i]=r}return n},t.prototype.getPlainData=function(t){var n=this;void 0===t&&(t={includeEmpty:!0});var o=e.prototype.getPlainData.call(this,t);if(o){var i=this.createValueCopy();o.isNode=!0,o.data=Object.keys(i||{}).map(function(e){var o=n.rows.filter(function(t){return t.value===e})[0],r={name:e,title:o?o.text:"row",value:i[e],displayValue:to.getTextOrHtmlByValue(n.visibleColumns,i[e]),getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!1},s=to.getItemByValue(n.visibleColumns,i[e]);return s&&(t.calculations||[]).forEach(function(e){r[e.propertyName]=s[e.propertyName]}),r})}return o},t.prototype.addConditionObjectsByContext=function(e,t){for(var n=0;n<this.rows.length;n++){var o=this.rows[n];o.value&&e.push({name:this.getValueName()+"."+o.value,text:this.processedTitle+"."+o.calculatedText,question:this})}},t.prototype.getConditionJson=function(t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),!n)return e.prototype.getConditionJson.call(this,t);var o=new mr(n);o.choices=this.columns;var i=(new A).toJsonObject(o);return i.type=o.getType(),i},t.prototype.clearIncorrectValues=function(){this.clearInvisibleValuesInRowsAndColumns(!0,!0,!0),e.prototype.clearIncorrectValues.call(this)},t.prototype.clearValueIfInvisibleCore=function(t){e.prototype.clearValueIfInvisibleCore.call(this,t),this.clearInvisibleValuesInRowsAndColumns(!0,!0,!1)},t.prototype.clearInvisibleColumnValues=function(){this.clearInvisibleValuesInRowsAndColumns(!1,!0,!1)},t.prototype.clearInvisibleValuesInRows=function(){this.clearInvisibleValuesInRowsAndColumns(!0,!1,!1)},t.prototype.clearInvisibleValuesInRowsAndColumns=function(e,t,n){if(!this.isEmpty()){for(var o=this.getUnbindValue(this.value),i={},r=this.rows,s=0;s<r.length;s++){var a=r[s].value;o[a]&&(e&&!r[s].isVisible?delete o[a]:(t&&this.clearIncorrectValuesInRow(a,o),null!=o[a]&&(i[a]=o[a])))}n&&(o=i),this.isTwoValueEquals(o,this.value)||(this.value=o)}},t.prototype.clearIncorrectValuesInRow=function(e,t){var n=t[e];if(void 0!==n)if(this.isMultiSelect&&Array.isArray(n)){for(var o=n.length-1;o>=0;o--)this.getVisibleColumnByValue(n[o])||n.splice(o,1);0===n.length&&delete t[e]}else this.getVisibleColumnByValue(n)||delete t[e];else delete t[e]},t.prototype.getVisibleColumnByValue=function(e){var t=to.getItemByValue(this.columns,e);return t&&t.isVisible?t:null},t.prototype.getFirstInputElementId=function(){var t=this.generatedVisibleRows;return t||(t=this.visibleRows),t.length>0&&this.visibleColumns.length>0?this.inputId+"_"+t[0].name+"_0":e.prototype.getFirstInputElementId.call(this)},t.prototype.onMatrixRowChanged=function(e){if(!this.isRowChanging){if(this.isRowChanging=!0,this.hasRows){var t=this.value||{};this.isValueEmpty(e.value)?delete t[e.name]:t[e.name]=e.value,this.setNewValue(t)}else this.setNewValue(e.value);this.isRowChanging=!1}},t.prototype.getCorrectedRowValue=function(e){var t=this.getColumnByValue(e);return t?t.value:e},t.prototype.getDisplayRowValue=function(e){var t=this.getColumnByValue(e);return t?t.text:null!=e?e.toString():""},t.prototype.cellClick=function(e,t){this.isReadOnly||this.isDisabledAttr||(e.value=this.getValueOnCellClick(e,t))},t.prototype.getValueOnCellClick=function(e,t){if(this.isMultiSelect){if(t.isExclusive){if(this.isCellChecked(e,t))return;return[t.value]}var n=Array.isArray(e.value)?[].concat(e.value):[];if(this.isCellChecked(e,t)){var o=this.getRowValueIndex(e,t);o>-1&&n.splice(o,1),0===n.length&&(n=void 0)}else Array.isArray(n)||(n=[]),this.columns.forEach(function(e){if(e.isExclusive){var t=n.indexOf(e.value);t>-1&&n.splice(t,1)}}),n.push(t.value);return n}return t.value},t.prototype.isCellChecked=function(e,t){return this.isMultiSelect?this.getRowValueIndex(e,t)>-1:r.isTwoValueEquals(e.value,t.value)},t.prototype.getRowValueIndex=function(e,t){var n=e.value;if(!Array.isArray(n))return-1;for(var o=0;o<n.length;o++)if(this.isTwoValueEquals(n[o],t.value))return o;return-1},t.prototype.getColumnByValue=function(e){for(var t=this.columns,n=0;n<t.length;n++)if(e===t[n].value)return t[n];for(n=0;n<t.length;n++)if(this.isTwoValueEquals(e,t[n].value))return t[n];return null},t.prototype.hasErrorInRow=function(e){return!!this.errorsInRow&&!!this.errorsInRow[e.name]},t.prototype.getSearchableItemValueKeys=function(e){e.push("columns"),e.push("rows")},Object.defineProperty(t.prototype,"SurveyModel",{get:function(){return this.survey},enumerable:!1,configurable:!0}),t.prototype.getColumnHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName({column:e},"column-header")},t.prototype.getColumnHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData({column:e},"column-header")},t.prototype.getRowHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName({row:e},"row-header")},t.prototype.getRowHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData({row:e},"row-header")},t}(go);D.addClass("matrixcolumn",[{name:"isExclusive:boolean",visibleIf:function(e){var t;return"checkbox"===(null===(t=e.locOwner)||void 0===t?void 0:t.cellType)},locationInTable:"detail"}],function(e){return new Cr(e)},"itemvalue"),D.addClass("matrix",["rowTitleWidth",{name:"columns:matrixcolumn[]",uniqueProperty:"value",baseValue:function(){return l("matrix_column")}},{name:"rows:itemvalue[]",uniqueProperty:"value",baseValue:function(){return l("matrix_row")}},{name:"cells:cells",serializationProperty:"cells"},{name:"rowOrder",alternativeName:"rowsOrder",default:"initial",choices:["initial","random"]},{name:"eachRowRequired:boolean",alternativeName:"isAllRowRequired"},{name:"eachRowUnique:boolean",category:"validation"},"hideIfRowsEmpty:boolean",{name:"cellComponent",visible:!1,default:"survey-matrix-cell"},{name:"cellType",default:"radio",choices:["radio","checkbox"]}],function(){return new xr("")},"matrixbase"),Io.Instance.registerQuestion("matrix",function(e){var t=new xr(e);return t.rows=Io.DefaultRows,t.columns=Io.DefaultColums,t});var Or=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Sr=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Ir=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Or(t,e),t.prototype.updateRemainingCharacterCounter=function(e,t){this.remainingCharacterCounter=r.getRemainingCharacterCounterText(e,t)},Sr([y()],t.prototype,"remainingCharacterCounter",void 0),t}(Te),Tr=function(e){function t(t){var n=e.call(this,t)||this;return n.characterCounter=new Ir,n}return Or(t,e),t.prototype.isTextValue=function(){return!0},Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.getPropertyValue("maxLength")},set:function(e){this.setPropertyValue("maxLength",e),this.updateRemainingCharacterCounter(this.value)},enumerable:!1,configurable:!0}),t.prototype.getMaxLength=function(){return r.getMaxLength(this.maxLength,this.survey?this.survey.maxTextLength:-1)},t.prototype.updateRemainingCharacterCounter=function(e){this.characterCounter.updateRemainingCharacterCounter(e,this.getMaxLength())},Object.defineProperty(t.prototype,"placeHolder",{get:function(){return this.placeholder},set:function(e){this.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceHolder",{get:function(){return this.locPlaceholder},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"textbase"},t.prototype.isEmpty=function(){return e.prototype.isEmpty.call(this)||""===this.value},Object.defineProperty(t.prototype,"textUpdateMode",{get:function(){return this.getPropertyValue("textUpdateMode")},set:function(e){this.setPropertyValue("textUpdateMode",e)},enumerable:!1,configurable:!0}),t.prototype.getIsInputTextUpdate=function(){return"default"==this.textUpdateMode?e.prototype.getIsInputTextUpdate.call(this):"onTyping"==this.textUpdateMode},Object.defineProperty(t.prototype,"renderedPlaceholder",{get:function(){var e=this;return this.getPropertyValue("renderedPlaceholder",void 0,function(){return e.hasPlaceholder()?e.placeHolder:void 0})},enumerable:!1,configurable:!0}),t.prototype.onReadOnlyChanged=function(){e.prototype.onReadOnlyChanged.call(this),this.resetRenderedPlaceholder()},t.prototype.localeChanged=function(){e.prototype.localeChanged.call(this),this.resetRenderedPlaceholder()},t.prototype.supportEmptyValidation=function(){return!0},t.prototype.resetRenderedPlaceholder=function(){this.resetPropertyValue("renderedPlaceholder")},t.prototype.hasPlaceholder=function(){return!this.isReadOnly},t.prototype.setNewValue=function(t){e.prototype.setNewValue.call(this,t),this.updateRemainingCharacterCounter(t)},t.prototype.setQuestionValue=function(t,n){void 0===n&&(n=!0),e.prototype.setQuestionValue.call(this,t,n),this.updateRemainingCharacterCounter(t)},t.prototype.convertToCorrectValue=function(e){return Array.isArray(e)?e.join(this.getValueSeparator()):e},t.prototype.getValueSeparator=function(){return", "},t.prototype.getControlCssClassBuilder=function(){return(new _e).append(this.cssClasses.root).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle)},t.prototype.getControlClass=function(){return this.getControlCssClassBuilder().toString()},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Sr([y({localizable:!0,onSet:function(e,t){return t.resetRenderedPlaceholder()}})],t.prototype,"placeholder",void 0),t}(Xn);D.addClass("textbase",[],function(){return new Tr("")},"question");var Rr=function(){function e(e,t,n){var o=this;this.inputMaskInstance=e,this.inputElement=t,this.prevUnmaskedValue=void 0,this.inputMaskInstancePropertyChangedHandler=function(e,t){if("saveMaskedValue"!==t.name){var n=o.inputMaskInstance.getMaskedValue(o.prevUnmaskedValue);o.setInputValue(n)}},this.clickHandler=function(e){o.inputElement.value==o.inputMaskInstance.getMaskedValue("")&&o.inputElement.setSelectionRange(0,0)},this.beforeInputHandler=function(e){var t=o.createArgs(e),n=o.inputMaskInstance.processInput(t);o.setInputValue(n.value),o.inputElement.setSelectionRange(n.caretPosition,n.caretPosition),n.cancelPreventDefault||e.preventDefault()},this.changeHandler=function(e){var t=o.inputMaskInstance.processInput({prevValue:"",insertedChars:e.target.value,selectionStart:0,selectionEnd:0});o.setInputValue(t.value)};var i=n;null==i&&(i=""),this.setInputValue(e.saveMaskedValue?i:e.getMaskedValue(i)),this.prevUnmaskedValue=i,e.onPropertyChanged.add(this.inputMaskInstancePropertyChangedHandler),this.addInputEventListener()}return e.prototype.setInputValue=function(e){this.inputElement.maxLength>=0&&this.inputElement.maxLength<e.length&&(e=e.slice(0,this.inputElement.maxLength)),this.inputElement.value=e},e.prototype.createArgs=function(e){var t={insertedChars:e.data,selectionStart:e.target.selectionStart,selectionEnd:e.target.selectionEnd,prevValue:e.target.value,inputDirection:"forward"};return"deleteContentBackward"===e.inputType&&(t.inputDirection="backward",t.selectionStart===t.selectionEnd&&(t.selectionStart=Math.max(t.selectionStart-1,0))),"deleteContentForward"===e.inputType&&t.selectionStart===t.selectionEnd&&(t.selectionEnd+=1),t},e.prototype.addInputEventListener=function(){this.inputElement&&(this.inputElement.addEventListener("beforeinput",this.beforeInputHandler),this.inputElement.addEventListener("click",this.clickHandler),this.inputElement.addEventListener("focus",this.clickHandler),this.inputElement.addEventListener("change",this.changeHandler))},e.prototype.removeInputEventListener=function(){this.inputElement&&(this.inputElement.removeEventListener("beforeinput",this.beforeInputHandler),this.inputElement.removeEventListener("click",this.clickHandler),this.inputElement.removeEventListener("focus",this.clickHandler),this.inputElement.removeEventListener("change",this.changeHandler))},e.prototype.dispose=function(){this.removeInputEventListener(),this.inputElement=void 0,this.inputMaskInstance.onPropertyChanged.remove(this.inputMaskInstancePropertyChangedHandler)},e}(),Er=/[0-9]/;function Ar(){var e=(D.getChildrenClasses("masksettings")||[]).map(function(e){var t=e.name;return-1!==e.name.indexOf("mask")&&(t=t.slice(0,t.indexOf("mask"))),t});return e.unshift("none"),e}var Dr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lr=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},jr=function(e){function t(t){var n=e.call(this,t)||this;return n._isWaitingForEnter=!1,n.onCompositionUpdate=function(e){n.isInputTextUpdate&&setTimeout(function(){n.updateValueOnEvent(e)},1),n.updateRemainingCharacterCounter(e.target.value)},n.onKeyUp=function(e){n.updateDateValidationMessage(e),n.isInputTextUpdate?n._isWaitingForEnter&&13!==e.keyCode||(n.updateValueOnEvent(e),n._isWaitingForEnter=!1):13===e.keyCode&&n.updateValueOnEvent(e),n.updateRemainingCharacterCounter(e.target.value)},n.readOnlyBlocker=function(e){if(n.isReadOnlyAttr&&["color","range"].indexOf(n.inputType)>-1)return e.preventDefault(),!0},n.onKeyDown=function(e){n.readOnlyBlocker(e)||(n.onKeyDownPreprocess&&n.onKeyDownPreprocess(e),n.isInputTextUpdate&&(n._isWaitingForEnter=229===e.keyCode),n.onTextKeyDownHandler(e))},n.onChange=function(e){n.updateDateValidationMessage(e),e.target===gn.environment.root.activeElement?n.isInputTextUpdate&&n.updateValueOnEvent(e):n.updateValueOnEvent(e),n.updateRemainingCharacterCounter(e.target.value)},n.createLocalizableString("minErrorText",n,!0,"minError"),n.createLocalizableString("maxErrorText",n,!0,"maxError"),n.setNewMaskSettingsProperty(),n.locDataListValue=new At(n),n.locDataListValue.onValueChanged=function(e,t){n.propertyValueChanged("dataList",e,t)},n.registerPropertyChangedHandlers(["min","max","inputType","minValueExpression","maxValueExpression"],function(){n.setRenderedMinMax()}),n.registerPropertyChangedHandlers(["inputType","inputSize"],function(){n.resetInputSize(),n.resetRenderedPlaceholder()}),n}return Dr(t,e),t.prototype.createMaskAdapter=function(){this.input&&!this.maskTypeIsEmpty&&(this.maskInputAdapter=new Rr(this.maskInstance,this.input,this.value))},t.prototype.deleteMaskAdapter=function(){this.maskInputAdapter&&(this.maskInputAdapter.dispose(),this.maskInputAdapter=void 0)},t.prototype.updateMaskAdapter=function(){this.deleteMaskAdapter(),this.createMaskAdapter()},t.prototype.onSetMaskType=function(e){this.setNewMaskSettingsProperty(),this.updateMaskAdapter()},Object.defineProperty(t.prototype,"maskTypeIsEmpty",{get:function(){switch(this.inputType){case"tel":case"text":return"none"===this.maskType;default:return!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maskSettings",{get:function(){return this.getPropertyValue("maskSettings")},set:function(e){if(e){var t=this.maskSettings;t&&t.dispose(),this.setNewMaskSettingsProperty(),this.maskSettings.fromJSON(e.toJSON()),this.updateMaskAdapter()}},enumerable:!1,configurable:!0}),t.prototype.setNewMaskSettingsProperty=function(){this.setPropertyValue("maskSettings",this.createMaskSettings())},t.prototype.createMaskSettings=function(){var e=this,t=this.maskType&&"none"!==this.maskType?this.maskType+"mask":"masksettings";D.findClass(t)||(t="masksettings");var n=D.createClass(t);return n.onPropertyChanged.add(function(t,n){e.onNestedPropertyChanged.fire(e,{name:"maskSettings",newValue:n.newValue,nestedName:n.name}),e.updateInputValue()}),n.owner=this,n},t.prototype.isTextValue=function(){return this.isDateInputType||["text","number","password"].indexOf(this.inputType)>-1},t.prototype.getType=function(){return"text"},t.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.setRenderedMinMax()},Object.defineProperty(t.prototype,"inputType",{get:function(){return this.getPropertyValue("inputType")},set:function(e){"datetime_local"!==(e=e.toLowerCase())&&"datetime"!==e||(e="datetime-local"),this.setPropertyValue("inputType",e.toLowerCase()),this.isLoadingFromJson||(this.min=void 0,this.max=void 0,this.step=void 0),this.updateMaskAdapter()},enumerable:!1,configurable:!0}),t.prototype.getMaxLength=function(){return this.isTextInput?e.prototype.getMaxLength.call(this):null},t.prototype.getSupportedValidators=function(){var t={},n=["text","email","tel","password","url"];t.text=n,t.regex=n,t.email=["email"],t.numeric=["number","range"];for(var o=e.prototype.getSupportedValidators.call(this),i=o.length-1;i>=0;i--){var r=o[i];t[r]&&t[r].indexOf(this.inputType)<0&&o.splice(i,1)}return o},t.prototype.runConditionCore=function(t){e.prototype.runConditionCore.call(this,t),(this.minValueExpression||this.maxValueExpression)&&this.setRenderedMinMax(t)},t.prototype.getDisplayValueCore=function(t,n){return this.maskTypeIsEmpty||r.isValueEmpty(n)?e.prototype.getDisplayValueCore.call(this,t,n):this.maskInstance.getMaskedValue(n)},t.prototype.isLayoutTypeSupported=function(e){return!0},Object.defineProperty(t.prototype,"inputSize",{get:function(){return this.getPropertyValue("inputSize")},set:function(e){this.setPropertyValue("inputSize",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.inputSize},set:function(e){this.inputSize=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTextInput",{get:function(){return["text","search","tel","url","email","password"].indexOf(this.inputType)>-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedInputSize",{get:function(){var e=this;return this.getPropertyValue("renderedInputSize",void 0,function(){var t=e.calInputSize();return t>0?t:void 0})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputWidth",{get:function(){var e=this;return this.getPropertyValue("inputWidth",void 0,function(){return e.calInputSize()>0?"auto":""})},enumerable:!1,configurable:!0}),t.prototype.calInputSize=function(){if(!this.isTextInput)return 0;var e=this.inputSize>0?this.inputSize:0;return e<1&&this.parent&&this.parent.inputSize&&(e=this.parent.inputSize),e},t.prototype.resetInputSize=function(){this.resetPropertyValue("renderedInputSize"),this.resetPropertyValue("inputWidth")},Object.defineProperty(t.prototype,"autocomplete",{get:function(){return this.getPropertyValue("autocomplete")},set:function(e){this.setPropertyValue("autocomplete",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this.getPropertyValue("min")},set:function(e){this.isValueExpression(e)?this.minValueExpression=e.substring(1):this.setPropertyValue("min",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.getPropertyValue("max")},set:function(e){this.isValueExpression(e)?this.maxValueExpression=e.substring(1):this.setPropertyValue("max",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minValueExpression",{get:function(){return this.getPropertyValue("minValueExpression","")},set:function(e){this.setPropertyValue("minValueExpression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxValueExpression",{get:function(){return this.getPropertyValue("maxValueExpression","")},set:function(e){this.setPropertyValue("maxValueExpression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMin",{get:function(){return this.getPropertyValue("renderedMin")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMax",{get:function(){return this.getPropertyValue("renderedMax")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minErrorText",{get:function(){return this.getLocalizableStringText("minErrorText")},set:function(e){this.setLocalizableStringText("minErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locMinErrorText",{get:function(){return this.getLocalizableString("minErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxErrorText",{get:function(){return this.getLocalizableStringText("maxErrorText")},set:function(e){this.setLocalizableStringText("maxErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locMaxErrorText",{get:function(){return this.getLocalizableString("maxErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMinMaxType",{get:function(){return Nr(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maskInstance",{get:function(){return this.maskSettings},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputValue",{get:function(){return this._inputValue||this.maskTypeIsEmpty?this._inputValue:this.maskInstance.getMaskedValue("")},set:function(e){var t=e;this._inputValue=e,this.maskTypeIsEmpty||(t=this.maskInstance.getUnmaskedValue(e),this._inputValue=this.maskInstance.getMaskedValue(t),t&&this.maskSettings.saveMaskedValue&&(t=this._inputValue)),this.value=t},enumerable:!1,configurable:!0}),t.prototype.getFilteredValue=function(){return this.getExpressionValue(this.value)},t.prototype.getExpressionValue=function(e){return!this.maskTypeIsEmpty&&this.maskSettings.saveMaskedValue?this.maskInstance.getUnmaskedValue(e):e},t.prototype.convertToCorrectValue=function(t){return null!=t&&"string"!=typeof t&&!this.maskTypeIsEmpty&&this.maskSettings.saveMaskedValue?this.maskInstance.getMaskedValue(t):e.prototype.convertToCorrectValue.call(this,t)},t.prototype.onChangeQuestionValue=function(t){e.prototype.onChangeQuestionValue.call(this,t),this.updateInputValue()},t.prototype.updateInputValue=function(){var e=this.value;this.maskTypeIsEmpty?this._inputValue=e:this.maskSettings.saveMaskedValue?this._inputValue=null!=e?e:this.maskInstance.getMaskedValue(""):this._inputValue=this.maskInstance.getMaskedValue(e)},t.prototype.hasToConvertToUTC=function(e){return gn.storeUtcDates&&this.isDateTimeLocaleType()&&!!e},t.prototype.createDate=function(e){return i("question-text",e)},t.prototype.valueForSurveyCore=function(t){return this.hasToConvertToUTC(t)&&(t=this.createDate(t).toISOString()),e.prototype.valueForSurveyCore.call(this,t)},t.prototype.valueFromDataCore=function(t){if(this.hasToConvertToUTC(t)){var n=this.createDate(t),o=this.createDate(n.getTime()-60*n.getTimezoneOffset()*1e3).toISOString();t=o.substring(0,o.length-2)}return e.prototype.valueFromDataCore.call(this,t)},t.prototype.onCheckForErrors=function(t,n,o){var i=this;e.prototype.onCheckForErrors.call(this,t,n,o);var r=this.getIsInputTextUpdate();if(!n||!r){if(!this.isOnValueChanged){if(this.isValueLessMin){var s=new En(this.getMinMaxErrorText(this.minErrorText,this.getCalculatedMinMax(this.renderedMin)),this);s.onUpdateErrorTextCallback=function(e){e.text=i.getMinMaxErrorText(i.minErrorText,i.getCalculatedMinMax(i.renderedMin))},t.push(s)}if(this.isValueGreaterMax){var a=new En(this.getMinMaxErrorText(this.maxErrorText,this.getCalculatedMinMax(this.renderedMax)),this);a.onUpdateErrorTextCallback=function(e){e.text=i.getMinMaxErrorText(i.maxErrorText,i.getCalculatedMinMax(i.renderedMax))},t.push(a)}this.isStepNumberIncorrect&&t.push(new En(this.getStepErrorText(),this)),this.dateValidationMessage&&t.push(new En(this.dateValidationMessage,this))}if("email"===this.inputType&&!this.validators.some(function(e){return"emailvalidator"===e.getType()})){var l=this.getValidatorTitle(),u=new Bn;u.errorOwner=this;var c=u.validate(this.value,l);c&&c.error&&t.push(c.error)}}},t.prototype.canSetValueToSurvey=function(){if(!this.isMinMaxType)return!0;var e=!this.isValueLessMin&&!this.isValueGreaterMax;return(!e||this.errors.length>0)&&this.survey&&(this.survey.isValidateOnValueChanging||this.survey.isValidateOnValueChanged)&&this.validate(),e},t.prototype.convertFuncValuetoQuestionValue=function(e){var t=this.maskTypeIsEmpty?this.inputType:this.maskSettings.getTypeForExpressions();return r.convertValToQuestionVal(e,t)},t.prototype.getMinMaxErrorText=function(e,t){if(r.isValueEmpty(t))return e;var n=t.toString();return"date"===this.inputType&&t.toDateString&&(n=t.toDateString()),e.replace("{0}",n)},t.prototype.getStepErrorText=function(){return this.getLocalizationString("stepError").replace("{0}",this.renderedStep)},Object.defineProperty(t.prototype,"isValueLessMin",{get:function(){return!this.isValueEmpty(this.renderedMin)&&!this.isEmpty()&&this.getCalculatedMinMax(this.value)<this.getCalculatedMinMax(this.renderedMin)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValueGreaterMax",{get:function(){return!this.isValueEmpty(this.renderedMax)&&!this.isEmpty()&&this.getCalculatedMinMax(this.value)>this.getCalculatedMinMax(this.renderedMax)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStepNumberIncorrect",{get:function(){if("number"!==this.inputType||this.isEmpty()||!r.isNumber(this.renderedStep)||!r.isNumber(this.value))return!1;for(var e=r.getNumber(this.value),t=r.getNumber(this.renderedStep),n=1;Math.round(t*n)/n!==t&&n<1e6;)n*=10;return(t*=n)>0&&(e*=n)%t!==0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDateInputType",{get:function(){return"date"===this.inputType||this.isDateTimeLocaleType()},enumerable:!1,configurable:!0}),t.prototype.isDateTimeLocaleType=function(){return"datetime-local"===this.inputType},t.prototype.getCalculatedMinMax=function(e){return this.isValueEmpty(e)?e:this.isDateInputType?this.createDate(e):e},t.prototype.setRenderedMinMax=function(e){var t=this;void 0===e&&(e=null);var n=function(e,n){t.setPropertyValue(e,t.convertFuncValuetoQuestionValue(n))},o=function(e){!e&&t.isDateInputType&&gn.minDate&&(e=gn.minDate),n("renderedMin",e)},i=function(e){!e&&t.isDateInputType&&(e=gn.maxDate),n("renderedMax",e)};this.runExpressionByProperty("minValueExpression",e,function(e){o(e)})||o(this.min),this.runExpressionByProperty("maxValueExpression",e,function(e){i(e)})||i(this.max)},Object.defineProperty(t.prototype,"step",{get:function(){return this.getPropertyValue("step")},set:function(e){this.setPropertyValue("step",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedStep",{get:function(){return this.isValueEmpty(this.step)?"number"!==this.inputType?void 0:"any":this.step},enumerable:!1,configurable:!0}),t.prototype.getIsInputTextUpdate=function(){return!!this.maskTypeIsEmpty&&e.prototype.getIsInputTextUpdate.call(this)},t.prototype.supportAutoAdvance=function(){return!this.getIsInputTextUpdate()&&!this.isDateInputType},t.prototype.supportGoNextPageError=function(){return!this.isDateInputType},Object.defineProperty(t.prototype,"dataList",{get:function(){return this.locDataList.value},set:function(e){this.locDataList.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locDataList",{get:function(){return this.locDataListValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataListId",{get:function(){return this.locDataList.hasValue()?this.id+"_datalist":void 0},enumerable:!1,configurable:!0}),t.prototype.setNewValue=function(t){(t=this.correctValueType(t))&&(this.dateValidationMessage=void 0),e.prototype.setNewValue.call(this,t)},t.prototype.correctValueType=function(e){if(!e)return e;if("number"===this.inputType||"range"===this.inputType)return r.isNumber(e)?r.getNumber(e):"";if("month"===this.inputType){var t=this.createDate(e),n=0==t.toISOString().indexOf(e)&&-1==e.indexOf("T"),o=(n?t.getUTCMonth():t.getMonth())+1;return(n?t.getUTCFullYear():t.getFullYear())+"-"+(o<10?"0":"")+o}return e},t.prototype.hasPlaceholder=function(){return!this.isReadOnly&&"range"!==this.inputType},t.prototype.getControlCssClassBuilder=function(){var t=this.getMaxLength();return e.prototype.getControlCssClassBuilder.call(this).append(this.cssClasses.constrolWithCharacterCounter,!!t).append(this.cssClasses.characterCounterBig,t>99)},t.prototype.isReadOnlyRenderDiv=function(){return this.isReadOnly&&"div"===gn.readOnly.textRenderMode},Object.defineProperty(t.prototype,"inputStyle",{get:function(){var e={};return e.width=this.inputWidth,this.updateTextAlign(e),e},enumerable:!1,configurable:!0}),t.prototype.updateTextAlign=function(e){"auto"!==this.inputTextAlignment?e.textAlign=this.inputTextAlignment:this.maskTypeIsEmpty||"auto"===this.maskSettings.getTextAlignment()||(e.textAlign=this.maskSettings.getTextAlignment())},t.prototype.updateValueOnEvent=function(e){var t=e.target.value;this.isTwoValueEquals(this.value,t)||(this.inputValue=t)},t.prototype.updateDateValidationMessage=function(e){this.dateValidationMessage=this.isDateInputType&&e.target?e.target.validationMessage:void 0},t.prototype.onBlurCore=function(t){this.updateDateValidationMessage(t),this.updateValueOnEvent(t),this.updateRemainingCharacterCounter(t.target.value),e.prototype.onBlurCore.call(this,t)},t.prototype.onFocusCore=function(t){this.updateRemainingCharacterCounter(t.target.value),e.prototype.onFocusCore.call(this,t)},t.prototype.afterRenderQuestionElement=function(t){t&&(this.input=t instanceof HTMLInputElement?t:t.querySelector("input"),this.createMaskAdapter()),e.prototype.afterRenderQuestionElement.call(this,t)},t.prototype.beforeDestroyQuestionElement=function(e){this.deleteMaskAdapter(),this.input=void 0},Lr([y({onSet:function(e,t){t.onSetMaskType(e)}})],t.prototype,"maskType",void 0),Lr([y()],t.prototype,"inputTextAlignment",void 0),Lr([y()],t.prototype,"_inputValue",void 0),t}(Tr),_r=["number","range","date","datetime-local","month","time","week"];function Nr(e){var t=e?e.inputType:"";return!!t&&_r.indexOf(t)>-1}function Mr(e,t){var n=e.split(t);return 2!==n.length?-1:r.isNumber(n[0])&&r.isNumber(n[1])?60*parseFloat(n[0])+parseFloat(n[1]):-1}function kr(e,t,n,o){var s=o?n:t;if(!Nr(e))return s;if(r.isValueEmpty(t)||r.isValueEmpty(n))return s;if(0===e.inputType.indexOf("date")||"month"===e.inputType){var a="month"===e.inputType,l="question-text-minmax",u=i(l,a?t+"-01":t),c=i(l,a?n+"-01":n);if(!u||!c)return s;if(u>c)return o?t:n}if("week"===e.inputType||"time"===e.inputType)return function(e,t,n){var o=Mr(e,n),i=Mr(t,n);return!(o<0||i<0)&&o>i}(t,n,"week"===e.inputType?"-W":":")?o?t:n:s;if("number"===e.inputType){if(!r.isNumber(t)||!r.isNumber(n))return s;if(r.getNumber(t)>r.getNumber(n))return o?t:n}return"string"==typeof t||"string"==typeof n?s:t>n?o?t:n:s}function Fr(e,t){e&&e.inputType&&(t.inputType="range"!==e.inputType?e.inputType:"number",t.textUpdateMode="onBlur")}D.addClass("text",[{name:"inputType",default:"text",choices:gn.questions.inputTypes},{name:"inputSize:number",alternativeName:"size",minValue:0,dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isTextInput}},{name:"textUpdateMode",default:"default",choices:["default","onBlur","onTyping"],dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isTextInput}},{name:"autocomplete",alternativeName:"autoComplete",choices:gn.questions.dataList},{name:"min",dependsOn:"inputType",visibleIf:function(e){return Nr(e)},onPropertyEditorUpdate:function(e,t){Fr(e,t)},onSettingValue:function(e,t){return kr(e,t,e.max,!1)}},{name:"max",dependsOn:"inputType",nextToProperty:"*min",visibleIf:function(e){return Nr(e)},onSettingValue:function(e,t){return kr(e,e.min,t,!0)},onPropertyEditorUpdate:function(e,t){Fr(e,t)}},{name:"minValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(e){return Nr(e)}},{name:"maxValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(e){return Nr(e)}},{name:"minErrorText",serializationProperty:"locMinErrorText",dependsOn:"inputType",visibleIf:function(e){return Nr(e)}},{name:"maxErrorText",serializationProperty:"locMaxErrorText",dependsOn:"inputType",visibleIf:function(e){return Nr(e)}},{name:"inputTextAlignment",default:"auto",choices:["left","right","auto"]},{name:"maskType",default:"none",visibleIndex:0,dependsOn:"inputType",visibleIf:function(e){return"text"===e.inputType||"tel"===e.inputType},choices:function(e){return Ar()}},{name:"maskSettings:masksettings",className:"masksettings",visibleIndex:1,dependsOn:["inputType","maskType"],visibleIf:function(e){return"text"===e.inputType||"tel"===e.inputType},onGetValue:function(e){return e.maskSettings.getData()},onSetValue:function(e,t){e.maskSettings.setData(t)}},{name:"step:number",dependsOn:"inputType",visibleIf:function(e){return!!e&&("number"===e.inputType||"range"===e.inputType)}},{name:"maxLength:number",default:-1,dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isTextInput}},{name:"placeholder",alternativeName:"placeHolder",serializationProperty:"locPlaceholder",dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isTextInput}},{name:"dataList:string[]",serializationProperty:"locDataList",dependsOn:"inputType",visibleIf:function(e){return!!e&&"text"===e.inputType}}],function(){return new jr("")},"textbase"),Io.Instance.registerQuestion("text",function(e){return new jr(e)});var Br=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qr=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Qr=function(e){function t(t){var n=e.call(this)||this;return n.question=t,n}return Br(t,e),t.prototype.getRootObj=function(){return this.question.data},t.prototype.updateValueByItem=function(e,t){for(var n=this.question.items,o=0;o<n.length;o++){var i=n[o].question;if(i.getValueName()===e)return t.isFound=!0,void(t.context=i.getValueGetterContext())}},t}(_),zr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Br(t,e),Object.defineProperty(t.prototype,"a11y_input_ariaLabel",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaLabelledBy",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaDescribedBy",{get:function(){return null},enumerable:!1,configurable:!0}),t}(jr),Hr=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var o=e.call(this)||this;return o.focusIn=function(){o.editor.focusIn()},o.editorValue=o.createEditor(t),o.maskSettings=o.editorValue.maskSettings,o.editor.questionTitleTemplateCallback=function(){return""},o.editor.titleLocation="left",n&&(o.title=n),o.editor.onPropertyChanged.add(function(e,t){"maskSettings"!==t.name&&o.onPropertyChanged.fire(o,t)}),o}return Br(t,e),t.prototype.getType=function(){return"multipletextitem"},Object.defineProperty(t.prototype,"id",{get:function(){return this.editor.id},enumerable:!1,configurable:!0}),t.prototype.getOriginalObj=function(){return this.editor},Object.defineProperty(t.prototype,"name",{get:function(){return this.editor.name},set:function(e){this.editor.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"question",{get:function(){return this.data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"editor",{get:function(){return this.editorValue},enumerable:!1,configurable:!0}),t.prototype.createEditor=function(e){return new zr(e)},t.prototype.addUsedLocales=function(t){e.prototype.addUsedLocales.call(this,t),this.editor.addUsedLocales(t)},t.prototype.localeChanged=function(){e.prototype.localeChanged.call(this),this.editor.localeChanged()},t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.editor.locStrsChanged()},t.prototype.setData=function(e){this.data=e,e&&(this.editor.defaultValue=e.getItemDefaultValue(this.name),this.editor.setSurveyImpl(this),this.editor.parent=e,this.editor.setParentQuestion(e))},Object.defineProperty(t.prototype,"isRequired",{get:function(){return this.editor.isRequired},set:function(e){this.editor.isRequired=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this.editor.inputType},set:function(e){this.editor.inputType=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.editor.title},set:function(e){this.editor.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.editor.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullTitle",{get:function(){return this.editor.fullTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.editor.maxLength},set:function(e){this.editor.maxLength=e},enumerable:!1,configurable:!0}),t.prototype.getMaxLength=function(){var e=this.getSurvey();return r.getMaxLength(this.maxLength,e?e.maxTextLength:-1)},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this.editor.placeholder},set:function(e){this.editor.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceholder",{get:function(){return this.editor.locPlaceholder},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeHolder",{get:function(){return this.placeholder},set:function(e){this.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceHolder",{get:function(){return this.locPlaceholder},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredErrorText",{get:function(){return this.editor.requiredErrorText},set:function(e){this.editor.requiredErrorText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRequiredErrorText",{get:function(){return this.editor.locRequiredErrorText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this.editor.inputSize},set:function(e){this.editor.inputSize=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.inputSize},set:function(e){this.inputSize=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultValueExpression",{get:function(){return this.editor.defaultValueExpression},set:function(e){this.editor.defaultValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minValueExpression",{get:function(){return this.editor.minValueExpression},set:function(e){this.editor.minValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxValueExpression",{get:function(){return this.editor.maxValueExpression},set:function(e){this.editor.maxValueExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validators",{get:function(){return this.editor.validators},set:function(e){this.editor.validators=e},enumerable:!1,configurable:!0}),t.prototype.getValidators=function(){return this.validators},Object.defineProperty(t.prototype,"maskType",{get:function(){return this.editor.maskType},set:function(e){this.editor.maskType=e,this.maskSettings=this.editor.maskSettings},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maskSettings",{get:function(){return this.getPropertyValue("maskSettings")},set:function(e){this.setPropertyValue("maskSettings",e),this.editor.maskSettings!==e&&(this.editor.maskSettings=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputTextAlignment",{get:function(){return this.editor.inputTextAlignment},set:function(e){this.editor.inputTextAlignment=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.data?this.data.getMultipleTextValue(this.name):null},set:function(e){null!=this.data&&this.data.setMultipleTextValue(this.name,e)},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return this.editor.isEmpty()},t.prototype.onValueChanged=function(e){this.valueChangedCallback&&this.valueChangedCallback(e)},t.prototype.getSurveyData=function(){return this},t.prototype.getSurvey=function(){return this.data?this.data.getSurvey():null},t.prototype.getTextProcessor=function(){return this.data?this.data.getTextProcessor():null},t.prototype.getValue=function(e){return this.data?this.data.getMultipleTextValue(e):null},t.prototype.setValue=function(e,t){this.data&&this.data.setMultipleTextValue(e,t)},t.prototype.getVariable=function(e){},t.prototype.setVariable=function(e,t){},t.prototype.getComment=function(e){return null},t.prototype.setComment=function(e,t){},t.prototype.getAllValues=function(){return this.data?this.data.getAllValues():this.value},t.prototype.getFilteredProperties=function(){return{survey:this.getSurvey()}},t.prototype.findQuestionByName=function(e){var t=this.getSurvey();return t?t.getQuestionByName(e):null},t.prototype.getEditingSurveyElement=function(){},t.prototype.getValidatorTitle=function(){return this.title},Object.defineProperty(t.prototype,"validatedValue",{get:function(){return this.value},set:function(e){this.value=e},enumerable:!1,configurable:!0}),t.prototype.getDataFilteredProperties=function(){return this.getFilteredProperties()},t}(Te),Ur=function(e){function t(t){var n=e.call(this,t)||this;return n.isMultipleItemValueChanging=!1,n.createNewArray("items",function(e){e.setData(n),n.survey&&n.survey.multipleTextItemAdded(n,e)}),n.registerPropertyChangedHandlers(["items","colCount","itemErrorLocation"],function(){n.calcVisibleRows()}),n.registerPropertyChangedHandlers(["inputSize"],function(){n.resetItemsSize()}),n}return Br(t,e),t.addDefaultItems=function(e){for(var t=Io.DefaultMutlipleTextItems,n=0;n<t.length;n++)e.addItem(t[n])},t.prototype.getType=function(){return"multipletext"},t.prototype.setSurveyImpl=function(t,n){e.prototype.setSurveyImpl.call(this,t,n);for(var o=0;o<this.items.length;o++)this.items[o].setData(this)},Object.defineProperty(t.prototype,"isAllowTitleLeft",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.onSurveyLoad=function(){this.editorsOnSurveyLoad(),e.prototype.onSurveyLoad.call(this),r.isValueEmpty(this.rows)||this.calcVisibleRows()},t.prototype.setQuestionValue=function(t,n){void 0===n&&(n=!0),e.prototype.setQuestionValue.call(this,t,n),this.performForEveryEditor(function(e){e.editor.updateValueFromSurvey(e.value)}),this.updateIsAnswered()},t.prototype.onSurveyValueChanged=function(t){e.prototype.onSurveyValueChanged.call(this,t),this.performForEveryEditor(function(e){e.editor.onSurveyValueChanged(e.value)})},t.prototype.resetItemsSize=function(){this.performForEveryEditor(function(e){e.editor.resetInputSize()})},t.prototype.editorsOnSurveyLoad=function(){this.performForEveryEditor(function(e){e.editor.onSurveyLoad()})},t.prototype.performForEveryEditor=function(e){for(var t=0;t<this.items.length;t++){var n=this.items[t];n.editor&&e(n)}},Object.defineProperty(t.prototype,"items",{get:function(){return this.getPropertyValue("items")},set:function(e){this.setPropertyValue("items",e)},enumerable:!1,configurable:!0}),t.prototype.addItem=function(e,t){void 0===t&&(t=null);var n=this.createTextItem(e,t);return this.items.push(n),n},t.prototype.getItemByName=function(e){for(var t=0;t<this.items.length;t++)if(this.items[t].name==e)return this.items[t];return null},t.prototype.getElementsInDesign=function(t){return void 0===t&&(t=!1),e.prototype.getElementsInDesign.call(this,t).concat(this.items)},t.prototype.addConditionObjectsByContext=function(e,t){for(var n=0;n<this.items.length;n++){var o=this.items[n];e.push({name:this.getValueName()+"."+o.name,text:this.processedTitle+"."+o.fullTitle,question:this})}},t.prototype.collectNestedQuestionsCore=function(e,t,n,o){o&&e.push(this),this.items.forEach(function(i){return i.editor.addNestedQuestion(e,t,n,o)})},t.prototype.getConditionJson=function(t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),!n)return e.prototype.getConditionJson.call(this,t);var o=this.getItemByName(n);if(!o)return null;var i=(new A).toJsonObject(o);return i.type="text",i},t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this);for(var t=0;t<this.items.length;t++)this.items[t].locStrsChanged()},t.prototype.localeChanged=function(){e.prototype.localeChanged.call(this);for(var t=0;t<this.items.length;t++)this.items[t].localeChanged()},Object.defineProperty(t.prototype,"itemErrorLocation",{get:function(){return this.getPropertyValue("itemErrorLocation")},set:function(e){this.setPropertyValue("itemErrorLocation",e)},enumerable:!1,configurable:!0}),t.prototype.getQuestionErrorLocation=function(){return"default"!==this.itemErrorLocation?this.itemErrorLocation:this.getErrorLocation()},Object.defineProperty(t.prototype,"showItemErrorOnTop",{get:function(){return"top"==this.getQuestionErrorLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showItemErrorOnBottom",{get:function(){return"bottom"==this.getQuestionErrorLocation()},enumerable:!1,configurable:!0}),t.prototype.getChildErrorLocation=function(e){return this.getQuestionErrorLocation()},t.prototype.isNewValueCorrect=function(e){return r.isValueObject(e,!0)},t.prototype.supportAutoAdvance=function(){for(var e=0;e<this.items.length;e++)if(this.items[e].isEmpty())return!1;return!0},Object.defineProperty(t.prototype,"colCount",{get:function(){return this.getPropertyValue("colCount")},set:function(e){e<1||e>5||this.setPropertyValue("colCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this.getPropertyValue("inputSize")},set:function(e){this.setPropertyValue("inputSize",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemSize",{get:function(){return this.inputSize},set:function(e){this.inputSize=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemTitleWidth",{get:function(){return this.getPropertyValue("itemTitleWidth")||""},set:function(e){this.setPropertyValue("itemTitleWidth",e)},enumerable:!1,configurable:!0}),t.prototype.onRowCreated=function(e){return e},t.prototype.calcVisibleRows=function(){for(var e,t,n=this.colCount,o=this.items,i=0,r=[],s=0;s<o.length;s++)0==i&&(e=this.onRowCreated(new Wr),t=this.onRowCreated(new Gr),this.showItemErrorOnTop?(r.push(t),r.push(e)):(r.push(e),r.push(t))),e.cells.push(new Jr(o[s],this)),t.cells.push(new Kr(o[s],this)),(++i>=n||s==o.length-1)&&(i=0,t.onAfterCreated());this.rows=r},t.prototype.getRows=function(){return r.isValueEmpty(this.rows)&&this.calcVisibleRows(),this.rows},t.prototype.onValueChanged=function(){e.prototype.onValueChanged.call(this),this.onItemValueChanged()},t.prototype.createTextItem=function(e,t){return new Hr(e,t)},t.prototype.onItemValueChanged=function(){if(!this.isMultipleItemValueChanging)for(var e=0;e<this.items.length;e++){var t=null;this.value&&this.items[e].name in this.value&&(t=this.value[this.items[e].name]),this.items[e].onValueChanged(t)}},t.prototype.runConditionCore=function(t){e.prototype.runConditionCore.call(this,t),this.items.forEach(function(e){return e.editor.runCondition(t)})},t.prototype.getIsRunningValidators=function(){if(e.prototype.getIsRunningValidators.call(this))return!0;for(var t=0;t<this.items.length;t++)if(this.items[t].editor.isRunningValidators)return!0;return!1},t.prototype.validateElementCore=function(t){for(var n=!0,o=0;o<this.items.length;o++)t.isOnValueChanged&&this.items[o].editor.isEmpty()||(n=this.items[o].editor.validateElement(t)&&n);return e.prototype.validateElementCore.call(this,t)&&n},t.prototype.getAllErrors=function(){for(var t=e.prototype.getAllErrors.call(this),n=0;n<this.items.length;n++){var o=this.items[n].editor.getAllErrors();o&&o.length>0&&(t=t.concat(o))}return t},t.prototype.clearErrors=function(){e.prototype.clearErrors.call(this);for(var t=0;t<this.items.length;t++)this.items[t].editor.clearErrors()},t.prototype.getContainsErrors=function(){var t=e.prototype.getContainsErrors.call(this);if(t)return t;for(var n=this.items,o=0;o<n.length;o++)if(n[o].editor.containsErrors)return!0;return!1},t.prototype.getIsAnswered=function(){if(!e.prototype.getIsAnswered.call(this))return!1;for(var t=0;t<this.items.length;t++){var n=this.items[t].editor;if(n.isVisible&&!n.isAnswered)return!1}return!0},t.prototype.getProgressInfo=function(){for(var e=[],t=0;t<this.items.length;t++)e.push(this.items[t].editor);return Tt.getProgressInfoByElements(e,this.isRequired)},t.prototype.getValueGetterContext=function(){return new Qr(this)},t.prototype.getDisplayValueCore=function(e,t){if(!t)return t;for(var n={},o=0;o<this.items.length;o++){var i=this.items[o],s=t[i.name];if(!r.isValueEmpty(s)){var a=i.name;e&&i.title&&(a=i.title),n[a]=i.editor.getDisplayValue(e,s)}}return n},t.prototype.allowMobileInDesignMode=function(){return!0},t.prototype.getMultipleTextValue=function(e){return this.value?this.value[e]:null},t.prototype.setMultipleTextValue=function(e,t){this.isMultipleItemValueChanging=!0,this.isValueEmpty(t)&&(t=void 0);var n=this.value;n||(n={}),n[e]=t,this.setNewValue(n),this.isMultipleItemValueChanging=!1},t.prototype.getItemDefaultValue=function(e){return this.defaultValue?this.defaultValue[e]:null},t.prototype.getTextProcessor=function(){return this.textProcessor},t.prototype.getAllValues=function(){return this.data?this.data.getAllValues():null},t.prototype.addElement=function(e,t){},t.prototype.removeElement=function(e){return!1},t.prototype.getQuestionTitleLocation=function(){return"left"},t.prototype.getQuestionTitleWidth=function(){},t.prototype.getColumsForElement=function(e){return[]},t.prototype.updateColumns=function(){},t.prototype.getQuestionStartIndex=function(){return this.getStartIndex()},t.prototype.getChildrenLayoutType=function(){return"row"},t.prototype.elementWidthChanged=function(e){},Object.defineProperty(t.prototype,"elements",{get:function(){return[]},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(e){return-1},t.prototype.ensureRowsVisibility=function(){},t.prototype.validateContainerOnly=function(){},t.prototype.onQuestionValueChanged=function(e){},t.prototype.getItemLabelCss=function(e){return(new _e).append(this.cssClasses.itemLabel).append(this.cssClasses.itemLabelDisabled,this.isDisabledStyle).append(this.cssClasses.itemLabelReadOnly,this.isReadOnlyStyle).append(this.cssClasses.itemLabelPreview,this.isPreviewStyle).append(this.cssClasses.itemLabelAnswered,e.editor.isAnswered).append(this.cssClasses.itemLabelAllowFocus,!this.isDesignMode).append(this.cssClasses.itemLabelOnError,e.editor.errors.length>0).append(this.cssClasses.itemWithCharacterCounter,!!e.getMaxLength()).toString()},t.prototype.getItemCss=function(){return(new _e).append(this.cssClasses.item).toString()},t.prototype.getItemTitleCss=function(){return(new _e).append(this.cssClasses.itemTitle).toString()},Object.defineProperty(t.prototype,"ariaRole",{get:function(){return"group"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRequired",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInvalid",{get:function(){return null},enumerable:!1,configurable:!0}),qr([b()],t.prototype,"rows",void 0),t}(Xn),Wr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isVisible=!0,t.cells=[],t}return Br(t,e),qr([y()],t.prototype,"isVisible",void 0),qr([b()],t.prototype,"cells",void 0),t}(Te),Gr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Br(t,e),t.prototype.onAfterCreated=function(){var e=this,t=function(){e.isVisible=e.cells.some(function(e){var t,n;return(null===(t=e.item)||void 0===t?void 0:t.editor)&&(null===(n=e.item)||void 0===n?void 0:n.editor.hasVisibleErrors)})};this.cells.forEach(function(e){var n,o;(null===(n=e.item)||void 0===n?void 0:n.editor)&&(null===(o=e.item)||void 0===o||o.editor.registerFunctionOnPropertyValueChanged("hasVisibleErrors",t))}),t()},t}(Wr),Jr=function(){function e(e,t){this.item=e,this.question=t,this.isErrorsCell=!1}return e.prototype.getClassName=function(){return(new _e).append(this.question.cssClasses.cell).toString()},Object.defineProperty(e.prototype,"className",{get:function(){return this.getClassName()},enumerable:!1,configurable:!0}),e}(),Kr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isErrorsCell=!0,t}return Br(t,e),t.prototype.getClassName=function(){return(new _e).append(e.prototype.getClassName.call(this)).append(this.question.cssClasses.cellError).append(this.question.cssClasses.cellErrorTop,this.question.showItemErrorOnTop).append(this.question.cssClasses.cellErrorBottom,this.question.showItemErrorOnBottom).toString()},t}(Jr);D.addClass("multipletextitem",[{name:"!name",isUnique:!0},"isRequired:boolean",{name:"placeholder",alternativeName:"placeHolder",serializationProperty:"locPlaceholder"},{name:"inputType",default:"text",choices:gn.questions.inputTypes},{name:"maskType",default:"none",visibleIndex:0,dependsOn:"inputType",visibleIf:function(e){return"text"===e.inputType},choices:function(e){return Ar()}},{name:"maskSettings:masksettings",className:"masksettings",visibleIndex:1,dependsOn:"inputType",visibleIf:function(e){return"text"===e.inputType},onGetValue:function(e){return e.maskSettings.getData()},onSetValue:function(e,t){e.maskSettings.setData(t)}},{name:"inputTextAlignment",default:"auto",choices:["left","right","auto"]},{name:"title",serializationProperty:"locTitle"},{name:"maxLength:number",default:-1},{name:"inputSize:number",alternativeName:"size",minValue:0},{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},{name:"defaultValueExpression:expression",visible:!1},{name:"minValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(e){return Nr(e)}},{name:"maxValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(e){return Nr(e)}},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"}],function(){return new Hr("")}),D.addClass("multipletext",[{name:"!items:textitems",className:"multipletextitem",isArray:!0},{name:"inputSize:number",minValue:0,visible:!1,alternativeName:"itemSize"},{name:"colCount:number",default:1,choices:[1,2,3,4,5]},{name:"itemErrorLocation",default:"default",choices:["default","top","bottom"],visible:!1},{name:"itemTitleWidth",category:"layout"}],function(){return new Ur("")},"question"),Io.Instance.registerQuestion("multipletext",function(e){var t=new Ur(e);return Ur.addDefaultItems(t),t});var Yr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xr=function(e){function t(t){void 0===t&&(t="");var n=e.call(this,t)||this;return n.createLocalizableString("content",n,!0),n.registerPropertyChangedHandlers(["content"],function(){n.onContentChanged()}),n}return Yr(t,e),t.prototype.getType=function(){return"flowpanel"},t.prototype.getChildrenLayoutType=function(){return"flow"},t.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.onContentChanged()},Object.defineProperty(t.prototype,"content",{get:function(){return this.getLocalizableStringText("content")},set:function(e){this.setLocalizableStringText("content",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locContent",{get:function(){return this.getLocalizableString("content")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"html",{get:function(){return this.getPropertyValue("html","")},set:function(e){this.setPropertyValue("html",e)},enumerable:!1,configurable:!0}),t.prototype.onContentChanged=function(){var e;e=this.onCustomHtmlProducing?this.onCustomHtmlProducing():this.produceHtml(),this.html=e,this.contentChangedCallback&&this.contentChangedCallback()},t.prototype.produceHtml=function(){for(var e=[],t=/{(.*?(element:)[^$].*?)}/g,n=this.content,o=0,i=null;null!==(i=t.exec(n));){i.index>o&&(e.push(n.substring(o,i.index)),o=i.index);var r=this.getQuestionFromText(i[0]);r?e.push(this.getHtmlForQuestion(r)):e.push(n.substring(o,i.index+i[0].length)),o=i.index+i[0].length}return o<n.length&&e.push(n.substring(o,n.length)),e.join("").replace(new RegExp("<br>","g"),"<br/>")},t.prototype.getQuestionFromText=function(e){return e=(e=e.substring(1,e.length-1)).replace(t.contentElementNamePrefix,"").trim(),this.getQuestionByName(e)},t.prototype.getHtmlForQuestion=function(e){return this.onGetHtmlForQuestion?this.onGetHtmlForQuestion(e):""},t.prototype.getQuestionHtmlId=function(e){return this.name+"_"+e.id},t.prototype.onAddElement=function(t,n){e.prototype.onAddElement.call(this,t,n),this.addElementToContent(t),t.renderWidth=""},t.prototype.onRemoveElement=function(t){var n=this.getElementContentText(t);this.content=this.content.replace(n,""),e.prototype.onRemoveElement.call(this,t)},t.prototype.dragDropMoveElement=function(e,t,n){},t.prototype.addElementToContent=function(e){if(!this.isLoadingFromJson){var t=this.getElementContentText(e);this.insertTextAtCursor(t)||(this.content=this.content+t)}},t.prototype.insertTextAtCursor=function(e,t){if(void 0===t&&(t=null),!this.isDesignMode||!n.isAvailable())return!1;var o=n.getSelection();if(o.getRangeAt&&o.rangeCount){var i=o.getRangeAt(0);i.deleteContents();var r=new Text(e);if(i.insertNode(r),this.getContent){var s=this.getContent(t);this.content=s}return!0}return!1},t.prototype.getElementContentText=function(e){return"{"+t.contentElementNamePrefix+e.name+"}"},t.contentElementNamePrefix="element:",t}(Qi);D.addClass("flowpanel",[{name:"content:html",serializationProperty:"locContent"}],function(){return new Xr},"panel");var Zr=function(){function e(){}return e.getIconCss=function(e,t){return(new _e).append(e.icon).append(e.iconExpanded,!t).toString()},e}(),$r=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),es=function(e){function t(t){return e.call(this,t)||this}return $r(t,e),t.prototype.getType=function(){return"nonvalue"},Object.defineProperty(t.prototype,"hasInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitle",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getTitleLocation=function(){return""},Object.defineProperty(t.prototype,"hasComment",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.validateElementCore=function(e){return!0},t.prototype.getAllErrors=function(){return[]},t.prototype.supportAutoAdvance=function(){return!1},t.prototype.addConditionObjectsByContext=function(e,t){},t.prototype.getConditionJson=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=null),null},Object.defineProperty(t.prototype,"ariaRole",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRequired",{get:function(){return null},enumerable:!1,configurable:!0}),t}(Xn);D.addClass("nonvalue",[{name:"title",visible:!1},{name:"description",visible:!1},{name:"valueName",visible:!1},{name:"enableIf",visible:!1},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"clearIfInvisible",visible:!1},{name:"isRequired",visible:!1,isSerializable:!1},{name:"requiredErrorText",visible:!1},{name:"readOnly",visible:!1},{name:"requiredIf",visible:!1},{name:"validators",visible:!1},{name:"titleLocation",visible:!1},{name:"showTitle",visible:!1,isSerializable:!1},{name:"showCommentArea",visible:!1},{name:"useDisplayValuesInDynamicTexts",alternativeName:"useDisplayValuesInTitle",visible:!1}],function(){return new es("")},"question");var ts=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ns=function(e){function t(t){return e.call(this,t)||this}return ts(t,e),t.prototype.getType=function(){return"empty"},t}(Xn);D.addClass("empty",[],function(){return new ns("")},"question");var os=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),is=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return os(t,e),Object.defineProperty(t.prototype,"isExclusive",{get:function(){return this.getPropertyValue("isExclusive")},set:function(e){this.setPropertyValue("isExclusive",e)},enumerable:!1,configurable:!0}),t.prototype.getBaseType=function(){return"checkboxitem"},t.prototype.onPropertyValueChanged=function(t,n,o){e.prototype.onPropertyValueChanged.call(this,t,n,o),"showCommentArea"===t&&this.locOwner&&this.locOwner.onItemHasCommentChanged()},t}(lr),rs=function(e){function t(t){var n=e.call(this,t)||this;return n.invisibleOldValues={},n.isChangingValueOnClearIncorrect=!1,n.selectAllItemValue=n.createSelectAllItem(),n.registerPropertyChangedHandlers(["showSelectAllItem","selectAllText"],function(){n.onVisibleChoicesChanged()}),n.registerPropertyChangedHandlers(["choices"],function(){n.onItemHasCommentChanged()}),n}return os(t,e),t.prototype.supportElementsInChoice=function(){return!0},t.prototype.getDefaultItemComponent=function(){return"survey-checkbox-item"},t.prototype.getType=function(){return"checkbox"},t.prototype.getItemValueType=function(){return"checkboxitem"},t.prototype.createSelectAllItem=function(){var e=this.createItemValue("");return e.value="",e.id="selectall",this.selectAllItemText=this.createLocalizableString("selectAllText",e,!0,"selectAllItemText"),e.locOwner=this,e.setLocText(this.selectAllItemText),e},t.prototype.onCreating=function(){e.prototype.onCreating.call(this),this.createNewArray("renderedValue"),this.createNewArray("value")},t.prototype.getFirstInputElementId=function(){return this.inputId+"_0"},Object.defineProperty(t.prototype,"valuePropertyName",{get:function(){return this.getPropertyValue("valuePropertyName")},set:function(e){this.setPropertyValue("valuePropertyName",e)},enumerable:!1,configurable:!0}),t.prototype.getValuePropertyName=function(){return this.valuePropertyName||(this.isTheOnlyComment?"":"value")},t.prototype.getQuestionFromArray=function(e,t){if(e&&e===this.getValuePropertyName()){var n=this.value;if(Array.isArray(n)&&t<n.length)return this}return null},t.prototype.getDependedQuestionsByValueName=function(t){return t&&this.getValuePropertyName()?[]:e.prototype.getDependedQuestionsByValueName.call(this,t)},Object.defineProperty(t.prototype,"selectAllItem",{get:function(){return this.selectAllItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectAllText",{get:function(){return this.getLocalizableStringText("selectAllText")},set:function(e){this.setLocalizableStringText("selectAllText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locSelectAllText",{get:function(){return this.getLocalizableString("selectAllText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showSelectAllItem",{get:function(){return this.getPropertyValue("showSelectAllItem")},set:function(e){this.setPropertyValue("showSelectAllItem",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSelectAll",{get:function(){return this.showSelectAllItem},set:function(e){this.showSelectAllItem=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAllSelected",{get:function(){return this.allElementsSelected()},set:function(e){e?this.selectAll():this.clearValueFromUI()},enumerable:!1,configurable:!0}),t.prototype.toggleSelectAll=function(){this.isAllSelected=!this.isAllSelected},t.prototype.allElementsSelected=function(){if(this.isNoneItemsSelected())return!1;var e=this.getVisibleEnableItems();if(0===e.length)return!1;var t=this.value;if(!t||!Array.isArray(t)||0===t.length)return!1;if(t.length<e.length)return!1;for(var n=[],o=0;o<t.length;o++)n.push(this.getRealValue(t[o]));for(o=0;o<e.length;o++)if(n.indexOf(e[o].value)<0)return!1;return!0},t.prototype.isNoneItemsSelected=function(){for(var e=this.getNoneItems(),t=0;t<e.length;t++)if(this.isItemSelected(e[t]))return!0;return!1},t.prototype.getNoneItems=function(){var e=this,t=new Array;return this.visibleChoices.forEach(function(n){e.isNoneItem(n)&&t.push(n)}),t},t.prototype.selectAll=function(){for(var e=[],t=this.getVisibleEnableItems(),n=0;n<t.length;n++)e.push(t[n].value);this.renderedValue=e},t.prototype.clickItemHandler=function(e,t){this.selectItem(e,t)},t.prototype.selectItem=function(e,t){if(!this.isReadOnlyAttr&&e)if(e===this.selectAllItem)!0===t||!1===t?this.isAllSelected=t:this.toggleSelectAll();else{if(this.isNoneItem(e))this.renderedValue=t?[e.value]:[];else{var n=[].concat(this.renderedValue||[]),o=n.indexOf(e.value);t?o<0&&n.push(e.value):o>-1&&n.splice(o,1),this.renderedValue=n}t&&this.onItemSelected(e)}},t.prototype.isItemSelectedCore=function(e){if(e===this.selectAllItem)return this.isAllSelected;var t=this.renderedValue;if(!t||!Array.isArray(t))return!1;for(var n=0;n<t.length;n++)if(this.isTwoValueEquals(t[n],e.value))return!0;return!1},t.prototype.hasUnknownValueItem=function(t,n,o,i){return void 0===n&&(n=!1),void 0===o&&(o=!0),void 0===i&&(i=!1),e.prototype.hasUnknownValueItem.call(this,this.getRealValue(t),n,o,i)},t.prototype.setCommentValueCore=function(t,n){if(n=this.trimCommentValue(n),this.isOtherItemByValue(t))e.prototype.setCommentValueCore.call(this,t,n);else{this.setCommentPropertyValue(t,n);var o=this.getItemValIndexByItemValue(t.value);if(o>-1){var i=this.createValueCopy(),r=i[o];n?r[this.commentPropertyValue]=n:delete r[this.commentPropertyValue],this.value=i}}},t.prototype.getCommentValueByItem=function(e){var t=this.getItemValIndexByItemValue(e.value);return t>-1?this.value[t][this.commentPropertyValue]:void 0},t.prototype.getItemValIndexByItemValue=function(e){var t=this.value;if(!Array.isArray(t))return-1;for(var n=0;n<t.length;n++){var o=this.getRealValue(t[n]);if(r.isTwoValueEquals(o,e))return n}return-1},Object.defineProperty(t.prototype,"isTheOnlyComment",{get:function(){var e=this;return this.getPropertyValue("isTheOnlyComment",void 0,function(){return e.calcIsTheOnlyComment()})},enumerable:!1,configurable:!0}),t.prototype.calcIsTheOnlyComment=function(){for(var e=0;e<this.choices.length;e++){var t=this.choices[e];if(t.showCommentArea&&t.value!==this.otherItem.value)return!1}return!0},t.prototype.onItemHasCommentChanged=function(){this.resetPropertyValue("isTheOnlyComment")},t.prototype.getRealValue=function(e){if(!e||"object"!=typeof e)return e;var t=this.getValuePropertyName();return t?e[t]:e},t.prototype.getValueFromReal=function(e){var t=this.getValuePropertyName();if(t){var n={};return n[t]=e,n}return e},Object.defineProperty(t.prototype,"isValueArray",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxSelectedChoices",{get:function(){return this.getPropertyValue("maxSelectedChoices")},set:function(e){e<0&&(e=0),this.setPropertyValue("maxSelectedChoices",e),this.filterItems()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minSelectedChoices",{get:function(){return this.getPropertyValue("minSelectedChoices")},set:function(e){e<0&&(e=0),this.setPropertyValue("minSelectedChoices",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedChoices",{get:function(){var e=this.renderedValue,t=this.visibleChoices,n=this.selectedItemValues;if(this.isEmpty())return[];var o=this.defaultSelectedItemValues?[].concat(this.defaultSelectedItemValues,t):t,i=e.map(function(e){return to.getItemByValue(o,e)}).filter(function(e){return!!e});return i.length||n||this.updateSelectedItemValues(),this.validateItemValues(i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedItems",{get:function(){return this.selectedChoices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFilteredValue",{get:function(){return!!this.getValuePropertyName()},enumerable:!1,configurable:!0}),t.prototype.getFilteredName=function(){var t=e.prototype.getFilteredName.call(this);return this.hasFilteredValue&&(t+=gn.expressionVariables.unwrapPostfix),t},t.prototype.getFilteredValue=function(t){return t&&this.hasFilteredValue?this.renderedValue:e.prototype.getFilteredValue.call(this,t)},t.prototype.getMultipleSelectedItems=function(){return this.selectedChoices},t.prototype.validateItemValues=function(e){var t=this;if(e.length)return e;var n=this.selectedItemValues;return n&&n.length?(this.defaultSelectedItemValues=[].concat(n),n):this.renderedValue.map(function(e){return t.createItemValue(e)})},t.prototype.getAnswerCorrectIgnoreOrder=function(){return!0},t.prototype.onCheckForErrors=function(t,n,o){if(e.prototype.onCheckForErrors.call(this,t,n,o),!n&&this.checkMinSelectedChoicesUnreached()){var i=new En(this.getLocalizationFormatString("minSelectError",this.minSelectedChoices),this);t.push(i)}},t.prototype.onVisibleChoicesChanged=function(){e.prototype.onVisibleChoicesChanged.call(this),this.updateSelectAllItemProps()},t.prototype.onEnableItemCallBack=function(e){return!this.shouldCheckMaxSelectedChoices()||this.isItemSelected(e)},t.prototype.onAfterRunItemsEnableCondition=function(){this.updateSelectAllItemProps();var e=this.maxSelectedChoices<1||this.isOtherSelected||!this.shouldCheckMaxSelectedChoices();this.otherItem.setIsEnabled(e)},t.prototype.updateSelectAllItemProps=function(){this.showSelectAllItem&&this.selectAllItem.setIsEnabled(this.getSelectAllEnabled())},t.prototype.getSelectAllEnabled=function(){if(!this.showSelectAllItem)return!0;var e=this.getVisibleEnableItems().length,t=this.maxSelectedChoices;return!(t>0&&t<e)&&e>0},t.prototype.getVisibleEnableItems=function(){for(var e=new Array,t=this.visibleChoices,n=0;n<t.length;n++){var o=t[n];!o.isEnabled||this.isBuiltInChoice(o)||o.isExclusive||e.push(o)}return e},t.prototype.shouldCheckMaxSelectedChoices=function(){if(this.maxSelectedChoices<1)return!1;var e=this.value;return(Array.isArray(e)?e.length:0)>=this.maxSelectedChoices},t.prototype.checkMinSelectedChoicesUnreached=function(){if(this.minSelectedChoices<1)return!1;var e=this.value,t=Array.isArray(e)?e.length:0;return(1!==t||!this.isNoneItemsSelected())&&t<this.minSelectedChoices},t.prototype.getItemClassCore=function(t,n){return this.value,n.isSelectAllItem=t===this.selectAllItem,(new _e).append(e.prototype.getItemClassCore.call(this,t,n)).append(this.cssClasses.itemSelectAll,n.isSelectAllItem).toString()},t.prototype.updateValueFromSurvey=function(t,n){e.prototype.updateValueFromSurvey.call(this,t,n),this.invisibleOldValues={}},t.prototype.onSurveyLoad=function(){this.onItemHasCommentChanged(),e.prototype.onSurveyLoad.call(this)},t.prototype.setDefaultUnknownValue=function(t){if(Array.isArray(t))if(this.hasActiveChoices){var n=[],o="";for(i=0;i<t.length;i++)r=this.getRealValue(t[i]),this.hasUnknownValue(r)?o||(o=r,n.push(this.otherItem.value)):n.push(r);this.renderedValue=n,this.otherValue=o}else{for(var i=0;i<t.length;i++){var r=this.getRealValue(t[i]);this.addIntoInvisibleOldValues(r)}this.value=t}else e.prototype.setDefaultUnknownValue.call(this,t)},t.prototype.addIntoInvisibleOldValues=function(e){this.invisibleOldValues[e]=e},t.prototype.hasValueToClearIncorrectValues=function(){return e.prototype.hasValueToClearIncorrectValues.call(this)||!r.isValueEmpty(this.invisibleOldValues)},t.prototype.setNewValue=function(t){this.isChangingValueOnClearIncorrect||(this.invisibleOldValues={}),t=this.valueFromData(t);var n=this.value;t||(t=[]),n||(n=[]),this.isTwoValueEquals(n,t)||(this.removeNoneItemsValues(n,t),e.prototype.setNewValue.call(this,t))},t.prototype.getCommentFromValue=function(e){var t=this.getFirstUnknownIndex(e);return t<0?"":e[t]},t.prototype.getStoreOthersAsComment=function(){return!this.getValuePropertyName()&&e.prototype.getStoreOthersAsComment.call(this)},t.prototype.setOtherValueIntoValue=function(e){var t=this.getFirstUnknownIndex(e);if(t<0)return e;var n=this.otherItem.value,o=this.getValuePropertyName();if(o){var i={};i[o]=n,n=i}return e.splice(t,1,n),e},t.prototype.getFirstUnknownIndex=function(e){if(!Array.isArray(e))return-1;for(var t=0;t<e.length;t++)if(this.hasUnknownValueItem(e[t],!1,!1))return t;return-1},t.prototype.removeNoneItemsValues=function(e,t){if(1!==e.length||1!==t.length||this.getRealValue(e[0])!==this.getRealValue(t[0])){var n=this.getNoneItems().map(function(e){return e.value});if(n.length>0){var o=this.noneIndexInArray(e,n),i=this.noneIndexInArray(t,n);if(o.index>-1)if(o.val===i.val)t.length>0&&t.splice(i.index,1);else{var r=this.noneIndexInArray(t,[o.val]);r.index>-1&&r.index<t.length-1&&t.splice(r.index,1)}else i.index>-1&&t.length>1&&t.splice(0,t.length,this.getValueFromReal(i.val))}}},t.prototype.noneIndexInArray=function(e,t){if(!Array.isArray(e))return{index:-1,val:void 0};for(var n=e.length-1;n>=0;n--){var o=t.indexOf(this.getRealValue(e[n]));if(o>-1)return{index:n,val:t[o]}}return{index:-1,val:void 0}},t.prototype.supportSelectAll=function(){return this.isSupportProperty("showSelectAllItem")},t.prototype.addNonChoicesItems=function(t,n){e.prototype.addNonChoicesItems.call(this,t,n),this.supportSelectAll()&&this.addNonChoiceItem(t,this.selectAllItem,n,this.showSelectAllItem,gn.specialChoicesOrder.selectAllItem)},t.prototype.isBuiltInChoice=function(t){return t===this.selectAllItem||e.prototype.isBuiltInChoice.call(this,t)},t.prototype.isItemInList=function(t){return t==this.selectAllItem?this.showSelectAllItem:e.prototype.isItemInList.call(this,t)},t.prototype.getDisplayValueEmpty=function(){var e=this;return to.getTextOrHtmlByValue(this.visibleChoices.filter(function(t){return t!=e.selectAllItemValue}),void 0)},t.prototype.getDisplayValueCore=function(t,n){if(!Array.isArray(n))return e.prototype.getDisplayValueCore.call(this,t,n);var o=this.getValuePropertyName();return this.getDisplayArrayValue(t,n,function(e){var t=n[e];return o&&t[o]&&(t=t[o]),t})},t.prototype.clearIncorrectValuesCore=function(){this.clearIncorrectAndDisabledValues(!1)},t.prototype.clearDisabledValuesCore=function(){this.clearIncorrectAndDisabledValues(!0)},t.prototype.clearIncorrectAndDisabledValues=function(e){var t=this.value,n=!1,o=this.restoreValuesFromInvisible();if(t||0!=o.length){if(!Array.isArray(t)||0==t.length){if(this.isChangingValueOnClearIncorrect=!0,e||(this.showCommentArea?this.value=null:this.clearValue(!0)),this.isChangingValueOnClearIncorrect=!1,0==o.length)return;t=[]}for(var i=[],r=0;r<t.length;r++){var s=this.getRealValue(t[r]),a=this.canClearValueAnUnknown(s);!e&&!a||e&&!this.isValueDisabled(s)?i.push(t[r]):(n=!0,a&&this.addIntoInvisibleOldValues(t[r]))}for(r=0;r<o.length;r++)i.push(o[r]),n=!0;n&&(this.isChangingValueOnClearIncorrect=!0,0==i.length?this.clearValue(!0):this.value=i,this.isChangingValueOnClearIncorrect=!1)}},t.prototype.restoreValuesFromInvisible=function(){for(var e=[],t=this.visibleChoices,n=0;n<t.length;n++){var o=t[n];if(o!==this.selectAllItem){var i=t[n].value;r.isTwoValueEquals(i,this.invisibleOldValues[i])&&(this.isItemSelected(o)||e.push(i),delete this.invisibleOldValues[i])}}return e},t.prototype.getConditionJson=function(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var o=e.prototype.getConditionJson.call(this,t,n);return"contains"!=t&&"notcontains"!=t||(o.type="radiogroup"),o.maxSelectedChoices=0,o.minSelectedChoices=0,o},t.prototype.isAnswerCorrect=function(){return r.isArrayContainsEqual(this.value,this.correctAnswer)},t.prototype.setDefaultValueWithOthers=function(){this.value=this.renderedValueFromDataCore(this.defaultValue)},t.prototype.getIsItemValue=function(e,t){return!(!e||!Array.isArray(e))&&e.indexOf(t.value)>=0},t.prototype.valueFromData=function(t){if(!t)return t;if(!Array.isArray(t))return[e.prototype.valueFromData.call(this,t)];for(var n=[],o=0;o<t.length;o++){var i=this.getItemByValue(t[o],this.visibleChoices);i?n.push(this.getChoiceValue(i,t[o],!0)):n.push(t[o])}return n},t.prototype.rendredValueFromData=function(t){return t=this.convertValueFromObject(t),e.prototype.rendredValueFromData.call(this,t)},t.prototype.convertValueFromObject=function(e){if(!this.getValuePropertyName()||!Array.isArray(e))return e;for(var t=[],n=0;n<e.length;n++)t.push(this.getRealValue(e[n]));return t},t.prototype.renderedValueFromDataCore=function(e){if(e&&Array.isArray(e)||(e=[]),!this.hasActiveChoices)return e;for(var t=0;t<e.length;t++){if(e[t]==this.otherItem.value)return e;if(this.hasUnknownValueItem(e[t],!0,!1)){this.otherValue=e[t];var n=e.slice();return n[t]=this.otherItem.value,n}}return e},t.prototype.renderedValueToDataCore=function(e){if(!e||!e.length)return e;for(var t=[],n=this.createValueCopy(),o=0;o<e.length;o++){var i=-1,r=e[o];r===this.otherItem.value&&this.needConvertRenderedOtherToDataValue()?(i=this.getFirstUnknownIndex(n),r=this.otherValue,i>-1&&(n[i]=this.getValueFromReal(this.otherValue))):i=this.getItemValIndexByItemValue(r),i>-1?t.push(n[i]):t.push(this.getValueFromReal(r))}return t},t.prototype.valueToData=function(e){if(r.isValueEmpty(e))return e;if(Array.isArray(e)||(e=[e]),!this.getValuePropertyName())return e;for(var t=[],n=0;n<e.length;n++){var o=e[n];t.push("object"==typeof o?o:this.getValueFromReal(o))}return t},t.prototype.selectOtherValueFromComment=function(e){var t=[],n=this.renderedValue;if(Array.isArray(n))for(var o=0;o<n.length;o++)n[o]!==this.otherItem.value&&t.push(n[o]);e&&t.push(this.otherItem.value),this.value=t},Object.defineProperty(t.prototype,"checkBoxSvgPath",{get:function(){return"M5,13l2-2l3,3l7-7l2,2l-9,9L5,13z"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRole",{get:function(){return"group"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRequired",{get:function(){return null},enumerable:!1,configurable:!0}),t}(cr);D.addClass("checkboxitem",[{name:"isExclusive:boolean",locationInTable:"detail"}],function(e){return new is(e)},"choiceitem"),D.addClass("checkbox",[{name:"showSelectAllItem:boolean",alternativeName:"hasSelectAll"},{name:"separateSpecialChoices",visible:!0},{name:"maxSelectedChoices:number",default:0,onSettingValue:function(e,t){if(t<=0)return 0;var n=e.minSelectedChoices;return n>0&&t<n?n:t}},{name:"minSelectedChoices:number",default:0,onSettingValue:function(e,t){if(t<=0)return 0;var n=e.maxSelectedChoices;return n>0&&t>n?n:t}},{name:"selectAllText",serializationProperty:"locSelectAllText",dependsOn:"showSelectAllItem",visibleIf:function(e){return e.showSelectAllItem}},{name:"valuePropertyName",category:"data"},{name:"itemComponent",visible:!1,default:"survey-checkbox-item"}],function(){return new rs("")},"checkboxbase"),D.getProperty("checkbox","choices").type="checkboxitem[]",Io.Instance.registerQuestion("checkbox",function(e){var t=new rs(e);return t.choices=Io.DefaultChoices,t});var ss=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),as=function(e){function t(t){var n=e.call(this,t)||this;return n.onItemClick=function(e){n.isItemDisabled(e)||(n.isExpanded=!1,n.isItemSelected(e)?(n.selectedItems.splice(n.selectedItems.indexOf(e),1)[0],n.onSelectionChanged&&n.onSelectionChanged(e,"removed")):(n.selectedItems.push(e),n.onSelectionChanged&&n.onSelectionChanged(e,"added")))},n.isItemDisabled=function(e){return void 0!==e.enabled&&!e.enabled},n.isItemSelected=function(e){return!!n.allowSelection&&n.selectedItems.filter(function(t){return n.areSameItems(t,e)}).length>0},n.setSelectedItems(t.selectedItems||[]),n}return ss(t,e),t.prototype.updateItemState=function(){var e=this;this.actions.forEach(function(t){var n=e.isItemSelected(t);t.visible=!e.hideSelectedItems||!n})},t.prototype.updateState=function(){this.updateItemState(),this.raiseUpdate({needUpdateIsEmpty:!0})},t.prototype.setSelectedItems=function(e){this.selectedItems=e,this.updateState()},t.prototype.selectFocusedItem=function(){e.prototype.selectFocusedItem.call(this),this.hideSelectedItems&&this.focusNextVisibleItem()},function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([y()],t.prototype,"hideSelectedItems",void 0),t}(tt),ls=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),us=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},cs=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.setHideSelectedItems(t.hideSelectedItems),o.syncFilterStringPlaceholder(),o.closeOnSelect=t.closeOnSelect,o}return ls(t,e),Object.defineProperty(t.prototype,"needRenderInput",{get:function(){return!this.question.isInputReadOnly||!!this.filterStringPlaceholder},enumerable:!1,configurable:!0}),t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.syncFilterStringPlaceholder()},t.prototype.updateListState=function(){this.listModel.updateState(),this.updateCustomItemValue(),this.syncFilterStringPlaceholder()},t.prototype.syncFilterStringPlaceholder=function(){this.getSelectedActions().length||this.question.selectedItems.length||this.listModel.focusedItem?this.filterStringPlaceholder=void 0:this.filterStringPlaceholder=this.question.placeholder},t.prototype.getSelectedActions=function(){return this.listModel.actions.filter(function(e){return e.selected})},t.prototype.getFocusFirstInputSelector=function(){return this.listModel.hideSelectedItems&&Je&&!this.isValueEmpty(this.question.value)?this.itemSelector:e.prototype.getFocusFirstInputSelector.call(this)},t.prototype.getPopupCssClasses=function(){return"sv-multi-select-list"},t.prototype.createListModel=function(){var e=this,t=this.getAvailableItems(),n=this.onSelectionChanged;n||(n=function(t,n){e.resetFilterString(),"selectall"===t.id?e.selectAllItems():"added"===n&&t.value===gn.noneItemValue?e.selectNoneItem():"added"===n?e.selectItem(t.value):"removed"===n&&e.deselectItem(t.value),e.popupRecalculatePosition(!1),e.closeOnSelect&&(e.popupModel.isVisible=!1)});var o={items:t,onSelectionChanged:n,allowSelection:!1,locOwner:this.question,elementId:this.listElementId},i=new as(o);return this.setOnTextSearchCallbackForListModel(i),i.forceShowFilter=this.question.choicesLazyLoadEnabled,i},Object.defineProperty(t.prototype,"shouldResetAfterCancel",{get:function(){return Je&&!this.closeOnSelect},enumerable:!1,configurable:!0}),t.prototype.createPopup=function(){var t=this;e.prototype.createPopup.call(this),this.popupModel.onFooterActionsCreated.add(function(e,n){n.actions.push({id:"sv-dropdown-done-button",title:t.doneButtonCaption,innerCss:"sv-popup__button--done",needSpace:!0,action:function(){t.popupModel.isVisible=!1},enabled:new Ie(function(){return!t.isTwoValueEquals(t.question.renderedValue,t.previousValue)})})}),this.popupModel.onVisibilityChanged.add(function(e,n){t.shouldResetAfterCancel&&n.isVisible&&(t.previousValue=[].concat(t.question.renderedValue||[]))}),this.popupModel.onCancel=function(){t.shouldResetAfterCancel&&(t.question.renderedValue=t.previousValue,t.updateListState())}},t.prototype.selectAllItems=function(){this.question.toggleSelectAll(),this.question.isAllSelected&&this.question.hideSelectedItems&&this.popupModel.hide(),this.updateListState()},t.prototype.selectNoneItem=function(){this.question.renderedValue=[gn.noneItemValue],this.updateListState()},t.prototype.selectItem=function(e){var t;if(this.allowCustomChoices&&e===this.customItemValue.id){var n=this.createCustomItem();n&&(t=n.id)}else t=e;if(null!=t){var o=[].concat(this.question.renderedValue||[]);o.push(t),this.question.renderedValue=o,this.updateListState()}},t.prototype.deselectItem=function(e){var t=[].concat(this.question.renderedValue||[]);t.splice(t.indexOf(e),1),this.question.renderedValue=t,this.applyHintString(),this.updateListState()},t.prototype.clear=function(){e.prototype.clear.call(this),this.syncFilterStringPlaceholder()},t.prototype.onClear=function(t){e.prototype.onClear.call(this,t),this.updateListState()},t.prototype.setHideSelectedItems=function(e){this.listModel.hideSelectedItems=e,this.updateListState()},t.prototype.removeLastSelectedItem=function(){this.deselectItem(this.question.renderedValue[this.question.renderedValue.length-1]),this.popupRecalculatePosition(!1)},t.prototype.inputKeyHandler=function(e){8!==e.keyCode||this.filterString||(this.removeLastSelectedItem(),e.preventDefault(),e.stopPropagation())},t.prototype.setInputStringFromSelectedItem=function(e){this.question.searchEnabled&&(this.inputString=null)},t.prototype.focusItemOnClickAndPopup=function(){},t.prototype.onEscape=function(){},t.prototype.beforeScrollToFocusedItem=function(e){},t.prototype.afterScrollToFocusedItem=function(){var e;(null===(e=this.listModel.focusedItem)||void 0===e?void 0:e.selected)?this.hintString="":this.applyHintString(),this.syncFilterStringPlaceholder()},t.prototype.onPropertyChangedHandler=function(t,n){e.prototype.onPropertyChangedHandler.call(this,t,n),"value"!==n.name&&"renderedValue"!==n.name&&"placeholder"!==n.name||this.syncFilterStringPlaceholder()},us([y({defaultValue:""})],t.prototype,"filterStringPlaceholder",void 0),us([y({defaultValue:!0})],t.prototype,"closeOnSelect",void 0),us([y()],t.prototype,"previousValue",void 0),us([y({localizable:{defaultStr:"tagboxDoneButtonCaption"}})],t.prototype,"doneButtonCaption",void 0),t}(fr),ps=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),hs=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},ds=function(e){function t(t){var n=e.call(this,t)||this;return n.itemDisplayNameMap={},n.onOpened=n.addEvent(),n.createLocalizableString("placeholder",n,!1,!0),n.createLocalizableString("readOnlyText",n,!0),n.deselectAllItemText=n.createLocalizableString("deselectAllText",n.selectAllItem,!0,"deselectAllItemText"),n.registerPropertyChangedHandlers(["value","renderAs","showOtherItem","otherText","placeholder","choices","visibleChoices"],function(){n.updateReadOnlyText()}),n.updateReadOnlyText(),n}return ps(t,e),t.prototype.supportElementsInChoice=function(){return!1},t.prototype.locStrsChanged=function(){var t;e.prototype.locStrsChanged.call(this),this.updateReadOnlyText(),null===(t=this.dropdownListModelValue)||void 0===t||t.locStrsChanged()},t.prototype.updateReadOnlyText=function(){this.readOnlyText=this.displayValue||this.placeholder},t.prototype.onSelectedItemValuesUpdated=function(){e.prototype.onSelectedItemValuesUpdated.call(this),this.updateReadOnlyText()},t.prototype.getDefaultItemComponent=function(){return""},Object.defineProperty(t.prototype,"dropdownListModel",{get:function(){return this.isDisposed||this.dropdownListModelValue||(this.dropdownListModelValue=new cs(this)),this.dropdownListModelValue},set:function(e){this.dropdownListModelValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this.getLocalizableStringText("placeholder")},set:function(e){this.setLocalizableStringText("placeholder",e),this.dropdownListModelValue&&this.dropdownListModel.setInputPlaceholder(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceholder",{get:function(){return this.getLocalizableString("placeholder")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readOnlyText",{get:function(){return this.getLocalizableStringText("readOnlyText")},set:function(e){this.setLocalizableStringText("readOnlyText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locReadOnlyText",{get:function(){return this.getLocalizableString("readOnlyText")},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"tagbox"},t.prototype.supportMultipleComment=function(e){return e===this.otherItem},Object.defineProperty(t.prototype,"a11yInputAriaRole",{get:function(){return"combobox"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popupModel",{get:function(){return this.dropdownListModel.popupModel},enumerable:!1,configurable:!0}),t.prototype.getControlClass=function(){return(new _e).append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlEditable,!this.isDisabledStyle&&!this.isReadOnlyStyle&&!this.isPreviewStyle).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle).toString()},t.prototype.updateCssClasses=function(t,n){e.prototype.updateCssClasses.call(this,t,n),an(t,n)},t.prototype.calcCssClasses=function(t){var n=e.prototype.calcCssClasses.call(this,t);return this.dropdownListModelValue&&this.dropdownListModel.updateCssClasses(n.popup,n.list),n},t.prototype.onOpenedCallBack=function(){this.onOpened.fire(this,{question:this,choices:this.choices})},t.prototype.hasUnknownValue=function(t,n,o,i){return void 0===n&&(n=!1),void 0===o&&(o=!0),void 0===i&&(i=!1),!this.choicesLazyLoadEnabled&&e.prototype.hasUnknownValue.call(this,t,n,o,i)},t.prototype.needConvertRenderedOtherToDataValue=function(){var t,n=null===(t=this.otherValue)||void 0===t?void 0:t.trim();return!!n&&e.prototype.hasUnknownValue.call(this,n,!0,!1)},t.prototype.onVisibleChoicesChanged=function(){e.prototype.onVisibleChoicesChanged.call(this),this.dropdownListModelValue&&this.dropdownListModel.updateItems()},t.prototype.getItemIfChoicesNotContainThisValue=function(t,n){return this.choicesLazyLoadEnabled?this.createItemValue(t,n):e.prototype.getItemIfChoicesNotContainThisValue.call(this,t,n)},t.prototype.validateItemValues=function(e){var t=this;this.updateItemDisplayNameMap();var n=this.renderedValue;if(e.length&&e.length===n.length)return e;var o=this.selectedItemValues;if(!e.length&&o&&o.length)return this.defaultSelectedItemValues=[].concat(o),o;var i=e.map(function(e){return e.value});return n.filter(function(e){return-1===i.indexOf(e)}).forEach(function(n){var o=t.getItemIfChoicesNotContainThisValue(n,t.itemDisplayNameMap[n]);o&&e.push(o)}),e.sort(function(e,t){return n.indexOf(e.value)-n.indexOf(t.value)}),e},t.prototype.updateItemDisplayNameMap=function(){var e=this,t=function(t){e.itemDisplayNameMap[t.value]=t.text};(this.defaultSelectedItemValues||[]).forEach(t),(this.selectedItemValues||[]).forEach(t),this.visibleChoices.forEach(t)},t.prototype.getIsQuestionReady=function(){return e.prototype.getIsQuestionReady.call(this)&&!this.isChoicesLoading},t.prototype.ensureQuestionIsReady=function(){e.prototype.ensureQuestionIsReady.call(this),this.dropdownListModel&&this.choicesLazyLoadEnabled&&this.dropdownListModel.loadQuestionChoices()},t.prototype.onLoadChoicesFromUrl=function(t){this.updateCustomChoices(this.value,t),e.prototype.onLoadChoicesFromUrl.call(this,t)},t.prototype.valueFromData=function(t,n){var o=e.prototype.valueFromData.call(this,t);return this.survey&&this.survey.isSettingData()&&this.updateCustomChoices(o,this.visibleChoices),o},t.prototype.updateCustomChoices=function(e,t){var n;if(null!=e&&e.length>0&&this.allowCustomChoices&&!this.choicesLazyLoadEnabled){this.customChoices.splice(0,this.customChoices.length);var o=[];e.forEach(function(e){t.filter(function(t){return r.isTwoValueEquals(t.id,e,!1,!1)})[0]||o.push(new to(e))}),o.length>0&&(n=this.customChoices).splice.apply(n,function(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}([0,this.customChoices.length],o,!1))}},t.prototype.setIsChoicesLoading=function(e){this.isChoicesLoading=e,this.updateIsReady()},t.prototype.canAddCustomChoices=function(){return this.allowCustomChoices},t.prototype.getFirstInputElementId=function(){return this.inputId+(this.searchEnabled||this.allowCustomChoices?"_0":"")},t.prototype.getInputId=function(){return this.inputId+"_0"},t.prototype.supportEmptyValidation=function(){return!0},t.prototype.onBlurCore=function(t){this.dropdownListModel.onBlur(t),e.prototype.onBlurCore.call(this,t)},t.prototype.onFocusCore=function(t){this.dropdownListModel.onFocus(t),e.prototype.onFocusCore.call(this,t)},t.prototype.allElementsSelected=function(){var t=e.prototype.allElementsSelected.call(this);return this.updateSelectAllItemText(t),t},t.prototype.updateSelectAllItemText=function(e){this.selectAllItem.setLocText(e?this.deselectAllItemText:this.selectAllItemText)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.dropdownListModelValue&&(this.dropdownListModelValue.dispose(),this.dropdownListModelValue=void 0)},t.prototype.clearValue=function(t,n){var o;e.prototype.clearValue.call(this,t,n),null===(o=this.dropdownListModelValue)||void 0===o||o.clear()},Object.defineProperty(t.prototype,"showClearButton",{get:function(){return this.allowClear&&!this.isEmpty()},enumerable:!1,configurable:!0}),hs([y()],t.prototype,"searchMode",void 0),hs([y({onSet:function(e,t){t.dropdownListModelValue&&t.dropdownListModel.setAllowCustomChoices(e)}})],t.prototype,"allowCustomChoices",void 0),hs([y()],t.prototype,"allowClear",void 0),hs([y({onSet:function(e,t){t.dropdownListModelValue&&t.dropdownListModel.setSearchEnabled(e)}})],t.prototype,"searchEnabled",void 0),hs([y({onSet:function(e,t){t.dropdownListModelValue&&t.dropdownListModel.setHideSelectedItems(e)}})],t.prototype,"hideSelectedItems",void 0),hs([y({onSet:function(e,t){t.dropdownListModelValue&&t.dropdownListModel.setChoicesLazyLoadEnabled(e)}})],t.prototype,"choicesLazyLoadEnabled",void 0),hs([y()],t.prototype,"choicesLazyLoadPageSize",void 0),hs([y({getDefaultValue:function(){return gn.tagboxCloseOnSelect}})],t.prototype,"closeOnSelect",void 0),hs([y()],t.prototype,"textWrapEnabled",void 0),t}(rs);D.addClass("tagbox",[{name:"placeholder",serializationProperty:"locPlaceholder"},{name:"allowClear:boolean",default:!0},{name:"searchEnabled:boolean",default:!0},{name:"allowCustomChoices:boolean",default:!1,visibleIf:function(e){return!e.choicesFromQuestion},dependsOn:"choicesFromQuestion"},{name:"textWrapEnabled:boolean",default:!0},{name:"choicesLazyLoadEnabled:boolean",default:!1,visible:!1},{name:"choicesLazyLoadPageSize:number",default:25,visible:!1},{name:"hideSelectedItems:boolean",default:!1},{name:"closeOnSelect:boolean"},{name:"itemComponent",visible:!1,default:""},{name:"searchMode",default:"contains",choices:["contains","startsWith"]}],function(){return new ds("")},"checkbox"),Io.Instance.registerQuestion("tagbox",function(e){var t=new ds(e);return t.choices=Io.DefaultChoices,t});var fs=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),gs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.doDragOver=function(){"imagepicker"!==t.parentElement.getType()&&(t.domAdapter.draggedElementShortcut.querySelector(".svc-item-value-controls__button").style.cursor="grabbing")},t.doBanDropHere=function(){"imagepicker"!==t.parentElement.getType()&&(t.domAdapter.draggedElementShortcut.querySelector(".svc-item-value-controls__button").style.cursor="not-allowed")},t}return fs(t,e),Object.defineProperty(t.prototype,"draggedElementType",{get:function(){return"item-value"},enumerable:!1,configurable:!0}),t.prototype.createDraggedElementShortcut=function(e,t,n){if("imagepicker"===this.parentElement.getType())return this.createImagePickerShortcut(this.draggedElement,e,t,n);var i=o.createElement("div");if(i){i.className="sv-drag-drop-choices-shortcut";var r=t.closest("[data-sv-drop-target-item-value]").cloneNode(!0);r.classList.add("sv-drag-drop-choices-shortcut__content"),r.querySelector(".svc-item-value-controls__drag-icon").style.visibility="visible",r.querySelector(".svc-item-value-controls__remove").style.backgroundColor="transparent",r.classList.remove("svc-item-value--moveup"),r.classList.remove("svc-item-value--movedown"),this.draggedElement.isDragDropMoveDown=!1,this.draggedElement.isDragDropMoveUp=!1,i.appendChild(r);var s=t.getBoundingClientRect();return i.shortcutXOffset=n.clientX-s.x,i.shortcutYOffset=n.clientY-s.y,this.isBottom=null,"function"==typeof this.onShortcutCreated&&this.onShortcutCreated(i),i}},t.prototype.createImagePickerShortcut=function(e,t,n,i){var r=o.createElement("div");if(r){r.classList.add("sv-drag-drop-image-picker-shortcut");var s=n.closest("[data-sv-drop-target-item-value]");this.imagepickerControlsNode=s.querySelector(".svc-image-item-value-controls");var a=s.querySelector(".sd-imagepicker__image-container"),l=s.querySelector(e.imageLink?"img":".sd-imagepicker__no-image").cloneNode(!0);return this.imagepickerControlsNode&&(this.imagepickerControlsNode.style.display="none"),a.style.width=l.width+"px",a.style.height=l.height+"px",l.style.objectFit="cover",l.style.borderRadius="4px",r.appendChild(l),r}},t.prototype.getDropTargetByDataAttributeValue=function(e){return this.parentElement.choices.filter(function(t){return""+t.value==e})[0]},t.prototype.getChoices=function(){var e=this.parentElement;return"ranking"===e.getType()?e.selectToRankEnabled?e.unRankingChoices:e.rankingChoices:e.visibleChoices},t.prototype.isDropTargetValid=function(e,t){var n=this.getChoices();if("imagepicker"!==this.parentElement.getType()){var o=n.indexOf(this.dropTarget),i=n.indexOf(this.draggedElement);if(i>o&&this.dropTarget.isDragDropMoveUp)return this.dropTarget.isDragDropMoveUp=!1,!1;if(i<o&&this.dropTarget.isDragDropMoveDown)return this.dropTarget.isDragDropMoveDown=!1,!1}return-1!==n.indexOf(e)},t.prototype.isDropTargetDoesntChanged=function(e){return this.dropTarget===this.prevDropTarget&&e===this.isBottom},t.prototype.calculateIsBottom=function(e,t){var n=t.getBoundingClientRect();return e>=n.y+n.height/2},t.prototype.afterDragOver=function(t){var n=this.getChoices(),o=n.indexOf(this.dropTarget),i=n.indexOf(this.draggedElement);if(i<o&&!0===this.isBottom)n.splice(i,1),n.splice(o,0,this.draggedElement);else{if(!(i>o&&!1===this.isBottom))return;n.splice(o,1),n.splice(i,0,this.dropTarget)}"imagepicker"!==this.parentElement.getType()&&(i!==o&&(t.classList.remove("svc-item-value--moveup"),t.classList.remove("svc-item-value--movedown"),this.dropTarget.isDragDropMoveDown=!1,this.dropTarget.isDragDropMoveUp=!1),i>o&&(this.dropTarget.isDragDropMoveDown=!0),i<o&&(this.dropTarget.isDragDropMoveUp=!0),e.prototype.ghostPositionChanged.call(this))},t.prototype.doDrop=function(){var e=this.parentElement.choices,t=this.getChoices().filter(function(t){return-1!==e.indexOf(t)}),n=e.indexOf(this.draggedElement),o=t.indexOf(this.draggedElement);return e.splice(n,1),e.splice(o,0,this.draggedElement),this.parentElement},t.prototype.clear=function(){this.parentElement&&this.updateVisibleChoices(this.parentElement),this.imagepickerControlsNode&&(this.imagepickerControlsNode.style.display="flex",this.imagepickerControlsNode=null),e.prototype.clear.call(this)},t.prototype.updateVisibleChoices=function(e){"ranking"===e.getType()?e.updateRankingChoices():e.updateVisibleChoices()},t}(ii),ys=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ms=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDragOverRootNode=!1,t.doDragOver=function(){t.domAdapter.draggedElementShortcut.querySelector(".sv-ranking-item").style.cursor="grabbing"},t.reorderRankedItem=function(e,n,o){if(n!=o){var i=e.rankingChoices,r=i[n];e.isValueSetByUser=!0,i.splice(n,1),i.splice(o,0,r),t.updateDraggedElementShortcut(o+1)}},t.doBanDropHere=function(){t.isDragOverRootNode?t.allowDropHere=!0:(t.domAdapter.draggedElementShortcut.querySelector(".sv-ranking-item").style.cursor="not-allowed",Je&&t.parentElement.updateRankingChoices(!0))},t}return ys(t,e),Object.defineProperty(t.prototype,"draggedElementType",{get:function(){return"ranking-item"},enumerable:!1,configurable:!0}),t.prototype.createDraggedElementShortcut=function(e,t,n){var i=o.createElement("div");if(i){i.className=this.shortcutClass+" sv-ranking-shortcut";var r=t.cloneNode(!0);i.appendChild(r);var s=t.getBoundingClientRect();i.style.left=s.x,i.style.top=s.y,this.domAdapter.rootElement.append(i);var a=i.offsetHeight,l=n.clientY;return l>s.y+a&&(l=s.y+a-10),i.shortcutXOffset=n.clientX-s.x,i.shortcutYOffset=l-s.y,this.parentElement&&this.parentElement.useFullItemSizeForShortcut&&(i.style.width=t.offsetWidth+"px",i.style.height=t.offsetHeight+"px"),i}},Object.defineProperty(t.prototype,"shortcutClass",{get:function(){return(new _e).append(this.parentElement.cssClasses.root).append(this.parentElement.cssClasses.rootMobileMod,Ue).toString()},enumerable:!1,configurable:!0}),t.prototype.getDropTargetByDataAttributeValue=function(e){return this.parentElement.rankingChoices[e]},t.prototype.findDropTargetNodeByDragOverNode=function(t){return this.isDragOverRootNode=this.getIsDragOverRootNode(t),e.prototype.findDropTargetNodeByDragOverNode.call(this,t)},t.prototype.getIsDragOverRootNode=function(e){return"string"==typeof e.className&&-1!==e.className.indexOf("sv-ranking")},t.prototype.isDropTargetValid=function(e,t){return-1!==this.parentElement.rankingChoices.indexOf(e)},t.prototype.calculateIsBottom=function(t,n){return this.dropTarget instanceof to&&this.draggedElement!==this.dropTarget&&e.prototype.calculateIsBottom.call(this,t,n)},t.prototype.getIndices=function(e,t,n){var o=t.indexOf(this.draggedElement),i=n.indexOf(this.dropTarget);return o<0&&this.draggedElement&&(this.draggedElement=to.getItemByValue(t,this.draggedElement.value)||this.draggedElement,o=t.indexOf(this.draggedElement)),-1===i?i=e.value.length:t==n?(!this.isBottom&&o<i&&i--,this.isBottom&&o>i&&i++):t!=n&&this.isBottom&&i++,{fromIndex:o,toIndex:i}},t.prototype.afterDragOver=function(e){var t=this.getIndices(this.parentElement,this.parentElement.rankingChoices,this.parentElement.rankingChoices),n=t.fromIndex,o=t.toIndex;this.reorderRankedItem(this.parentElement,n,o)},t.prototype.updateDraggedElementShortcut=function(e){var t;if(null===(t=this.domAdapter)||void 0===t?void 0:t.draggedElementShortcut){var n=null!==e?e+"":"";this.domAdapter.draggedElementShortcut.querySelector(".sv-ranking-item__index").innerText=n}},t.prototype.ghostPositionChanged=function(){this.parentElement.currentDropTarget=this.draggedElement,e.prototype.ghostPositionChanged.call(this)},t.prototype.doDrop=function(){return this.parentElement.setValue(),this.parentElement},t.prototype.clear=function(){this.parentElement&&(this.parentElement.dropTargetNodeMove=null,this.parentElement.updateRankingChoices(!0)),e.prototype.clear.call(this)},t}(gs),bs=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectToRank=function(e,n,o){var i=[].concat(e.rankingChoices),r=e.unRankingChoices[n];i.splice(o,0,r),t.updateChoices(e,i)},t.unselectFromRank=function(e,n,o){var i=[].concat(e.rankingChoices);i.splice(n,1),t.updateChoices(e,i)},t}return bs(t,e),t.prototype.findDropTargetNodeByDragOverNode=function(t){if("from-container"===t.dataset.ranking||"to-container"===t.dataset.ranking)return t;var n=t.closest("[data-ranking='to-container']"),o=t.closest("[data-ranking='from-container']");return 0===this.parentElement.unRankingChoices.length&&o?o:0===this.parentElement.rankingChoices.length&&n?n:e.prototype.findDropTargetNodeByDragOverNode.call(this,t)},t.prototype.getDropTargetByDataAttributeValue=function(e){return this.parentElement.rankingChoices[e]||this.parentElement.unRankingChoices[e]},t.prototype.getDropTargetByNode=function(t,n){return"to-container"===t.dataset.ranking?"to-container":"from-container"===t.dataset.ranking||t.closest("[data-ranking='from-container']")?"from-container":e.prototype.getDropTargetByNode.call(this,t,n)},t.prototype.isDropTargetValid=function(t,n){return"to-container"===t||"from-container"===t||e.prototype.isDropTargetValid.call(this,t,n)},t.prototype.afterDragOver=function(e){var t=this.parentElement,n=t.rankingChoices,o=t.unRankingChoices;this.isDraggedElementUnranked&&this.isDropTargetRanked?this.doRankBetween(e,o,n,this.selectToRank):this.isDraggedElementRanked&&this.isDropTargetRanked?this.doRankBetween(e,n,n,this.reorderRankedItem):!this.isDraggedElementRanked||this.isDropTargetRanked||this.doRankBetween(e,n,o,this.unselectFromRank)},t.prototype.doRankBetween=function(e,t,n,o){var i=this.parentElement,r=this.getIndices(i,t,n);o(i,r.fromIndex,r.toIndex,e)},Object.defineProperty(t.prototype,"isDraggedElementRanked",{get:function(){return-1!==this.parentElement.rankingChoices.indexOf(this.draggedElement)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDropTargetRanked",{get:function(){return"to-container"===this.dropTarget||-1!==this.parentElement.rankingChoices.indexOf(this.dropTarget)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDraggedElementUnranked",{get:function(){return!this.isDraggedElementRanked},enumerable:!1,configurable:!0}),t.prototype.updateChoices=function(e,t){e.isValueSetByUser=!0,e.rankingChoices=t,e.updateUnRankingChoices(t)},t}(ms),Cs=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ps=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},ws=function(e){function t(t){var n=e.call(this,t)||this;return n.domNode=null,n.onVisibleChoicesChanged=function(){if(e.prototype.onVisibleChoicesChanged.call(n),!n.carryForwardStartUnranked||n.isValueSetByUser||n.selectToRankEnabled||n.defaultValue||(n.value=[]),1===n.visibleChoices.length&&!n.selectToRankEnabled)return n.value=[],n.value.push(n.visibleChoices[0].value),void n.updateRankingChoices();n.isEmpty()||n.selectToRankEnabled||(n.visibleChoices.length>n.value.length&&n.addToValueByVisibleChoices(),n.visibleChoices.length<n.value.length&&n.removeFromValueByVisibleChoices()),n.updateRankingChoices()},n.localeChanged=function(){e.prototype.localeChanged.call(n),n.updateRankingChoicesSync()},n._rankingChoicesAnimation=new Vt(n.getChoicesAnimationOptions(!0),function(e){n._renderedRankingChoices=e},function(){return n.renderedRankingChoices}),n._unRankingChoicesAnimation=new Vt(n.getChoicesAnimationOptions(!1),function(e){n._renderedUnRankingChoices=e},function(){return n.renderedUnRankingChoices}),n.rankingChoices=[],n.unRankingChoices=[],n._renderedRankingChoices=[],n._renderedUnRankingChoices=[],n.handlePointerDown=function(e,t,o){var i=e.target;n.isDragStartNodeValid(i)&&n.isAllowStartDrag(i,t)&&(n.draggedChoiceValue=t.value,n.draggedTargetNode=o,n.dragOrClickHelper.onPointerDown(e))},n.startDrag=function(e){var t=to.getItemByValue(n.visibleChoices,n.draggedChoiceValue);n.dragDropRankingChoices.startDrag(e,t,n,n.draggedTargetNode)},n.handlePointerUp=function(e,t,o){if(n.selectToRankEnabled){var i=e.target;n.isAllowStartDrag(i,t)&&n.handleKeydownSelectToRank(e,t," ",!1)}},n.handleKeydown=function(e,t){if(!n.isReadOnlyAttr&&!n.isDesignMode){var o=e.key,i=n.rankingChoices.indexOf(t);if(n.selectToRankEnabled)return void n.handleKeydownSelectToRank(e,t);if("ArrowUp"===o&&i||"ArrowDown"===o&&i!==n.rankingChoices.length-1){var r="ArrowUp"==o?i-1:i+1;n.dragDropRankingChoices.reorderRankedItem(n,i,r),n.setValueAfterKeydown(r,"",!0,e)}}},n.focusItem=function(e,t){if(n.domNode)if(n.selectToRankEnabled&&t){var o="[data-ranking='"+t+"']";n.domNode.querySelectorAll(o+" ."+n.cssClasses.item)[e].focus()}else n.domNode.querySelectorAll("."+n.cssClasses.item)[e].focus()},n.isValueSetByUser=!1,n.setValue=function(){var e=[];n.rankingChoices.forEach(function(t){e.push(t.value)}),n.value=e,n.isValueSetByUser=!0},n.registerFunctionOnPropertyValueChanged("selectToRankEnabled",function(){n.clearValue(!0),n.setDragDropRankingChoices(),n.updateRankingChoicesSync()}),n.dragOrClickHelper=new li(n.startDrag),n}return Cs(t,e),t.prototype.getType=function(){return"ranking"},t.prototype.supportElementsInChoice=function(){return!1},t.prototype.getItemTabIndex=function(e){if(!this.isDesignMode&&!e.disabled)return 0},t.prototype.supportContainerQueries=function(){return this.selectToRankEnabled},Object.defineProperty(t.prototype,"rootClass",{get:function(){return(new _e).append(this.cssClasses.root).append(this.cssClasses.rootMobileMod,this.isMobileMode()).append(this.cssClasses.rootDisabled,this.isDisabledStyle).append(this.cssClasses.rootReadOnly,this.isReadOnlyStyle).append(this.cssClasses.rootPreview,this.isPreviewStyle).append(this.cssClasses.rootDesignMode,!!this.isDesignMode).append(this.cssClasses.itemOnError,this.hasCssError()).append(this.cssClasses.rootDragHandleAreaIcon,"icon"===gn.rankingDragHandleArea).append(this.cssClasses.rootSelectToRankMod,this.selectToRankEnabled).append(this.cssClasses.rootSelectToRankEmptyValueMod,this.isEmpty()).append(this.cssClasses.rootSelectToRankAlignHorizontal,this.selectToRankEnabled&&"horizontal"===this.renderedSelectToRankAreasLayout).append(this.cssClasses.rootSelectToRankAlignVertical,this.selectToRankEnabled&&"vertical"===this.renderedSelectToRankAreasLayout).append(this.cssClasses.rootSelectToRankSwapAreas,this.selectToRankEnabled&&"horizontal"===this.renderedSelectToRankAreasLayout&&this.selectToRankSwapAreas).toString()},enumerable:!1,configurable:!0}),t.prototype.isItemSelectedCore=function(t){return!this.selectToRankEnabled||e.prototype.isItemSelectedCore.call(this,t)},t.prototype.getItemClassCore=function(t,n){return(new _e).append(e.prototype.getItemClassCore.call(this,t,n)).append(this.cssClasses.itemGhostMod,this.currentDropTarget===t).toString()},t.prototype.getContainerClasses=function(e){var t=!1,n="to"===e,o="from"===e;return n?t=0===this.renderedRankingChoices.length:o&&(t=0===this.renderedUnRankingChoices.length),(new _e).append(this.cssClasses.container).append(this.cssClasses.containerToMode,n).append(this.cssClasses.containerFromMode,o).append(this.cssClasses.containerEmptyMode,t).toString()},t.prototype.isItemCurrentDropTarget=function(e){return this.dragDropRankingChoices.dropTarget===e},Object.defineProperty(t.prototype,"ghostPositionCssClass",{get:function(){return"top"===this.ghostPosition?this.cssClasses.dragDropGhostPositionTop:"bottom"===this.ghostPosition?this.cssClasses.dragDropGhostPositionBottom:""},enumerable:!1,configurable:!0}),t.prototype.getItemIndexClasses=function(e){var t;return t=this.selectToRankEnabled?-1!==this.unRankingChoices.indexOf(e):this.isEmpty(),(new _e).append(this.cssClasses.itemIndex).append(this.cssClasses.itemIndexEmptyMode,t).toString()},t.prototype.getNumberByIndex=function(e){return this.isEmpty()?"":e+1+""},t.prototype.updateRankingChoicesSync=function(){this.blockAnimations(),this.updateRankingChoices(),this.releaseAnimations()},t.prototype.setSurveyImpl=function(t,n){e.prototype.setSurveyImpl.call(this,t,n),this.setDragDropRankingChoices(),this.updateRankingChoicesSync()},t.prototype.isAnswerCorrect=function(){return r.isArraysEqual(this.value,this.correctAnswer,!1)},Object.defineProperty(t.prototype,"requireStrictCompare",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.onSurveyValueChanged=function(t){e.prototype.onSurveyValueChanged.call(this,t),this.isLoadingFromJson||this.updateRankingChoices()},t.prototype.onSurveyLoad=function(){this.blockAnimations(),e.prototype.onSurveyLoad.call(this),this.updateRankingChoices(),this.releaseAnimations()},t.prototype.updateValueFromSurvey=function(t,n){e.prototype.updateValueFromSurvey.call(this,t,n),t&&(this.isValueSetByUser=!0)},t.prototype.addToValueByVisibleChoices=function(){var e=this.value.slice();this.visibleChoices.forEach(function(t){-1===e.indexOf(t.value)&&e.push(t.value)}),this.value=e},t.prototype.removeFromValueByVisibleChoices=function(){for(var e=this.value.slice(),t=this.visibleChoices,n=this.value.length-1;n>=0;n--)to.getItemByValue(t,this.value[n])||e.splice(n,1);this.value=e},t.prototype.getChoicesAnimationOptions=function(e){var t=this;return{getKey:function(e){return e.value},getRerenderEvent:function(){return t.onElementRerendered},isAnimationEnabled:function(){return t.animationAllowed&&!t.isDesignMode&&t.isVisible&&!!t.domNode},getReorderOptions:function(e,n){var o="";return e!==t.currentDropTarget&&(o=n?"sv-dragdrop-movedown":"sv-dragdrop-moveup"),{cssClass:o}},getLeaveOptions:function(n){var o=e?t.renderedRankingChoices:t.renderedUnRankingChoices;return"vertical"==t.renderedSelectToRankAreasLayout&&1==o.length&&o.indexOf(n)>=0?{cssClass:"sv-ranking-item--animate-item-removing-empty"}:{cssClass:"sv-ranking-item--animate-item-removing",onBeforeRunAnimation:function(e){e.style.setProperty("--animation-height",e.offsetHeight+"px")}}},getEnterOptions:function(n){var o=e?t.renderedRankingChoices:t.renderedUnRankingChoices;return"vertical"==t.renderedSelectToRankAreasLayout&&1==o.length&&o.indexOf(n)>=0?{cssClass:"sv-ranking-item--animate-item-adding-empty"}:{cssClass:"sv-ranking-item--animate-item-adding",onBeforeRunAnimation:function(e){e.style.setProperty("--animation-height",e.offsetHeight+"px")}}},getAnimatedElement:function(n){var o,i=t.cssClasses,r="";t.selectToRankEnabled&&(!e&&i.containerFromMode?r=tn(i.containerFromMode):e&&i.containerToMode&&(r=tn(i.containerToMode)));var s=e?t.renderedRankingChoices.indexOf(n):t.renderedUnRankingChoices.indexOf(n);return null===(o=t.domNode)||void 0===o?void 0:o.querySelector("".concat(r," [data-sv-drop-target-ranking-item='").concat(s,"']"))},allowSyncRemovalAddition:!0}},Object.defineProperty(t.prototype,"rankingChoicesAnimation",{get:function(){return this._rankingChoicesAnimation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unRankingChoicesAnimation",{get:function(){return this._unRankingChoicesAnimation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedRankingChoices",{get:function(){return this._renderedRankingChoices},set:function(e){this.rankingChoicesAnimation.sync(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedUnRankingChoices",{get:function(){return this._renderedUnRankingChoices},set:function(e){this.unRankingChoicesAnimation.sync(e)},enumerable:!1,configurable:!0}),t.prototype.updateRenderedRankingChoices=function(){this.renderedRankingChoices=this.rankingChoices},t.prototype.updateRenderedUnRankingChoices=function(){this.renderedUnRankingChoices=this.unRankingChoices},t.prototype.updateRankingChoices=function(e){var t=this;if(void 0===e&&(e=!1),this.selectToRankEnabled)this.updateRankingChoicesSelectToRankMode(e);else{var n=[];e&&(this.rankingChoices=[]),this.isEmpty()?this.rankingChoices=this.visibleChoices:(this.value.forEach(function(e){t.visibleChoices.forEach(function(t){t.value===e&&n.push(t)})}),this.rankingChoices=n)}},t.prototype.updateUnRankingChoices=function(e){var t=[];this.visibleChoices.forEach(function(e){t.push(e)}),e.forEach(function(e){t.forEach(function(n,o){n.value===e.value&&t.splice(o,1)})}),this.unRankingChoices=t},t.prototype.updateRankingChoicesSelectToRankMode=function(e){var t=this,n=[];this.isEmpty()||this.value.forEach(function(e){t.visibleChoices.forEach(function(t){t.value===e&&n.push(t)})}),this.updateUnRankingChoices(n),this.rankingChoices=n},t.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.setDragDropRankingChoices()},t.prototype.setDragDropRankingChoices=function(){this.dragDropRankingChoices=this.createDragDropRankingChoices()},t.prototype.createDragDropRankingChoices=function(){return this.selectToRankEnabled?new vs(this.survey,null,this.longTap):new ms(this.survey,null,this.longTap)},t.prototype.isDragStartNodeValid=function(e){return"icon"!==gn.rankingDragHandleArea||e.classList.contains(this.cssClasses.itemIconHoverMod)},t.prototype.isAllowStartDrag=function(e,t){return!this.isReadOnly&&!this.isDesignMode&&this.canStartDragDueMaxSelectedChoices(e)&&this.canStartDragDueItemEnabled(t)},t.prototype.canStartDragDueMaxSelectedChoices=function(e){return!this.selectToRankEnabled||!e.closest("[data-ranking='from-container']")||this.checkMaxSelectedChoicesUnreached()},t.prototype.canStartDragDueItemEnabled=function(e){return e.enabled},t.prototype.checkMaxSelectedChoicesUnreached=function(){if(this.maxSelectedChoices<1)return!0;var e=this.value;return(Array.isArray(e)?e.length:0)<this.maxSelectedChoices},t.prototype.afterRenderQuestionElement=function(t){this.domNode=t,e.prototype.afterRenderQuestionElement.call(this,t)},t.prototype.beforeDestroyQuestionElement=function(t){this.domNode=void 0,e.prototype.beforeDestroyQuestionElement.call(this,t)},t.prototype.supportSelectAll=function(){return!1},t.prototype.supportOther=function(){return!1},t.prototype.supportNone=function(){return!1},t.prototype.supportRefuse=function(){return!1},t.prototype.supportDontKnow=function(){return!1},t.prototype.handleKeydownSelectToRank=function(e,t,n,o){if(void 0===o&&(o=!0),!this.isDesignMode){var i=e.key;if(n&&(i=n)," "===i||"ArrowUp"===i||"ArrowDown"===i){var r=this.dragDropRankingChoices,s=this.rankingChoices,a=-1!==s.indexOf(t),l=(a?s:this.unRankingChoices).indexOf(t);if(!(l<0)){var u;if(" "===i&&!a){if(!this.checkMaxSelectedChoicesUnreached()||!this.canStartDragDueItemEnabled(t))return;return u=this.value.length,r.selectToRank(this,l,u),void this.setValueAfterKeydown(u,"to-container",o,e)}if(a){if(" "===i)return r.unselectFromRank(this,l),u=this.unRankingChoices.indexOf(t),void this.setValueAfterKeydown(u,"from-container",o,e);var c="ArrowUp"===i?-1:"ArrowDown"===i?1:0;0!==c&&((u=l+c)<0||u>=s.length||(r.reorderRankedItem(this,l,u),this.setValueAfterKeydown(u,"to-container",o,e)))}}}}},t.prototype.setValueAfterKeydown=function(e,t,n,o){var i=this;void 0===n&&(n=!0),this.setValue(),n&&setTimeout(function(){i.focusItem(e,t)},1),o&&o.preventDefault()},t.prototype.getIconHoverCss=function(){return(new _e).append(this.cssClasses.itemIcon).append(this.cssClasses.itemIconHoverMod).toString()},t.prototype.getIconFocusCss=function(){return(new _e).append(this.cssClasses.itemIcon).append(this.cssClasses.itemIconFocusMod).toString()},Object.defineProperty(t.prototype,"longTap",{get:function(){return this.getPropertyValue("longTap")},set:function(e){this.setPropertyValue("longTap",e)},enumerable:!1,configurable:!0}),t.prototype.getDefaultItemComponent=function(){return"sv-ranking-item"},Object.defineProperty(t.prototype,"selectToRankEnabled",{get:function(){return this.getPropertyValue("selectToRankEnabled",!1)},set:function(e){this.setPropertyValue("selectToRankEnabled",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectToRankSwapAreas",{get:function(){return this.getPropertyValue("selectToRankSwapAreas",!1)},set:function(e){this.setPropertyValue("selectToRankSwapAreas",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectToRankAreasLayout",{get:function(){return this.getPropertyValue("selectToRankAreasLayout")},set:function(e){this.setPropertyValue("selectToRankAreasLayout",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedSelectToRankAreasLayout",{get:function(){return this.isMobileMode()?"vertical":this.selectToRankAreasLayout},enumerable:!1,configurable:!0}),t.prototype.isMobileMode=function(){return Ue},Object.defineProperty(t.prototype,"useFullItemSizeForShortcut",{get:function(){return this.getPropertyValue("useFullItemSizeForShortcut")},set:function(e){this.setPropertyValue("useFullItemSizeForShortcut",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dragDropSvgIcon",{get:function(){return this.cssClasses.dragDropSvgIconId||"#icon-drag-24x24"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arrowsSvgIcon",{get:function(){return this.cssClasses.arrowsSvgIconId||"#icon-reorder-24x24"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dashSvgIcon",{get:function(){return this.cssClasses.dashSvgIconId||"#icon-rankingundefined-16x16"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!1},enumerable:!1,configurable:!0}),Ps([b({onSet:function(e,t){return t.updateRenderedRankingChoices()},onRemove:function(e,t,n){return n.updateRenderedRankingChoices()},onPush:function(e,t,n){return n.updateRenderedRankingChoices()}})],t.prototype,"rankingChoices",void 0),Ps([b({onSet:function(e,t){return t.updateRenderedUnRankingChoices()},onRemove:function(e,t,n){return n.updateRenderedUnRankingChoices()},onPush:function(e,t,n){return n.updateRenderedUnRankingChoices()}})],t.prototype,"unRankingChoices",void 0),Ps([b()],t.prototype,"_renderedRankingChoices",void 0),Ps([b()],t.prototype,"_renderedUnRankingChoices",void 0),Ps([y({defaultValue:null})],t.prototype,"currentDropTarget",void 0),Ps([y({defaultValue:!0})],t.prototype,"carryForwardStartUnranked",void 0),Ps([y({localizable:{defaultStr:"selectToRankEmptyRankedAreaText"}})],t.prototype,"selectToRankEmptyRankedAreaText",void 0),Ps([y({localizable:{defaultStr:"selectToRankEmptyUnrankedAreaText"}})],t.prototype,"selectToRankEmptyUnrankedAreaText",void 0),t}(rs);D.addClass("ranking",[{name:"showOtherItem",visible:!1,isSerializable:!1},{name:"otherText",visible:!1,isSerializable:!1},{name:"otherErrorText",visible:!1,isSerializable:!1},{name:"storeOthersAsComment",visible:!1,isSerializable:!1},{name:"showNoneItem",visible:!1,isSerializable:!1},{name:"showRefuseItem",visible:!1,isSerializable:!1},{name:"showDontKnowItem",visible:!1,isSerializable:!1},{name:"noneText",visible:!1,isSerializable:!1},{name:"showSelectAllItem",visible:!1,isSerializable:!1},{name:"selectAllText",visible:!1,isSerializable:!1},{name:"colCount:number",visible:!1,isSerializable:!1},{name:"separateSpecialChoices",visible:!1,isSerializable:!1},{name:"longTap",default:!0,visible:!1,isSerializable:!1},{name:"selectToRankEnabled:switch",default:!1,visible:!0,isSerializable:!0},{name:"selectToRankSwapAreas:switch",default:!1,visible:!1,isSerializable:!0,dependsOn:"selectToRankEnabled"},{name:"selectToRankAreasLayout",default:"horizontal",choices:["horizontal","vertical"],dependsOn:"selectToRankEnabled",visibleIf:function(e){return!!e.selectToRankEnabled},visible:!0,isSerializable:!0},{name:"selectToRankEmptyRankedAreaText:text",serializationProperty:"locSelectToRankEmptyRankedAreaText",category:"general",dependsOn:"selectToRankEnabled",visibleIf:function(e){return!!e.selectToRankEnabled}},{name:"selectToRankEmptyUnrankedAreaText:text",serializationProperty:"locSelectToRankEmptyUnrankedAreaText",category:"general",dependsOn:"selectToRankEnabled",visibleIf:function(e){return!!e.selectToRankEnabled}},{name:"maxSelectedChoices:number",visible:!0,default:0,dependsOn:"selectToRankEnabled",visibleIf:function(e){return!!e.selectToRankEnabled},isSerializable:!0},{name:"minSelectedChoices:number",visible:!0,default:0,dependsOn:"selectToRankEnabled",visibleIf:function(e){return!!e.selectToRankEnabled},isSerializable:!0},{name:"itemComponent",visible:!1,default:"sv-ranking-item"}],function(){return new ws("")},"checkbox"),Io.Instance.registerQuestion("ranking",function(e){var t=new ws(e);return t.choices=Io.DefaultChoices,t});var Vs=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xs=function(e){function t(t){return e.call(this,t)||this}return Vs(t,e),Object.defineProperty(t.prototype,"textAreaModel",{get:function(){return this.textAreaModelValue||(this.textAreaModelValue=new Un(this.getTextAreaOptions())),this.textAreaModelValue},enumerable:!1,configurable:!0}),t.prototype.getTextAreaOptions=function(){var e=this,t=this;return{question:this,id:function(){return e.inputId},propertyNames:["value"],className:function(){return e.className},placeholder:function(){return e.renderedPlaceholder},isDisabledAttr:function(){return e.isDisabledAttr},isReadOnlyAttr:function(){return e.isReadOnlyAttr},autoGrow:function(){return e.renderedAutoGrow},maxLength:function(){return e.getMaxLength()},rows:function(){return e.rows},cols:function(){return e.cols},ariaRequired:function(){return e.a11y_input_ariaRequired},ariaLabel:function(){return e.a11y_input_ariaLabel},ariaLabelledBy:function(){return e.a11y_input_ariaLabelledBy},ariaDescribedBy:function(){return e.a11y_input_ariaDescribedBy},ariaInvalid:function(){return e.a11y_input_ariaInvalid},ariaErrormessage:function(){return e.a11y_input_ariaErrormessage},getTextValue:function(){return e.value},onTextAreaChange:function(e){var n;n=e.target.value,r.isTwoValueEquals(t.value,n,!1,!0,!1)||(t.value=n)},onTextAreaInput:function(t){e.onInput(t)},onTextAreaKeyDown:function(t){e.onKeyDown(t)},onTextAreaFocus:function(t){e.onFocus(t)},onTextAreaBlur:function(t){e.onBlur(t)}}},Object.defineProperty(t.prototype,"rows",{get:function(){return this.getPropertyValue("rows")},set:function(e){this.setPropertyValue("rows",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this.getPropertyValue("cols")},set:function(e){this.setPropertyValue("cols",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"acceptCarriageReturn",{get:function(){return this.getPropertyValue("acceptCarriageReturn")},set:function(e){this.setPropertyValue("acceptCarriageReturn",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoGrow",{get:function(){return this.getPropertyValue("autoGrow")},set:function(e){this.setPropertyValue("autoGrow",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedAutoGrow",{get:function(){var e=this.autoGrow;return void 0===e&&this.survey?this.survey.autoGrowComment:!!e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowResize",{get:function(){return this.getPropertyValue("allowResize")},set:function(e){this.setPropertyValue("allowResize",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedAllowResize",{get:function(){var e=this.allowResize;return void 0===e&&this.survey?this.survey.allowResizeComment:!!e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resizeStyle",{get:function(){return this.renderedAllowResize?"both":"none"},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"comment"},t.prototype.afterRenderQuestionElement=function(t){this.element=(null==t?void 0:t.querySelector("#".concat(this.inputId)))||t,e.prototype.afterRenderQuestionElement.call(this,t)},t.prototype.beforeDestroyQuestionElement=function(t){e.prototype.beforeDestroyQuestionElement.call(this,t),this.element=void 0},t.prototype.onInput=function(e){this.isInputTextUpdate&&(this.value=e.target.value),this.updateRemainingCharacterCounter(e.target.value)},t.prototype.onBlurCore=function(t){e.prototype.onBlurCore.call(this,t)},t.prototype.onKeyDown=function(e){this.onKeyDownPreprocess&&this.onKeyDownPreprocess(e),this.acceptCarriageReturn||"Enter"!==e.key&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation())},t.prototype.setNewValue=function(t){!this.acceptCarriageReturn&&t&&(t=t.replace(new RegExp("(\r\n|\n|\r)","gm"),"")),e.prototype.setNewValue.call(this,t)},t.prototype.getValueSeparator=function(){return"\n"},t.prototype.notifyStateChanged=function(t){e.prototype.notifyStateChanged.call(this,t),this.isCollapsed||this.textAreaModel.updateElement()},Object.defineProperty(t.prototype,"className",{get:function(){return(this.cssClasses?this.getControlClass():"panel-comment-root")||void 0},enumerable:!1,configurable:!0}),t}(Tr);D.addClass("comment",[{name:"maxLength:number",default:-1},{name:"cols:number",default:50,visible:!1,isSerializable:!1},{name:"rows:number",default:4},{name:"placeholder",alternativeName:"placeHolder",serializationProperty:"locPlaceholder"},{name:"textUpdateMode",default:"default",choices:["default","onBlur","onTyping"]},{name:"autoGrow:boolean",defaultFunc:function(){}},{name:"allowResize:boolean",defaultFunc:function(){}},{name:"acceptCarriageReturn:boolean",default:!0,visible:!1}],function(){return new xs("")},"textbase"),Io.Instance.registerQuestion("comment",function(e){return new xs(e)});var Os="environment",Ss="user",Is=function(){function e(){this.canFlipValue=void 0}return e.clear=function(){e.cameraList=void 0,e.cameraIndex=-1},e.setCameraList=function(t){var n=function(e){var t=e.label.toLocaleLowerCase();return t.indexOf(Ss)>-1?Ss:t.indexOf(Os)>-1?Os:t.indexOf("front")>-1?Ss:t.indexOf("back")>-1?Os:""};e.clear(),Array.isArray(t)&&t.length>0&&(e.cameraIndex=-1,t.sort(function(e,o){if(e===o)return 0;if(e.label!==o.label){var i=n(e),r=n(o);if(i!==r){if(i===Ss)return-1;if(r===Ss)return 1;if(i===Os)return-1;if(r===Os)return 1}}return t.indexOf(e)<t.indexOf(o)?-1:1})),e.cameraList=t},e.prototype.hasCamera=function(t){var n=this;void 0===e.cameraList?e.mediaDevicesCallback?e.mediaDevicesCallback(function(e){n.setVideoInputs(e),n.hasCameraCallback(t)}):"undefined"!=typeof navigator&&navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then(function(e){n.setVideoInputs(e),n.hasCameraCallback(t),n.updateCanFlipValue()}).catch(function(o){e.cameraList=null,n.hasCameraCallback(t)}):(e.cameraList=null,this.hasCameraCallback(t)):this.hasCameraCallback(t)},e.prototype.getMediaConstraints=function(t){var n=e.cameraList;if(Array.isArray(n)&&!(n.length<1)){e.cameraIndex<0&&(e.cameraIndex=0);var o=n[e.cameraIndex],i={};return o&&o.deviceId?i.deviceId={exact:o.deviceId}:i.facingMode=e.cameraFacingMode,t&&((null==t?void 0:t.height)&&(i.height={ideal:t.height}),(null==t?void 0:t.width)&&(i.width={ideal:t.width})),{video:i,audio:!1}}},e.prototype.startVideo=function(t,n,o,i){var r=this;if(t){t.style.width="100%",t.style.height="auto",t.style.height="100%",t.style.objectFit="contain";var s=this.getMediaConstraints({width:o,height:i});navigator.mediaDevices.getUserMedia(s).then(function(o){var i;t.srcObject=o,!(null===(i=e.cameraList[e.cameraIndex])||void 0===i?void 0:i.deviceId)&&o.getTracks()[0].getCapabilities().facingMode&&(e.canSwitchFacingMode=!0,r.updateCanFlipValue()),t.play(),n(o)}).catch(function(e){n(void 0)})}else n(void 0)},e.prototype.getImageSize=function(e){return{width:e.videoWidth,height:e.videoHeight}},e.prototype.snap=function(e,t){if(!e)return!1;if(!o.isAvailable())return!1;var n=o.getDocument().createElement("canvas"),i=this.getImageSize(e);n.height=i.height,n.width=i.width;var r=n.getContext("2d");return r.clearRect(0,0,n.width,n.height),r.drawImage(e,0,0,n.width,n.height),n.toBlob(t,"image/png"),!0},e.prototype.updateCanFlipValue=function(){var t=e.cameraList;this.canFlipValue=Array.isArray(t)&&t.length>1||e.canSwitchFacingMode,this.onCanFlipChangedCallback&&this.onCanFlipChangedCallback(this.canFlipValue)},e.prototype.canFlip=function(e){return void 0===this.canFlipValue&&this.updateCanFlipValue(),e&&(this.onCanFlipChangedCallback=e),this.canFlipValue},e.prototype.flip=function(){this.canFlip()&&(e.canSwitchFacingMode?e.cameraFacingMode=e.cameraFacingMode===Ss?"environment":Ss:e.cameraIndex>=e.cameraList.length-1?e.cameraIndex=0:e.cameraIndex++)},e.prototype.hasCameraCallback=function(t){t(Array.isArray(e.cameraList))},e.prototype.setVideoInputs=function(t){var n=[];t.forEach(function(e){"videoinput"===e.kind&&n.push(e)}),e.setCameraList(n.length>0?n:null)},e.cameraIndex=-1,e.cameraFacingMode=Ss,e.canSwitchFacingMode=!1,e}(),Ts=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Rs=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Es=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isUploading=!1,t.onUploadStateChanged=t.addEvent(),t.onStateChanged=t.addEvent(),t}return Ts(t,e),t.prototype.stateChanged=function(e){this.currentState!=e&&("loading"===e&&(this.isUploading=!0),"loaded"===e&&(this.isUploading=!1),"error"===e&&(this.isUploading=!1),this.currentState=e,this.onStateChanged.fire(this,{state:e}),this.onUploadStateChanged.fire(this,{state:e}))},Object.defineProperty(t.prototype,"showLoadingIndicator",{get:function(){return this.isUploading},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storeDataAsText",{get:function(){return this.getPropertyValue("storeDataAsText")},set:function(e){this.setPropertyValue("storeDataAsText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"waitForUpload",{get:function(){return this.getPropertyValue("waitForUpload")},set:function(e){this.setPropertyValue("waitForUpload",e)},enumerable:!1,configurable:!0}),t.prototype.clearValue=function(t,n){this.clearOnDeletingContainer(),e.prototype.clearValue.call(this,t,n)},t.prototype.clearOnDeletingContainer=function(){this.survey&&this.survey.clearFiles(this,this.name,this.value,null,function(){})},t.prototype.onCheckForErrors=function(t,n,o){e.prototype.onCheckForErrors.call(this,t,n,o),this.isUploading&&this.waitForUpload&&t.push(new On(this.getLocalizationString("uploadingFile"),this))},t.prototype.uploadFiles=function(e){var t=this;this.survey&&(this.errors=[],this.stateChanged("loading"),this.survey.uploadFiles(this,this.name,e,function(e,n){Array.isArray(e)&&(t.setValueFromResult(e),Array.isArray(n)&&(n.forEach(function(e){return t.errors.push(new On(e,t))}),t.stateChanged("error"))),"success"===e&&Array.isArray(n)&&t.setValueFromResult(n),"error"===e&&("string"==typeof n&&t.errors.push(new On(n,t)),Array.isArray(n)&&n.length>0&&n.forEach(function(e){return t.errors.push(new On(e,t))}),t.stateChanged("error")),t.stateChanged("loaded")}))},t.prototype.loadPreview=function(e){},t.prototype.onChangeQuestionValue=function(t){e.prototype.onChangeQuestionValue.call(this,t),this.stateChanged(this.isEmpty()?"empty":"loaded")},t.prototype.getIsQuestionReady=function(){return e.prototype.getIsQuestionReady.call(this)&&!this.isFileLoading},Object.defineProperty(t.prototype,"isFileLoading",{get:function(){return this.isFileLoadingValue},set:function(e){this.isFileLoadingValue=e,this.updateIsReady()},enumerable:!1,configurable:!0}),Rs([y()],t.prototype,"isUploading",void 0),Rs([y({defaultValue:"empty"})],t.prototype,"currentState",void 0),t}(Xn),As=function(e){function t(n,o){var i=e.call(this)||this;return i.question=n,i.index=o,i.id=t.getId(),i}return Ts(t,e),t.getId=function(){return"sv_sfp_"+t.pageCounter++},Object.defineProperty(t.prototype,"css",{get:function(){return this.question.cssClasses.page},enumerable:!1,configurable:!0}),t.pageCounter=0,Rs([b({})],t.prototype,"items",void 0),t}(Te),Ds=function(e){function t(t){var n=e.call(this,t)||this;return n.isDragging=!1,n.fileNavigator=new qe,n.canFlipCameraValue=void 0,n.prevPreviewLength=0,n.isClearingFiles=!1,n._renderedPages=[],n.pagesAnimation=new xt(n.getPagesAnimationOptions(),function(e){n._renderedPages=e},function(){return n.renderedPages}),n.calcAvailableItemsCount=function(e,t,n){var o=Math.floor(e/(t+n));return(o+1)*(t+n)-n<=e&&o++,o},n.dragCounter=0,n.onDragEnter=function(e){n.canDragDrop()&&(e.preventDefault(),n.isDragging=!0,n.dragCounter++)},n.onDragOver=function(e){if(!n.canDragDrop())return e.returnValue=!1,!1;e.dataTransfer.dropEffect="copy",e.preventDefault()},n.onDrop=function(e){if(n.canDragDrop()){n.isDragging=!1,n.dragCounter=0,e.preventDefault();var t=e.dataTransfer;n.onChange(t)}},n.onDragLeave=function(e){n.canDragDrop()&&(n.dragCounter--,0===n.dragCounter&&(n.isDragging=!1))},n.doChange=function(e){var t=e.target||e.srcElement;n.onChange(t)},n.doClean=function(){n.needConfirmRemoveFile?Lt({message:n.confirmRemoveAllMessage,funcOnYes:function(){n.clearFilesCore()},locale:n.getLocale(),rootElement:n.survey.rootElement,cssClass:n.cssClasses.confirmDialog}):n.clearFilesCore()},n.doDownloadFileFromContainer=function(e){e.stopPropagation();var t=e.currentTarget;if(t&&t.getElementsByTagName){var n=t.getElementsByTagName("a")[0];null==n||n.click()}},n.doDownloadFile=function(e,t){e.stopPropagation(),jt()&&(e.preventDefault(),_t(t.content,t.name))},n.createLocalizableString("takePhotoCaption",n,!1,!0),n.createLocalizableString("clearCaption",n,!1,!0),n.actionsContainer=new qe,n.actionsContainer.locOwner=n,n.fileIndexAction=new dt({id:"fileIndex",title:n.getFileIndexCaption(),enabled:!1}),n.prevFileAction=new dt({id:"prevPage",iconSize:16,action:function(){n.navigationDirection="left",n.indexToShow=n.previewValue.length&&(n.indexToShow-1+n.pagesCount)%n.pagesCount||0,n.fileIndexAction.title=n.getFileIndexCaption()}}),n.nextFileAction=new dt({id:"nextPage",iconSize:16,action:function(){n.navigationDirection="right",n.indexToShow=n.previewValue.length&&(n.indexToShow+1)%n.pagesCount||0,n.fileIndexAction.title=n.getFileIndexCaption()}}),n.takePictureAction=new dt({iconName:"icon-takepicture",id:"sv-file-take-picture",iconSize:"auto",innerCss:new Ie(function(){return(new _e).append(n.cssClasses.contextButton).append(n.cssClasses.takePictureButton).toString()}),locTitle:n.locTakePhotoCaption,showTitle:!1,action:function(){n.snapPicture()}}),n.closeCameraAction=new dt({iconName:"icon-closecamera",id:"sv-file-close-camera",iconSize:"auto",innerCss:new Ie(function(){return(new _e).append(n.cssClasses.contextButton).append(n.cssClasses.closeCameraButton).toString()}),action:function(){n.stopVideo()}}),n.changeCameraAction=new dt({iconName:"icon-changecamera",id:"sv-file-change-camera",iconSize:"auto",innerCss:new Ie(function(){return(new _e).append(n.cssClasses.contextButton).append(n.cssClasses.changeCameraButton).toString()}),visible:new Ie(function(){return n.canFlipCamera()}),action:function(){n.flipCamera()}}),n.chooseFileAction=new dt({iconName:"icon-choosefile",id:"sv-file-choose-file",iconSize:"auto",data:{question:n},enabledIf:function(){return!n.isInputReadOnly},component:"sv-file-choose-btn"}),n.startCameraAction=new dt({iconName:"icon-takepicture_24x24",id:"sv-file-start-camera",iconSize:"auto",locTitle:n.locTakePhotoCaption,showTitle:new Ie(function(){return!n.isAnswered}),enabledIf:function(){return!n.isInputReadOnly},action:function(){n.startVideo()}}),n.cleanAction=new dt({iconName:"icon-clear",id:"sv-file-clean",iconSize:"auto",locTitle:n.locClearButtonCaption,showTitle:!1,enabledIf:function(){return!n.isInputReadOnly},innerCss:new Ie(function(){return n.cssClasses.removeButton}),action:function(){n.doClean()}}),[n.closeCameraAction,n.changeCameraAction,n.takePictureAction].forEach(function(e){e.cssClasses={}}),n.registerFunctionOnPropertiesValueChanged(["sourceType","currentMode","isAnswered"],function(){n.updateActionsVisibility()}),n.actionsContainer.actions=[n.chooseFileAction,n.startCameraAction,n.cleanAction],n.fileNavigator.actions=[n.prevFileAction,n.fileIndexAction,n.nextFileAction],n}return Ts(t,e),Object.defineProperty(t.prototype,"fileNavigatorVisible",{get:function(){var e=this.showLoadingIndicator,t=this.isPlayingVideo,n=this.containsMultiplyFiles,o=this.pageSize<this.previewValue.length;return!e&&!t&&n&&o},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pagesCount",{get:function(){return Math.ceil(this.previewValue.length/this.pageSize)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actionsContainerVisible",{get:function(){var e=this.showLoadingIndicator,t=this.isPlayingVideo;return!e&&!t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoId",{get:function(){return this.id+"_video"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasVideoUI",{get:function(){return"file"!==this.currentMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFileUI",{get:function(){return"camera"!==this.currentMode},enumerable:!1,configurable:!0}),t.prototype.startVideo=function(){var e=this;"file"===this.currentMode||this.isDesignMode||this.isPlayingVideo||(this.setIsPlayingVideo(!0),setTimeout(function(){e.startVideoInCamera()},0))},Object.defineProperty(t.prototype,"videoHtmlElement",{get:function(){var e;return null===(e=this.rootElement)||void 0===e?void 0:e.querySelector("#".concat(this.videoId))},enumerable:!1,configurable:!0}),t.prototype.startVideoInCamera=function(){var e=this;this.camera.startVideo(this.videoHtmlElement,function(t){e.videoStream=t,t||e.stopVideo()},Wt(this.imageWidth),Wt(this.imageHeight))},t.prototype.stopVideo=function(){this.setIsPlayingVideo(!1),this.closeVideoStream()},t.prototype.snapPicture=function(){var e=this;this.isPlayingVideo&&(this.camera.snap(this.videoHtmlElement,function(t){if(t){var n=new File([t],"snap_picture.png",{type:"image/png"});e.loadFiles([n])}}),this.stopVideo())},t.prototype.canFlipCamera=function(){var e=this;return void 0===this.canFlipCameraValue&&(this.canFlipCameraValue=this.camera.canFlip(function(t){e.canFlipCameraValue=t})),this.canFlipCameraValue},t.prototype.flipCamera=function(){this.canFlipCamera()&&(this.closeVideoStream(),this.camera.flip(),this.startVideoInCamera())},t.prototype.closeVideoStream=function(){this.videoStream&&(this.videoStream.getTracks().forEach(function(e){e.stop()}),this.videoStream=void 0)},t.prototype.onHidingContent=function(){e.prototype.onHidingContent.call(this),this.stopVideo()},t.prototype.updateElementCssCore=function(t){e.prototype.updateElementCssCore.call(this,t),this.prevFileAction.iconName=this.cssClasses.leftIconId,this.nextFileAction.iconName=this.cssClasses.rightIconId,this.updateCurrentMode()},t.prototype.getFileIndexCaption=function(){return this.getLocalizationFormatString("indexText",this.indexToShow+1,this.pagesCount)},t.prototype.updateFileNavigator=function(){this.updatePages(),this.navigationDirection=void 0,this.indexToShow=this.previewValue.length&&(this.indexToShow+this.pagesCount)%this.pagesCount||0,this.fileIndexAction.title=this.getFileIndexCaption()},t.prototype.updateRenderedPages=function(){this.pages&&this.pages[this.indexToShow]&&(this.renderedPages=[this.pages[this.indexToShow]])},t.prototype.updatePages=function(){var e,t=this;this.blockAnimations(),this.pages=[],this.renderedPages=[],this.previewValue.forEach(function(n,o){o%t.pageSize==0&&(e=new As(t,t.pages.length),t.pages.push(e)),e.items.push(n)}),this.releaseAnimations(),this.updateRenderedPages()},t.prototype.previewValueChanged=function(){var e=this;this.navigationDirection=void 0,this.previewValue.length!==this.prevPreviewLength&&(this.previewValue.length>0?this.prevPreviewLength>this.previewValue.length?this.indexToShow>=this.pagesCount&&this.indexToShow>0&&(this.indexToShow=this.pagesCount-1,this.navigationDirection="left-delete"):this.indexToShow=Math.floor(this.prevPreviewLength/this.pageSize):this.indexToShow=0),this.updatePages(),this.fileIndexAction.title=this.getFileIndexCaption(),this.containsMultiplyFiles=this.previewValue.length>1,this.previewValue.length>0&&!this.calculatedGapBetweenItems&&!this.calculatedItemWidth&&setTimeout(function(){e.processResponsiveness(0,e._width)},1),this.prevPreviewLength=this.previewValue.length},t.prototype.getType=function(){return"file"},t.prototype.onChangeQuestionValue=function(t){e.prototype.onChangeQuestionValue.call(this,t),this.isLoadingFromJson||this.loadPreview(t)},Object.defineProperty(t.prototype,"showPreview",{get:function(){return this.getPropertyValue("showPreview")},set:function(e){this.setPropertyValue("showPreview",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowMultiple",{get:function(){return this.getPropertyValue("allowMultiple")},set:function(e){this.setPropertyValue("allowMultiple",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.getPropertyValue("imageHeight")},set:function(e){this.setPropertyValue("imageHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.getPropertyValue("imageWidth")},set:function(e){this.setPropertyValue("imageWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"acceptedTypes",{get:function(){return this.getPropertyValue("acceptedTypes")},set:function(e){this.setPropertyValue("acceptedTypes",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowImagesPreview",{get:function(){return this.getPropertyValue("allowImagesPreview")},set:function(e){this.setPropertyValue("allowImagesPreview",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxSize",{get:function(){return this.getPropertyValue("maxSize")},set:function(e){this.setPropertyValue("maxSize",e)},enumerable:!1,configurable:!0}),t.prototype.chooseFile=function(e){var t=this;if(this.rootElement){var n=this.rootElement.querySelector("#".concat(this.inputId));n&&(e.preventDefault(),e.stopImmediatePropagation(),n&&(this.survey?this.survey.chooseFiles(n,function(e){return t.loadFiles(e)},{element:this,elementType:this.getType(),propertyName:this.name}):n.click()))}},Object.defineProperty(t.prototype,"needConfirmRemoveFile",{get:function(){return this.getPropertyValue("needConfirmRemoveFile")},set:function(e){this.setPropertyValue("needConfirmRemoveFile",e)},enumerable:!1,configurable:!0}),t.prototype.getConfirmRemoveMessage=function(e){return this.confirmRemoveMessage.format(e)},Object.defineProperty(t.prototype,"takePhotoCaption",{get:function(){return this.getLocalizableStringText("takePhotoCaption")},set:function(e){this.setLocalizableStringText("takePhotoCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTakePhotoCaption",{get:function(){return this.getLocalizableString("takePhotoCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearButtonCaption",{get:function(){return this.getLocalizableStringText("clearCaption")},set:function(e){this.setLocalizableStringText("clearCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locClearButtonCaption",{get:function(){return this.getLocalizableString("clearCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRenderedPlaceholder",{get:function(){var e=this;return void 0===this.locRenderedPlaceholderValue&&(this.locRenderedPlaceholderValue=new Ie(function(){var t=e.isReadOnly,n=!e.isDesignMode&&e.hasFileUI||e.isDesignMode&&"camera"!=e.sourceType,o=!e.isDesignMode&&e.hasVideoUI||e.isDesignMode&&"file"!=e.sourceType;return t?e.locNoFileChosenCaption:n&&o?e.locFileOrPhotoPlaceholder:n?e.locFilePlaceholder:e.locPhotoPlaceholder})),this.locRenderedPlaceholderValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentMode",{get:function(){return this.getPropertyValue("currentMode",this.sourceType)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPlayingVideo",{get:function(){return this.getPropertyValue("isPlayingVideo",!1)},enumerable:!1,configurable:!0}),t.prototype.setIsPlayingVideo=function(e){this.setPropertyValue("isPlayingVideo",e)},t.prototype.updateCurrentMode=function(){var e=this;!this.isDesignMode&&this.survey&&("file"!==this.sourceType?this.camera.hasCamera(function(t){e.setPropertyValue("currentMode",t?e.sourceType:"file")}):this.setPropertyValue("currentMode",this.sourceType))},t.prototype.updateActionsVisibility=function(){var e=this.isDesignMode;this.chooseFileAction.visible=!e&&this.hasFileUI||e&&"camera"!==this.sourceType,this.startCameraAction.visible=!e&&this.hasVideoUI||e&&"file"!==this.sourceType,this.cleanAction.visible=!!this.isAnswered},Object.defineProperty(t.prototype,"inputTitle",{get:function(){return this.isUploading?this.loadingFileTitle:this.isEmpty()?this.chooseFileTitle:" "},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"chooseButtonText",{get:function(){return this.isEmpty()||this.allowMultiple?this.chooseButtonCaption:this.replaceButtonCaption},enumerable:!1,configurable:!0}),t.prototype.clear=function(e){var t=this;this.survey&&(this.containsMultiplyFiles=!1,this.isClearingFiles=!0,this.survey.clearFiles(this,this.name,this.value,null,function(n,o){"success"===n&&(t.value=void 0,t.errors=[],e&&e(),t.indexToShow=0,t.fileIndexAction.title=t.getFileIndexCaption(),t.isClearingFiles=!1)}))},Object.defineProperty(t.prototype,"renderCapture",{get:function(){return this.allowCameraAccess?"user":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multipleRendered",{get:function(){return this.allowMultiple?"multiple":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showFileDecorator",{get:function(){var e=this.isPlayingVideo,t=this.showLoadingIndicator;return!e&&!t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showDragAreaPlaceholder",{get:function(){return!this.isAnswered},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showLoadingIndicator",{get:function(){return this.isUploading||this.isClearingFiles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowShowPreview",{get:function(){var e=this.showLoadingIndicator,t=this.isPlayingVideo;return!e&&!t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPreviewContainer",{get:function(){return this.previewValue&&this.previewValue.length>0},enumerable:!1,configurable:!0}),t.prototype.defaultImage=function(e){return!this.canPreviewImage(e)&&!!this.cssClasses.defaultImage},t.prototype.removeFile=function(e){this.removeFileByContent(this.value.filter(function(t){return t.name===e})[0])},t.prototype.removeFileByContent=function(e){var t=this;this.survey&&(this.isClearingFiles=!0,this.survey.clearFiles(this,this.name,this.value,e.name,function(n,o){if("success"===n){var i=t.value;Array.isArray(i)?t.value=i.filter(function(t){return!r.isTwoValueEquals(t,e,!0,!1,!1)}):t.value=void 0,t.isClearingFiles=!1}}))},t.prototype.setValueFromResult=function(e){this.value=(this.value||[]).concat(e.map(function(e){return{name:e.file.name,type:e.file.type,content:e.content}}))},t.prototype.loadFiles=function(e){var t=this;if(this.survey&&(this.errors=[],this.allFilesOk(e))){var n=function(){t.stateChanged("loading");var n=[];t.storeDataAsText?e.forEach(function(o){var i=new FileReader;i.onload=function(r){(n=n.concat([{name:o.name,type:o.type,content:i.result}])).length===e.length&&(t.value=(t.value||[]).concat(n))},i.readAsDataURL(o)}):t.uploadFiles(e)};this.allowMultiple?n():this.clear(n)}},Object.defineProperty(t.prototype,"camera",{get:function(){return this.cameraValue||(this.cameraValue=new Is),this.cameraValue},enumerable:!1,configurable:!0}),t.prototype.canPreviewImage=function(e){return this.allowImagesPreview&&!!e&&this.isFileImage(e)},t.prototype.loadPreview=function(e){var t=this;if((!this.showPreview||this.prevLoadedPreviewValue!==e)&&(this.previewValue.splice(0,this.previewValue.length),this.showPreview&&e)){this.prevLoadedPreviewValue=e;var n=Array.isArray(e)?e:e?[e]:[];this.storeDataAsText?(n.forEach(function(e){var n=e.content||e;t.previewValue.push({name:e.name,type:e.type,content:n})}),this.previewValueChanged()):(this._previewLoader&&this._previewLoader.dispose(),this.isFileLoading=!0,this._previewLoader=new Ls(this,function(e,n){"error"!==e&&(n.forEach(function(e){t.previewValue.push(e)}),t.previewValueChanged()),t.isFileLoading=!1,t._previewLoader.dispose(),t._previewLoader=void 0}),this._previewLoader.load(n))}},t.prototype.allFilesOk=function(e){var t=this,n=this.errors?this.errors.length:0;return(e||[]).forEach(function(e){t.maxSize>0&&e.size>t.maxSize&&t.errors.push(new Pn(t.maxSize,t))}),n===this.errors.length},t.prototype.isFileImage=function(e){if(!e||!e.content||!e.content.substring)return!1;var t=e.content&&e.content.substring(0,10);return"data:image"===(t=t&&t.toLowerCase())||!!e.type&&0===e.type.toLowerCase().indexOf("image/")},t.prototype.getPlainData=function(t){void 0===t&&(t={includeEmpty:!0});var n=e.prototype.getPlainData.call(this,t);if(n&&!this.isEmpty()){n.isNode=!1;var o=Array.isArray(this.value)?this.value:[this.value];n.data=o.map(function(e,t){return{name:t,title:"File",value:e.content&&e.content||e,displayValue:e.name&&e.name||e,getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!1}})}return n},t.prototype.getImageWrapperCss=function(e){return(new _e).append(this.cssClasses.imageWrapper).append(this.cssClasses.imageWrapperDefaultImage,this.defaultImage(e)).toString()},t.prototype.getActionsContainerCss=function(e){return(new _e).append(e.actionsContainer).append(e.actionsContainerAnswered,this.isAnswered).toString()},t.prototype.getRemoveButtonCss=function(){return(new _e).append(this.cssClasses.removeFileButton).append(this.cssClasses.contextButton).toString()},t.prototype.getChooseFileCss=function(){var e=this.isAnswered;return(new _e).append(this.cssClasses.chooseFile).append(this.cssClasses.controlDisabled,this.isReadOnly).append(this.cssClasses.chooseFileAsText,!e).append(this.cssClasses.chooseFileAsTextDisabled,!e&&this.isInputReadOnly).append(this.cssClasses.contextButton,e).append(this.cssClasses.chooseFileAsIcon,e).toString()},t.prototype.getReadOnlyFileCss=function(){return(new _e).append("form-control").append(this.cssClasses.placeholderInput).toString()},Object.defineProperty(t.prototype,"fileRootCss",{get:function(){return(new _e).append(this.cssClasses.root).append(this.cssClasses.rootDisabled,this.isDisabledStyle).append(this.cssClasses.rootReadOnly,this.isReadOnlyStyle).append(this.cssClasses.rootPreview,this.isPreviewStyle).append(this.cssClasses.rootDragging,this.isDragging).append(this.cssClasses.rootAnswered,this.isAnswered).append(this.cssClasses.single,!this.allowMultiple).append(this.cssClasses.singleImage,!this.allowMultiple&&this.isAnswered&&this.canPreviewImage(this.value[0])).append(this.cssClasses.mobile,this.isMobile).toString()},enumerable:!1,configurable:!0}),t.prototype.getFileDecoratorCss=function(){return(new _e).append(this.cssClasses.fileDecorator).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.fileDecoratorDrag,this.isDragging).toString()},t.prototype.onChange=function(e){if(n.isFileReaderAvailable()&&e&&e.files&&!(e.files.length<1)){for(var t=[],o=this.allowMultiple?e.files.length:1,i=0;i<o;i++)t.push(e.files[i]);e.value="",this.loadFiles(t)}},t.prototype.calcCssClasses=function(t){var n=e.prototype.calcCssClasses.call(this,t);return this.actionsContainer.cssClasses=t.actionBar,this.actionsContainer.cssClasses.itemWithTitle=this.actionsContainer.cssClasses.item,this.actionsContainer.cssClasses.item="",this.actionsContainer.cssClasses.itemAsIcon=n.contextButton,this.actionsContainer.containerCss=n.actionsContainer,n},t.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.updateCurrentMode(),this.updateActionsVisibility(),this.loadPreview(this.value)},t.prototype.needResponsiveness=function(){return this.supportResponsiveness()},t.prototype.supportResponsiveness=function(){return!0},t.prototype.getObservedElementSelector=function(){return tn(this.cssClasses.dragArea)},t.prototype.getFileListSelector=function(){return tn(this.cssClasses.fileList)},Object.defineProperty(t.prototype,"renderedPages",{get:function(){return this._renderedPages},set:function(e){this.pagesAnimation.sync(e)},enumerable:!1,configurable:!0}),t.prototype.getPagesAnimationOptions=function(){var e=this;return{getEnterOptions:function(t){var n=e.cssClasses.page;return{cssClass:n?(new _e).append("".concat(n,"--enter-from-left"),"left"==e.navigationDirection||"left-delete"==e.navigationDirection).append("".concat(n,"--enter-from-right"),"right"==e.navigationDirection).toString():""}},getLeaveOptions:function(t){var n=e.cssClasses.page;return{cssClass:n?(new _e).append("".concat(n,"--leave-to-left"),"right"==e.navigationDirection).append("".concat(n,"--leave-to-right"),"left"==e.navigationDirection).toString():""}},getAnimatedElement:function(t){var n;return null===(n=e.rootElement)||void 0===n?void 0:n.querySelector("#".concat(t.id))},isAnimationEnabled:function(){return e.animationAllowed&&!!e.rootElement},getRerenderEvent:function(){return e.onElementRerendered}}},t.prototype.triggerResponsiveness=function(t){t&&(this.calculatedGapBetweenItems=void 0,this.calculatedItemWidth=void 0),e.prototype.triggerResponsiveness.call(this)},t.prototype.processResponsiveness=function(e,t){if(this._width=t,this.rootElement&&(!this.calculatedGapBetweenItems||!this.calculatedItemWidth)&&this.allowMultiple){var n=this.getFileListSelector()?this.rootElement.querySelector(this.getFileListSelector()):void 0;if(n){var i=n.querySelector(tn(this.cssClasses.page));if(i){var r=i.querySelector(tn(this.cssClasses.previewItem));this.calculatedGapBetweenItems=Math.ceil(Number.parseFloat(o.getComputedStyle(i).gap)),r&&(this.calculatedItemWidth=Math.ceil(Number.parseFloat(o.getComputedStyle(r).width)))}}}return!(!this.calculatedGapBetweenItems||!this.calculatedItemWidth||(this.pageSize=Math.max(this.calcAvailableItemsCount(t,this.calculatedItemWidth,this.calculatedGapBetweenItems),1),0))},t.prototype.canDragDrop=function(){return!this.isInputReadOnly&&"camera"!==this.currentMode&&!this.isPlayingVideo},t.prototype.afterRenderQuestionElement=function(t){e.prototype.afterRenderQuestionElement.call(this,t),this.rootElement=t},t.prototype.beforeDestroyQuestionElement=function(t){e.prototype.beforeDestroyQuestionElement.call(this,t),this.stopVideo(),this.rootElement=void 0},t.prototype.clearFilesCore=function(){if(this.rootElement){var e=this.rootElement.querySelectorAll("input")[0];e&&(e.value="")}this.clear()},t.prototype.doRemoveFile=function(e,t){var n=this;t.stopPropagation(),this.needConfirmRemoveFile?Lt({message:this.getConfirmRemoveMessage(e.name),funcOnYes:function(){n.removeFileCore(e)},locale:this.getLocale(),rootElement:this.survey.rootElement,cssClass:this.cssClasses.confirmDialog}):this.removeFileCore(e)},t.prototype.removeFileCore=function(e){var t=this.previewValue.indexOf(e);this.removeFileByContent(-1===t?e:this.value[t])},t.prototype.dispose=function(){this.cameraValue=void 0,this.closeVideoStream(),e.prototype.dispose.call(this)},Rs([y()],t.prototype,"isDragging",void 0),Rs([b({})],t.prototype,"previewValue",void 0),Rs([b({})],t.prototype,"pages",void 0),Rs([y({defaultValue:0,onSet:function(e,t){t.updateRenderedPages()}})],t.prototype,"indexToShow",void 0),Rs([y({defaultValue:1,onSet:function(e,t){t.updateFileNavigator()}})],t.prototype,"pageSize",void 0),Rs([y({defaultValue:!1})],t.prototype,"containsMultiplyFiles",void 0),Rs([y()],t.prototype,"allowCameraAccess",void 0),Rs([y({onSet:function(e,t){t.isLoadingFromJson||t.updateCurrentMode()}})],t.prototype,"sourceType",void 0),Rs([y()],t.prototype,"canFlipCameraValue",void 0),Rs([y({localizable:{defaultStr:"confirmRemoveFile"}})],t.prototype,"confirmRemoveMessage",void 0),Rs([y({localizable:{defaultStr:"confirmRemoveAllFiles"}})],t.prototype,"confirmRemoveAllMessage",void 0),Rs([y({localizable:{defaultStr:"noFileChosen"}})],t.prototype,"noFileChosenCaption",void 0),Rs([y({localizable:{defaultStr:"chooseFileCaption"}})],t.prototype,"chooseButtonCaption",void 0),Rs([y({localizable:{defaultStr:"replaceFileCaption"}})],t.prototype,"replaceButtonCaption",void 0),Rs([y({localizable:{defaultStr:"removeFileCaption"}})],t.prototype,"removeFileCaption",void 0),Rs([y({localizable:{defaultStr:"loadingFile"}})],t.prototype,"loadingFileTitle",void 0),Rs([y({localizable:{defaultStr:"chooseFile"}})],t.prototype,"chooseFileTitle",void 0),Rs([y({localizable:{defaultStr:"fileOrPhotoPlaceholder"}})],t.prototype,"fileOrPhotoPlaceholder",void 0),Rs([y({localizable:{defaultStr:"photoPlaceholder"}})],t.prototype,"photoPlaceholder",void 0),Rs([y({localizable:{defaultStr:"filePlaceholder"}})],t.prototype,"filePlaceholder",void 0),Rs([y()],t.prototype,"locRenderedPlaceholderValue",void 0),Rs([y()],t.prototype,"isClearingFiles",void 0),Rs([b()],t.prototype,"_renderedPages",void 0),t}(Es);D.addClass("file",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},{name:"showPreview:boolean",default:!0,visible:!1},"allowMultiple:boolean",{name:"allowImagesPreview:boolean",default:!0,dependsOn:"showPreview",visibleIf:function(e){return!!e.showPreview}},"imageHeight","imageWidth","acceptedTypes",{name:"storeDataAsText:boolean",default:!0},{name:"waitForUpload:boolean",default:!1},{name:"maxSize:number",default:0},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"validators",visible:!1},{name:"needConfirmRemoveFile:boolean"},{name:"sourceType",choices:["file","camera","file-camera"],default:"file",category:"general",visible:!0},{name:"fileOrPhotoPlaceholder:text",serializationProperty:"locFileOrPhotoPlaceholder",category:"general"},{name:"photoPlaceholder:text",serializationProperty:"locPhotoPlaceholder",category:"general"},{name:"filePlaceholder:text",serializationProperty:"locFilePlaceholder",category:"general"},{name:"allowCameraAccess:switch",category:"general",visible:!1}],function(){return new Ds("")},"question"),Io.Instance.registerQuestion("file",function(e){return new Ds(e)});var Ls=function(){function e(e,t){this.fileQuestion=e,this.callback=t,this.loaded=[]}return e.prototype.load=function(e){var t=this,n=0;this.loaded=new Array(e.length),e.forEach(function(o,i){t.fileQuestion.survey&&t.fileQuestion.survey.downloadFile(t.fileQuestion,t.fileQuestion.name,o,function(r,s){t.fileQuestion&&t.callback&&("error"!==r?(t.loaded[i]={content:s,name:o.name,type:o.type},++n===e.length&&t.callback(r,t.loaded)):t.callback("error",t.loaded))})})},e.prototype.dispose=function(){this.fileQuestion=void 0,this.callback=void 0},e}(),js=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_s=function(e){function t(t){var n=e.call(this,t)||this;return n.createLocalizableString("html",n).onGetTextCallback=function(e){return n.survey&&!n.ignoreHtmlProgressing?n.processHtml(e):e},n}return js(t,e),t.prototype.getType=function(){return"html"},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getProcessedText=function(t){return this.ignoreHtmlProgressing?t:e.prototype.getProcessedText.call(this,t)},Object.defineProperty(t.prototype,"html",{get:function(){return this.getLocalizableStringText("html","")},set:function(e){this.setLocalizableStringText("html",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locHtml",{get:function(){return this.getLocalizableString("html")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processedHtml",{get:function(){return this.processHtml(this.html)},enumerable:!1,configurable:!0}),t.prototype.processHtml=function(e){return this.survey?this.survey.processHtml(e,"html-question"):this.html},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderCssRoot",{get:function(){return(new _e).append(this.cssClasses.root).append(this.cssClasses.nested,this.getIsNested()).toString()||void 0},enumerable:!1,configurable:!0}),t}(es);D.addClass("html",[{name:"html:html",serializationProperty:"locHtml"},{name:"showNumber",visible:!1},{name:"state",visible:!1},{name:"titleLocation",visible:!1},{name:"descriptionLocation",visible:!1},{name:"errorLocation",visible:!1},{name:"indent",visible:!1},{name:"width",visible:!1}],function(){return new _s("")},"nonvalue"),Io.Instance.registerQuestion("html",function(e){return new _s(e)});var Ns=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ms=function(e){function t(t){return e.call(this,t)||this}return Ns(t,e),t.prototype.getDefaultItemComponent=function(){return"survey-radiogroup-item"},t.prototype.getType=function(){return"radiogroup"},t.prototype.supportElementsInChoice=function(){return!0},t.prototype.getFirstInputElementId=function(){return this.inputId+"_0"},Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this.getSingleSelectedItem()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowClear",{get:function(){return this.getPropertyValue("allowClear")},set:function(e){this.setPropertyValue("allowClear",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showClearButton",{get:function(){return this.allowClear},set:function(e){this.allowClear=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canShowClearButton",{get:function(){return this.allowClear&&!this.isReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearButtonCaption",{get:function(){return this.getLocalizationString("clearCaption")},enumerable:!1,configurable:!0}),t.prototype.supportAutoAdvance=function(){var e;return!0===this.isMouseDown&&!(null===(e=this.selectedItem)||void 0===e?void 0:e.showCommentArea)},t.prototype.getConditionJson=function(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var o=e.prototype.getConditionJson.call(this,t,n);return delete o.allowClear,delete o.showClearButton,o},t.prototype.setNewComment=function(t){this.isMouseDown=!0,e.prototype.setNewComment.call(this,t),this.isMouseDown=!1},t.prototype.clickItemHandler=function(e){this.selectItem(e)},t.prototype.isOtherValueUnused=function(){var e;return!(null===(e=this.selectedItem)||void 0===e?void 0:e.showCommentArea)},t.prototype.getDefaultTitleActions=function(){var e=this,t=[];if(!this.isDesignMode){var n=new dt({locTitleName:"clearCaption",id:"sv-clr-btn-".concat(this.id),action:function(){e.clearValueFromUI()},innerCss:this.cssClasses.clearButton,visible:new Ie(function(){return e.canShowClearButton})});t.push(n)}return t},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRole",{get:function(){return"radiogroup"},enumerable:!1,configurable:!0}),t}(cr);D.addClass("radiogroup",[{name:"allowClear:boolean",alternativeName:"showClearButton"},{name:"separateSpecialChoices",visible:!0},{name:"itemComponent",visible:!1,default:"survey-radiogroup-item"}],function(){return new Ms("")},"checkboxbase"),Io.Instance.registerQuestion("radiogroup",function(e){var t=new Ms(e);return t.choices=Io.DefaultChoices,t});var ks=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fs=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};function Bs(e){if("function"==typeof getComputedStyle){var t=getComputedStyle(o.getDocumentElement());return t.getPropertyValue&&t.getPropertyValue(e)}return""}function qs(e,t,n){var i=!!e&&e[t];if(i||(i=Bs(n)),!i)return null;var r=o.createElement("canvas");if(!r)return null;var s=r.getContext("2d");s.fillStyle=i,"#000000"==s.fillStyle&&(s.fillStyle=Bs(n));var a=s.fillStyle;if(a.startsWith("rgba"))return a.substring(5,a.length-1).split(",").map(function(e){return+e.trim()});var l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return l?[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16),1]:null}var Qs=function(e){function t(t,n){void 0===n&&(n=null);var o=e.call(this)||this;return o.itemValue=t,o.locString=n,o.locText.onStringChanged.add(o.onStringChangedCallback.bind(o)),o.onStringChangedCallback(),o}return ks(t,e),t.prototype.onStringChangedCallback=function(){this.text=this.itemValue.text},Object.defineProperty(t.prototype,"value",{get:function(){return this.itemValue.getPropertyValue("value")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locText",{get:function(){return this.locString||this.itemValue.locText},enumerable:!1,configurable:!0}),Fs([y({defaultValue:""})],t.prototype,"highlight",void 0),Fs([y({defaultValue:""})],t.prototype,"text",void 0),Fs([y()],t.prototype,"style",void 0),t}(Te),zs=function(e){function t(t,n,o){var i=e.call(this,t,n)||this;return i.description=o,i}return ks(t,e),t}(to),Hs=function(e){function t(t){var n=e.call(this,t)||this;return n.iCounter=0,n.createItemValues("rateValues"),n.createLocalizableString("ratingOptionsCaption",n,!1,!0),n.registerFunctionOnPropertiesValueChanged(["rateMin","rateMax","minRateDescription","maxRateDescription","rateStep","displayRateDescriptionsAsExtremeItems"],function(){return n.resetRenderedItems()}),n.registerFunctionOnPropertiesValueChanged(["rateType"],function(){n.setIconsToRateValues(),n.resetRenderedItems(),n.updateRateCount()}),n.registerFunctionOnPropertiesValueChanged(["rateValues"],function(){n.setIconsToRateValues(),n.resetRenderedItems()}),n.registerSychProperties(["rateValues"],function(){n.autoGenerate=0==n.rateValues.length,n.setIconsToRateValues(),n.resetRenderedItems()}),n.registerFunctionOnPropertiesValueChanged(["rateColorMode","scaleColorMode"],function(){n.updateColors(n.survey.themeVariables)}),n.registerFunctionOnPropertiesValueChanged(["displayMode"],function(){n.updateRenderAsBasedOnDisplayMode(!0)}),n.registerSychProperties(["autoGenerate"],function(){n.autoGenerate||0!==n.rateValues.length||n.setPropertyValue("rateValues",n.visibleRateValues),n.autoGenerate&&(n.rateValues.splice(0,n.rateValues.length),n.updateRateMax()),n.resetRenderedItems()}),n.createLocalizableString("minRateDescription",n,!0).onStringChanged.add(function(e,t){n.setPropertyValue("hasMinRateDescription",!e.isEmpty)}),n.createLocalizableString("maxRateDescription",n,!0).onStringChanged.add(function(e,t){n.setPropertyValue("hasMaxRateDescription",!e.isEmpty)}),n.createLocalizableString("readOnlyText",n,!0),n.registerPropertyChangedHandlers(["value","renderAs","placeholder","choices","visibleChoices"],function(){n.updateReadOnlyText()}),n.updateReadOnlyText(),n.initPropertyDependencies(),n}return ks(t,e),t.prototype.setIconsToRateValues=function(){var e=this;"smileys"==this.rateType&&this.rateValues.map(function(t){return t.icon=e.getItemSmiley(t)})},t.prototype.locStrsChanged=function(){var t;e.prototype.locStrsChanged.call(this),this.updateReadOnlyText(),null===(t=this.dropdownListModelValue)||void 0===t||t.locStrsChanged()},t.prototype.updateReadOnlyText=function(){this.readOnlyText=this.displayValue||this.placeholder},t.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),void 0!==this.jsonObj.rateMin&&void 0!==this.jsonObj.rateCount&&void 0===this.jsonObj.rateMax&&this.updateRateMax(),void 0!==this.jsonObj.rateMax&&void 0!==this.jsonObj.rateCount&&void 0===this.jsonObj.rateMin&&this.updateRateMin(),void 0===this.jsonObj.autoGenerate&&void 0!==this.jsonObj.rateValues&&(this.autoGenerate=!this.jsonObj.rateValues.length),this.updateRateCount(),this.setIconsToRateValues()},t.prototype.useRateValues=function(){return!!this.rateValues.length&&!this.autoGenerate},t.prototype.updateRateMax=function(){this.rateMax=this.rateMin+this.rateStep*(this.rateCount-1)},t.prototype.updateRateMin=function(){this.rateMin=this.rateMax-this.rateStep*(this.rateCount-1)},t.prototype.updateRateCount=function(){var e=0;(e=this.useRateValues()?this.rateValues.length:Math.trunc((this.rateMax-this.rateMin)/(this.rateStep||1))+1)>10&&"smileys"==this.rateType&&(e=10),this.rateCount=e,this.rateValues.length>e&&this.rateValues.splice(e,this.rateValues.length-e)},t.prototype.initPropertyDependencies=function(){var e=this;this.registerSychProperties(["rateCount"],function(){if(e.useRateValues())if(e.rateCount<e.rateValues.length){if(e.rateCount>=10&&"smileys"==e.rateType)return;e.rateValues.splice(e.rateCount,e.rateValues.length-e.rateCount)}else for(var t=e.rateValues.length;t<e.rateCount;t++)e.rateValues.push(new to(l("choices_Item")+(t+1)));else e.rateMax=e.rateMin+e.rateStep*(e.rateCount-1)}),this.registerSychProperties(["rateMin","rateMax","rateStep","rateValues"],function(){e.updateRateCount()})},Object.defineProperty(t.prototype,"showSelectedItemLocText",{get:function(){return!this.readOnly&&!this.inputHasValue&&!!this.selectedItemLocText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedItemLocText",{get:function(){var e,t=this;return!this.readOnly&&(null===(e=this.visibleRateValues.filter(function(e){return e.value==t.value})[0])||void 0===e?void 0:e.locText)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rateValues",{get:function(){return this.getPropertyValue("rateValues")},set:function(e){this.setPropertyValue("rateValues",e)},enumerable:!1,configurable:!0}),t.prototype.selectItem=function(e){!this.isReadOnly&&e&&(this.value=e.value)},Object.defineProperty(t.prototype,"rateMin",{get:function(){return this.getPropertyValue("rateMin")},set:function(e){this.setPropertyValue("rateMin",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rateMax",{get:function(){return this.getPropertyValue("rateMax")},set:function(e){this.setPropertyValue("rateMax",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rateStep",{get:function(){return this.getPropertyValue("rateStep")},set:function(e){this.setPropertyValue("rateStep",e)},enumerable:!1,configurable:!0}),t.prototype.updateColors=function(e){"monochrome"!==this.colorMode&&o.isAvailable()&&(t.colorsCalculated||(t.badColor=qs(e,"--sjs-special-red","--sd-rating-bad-color"),t.normalColor=qs(e,"--sjs-special-yellow","--sd-rating-normal-color"),t.goodColor=qs(e,"--sjs-special-green","--sd-rating-good-color"),t.badColorLight=qs(e,"--sjs-special-red-light","--sd-rating-bad-color-light"),t.normalColorLight=qs(e,"--sjs-special-yellow-light","--sd-rating-normal-color-light"),t.goodColorLight=qs(e,"--sjs-special-green-light","--sd-rating-good-color-light"),this.colorsCalculated=!0,this.resetRenderedItems()))},t.prototype.getDisplayValueCore=function(t,n){return this.useRateValues?to.getTextOrHtmlByValue(this.visibleRateValues,n)||n:e.prototype.getDisplayValueCore.call(this,t,n)},Object.defineProperty(t.prototype,"visibleRateValues",{get:function(){return this.renderedRateItems.map(function(e){return e.itemValue})},enumerable:!1,configurable:!0}),t.prototype.supportEmptyValidation=function(){return"dropdown"===this.renderAs},t.prototype.itemValuePropertyChanged=function(t,n,o,i){this.useRateValues()||void 0===i||(this.autoGenerate=!1),e.prototype.itemValuePropertyChanged.call(this,t,n,o,i)},t.prototype.runConditionCore=function(t){e.prototype.runConditionCore.call(this,t),this.runRateItesmCondition(t)},t.prototype.runRateItesmCondition=function(e){var t;if(this.useRateValues()){var n=!1;if((null===(t=this.survey)||void 0===t?void 0:t.areInvisibleElementsShowing)?this.rateValues.forEach(function(e){n=n||!e.isVisible,e.setIsVisible(e,!0)}):n=to.runConditionsForItems(this.rateValues,void 0,void 0,e,!0),n&&(this.resetRenderedItems(),!this.isEmpty()&&!this.isReadOnly)){var o=to.getItemByValue(this.rateValues,this.value);o&&!o.isVisible&&this.clearValue()}}},t.prototype.getRateValuesCore=function(){if(!this.useRateValues())return this.createRateValues();var e=new Array;return this.rateValues.forEach(function(t){t.isVisible&&e.push(t)}),e},t.prototype.calculateRateValues=function(){var e=this.getRateValuesCore();return"smileys"==this.rateType&&e.length>10&&(e=e.slice(0,10)),e},t.prototype.calculateRenderedRateItems=function(){var e=this,t=this.calculateRateValues();return t.map(function(n,o){var i=null;return e.displayRateDescriptionsAsExtremeItems&&(0==o&&(i=new Qs(n,e.minRateDescription&&e.locMinRateDescription||n.locText)),o==t.length-1&&(i=new Qs(n,e.maxRateDescription&&e.locMaxRateDescription||n.locText))),i||(i=new Qs(n)),i})},t.prototype.calculateVisibleChoices=function(){var e=this;return this.calculateRateValues().map(function(t,n){return e.getRatingItemValue(t,n)})},t.prototype.resetRenderedItems=function(){if(this.autoGenerate){var e=this.getRateValuesCore();this.rateMax=e[e.length-1].value}Array.isArray(this.getPropertyValueWithoutDefault("renderedRateItems"))&&this.setArrayPropertyDirectly("renderedRateItems",this.calculateRenderedRateItems()),Array.isArray(this.getPropertyValueWithoutDefault("visibleChoices"))&&this.setArrayPropertyDirectly("visibleChoices",this.calculateVisibleChoices)},Object.defineProperty(t.prototype,"renderedRateItems",{get:function(){var e=this;return this.getPropertyValue("renderedRateItems",void 0,function(){return e.calculateRenderedRateItems()})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleChoices",{get:function(){var e=this;return this.getPropertyValue("visibleChoices",void 0,function(){return e.calculateVisibleChoices()})},enumerable:!1,configurable:!0}),t.prototype.createRateValues=function(){for(var e=[],t=this.rateMin,n=this.rateStep;t<=this.rateMax&&e.length<gn.ratingMaximumRateValueCount;){var o=new to(t);o.locOwner=this,o.ownerPropertyName="rateValues",e.push(o),t=this.correctValue(t+n,n)}return e},t.prototype.getRatingItemValue=function(e,t){if(!e)return null;var n,o=e.value;0===t&&(n=this.minRateDescription&&this.locMinRateDescription),t===this.rateCount-1&&(n=this.maxRateDescription&&this.locMaxRateDescription);var i=new zs(o,e.text,n);return i.locOwner=e.locOwner,i.ownerPropertyName=e.ownerPropertyName,i},t.prototype.correctValue=function(e,t){if(!e)return e;if(Math.round(e)==e)return e;for(var n=0;Math.round(t)!=t;)t*=10,n++;return parseFloat(e.toFixed(n))},t.prototype.getType=function(){return"rating"},t.prototype.getFirstInputElementId=function(){return this.inputId+"_0"},t.prototype.getInputId=function(e){return this.inputId+"_"+e},Object.defineProperty(t.prototype,"questionName",{get:function(){return this.name+"_"+this.id},enumerable:!1,configurable:!0}),t.prototype.supportAutoAdvance=function(){return!0===this.isMouseDown||"dropdown"===this.renderAs},t.prototype.supportOther=function(){return!1},t.prototype.getPlainDataCalculatedValue=function(t){var n=e.prototype.getPlainDataCalculatedValue.call(this,t);if(void 0!==n||!this.useRateValues||this.isEmpty())return n;var o=to.getItemByValue(this.visibleRateValues,this.value);return o?o[t]:void 0},Object.defineProperty(t.prototype,"minRateDescription",{get:function(){return this.getLocalizableStringText("minRateDescription")},set:function(e){this.setLocalizableStringText("minRateDescription",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locMinRateDescription",{get:function(){return this.getLocalizableString("minRateDescription")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxRateDescription",{get:function(){return this.getLocalizableStringText("maxRateDescription")},set:function(e){this.setLocalizableStringText("maxRateDescription",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locMaxRateDescription",{get:function(){return this.getLocalizableString("maxRateDescription")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasMinRateDescription",{get:function(){var e=this;return this.getPropertyValue("hasMinRateDescription",void 0,function(){return!!e.minRateDescription})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasMaxRateDescription",{get:function(){var e=this;return this.getPropertyValue("hasMaxRateDescription",void 0,function(){return!!e.maxRateDescription})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasMinLabel",{get:function(){return!this.displayRateDescriptionsAsExtremeItems&&!!this.hasMinRateDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasMaxLabel",{get:function(){return!this.displayRateDescriptionsAsExtremeItems&&!!this.hasMaxRateDescription},enumerable:!1,configurable:!0}),t.prototype.updateRenderAsBasedOnDisplayMode=function(e){this.isDesignMode?(e||"dropdown"===this.renderAs)&&(this.renderAs="default"):(e||"auto"!==this.displayMode)&&(this.renderAs="dropdown"===this.displayMode?"dropdown":"default")},t.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),"dropdown"===this.renderAs&&"auto"===this.displayMode?this.displayMode=this.renderAs:this.updateRenderAsBasedOnDisplayMode()},Object.defineProperty(t.prototype,"rateDisplayMode",{get:function(){return this.rateType},set:function(e){this.rateType=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStar",{get:function(){return"stars"==this.rateType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSmiley",{get:function(){return"smileys"==this.rateType},enumerable:!1,configurable:!0}),t.prototype.getDefaultItemComponent=function(){return"dropdown"==this.renderAs?"sv-rating-dropdown-item":this.isStar?"sv-rating-item-star":this.isSmiley?"sv-rating-item-smiley":"sv-rating-item"},Object.defineProperty(t.prototype,"itemComponent",{get:function(){return this.getPropertyValue("itemComponent",this.getDefaultItemComponent())},set:function(e){this.setPropertyValue("itemComponent",e)},enumerable:!1,configurable:!0}),t.prototype.valueToData=function(e){if(this.useRateValues()){var t=to.getItemByValue(this.rateValues,e);return t?t.value:e}return isNaN(e)?e:parseFloat(e)},t.prototype.setValueFromClick=function(e){if(!this.isReadOnlyAttr){this.value===("string"==typeof this.value?e:parseFloat(e))?this.clearValue(!0):this.value=e;for(var t=0;t<this.renderedRateItems.length;t++)this.renderedRateItems[t].highlight="none"}},t.prototype.onItemMouseIn=function(e){if(!Je&&!this.isReadOnly&&e.itemValue.isEnabled&&!this.isDesignMode){var t=!0,n=null!=this.value;if("stars"===this.rateType)for(var o=0;o<this.renderedRateItems.length;o++)this.renderedRateItems[o].highlight=(t&&!n?"highlighted":!t&&n&&"unhighlighted")||"none",this.renderedRateItems[o]==e&&(t=!1),this.renderedRateItems[o].itemValue.value==this.value&&(n=!1);else e.highlight="highlighted"}},t.prototype.onItemMouseOut=function(e){Je||this.renderedRateItems.forEach(function(e){return e.highlight="none"})},Object.defineProperty(t.prototype,"itemSmallMode",{get:function(){return!this.isSingleInputActive&&this.inMatrixMode&&"small"==gn.matrix.rateSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ratingRootCss",{get:function(){var e=this.hasMaxLabel||this.hasMinLabel;return(new _e).append(this.cssClasses.root).append(this.cssClasses.rootWrappable,"buttons"==this.displayMode||!!this.survey&&this.survey.isDesignMode||"auto"==this.displayMode&&!this.supportResponsiveness()).append(this.cssClasses.rootLabelsTop,e&&"top"==this.rateDescriptionLocation).append(this.cssClasses.rootLabelsBottom,e&&"bottom"==this.rateDescriptionLocation).append(this.cssClasses.rootLabelsDiagonal,e&&"topBottom"==this.rateDescriptionLocation).append(this.cssClasses.itemSmall,this.itemSmallMode&&"labels"!=this.rateType).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemStarIcon",{get:function(){return this.itemSmallMode?"icon-rating-star-small":"icon-rating-star"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemStarIconAlt",{get:function(){return this.itemStarIcon+"-2"},enumerable:!1,configurable:!0}),t.prototype.getItemSmiley=function(e){var t=this.useRateValues()?this.rateValues.length:this.rateMax-this.rateMin+1,n=["very-good","not-good","normal","good","average","excellent","poor","perfect","very-poor","terrible"].slice(0,t),o=["terrible","very-poor","poor","not-good","average","normal","good","very-good","excellent","perfect"].filter(function(e){return-1!=n.indexOf(e)});return this.useRateValues()?o[this.rateValues.indexOf(e)]:o[e.value-this.rateMin]},t.prototype.getItemSmileyIconName=function(e){return"icon-"+this.getItemSmiley(e)},t.prototype.getItemClassByText=function(e,t){return this.getItemClass(e)},t.prototype.getRenderedItemColor=function(e,n){var o=n?t.badColorLight:t.badColor,i=n?t.goodColorLight:t.goodColor,r=(this.rateCount-1)/2,s=n?t.normalColorLight:t.normalColor;if(e<r?i=s:(o=s,e-=r),!o||!i)return null;for(var a=[0,0,0,0],l=0;l<4;l++)a[l]=o[l]+(i[l]-o[l])*e/r,l<3&&(a[l]=Math.trunc(a[l]));return"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},t.prototype.getItemStyle=function(e,t){if(void 0===t&&(t="none"),"monochrome"===this.scaleColorMode&&"default"==this.rateColorMode||this.isPreviewStyle||this.isReadOnlyStyle)return{};var n=this.visibleRateValues.indexOf(e),o=this.getRenderedItemColor(n,!1),i="highlighted"==t&&"colored"===this.scaleColorMode&&this.getRenderedItemColor(n,!0);return i?{"--sd-rating-item-color":o,"--sd-rating-item-color-light":i}:{"--sd-rating-item-color":o}},t.prototype.getItemClass=function(e,t){var n=this;void 0===t&&(t="none");var o=this.value==e.value;this.isStar&&(o=this.useRateValues()?this.rateValues.indexOf(this.rateValues.filter(function(e){return e.value==n.value})[0])>=this.rateValues.indexOf(e):this.value>=e.value);var i=!(this.isReadOnly||!e.isEnabled||this.value==e.value||this.survey&&this.survey.isDesignMode),r=this.renderedRateItems.filter(function(t){return t.itemValue==e})[0],s=this.isStar&&"highlighted"==(null==r?void 0:r.highlight),a=this.isStar&&"unhighlighted"==(null==r?void 0:r.highlight),l=this.cssClasses.item,u=this.cssClasses.selected,c=this.cssClasses.itemDisabled,p=this.cssClasses.itemReadOnly,h=this.cssClasses.itemPreview,d=this.cssClasses.itemHover,f=this.cssClasses.itemOnError,g=null,y=null,m=null,b=null,v=null;this.isStar&&(l=this.cssClasses.itemStar,u=this.cssClasses.itemStarSelected,c=this.cssClasses.itemStarDisabled,p=this.cssClasses.itemStarReadOnly,h=this.cssClasses.itemStarPreview,d=this.cssClasses.itemStarHover,f=this.cssClasses.itemStarOnError,g=this.cssClasses.itemStarHighlighted,y=this.cssClasses.itemStarUnhighlighted,v=this.cssClasses.itemStarSmall),this.isSmiley&&(l=this.cssClasses.itemSmiley,u=this.cssClasses.itemSmileySelected,c=this.cssClasses.itemSmileyDisabled,p=this.cssClasses.itemSmileyReadOnly,h=this.cssClasses.itemSmileyPreview,d=this.cssClasses.itemSmileyHover,f=this.cssClasses.itemSmileyOnError,g=this.cssClasses.itemSmileyHighlighted,m=this.cssClasses.itemSmileyScaleColored,b=this.cssClasses.itemSmileyRateColored,v=this.cssClasses.itemSmileySmall);var C=!this.isStar&&!this.isSmiley&&(!this.displayRateDescriptionsAsExtremeItems||this.useRateValues()&&e!=this.rateValues[0]&&e!=this.rateValues[this.rateValues.length-1]||!this.useRateValues()&&e.value!=this.rateMin&&e.value!=this.rateMax)&&e.locText.calculatedText.length<=2&&Number.isInteger(Number(e.locText.calculatedText)),P={item:e,css:""};return P.css=(new _e).append(l).append(u,o).append(c,this.isDisabledStyle).append(p,this.isReadOnlyStyle).append(h,this.isPreviewStyle).append(d,i).append(g,s).append(m,"colored"==this.scaleColorMode).append(b,"scale"==this.rateColorMode&&o).append(y,a).append(f,this.hasCssError()).append(v,this.itemSmallMode).append(this.cssClasses.itemFixedSize,C).toString(),this.survey&&this.survey.updateChoiceItemCss(this,P),P.css},t.prototype.getControlClass=function(){return this.isEmpty(),(new _e).append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle).toString()},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this.getLocalizableStringText("ratingOptionsCaption")},set:function(e){this.setLocalizableStringText("ratingOptionsCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceholder",{get:function(){return this.getLocalizableString("ratingOptionsCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowClear",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"searchEnabled",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedValue",{get:function(){return this.value},set:function(e){this.value=e},enumerable:!1,configurable:!0}),t.prototype.isItemSelected=function(e){return e.value==this.value},Object.defineProperty(t.prototype,"readOnlyText",{get:function(){return this.getLocalizableStringText("readOnlyText")},set:function(e){this.setLocalizableStringText("readOnlyText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locReadOnlyText",{get:function(){return this.getLocalizableString("readOnlyText")},enumerable:!1,configurable:!0}),t.prototype.needResponsiveWidth=function(){this.getPropertyValue("rateValues");var e=this.getPropertyValue("rateStep"),t=this.getPropertyValue("rateMax"),n=this.getPropertyValue("rateMin");return"dropdown"!=this.displayMode&&!!(this.hasMinRateDescription||this.hasMaxRateDescription||e&&(t-n)/e>9)},t.prototype.supportResponsiveness=function(){return!this.inMatrixMode},t.prototype.onBeforeSetCompactRenderer=function(){this.isDisposed||this.dropdownListModelValue||(this.dropdownListModelValue=new fr(this))},t.prototype.getCompactRenderAs=function(){return"buttons"==this.displayMode?"default":"dropdown"},t.prototype.getDesktopRenderAs=function(){return"dropdown"==this.displayMode?"dropdown":"default"},Object.defineProperty(t.prototype,"dropdownListModel",{get:function(){return"dropdown"===this.renderAs&&this.onBeforeSetCompactRenderer(),this.dropdownListModelValue},set:function(e){this.dropdownListModelValue=e,this.updateElementCss()},enumerable:!1,configurable:!0}),t.prototype.onBlurCore=function(t){var n;null===(n=this.dropdownListModel)||void 0===n||n.onBlur(t),e.prototype.onBlurCore.call(this,t)},t.prototype.updateCssClasses=function(t,n){e.prototype.updateCssClasses.call(this,t,n),an(t,n)},t.prototype.calcCssClasses=function(t){var n=e.prototype.calcCssClasses.call(this,t);return this.dropdownListModelValue&&this.dropdownListModelValue.updateCssClasses(n.popup,n.list),n},t.prototype.themeChanged=function(e){this.colorsCalculated=!1,this.updateColors(e.cssVariables)},t.prototype.setSurveyImpl=function(t,n){e.prototype.setSurveyImpl.call(this,t,n),this.survey&&(this.updateColors(this.survey.themeVariables),this.updateRenderAsBasedOnDisplayMode())},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.dropdownListModelValue&&(this.dropdownListModelValue.dispose(),this.dropdownListModelValue=void 0)},Object.defineProperty(t.prototype,"a11yInputAriaRole",{get:function(){return"dropdown"===this.renderAs?"combobox":null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRole",{get:function(){return"radiogroup"},enumerable:!1,configurable:!0}),t.colorsCalculated=!1,Fs([y({defaultValue:!1})],t.prototype,"inputHasValue",void 0),Fs([y()],t.prototype,"autoGenerate",void 0),Fs([y()],t.prototype,"rateCount",void 0),Fs([y()],t.prototype,"displayRateDescriptionsAsExtremeItems",void 0),Fs([y()],t.prototype,"displayMode",void 0),Fs([y()],t.prototype,"rateDescriptionLocation",void 0),Fs([y()],t.prototype,"rateType",void 0),Fs([y()],t.prototype,"scaleColorMode",void 0),Fs([y()],t.prototype,"rateColorMode",void 0),t}(Xn);D.addClass("rating",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},{name:"rateType",alternativeName:"rateDisplayMode",default:"labels",category:"rateValues",choices:["labels","stars","smileys"],visibleIndex:1},{name:"scaleColorMode",category:"rateValues",default:"monochrome",choices:["monochrome","colored"],visibleIf:function(e){return"smileys"==e.rateType},visibleIndex:2},{name:"rateColorMode",category:"rateValues",default:"scale",choices:["default","scale"],visibleIf:function(e){return"smileys"==e.rateType&&"monochrome"==e.scaleColorMode},visibleIndex:3},{name:"autoGenerate",category:"rateValues",default:!0,choices:[!0,!1],visibleIndex:5},{name:"rateCount:number",default:5,category:"rateValues",visibleIndex:4,onSettingValue:function(e,t){return t<2?2:t>gn.ratingMaximumRateValueCount&&t>e.rateValues.length?gn.ratingMaximumRateValueCount:t>10&&"smileys"==e.rateType?10:t}},{name:"rateValues:itemvalue[]",baseValue:function(){return l("choices_Item")},category:"rateValues",visibleIf:function(e){return!e.autoGenerate},visibleIndex:6},{name:"rateMin:number",default:1,onSettingValue:function(e,t){return t>e.rateMax-e.rateStep?e.rateMax-e.rateStep:t},visibleIf:function(e){return!!e.autoGenerate},visibleIndex:7},{name:"rateMax:number",default:5,onSettingValue:function(e,t){return t<e.rateMin+e.rateStep?e.rateMin+e.rateStep:t},visibleIf:function(e){return!!e.autoGenerate},visibleIndex:8},{name:"rateStep:number",default:1,minValue:.1,onSettingValue:function(e,t){return t<=0&&(t=1),t>e.rateMax-e.rateMin&&(t=e.rateMax-e.rateMin),t},visibleIf:function(e){return!!e.autoGenerate},visibleIndex:9},{name:"minRateDescription",alternativeName:"mininumRateDescription",serializationProperty:"locMinRateDescription",visibleIndex:18},{name:"maxRateDescription",alternativeName:"maximumRateDescription",serializationProperty:"locMaxRateDescription",visibleIndex:19},{name:"displayRateDescriptionsAsExtremeItems:boolean",default:!1,visibleIndex:21,visibleIf:function(e){return"labels"==e.rateType}},{name:"rateDescriptionLocation",default:"leftRight",choices:["leftRight","top","bottom","topBottom"],visibleIndex:20},{name:"displayMode",default:"auto",choices:["auto","buttons","dropdown"],visibleIndex:0},{name:"itemComponent",visible:!1,defaultFunc:function(e){return e?(e.getOriginalObj&&(e=e.getOriginalObj()),e.getDefaultItemComponent()):"sv-rating-item"}}],function(){return new Hs("")},"question"),Io.Instance.registerQuestion("rating",function(e){return new Hs(e)});var Us=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ws=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Gs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Us(t,e),t.prototype.getBaseType=function(){return"sliderlabel"},t.prototype.onGetText=function(t){return t||!this.locOwner?e.prototype.onGetText.call(this,t):this.locOwner.getTextByItem(this)},t.prototype.getCorrectValue=function(e){return"number"==typeof e?e:r.isNumber(e)?parseFloat(e.toString()):this.value||0},Object.defineProperty(t.prototype,"showValue",{get:function(){return this.getPropertyValue("showValue",!1)},set:function(e){this.setPropertyValue("showValue",e)},enumerable:!1,configurable:!0}),t}(to),Js=function(e){function t(t){var n=e.call(this,t)||this;return n.getThumbContainerCss=function(e){return(new _e).append(n.cssClasses.thumbContainer).append(n.cssClasses.thumbContainerIndeterminateMode,!!n.isIndeterminate).append(n.cssClasses.thumbContainerFocusedMode,e===n.focusedThumb).toString()},n.getLabelCss=function(e){return(new _e).append(n.cssClasses.label).append(n.cssClasses.labelLongMod,e.renderedHtml.length>10).toString()},n.isIndeterminate=!1,n.getTrackPercentLeft=function(){var e=n,t=e.renderedValue,o=e.sliderType,i=e.renderedMin;return"single"===o?t[0]>0?n.getPercent(Math.max(0,i)):n.getPercent(t[0]):n.getPercent(Math.min.apply(Math,t))},n.getTrackPercentRight=function(){var e=n,t=e.renderedValue,o=e.sliderType,i=e.renderedMax;return 100-("single"===o?t[0]>0?n.getPercent(t[0]):n.getPercent(Math.min(0,i)):n.getPercent(Math.max.apply(Math,t)))},n.getPercent=function(e){var t=n,o=t.renderedMax,i=t.renderedMin,r=o-i;return Math.abs(e-i)/r*100},n.ensureMaxRangeBorders=function(e,t){var o=n,i=o.renderedMaxRangeLength,r=o.renderedValue.slice(),s=r[t],a=!1;r[t]=e;for(var l=0;l<r.length-1;l++)if(Math.abs(r[l]-r[l+1])>i){a=!0;break}return a?s:e},n.ensureMinRangeBorders=function(e,t){var o=n,i=o.renderedMinRangeLength,r=o.renderedValue,s=o.allowSwap,a=o.renderedMin,l=o.renderedMax,u=r.slice(),c=u[t],p=!1;u[t]=e;for(var h=0;h<u.length-1;h++)if(Math.abs(u[h]-u[h+1])<i){p=!0;break}if(!s){var d=t>0?u[t-1]:a,f=t<u.length-1?u[t+1]:l;(e<=d||e>=f)&&(p=!0)}return p?c:e},n.getClosestToStepValue=function(e){var t=n,o=t.step,i=t.renderedMin,r=t.renderedMax,s=i+Math.trunc((r-i)/o)*o,a=i+Math.round((e-i)/o)*o;return Math.min(s,a)},n.handleRangeOnChange=function(e){if(n.isRangeMoving&&n.isAllowToChange()){var t=n,o=t.renderedMax,i=t.renderedMin,r=t.renderedValue,s=t.ensureMaxRangeBorders,a=t.ensureMinRangeBorders,l=e.target,u=n.oldInputValue-+l.value;n.oldInputValue=+l.value;for(var c=!1,p=0;p<r.length;p++){var h=r[p]-u;(h=a(h=s(h,p),p))<=o&&h>=i?r.splice(p,1,h):c=!0}c&&(c=!1)}},n.prepareInputRangeForMoving=function(e,t){var o=n,i=o.renderedMax,r=o.renderedMin;n.isRangeMoving=!0,n.animatedThumb=!1;var s=e.target;s.style.setProperty("--sjs-range-slider-range-input-thumb-width","20px"),s.style.setProperty("--sjs-range-slider-range-input-thumb-left","initial"),s.style.setProperty("--sjs-range-slider-range-input-thumb-position","static");var a=(e.clientX-t.getBoundingClientRect().x)/t.getBoundingClientRect().width*100/100*(i-r)+r;s.value=""+a,n.oldInputValue=a},n.handleRangePointerDown=function(e,t){var o=n,i=o.dragOrClickHelper,r=o.allowDragRange,s=o.step,a=o.prepareInputRangeForMoving,l=e.target;s&&(l.step="0.1"),r&&(i.dragHandler=function(){a.call(n,e,t)},i.onPointerDown(e))},n.handleRangePointerUp=function(e,t){var o=n,i=o.step,r=o.renderedValue,s=o.getClosestToStepValue,a=e.target;if(n.isRangeMoving){if(n.refreshInputRange(),n.isRangeMoving=!1,i){a.step=""+i;for(var l=0;l<r.length;l++)r[l]=s(r[l]);n.setSliderValue(r)}}else a.style.setProperty("--sjs-range-slider-range-input-thumb-width","0px"),a.style.setProperty("--sjs-range-slider-range-input-thumb-left","initial"),a.style.setProperty("--sjs-range-slider-range-input-thumb-position","static"),n.setValueByClickOnPath(e,t)},n.refreshInputRange=function(e){var t=n,i=t.allowDragRange,r=t.renderedValue,s=t.getPercent;if(i){var a=e||o.getDocument().getElementById("sjs-slider-input-range-input");if(a){var l=s(r[r.length-1]),u=s(r[0]),c=l-u;a.style.setProperty("--sjs-range-slider-range-input-thumb-width","calc(".concat(c,"% - 20px - 20px)")),a.style.setProperty("--sjs-range-slider-range-input-thumb-left","calc(".concat(u,"% + 20px)")),a.style.setProperty("--sjs-range-slider-range-input-thumb-position","absolute")}}},n.setSliderValue=function(e){if(n.isAllowToChange()){var t=void 0;"single"===n.sliderType?t=Array.isArray(e)?e[0]:e:"range"===n.sliderType&&(t=e),n.value=t,n.resetPropertyValue("renderedValue")}},n.setValueByClickOnPath=function(e,t){var i=n,r=i.renderedMax,s=i.renderedMin,a="rtl"==o.getComputedStyle(o.getBody()).direction,l=(e.clientX-t.getBoundingClientRect().x)/t.getBoundingClientRect().width*100;a&&(l=100-l);var u=l/100*(r-s)+s;n.setValueByClick(u,e.target)},n.setValueByClick=function(e,t){var o=n,i=o.step,r=o.getClosestToStepValue,s=o.ensureMaxRangeBorders,a=o.ensureMinRangeBorders,l=o.renderedValue,u=o.refreshInputRange,c=o.setSliderValue;n.animatedThumb=!0;for(var p=l.slice(),h=0,d=0;d<p.length;d++){var f=Math.abs(p[h]-e);Math.abs(p[d]-e)<f&&(h=d)}if(p.length>1&&(e=a(e=s(e,h),h)),p[h]=e,i){var g=l.slice();for(d=0;d<p.length;d++){var y=g[d]/i,m=p[d]/i;Math.round(m)===y&&(m>y?p[d]=p[d]+i:m<y&&(p[d]=p[d]-i)),p[d]=r(p[d])}}c(p),u()},n.handleOnChange=function(e,t){if(n.isAllowToChange()&&null!==n.oldValue){var o=n,i=o.allowSwap,r=o.ensureMaxRangeBorders,s=o.ensureMinRangeBorders,a=o.renderedValue,l=+e.target.value;a.length>1&&(l=r(l,t),i||(l=s(l,t))),a.splice(t,1,l)}},n.handlePointerDown=function(e){var t=n,i=t.step,r=t.renderedValue;if(i)for(var s=0;s<r.length;s++)o.getDocument().getElementById("sjs-slider-input-".concat(s)).step=.1;n.oldValue=n.renderedValue,n.animatedThumb=!1},n.handlePointerUp=function(e){e.stopPropagation();var t=n,i=t.step,r=t.focusedThumb,s=t.renderedValue,a=t.allowSwap,l=t.renderedMinRangeLength,u=t.getClosestToStepValue,c=t.refreshInputRange,p=t.setSliderValue,h=s[r];if(e.target,s.sort(function(e,t){return e-t}),n.focusedThumb=s.indexOf(h),i)for(var d=0;d<s.length;d++)s[d]=u(s[d]),o.getDocument().getElementById("sjs-slider-input-".concat(d)).step=i;if(a)for(d=0;d<s.length-1;d++)if(Math.abs(s[d]-s[d+1])<l){n.setPropertyValue("renderedValue",n.oldValue);break}p(s),c(),n.oldValue=null},n.handleKeyDown=function(e){n.oldValue=n.renderedValue,n.animatedThumb=!0},n.handleKeyUp=function(e){n.oldValue=null,n.setSliderValue(n.renderedValue)},n.handleOnFocus=function(e){n.focusedThumb=e},n.handleOnBlur=function(){n.focusedThumb=null},n.handleLabelPointerUp=function(e,t){var o=e.target;isNaN(t)||n.setValueByClick(t,o)},n.getTooltipValue=function(e){var t=n,o=t.step,i=t.getClosestToStepValue,r=t.renderedValue,s=t.tooltipFormat,a=t.formatNumber,l=r[e];return l=a(l=o?i(l):l),s.replace("{0}",""+l)},n.getLabelText=function(e){var t=n,o=t.step,i=t.renderedMax,r=t.renderedMin,s=t.renderedLabelCount,a=t.formatNumber,l=s-1,u=0===l?0:e*(i-r)/l;return o%1!=0?""+a(u+r):""+Math.round(u+r)},n.getLabelPosition=function(e){var t=n,o=t.max,i=t.min,r=t.renderedLabelCount,s=(t.customLabels,r-1);return 0===s?0:i+e*(o-i)/s},n.isRangeMoving=!1,n.oldInputValue=null,n.oldValue=null,n.calcRenderedValue=function(){var e,t=n,o=t.renderedMax,i=t.renderedMin,r=t.renderedMaxRangeLength,s=t.getClosestToStepValue;if("single"===t.sliderType)return null==(e=n.ensureValueRespectMinMax(n.value))||0===e.length?(n.isIndeterminate=!0,n.isNegativeScale?[Math.min(o,0)]:[i]):Array.isArray(e)?[e[0]]:[e];if(0===(e=Array.isArray(n.value)?n.value.slice():[]).length){var a=o-i;if(n.isIndeterminate=!0,Math.abs(a)>r){var l=(a-r)/2;return[s(i+l),s(o-l)]}return[i,o]}return e.map(function(e){return n.ensureValueRespectMinMax(e)})},n.createItemValues("customLabels"),n.dragOrClickHelper=new li(null,!1),n.initPropertyDependencies(),n}return Us(t,e),Object.defineProperty(t.prototype,"step",{get:function(){return this.getPropertyValue("step")},set:function(e){this.setPropertyValue("step",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelCount",{get:function(){return this.customLabels.length>0?this.customLabels.length:this.tickSize?Math.round(100/this.tickSize)+2:this.getPropertyValue("labelCount")},set:function(e){this.setPropertyValue("labelCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"customLabels",{get:function(){return this.getPropertyValue("customLabels")},set:function(e){this.setPropertyValue("customLabels",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowSwap",{get:function(){return!this.minRangeLength&&this.getPropertyValue("allowSwap",!0)},set:function(e){this.setPropertyValue("allowSwap",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generatedLabels",{get:function(){var e=this;return this.getPropertyValue("generatedLabels",void 0,function(){return e.calcGeneratedLabels()})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedValue",{get:function(){var e=this;return this.getPropertyValue("renderedValue",void 0,function(){return e.calcRenderedValue()})},set:function(e){this.setPropertyValue("renderedValue",e)},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"slider"},Object.defineProperty(t.prototype,"rootCss",{get:function(){return(new _e).append(this.cssClasses.root).append(this.cssClasses.rootSingleMode,"single"===this.sliderType).append(this.cssClasses.rootNegativeScaleMode,!!this.isNegativeScale).append(this.cssClasses.rootDesignMode,!!this.isDesignMode).append(this.cssClasses.rootAnimatedThumbMode,!!this.animatedThumb).append(this.cssClasses.rootTooltipsAlwaysMode,"always"===this.tooltipVisibility).append(this.cssClasses.rootLabelsShowValueTextMode,this.isLabelsShowValueText).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tooltipCss",{get:function(){return(new _e).append(this.cssClasses.tooltip).append(this.cssClasses.tooltipOnHoverMode,"auto"===this.tooltipVisibility).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedLabelCount",{get:function(){return this.labelCount<0?6:this.labelCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMax",{get:function(){return this.max},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMin",{get:function(){return this.min},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMaxRangeLength",{get:function(){var e;return null!==(e=this.maxRangeLength)&&void 0!==e?e:this.renderedMax-this.renderedMin},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMinRangeLength",{get:function(){var e;return null!==(e=this.minRangeLength)&&void 0!==e?e:this.step},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedLabels",{get:function(){var e=this.generatedLabels,t=this.customLabels;return this.autoGenerate?e:t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNegativeScale",{get:function(){return this.renderedMin<0},enumerable:!1,configurable:!0}),t.prototype.getTextByItem=function(e){var t=e.value.toString();return this.labelFormat.replace("{0}",""+t)},t.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),void 0!==this.jsonObj.customLabels&&(this.autoGenerate=!1),this.isDesignMode||"range"!==this.sliderType||this.createNewArray("value")},t.prototype.updateValueFromSurvey=function(t,n){t=this.ensureValueRespectMinMax(t),e.prototype.updateValueFromSurvey.call(this,t,n),this.isIndeterminate&&(this.isIndeterminate=!1),this.resetPropertyValue("renderedValue")},t.prototype.runConditionCore=function(t){var n=this;e.prototype.runConditionCore.call(this,t),this.runExpressionByProperty("maxValueExpression",t,function(e){n.max=null!=e?e:n.renderedMax}),this.runExpressionByProperty("minValueExpression",t,function(e){n.min=null!=e?e:n.renderedMin})},t.prototype.initPropertyDependencies=function(){var e=this;this.registerFunctionOnPropertiesValueChanged(["min","max","step","autoGenerate","labelFormat","labelCount"],function(){e.resetPropertyValue("generatedLabels"),e.locStrsChanged()}),this.registerSychProperties(["autoGenerate"],function(){e.autoGenerate||0!==e.customLabels.length||e.setPropertyValue("customLabels",e.calcGeneratedLabels()),e.autoGenerate&&e.customLabels.splice(0,e.customLabels.length)}),this.registerFunctionOnPropertiesValueChanged(["min","max","step","maxRangeLength","minRangeLength","sliderType"],function(){e.resetPropertyValue("renderedValue")})},t.prototype.setNewValue=function(t){t=this.ensureValueRespectMinMax(t),e.prototype.setNewValue.call(this,t),this.isIndeterminate&&(this.isIndeterminate=!1),this.resetPropertyValue("renderedValue")},t.prototype.setDefaultValue=function(){e.prototype.setDefaultValue.call(this);var t=this.defaultValue;"single"===this.sliderType&&Array.isArray(t)&&this.setSliderValue(t),this.resetPropertyValue("renderedValue")},t.prototype.getDefaultTitleActions=function(){var e=this,t=[];if(!this.isDesignMode){var n=new dt({locTitleName:"clearCaption",id:"sv-clr-btn-".concat(this.id),action:function(){e.clearValueFromUI()},innerCss:this.cssClasses.clearButton,visible:new Ie(function(){return e.allowClear&&!e.isReadOnly})});t.push(n)}return t},t.prototype.getItemValueType=function(){return"sliderlabel"},t.prototype.createLabelItem=function(e){var t=new Gs(e);return t.locOwner=this,t},t.prototype.calcGeneratedLabels=function(){for(var e=[],t=0;t<this.renderedLabelCount;t++)e.push(this.createLabelItem(this.getLabelPosition(t)));return e},t.prototype.formatNumber=function(e){return parseFloat(e.toFixed(4))},t.prototype.ensureValueRespectMinMax=function(e){var t=this;return Array.isArray(e)?e.forEach(function(n,o,i){n<t.min&&(e[o]=t.min),n>t.max&&(e[o]=t.max),0===o?null==n&&(e[o]=t.min):o===i.length-1&&null==n&&(e[o]=t.max)}):(e<this.min&&(e=this.min),e>this.max&&(e=this.max)),e},t.prototype.isAllowToChange=function(){return!(this.isReadOnly||this.isDisabledAttr||this.isPreviewStyle||this.isDisabledStyle)},Object.defineProperty(t.prototype,"isLabelsShowValueText",{get:function(){return!!this.customLabels.find(function(e){return e.showValue})},enumerable:!1,configurable:!0}),Ws([y({defaultValue:"single"})],t.prototype,"sliderType",void 0),Ws([y({defaultValue:100})],t.prototype,"max",void 0),Ws([y({defaultValue:0})],t.prototype,"min",void 0),Ws([y({defaultValue:null})],t.prototype,"maxValueExpression",void 0),Ws([y({defaultValue:null})],t.prototype,"minValueExpression",void 0),Ws([y({defaultValue:null})],t.prototype,"maxRangeLength",void 0),Ws([y({defaultValue:null})],t.prototype,"minRangeLength",void 0),Ws([y({defaultValue:"{0}"})],t.prototype,"tooltipFormat",void 0),Ws([y({defaultValue:"{0}"})],t.prototype,"labelFormat",void 0),Ws([y({defaultValue:"auto"})],t.prototype,"tooltipVisibility",void 0),Ws([y({defaultValue:!0})],t.prototype,"showLabels",void 0),Ws([y({defaultValue:!0})],t.prototype,"autoGenerate",void 0),Ws([y({defaultValue:!0})],t.prototype,"allowDragRange",void 0),Ws([y({defaultValue:null})],t.prototype,"tickSize",void 0),Ws([y({defaultValue:!1})],t.prototype,"allowClear",void 0),Ws([y({defaultValue:null})],t.prototype,"focusedThumb",void 0),Ws([y({defaultValue:null})],t.prototype,"animatedThumb",void 0),t}(Xn);function Ks(e,t,n,o){return e>=t?n?e+o:t-o:n?t:e}D.addClass("sliderlabel",[{name:"!value:number"},{name:"visibleIf",visible:!1},{name:"enableIf",visible:!1},{name:"showValue:boolean",locationInTable:"detail",default:!1}],function(e){return new Gs(e)},"itemvalue"),D.addClass("slider",[{name:"sliderType",default:"single",choices:["single","range"]},{name:"autoGenerate",default:!0,isSerializable:!1,choices:[!0,!1]},{name:"min:number",default:0,onSettingValue:function(e,t){return Ks(t,e.max,!1,e.step)}},{name:"max:number",default:100,onSettingValue:function(e,t){return Ks(e.min,t,!0,e.step)}},{name:"step:number",default:1},{name:"minValueExpression",type:"expression"},{name:"maxValueExpression",type:"expression"},{name:"minRangeLength:number",visibleIf:function(e){return"range"===e.sliderType}},{name:"maxRangeLength:number",visibleIf:function(e){return"range"===e.sliderType}},{name:"customLabels:sliderlabel[]",visibleIf:function(e){return!e.autoGenerate}},{name:"showLabels:boolean",default:!0},{name:"tooltipVisibility:string",default:"auto",choices:["auto","always","never"]},{name:"labelFormat:string",default:"{0}"},{name:"tooltipFormat:string",default:"{0}"},{name:"allowDragRange:boolean",default:!0,visible:!1,visibleIf:function(e){return"range"===e.sliderType}},{name:"allowSwap:boolean",default:!0,visibleIf:function(e){return"range"===e.sliderType}},{name:"labelCount:number",default:-1,visibleIf:function(e){return e.autoGenerate}},{name:"allowClear:boolean",default:!1}],function(){return new Js("")},"question"),Io.Instance.registerQuestion("slider",function(e){return new Js(e)});var Ys=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xs=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Zs=function(e){function t(t){var n=e.call(this,t)||this;return n.createLocalizableString("labelFalse",n,!0,"booleanUncheckedLabel"),n.createLocalizableString("labelTrue",n,!0,"booleanCheckedLabel"),n}return Ys(t,e),t.prototype.getType=function(){return"boolean"},t.prototype.isLayoutTypeSupported=function(e){return!0},t.prototype.supportAutoAdvance=function(){return"checkbox"!==this.renderAs},Object.defineProperty(t.prototype,"isIndeterminate",{get:function(){return this.isEmpty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"booleanValue",{get:function(){return this.isEmpty()?null:this.value==this.getValueTrue()},set:function(e){this.isReadOnly||this.isDesignMode||this.setBooleanValue(e)},enumerable:!1,configurable:!0}),t.prototype.setBooleanValue=function(e){this.isValueEmpty(e)?this.value=void 0:this.value=1==e?this.getValueTrue():this.getValueFalse()},Object.defineProperty(t.prototype,"defaultValue",{get:function(){return this.getPropertyValue("defaultValue")},set:function(e){!0===e&&(e="true"),!1===e&&(e="false"),this.setPropertyValue("defaultValue",e),this.updateValueWithDefaults()},enumerable:!1,configurable:!0}),t.prototype.getDefaultValue=function(){var e=this.defaultValue;if("indeterminate"!==e&&null!=e)return"true"==e?this.getValueTrue():this.getValueFalse()},Object.defineProperty(t.prototype,"locTitle",{get:function(){var e=this.getLocalizableString("title");return(this.isLabelRendered&&!this.showTitle||this.isValueEmpty(e.text))&&!this.isValueEmpty(this.locLabel.text)?this.locLabel:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelRenderedAriaID",{get:function(){return this.isLabelRendered?this.ariaTitleId:null},enumerable:!1,configurable:!0}),t.prototype.beforeDestroyQuestionElement=function(t){e.prototype.beforeDestroyQuestionElement.call(this,t),this.leftAnswerElement=void 0},Object.defineProperty(t.prototype,"isLabelRendered",{get:function(){return"hidden"===this.titleLocation||this.useTitleAsLabel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canRenderLabelDescription",{get:function(){return this.isLabelRendered&&this.hasDescription&&(this.hasDescriptionUnderTitle||this.hasDescriptionUnderInput)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelTrue",{get:function(){return this.getLocalizableStringText("labelTrue")},set:function(e){this.setLocalizableStringText("labelTrue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLabelTrue",{get:function(){return this.getLocalizableString("labelTrue")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDeterminated",{get:function(){return null!==this.booleanValue&&void 0!==this.booleanValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLabelLeft",{get:function(){return this.swapOrder?this.getLocalizableString("labelTrue"):this.getLocalizableString("labelFalse")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLabelRight",{get:function(){return this.swapOrder?this.getLocalizableString("labelFalse"):this.getLocalizableString("labelTrue")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelFalse",{get:function(){return this.getLocalizableStringText("labelFalse")},set:function(e){this.setLocalizableStringText("labelFalse",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLabelFalse",{get:function(){return this.getLocalizableString("labelFalse")},enumerable:!1,configurable:!0}),t.prototype.getValueTrue=function(){return void 0===this.valueTrue||this.valueTrue},t.prototype.getValueFalse=function(){return void 0!==this.valueFalse&&this.valueFalse},t.prototype.setDefaultValue=function(){this.isDefaultValueSet("true",this.valueTrue)&&this.setBooleanValue(!0),this.isDefaultValueSet("false",this.valueFalse)&&this.setBooleanValue(!1);var e=this.defaultValue;"indeterminate"!==e&&null!=e||this.setBooleanValue(void 0)},t.prototype.isDefaultValueSet=function(e,t){return this.defaultValue==e||void 0!==t&&this.defaultValue===t},t.prototype.getDisplayValueCore=function(e,t){return t==this.getValueTrue()?this.locLabelTrue.textOrHtml:this.locLabelFalse.textOrHtml},t.prototype.getItemCssValue=function(e){return(new _e).append(e.item).append(e.itemOnError,this.hasCssError()).append(e.itemDisabled,this.isDisabledStyle).append(e.itemReadOnly,this.isReadOnlyStyle).append(e.itemPreview,this.isPreviewStyle).append(e.itemHover,!this.isDesignMode).append(e.itemChecked,!!this.booleanValue).append(e.itemExchanged,!!this.swapOrder).append(e.itemIndeterminate,!this.isDeterminated).append(e.itemIsLabelRendered,!!this.isLabelRendered).toString()},t.prototype.getItemCss=function(){return this.getItemCssValue(this.cssClasses)},t.prototype.getCheckboxItemCss=function(){return this.getItemCssValue({item:this.cssClasses.checkboxItem,itemOnError:this.cssClasses.checkboxItemOnError,itemDisabled:this.cssClasses.checkboxItemDisabled,itemDisable:this.cssClasses.checkboxItemDisabled,itemReadOnly:this.cssClasses.checkboxItemReadOnly,itemPreview:this.cssClasses.checkboxItemPreview,itemChecked:this.cssClasses.checkboxItemChecked,itemIndeterminate:this.cssClasses.checkboxItemIndeterminate,itemIsLabelRendered:this.cssClasses.checkboxIsLabelRendered})},t.prototype.getLabelCss=function(e){return(new _e).append(this.cssClasses.label).append(this.cssClasses.disabledLabel,this.booleanValue===!e||this.isDisabledStyle).append(this.cssClasses.labelReadOnly,this.isReadOnlyStyle).append(this.cssClasses.labelPreview,this.isPreviewStyle).append(this.cssClasses.labelTrue,!this.isIndeterminate&&e===!this.swapOrder).append(this.cssClasses.labelFalse,!this.isIndeterminate&&e===this.swapOrder).toString()},t.prototype.updateValueFromSurvey=function(t,n){void 0===n&&(n=!1),e.prototype.updateValueFromSurvey.call(this,t,n)},t.prototype.onValueChanged=function(){e.prototype.onValueChanged.call(this)},Object.defineProperty(t.prototype,"svgIcon",{get:function(){return this.booleanValue&&this.cssClasses.svgIconCheckedId?this.cssClasses.svgIconCheckedId:!this.isDeterminated&&this.cssClasses.svgIconIndId?this.cssClasses.svgIconIndId:!this.booleanValue&&this.cssClasses.svgIconUncheckedId?this.cssClasses.svgIconUncheckedId:this.cssClasses.svgIconId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemSvgIcon",{get:function(){return this.isPreviewStyle&&this.cssClasses.itemPreviewSvgIconId?this.cssClasses.itemPreviewSvgIconId:this.cssClasses.itemSvgIconId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowClick",{get:function(){return this.isIndeterminate&&!this.isInputReadOnly},enumerable:!1,configurable:!0}),t.prototype.getCheckedLabel=function(){return!0===this.booleanValue?this.locLabelTrue:!1===this.booleanValue?this.locLabelFalse:void 0},t.prototype.setQuestionValue=function(t,n){void 0===n&&(n=!0),"true"===t&&"true"!==this.valueTrue&&(t=!0),"false"===t&&"false"!==this.valueFalse&&(t=!1),"indeterminate"!==t&&null!==t||(t=void 0),e.prototype.setQuestionValue.call(this,t,n)},t.prototype.onLabelClick=function(e,t){return this.allowClick&&(en(e),this.booleanValue=t),!0},t.prototype.calculateBooleanValueByEvent=function(e,t){var n=!1;o.isAvailable()&&(n="rtl"==o.getComputedStyle(e.target).direction),this.booleanValue=n?!t:t},t.prototype.onSwitchClickModel=function(e){if(!this.allowClick)return!0;en(e);var t=e.offsetX/e.target.offsetWidth>.5;this.calculateBooleanValueByEvent(e,t)},t.prototype.onKeyDownCore=function(e){return"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||(e.stopPropagation(),this.calculateBooleanValueByEvent(e,"ArrowRight"===e.key)),!0},t.prototype.getRadioItemClass=function(e,t){var n=void 0;return e.radioItem&&(n=e.radioItem),e.radioItemChecked&&t===this.value&&(n=(n?n+" ":"")+e.radioItemChecked),this.isDisabledStyle&&(n+=" "+e.radioItemDisabled),this.isReadOnlyStyle&&(n+=" "+e.radioItemReadOnly),this.isPreviewStyle&&(n+=" "+e.radioItemPreview),n},t.prototype.supportResponsiveness=function(){return!0},t.prototype.getCompactRenderAs=function(){return"radio"},t.prototype.createActionContainer=function(t){return e.prototype.createActionContainer.call(this,"checkbox"!==this.renderAs)},t.prototype.getIsTitleRenderedAsString=function(){return!1},Object.defineProperty(t.prototype,"isNewA11yStructure",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a11y_input_ariaRole",{get:function(){return"switch"},enumerable:!1,configurable:!0}),Xs([y({localizable:!0})],t.prototype,"label",void 0),Xs([y({defaultValue:!1,onSet:function(e,t){e&&t.setPropertyValue("titleLocation","hidden")}})],t.prototype,"useTitleAsLabel",void 0),Xs([y({defaultValue:!1})],t.prototype,"swapOrder",void 0),Xs([y()],t.prototype,"valueTrue",void 0),Xs([y()],t.prototype,"valueFalse",void 0),t}(Xn);D.addClass("boolean",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},{name:"label:text",serializationProperty:"locLabel",isSerializable:!1,visible:!1},{name:"labelTrue:text",serializationProperty:"locLabelTrue"},{name:"labelFalse:text",serializationProperty:"locLabelFalse"},"valueTrue","valueFalse",{name:"swapOrder:boolean",category:"general"},{name:"renderAs",default:"default",visible:!1},{name:"useTitleAsLabel",default:!1,visible:!1}],function(){return new Zs("")},"question"),Io.Instance.registerQuestion("boolean",function(e){return new Zs(e)});var $s=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ea=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},ta=function(e){function t(t,n,o){var i=e.call(this,t,n,o)||this;return i.typeName=o,i.createLocalizableString("imageLink",i,!1),i}return $s(t,e),t.prototype.getBaseType=function(){return"imageitemvalue"},Object.defineProperty(t.prototype,"imageLink",{get:function(){return this.getLocalizableStringText("imageLink")},set:function(e){this.setLocalizableStringText("imageLink",e),this.imageNotLoaded=!1,this.videoNotLoaded=!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locImageLink",{get:function(){return this.getLocalizableString("imageLink")},enumerable:!1,configurable:!0}),t.prototype.getLocale=function(){return this.locOwner?this.locOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,t,n){return this.locOwner?this.locOwner.getMarkdownHtml(e,t,n):void 0},t.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e):null},t.prototype.getRendererContext=function(e){return this.locOwner?this.locOwner.getRendererContext(e):e},t.prototype.getProcessedText=function(e){return this.locOwner?this.locOwner.getProcessedText(e):e},t.prototype.onErrorHandler=function(){this.contentNotLoaded=!0},Object.defineProperty(t.prototype,"contentNotLoaded",{get:function(){return this.locOwner instanceof na&&"video"==this.locOwner.contentMode?this.videoNotLoaded:this.imageNotLoaded},set:function(e){this.locOwner instanceof na&&"video"==this.locOwner.contentMode?this.videoNotLoaded=e:this.imageNotLoaded=e},enumerable:!1,configurable:!0}),ea([y({defaultValue:!1})],t.prototype,"videoNotLoaded",void 0),ea([y({defaultValue:!1})],t.prototype,"imageNotLoaded",void 0),t}(lr),na=function(e){function t(t){var n=e.call(this,t)||this;return n.isResponsiveValue=!1,n.onContentLoaded=function(e,t){e.contentNotLoaded=!1;var o=t.target;"video"==n.contentMode?e.aspectRatio=o.videoWidth/o.videoHeight:e.aspectRatio=o.naturalWidth/o.naturalHeight,n._width&&n.processResponsiveness(0,n._width)},n.gridColCount=void 0,n.colCount=0,n.registerPropertyChangedHandlers(["minImageWidth","maxImageWidth","minImageHeight","maxImageHeight","visibleChoices","colCount","isResponsiveValue"],function(){n._width&&n.processResponsiveness(0,n._width)}),n.registerPropertyChangedHandlers(["imageWidth","imageHeight"],function(){n.calcIsResponsive()}),n.calcIsResponsive(),n}return $s(t,e),t.prototype.getType=function(){return"imagepicker"},t.prototype.supportAutoAdvance=function(){return!this.multiSelect},Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getItemValueType=function(){return"imageitemvalue"},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemFlowDirection",{get:function(){return"row"},enumerable:!1,configurable:!0}),t.prototype.supportOther=function(){return!1},t.prototype.supportNone=function(){return!1},t.prototype.supportRefuse=function(){return!1},t.prototype.supportDontKnow=function(){return!1},t.prototype.isAnswerCorrect=function(){return this.multiSelect?r.isArrayContainsEqual(this.value,this.correctAnswer):e.prototype.isAnswerCorrect.call(this)},Object.defineProperty(t.prototype,"multiSelect",{get:function(){return this.getPropertyValue("multiSelect")},set:function(e){this.setPropertyValue("multiSelect",e)},enumerable:!1,configurable:!0}),t.prototype.isItemSelected=function(e){var t=this.value,n=e;if(this.isValueEmpty(t))return!1;if(!n.imageLink||n.contentNotLoaded)return!1;if(!this.multiSelect)return this.isTwoValueEquals(t,e.value);if(!Array.isArray(t))return!1;for(var o=0;o<t.length;o++)if(this.isTwoValueEquals(t[o],e.value))return!0;return!1},t.prototype.getItemEnabled=function(t){var n=t;return!(!n.imageLink||n.contentNotLoaded)&&e.prototype.getItemEnabled.call(this,t)},t.prototype.clearIncorrectValues=function(){if(this.multiSelect){var t=this.value;if(!t)return;if(!Array.isArray(t)||0==t.length)return void this.clearValue(!0);for(var n=[],o=0;o<t.length;o++)this.hasUnknownValue(t[o],!0)||n.push(t[o]);if(n.length==t.length)return;0==n.length?this.clearValue(!0):this.value=n}else e.prototype.clearIncorrectValues.call(this)},t.prototype.getDisplayValueCore=function(t,n){return this.multiSelect||Array.isArray(n)?this.getDisplayArrayValue(t,n):e.prototype.getDisplayValueCore.call(this,t,n)},Object.defineProperty(t.prototype,"showLabel",{get:function(){return this.getPropertyValue("showLabel")},set:function(e){this.setPropertyValue("showLabel",e)},enumerable:!1,configurable:!0}),t.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),!this.isDesignMode&&this.multiSelect&&(this.createNewArray("renderedValue"),this.createNewArray("value")),this.calcIsResponsive()},t.prototype.getValueCore=function(){var t=e.prototype.getValueCore.call(this);return void 0!==t?t:this.multiSelect?[]:t},t.prototype.convertValToArrayForMultSelect=function(e){return this.multiSelect?this.isValueEmpty(e)||Array.isArray(e)?e:[e]:e},t.prototype.renderedValueFromDataCore=function(e){return this.convertValToArrayForMultSelect(e)},t.prototype.renderedValueToDataCore=function(e){return this.convertValToArrayForMultSelect(e)},Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.getPropertyValue("imageHeight")},set:function(e){this.setPropertyValue("imageHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageScale",{get:function(){return this.survey?this.survey.widthScale/100:1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedImageHeight",{get:function(){return(this.isResponsive?Math.floor(this.responsiveImageHeight):this.imageHeight*this.imageScale)||150*this.imageScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.getPropertyValue("imageWidth")},set:function(e){this.setPropertyValue("imageWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedImageWidth",{get:function(){return(this.isResponsive?Math.floor(this.responsiveImageWidth):this.imageWidth*this.imageScale)||200*this.imageScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageFit",{get:function(){return this.getPropertyValue("imageFit")},set:function(e){this.setPropertyValue("imageFit",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentMode",{get:function(){return this.getPropertyValue("contentMode")},set:function(e){this.setPropertyValue("contentMode",e),"video"===e&&(this.showLabel=!0)},enumerable:!1,configurable:!0}),t.prototype.valueToData=function(e){return e},Object.defineProperty(t.prototype,"inputType",{get:function(){return this.multiSelect?"checkbox":"radio"},enumerable:!1,configurable:!0}),t.prototype.isBuiltInChoice=function(e){return!1},t.prototype.addToVisibleChoices=function(e,t){this.addNewItemToVisibleChoices(e,t)},t.prototype.getSelectBaseRootCss=function(){var t=this.isResponsive;return(new _e).append(e.prototype.getSelectBaseRootCss.call(this)).append(this.cssClasses.rootResponsive,t).append(this.cssClasses.rootStatic,!t).append(this.cssClasses.rootColumn,1==this.getCurrentColCount()).toString()},Object.defineProperty(t.prototype,"isResponsive",{get:function(){return this.isResponsiveValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exactSizesAreEmpty",{get:function(){var e=this;return!["imageHeight","imageWidth"].some(function(t){return void 0!==e[t]&&null!==e[t]})},enumerable:!1,configurable:!0}),t.prototype.calcIsResponsive=function(){this.isResponsiveValue=this.exactSizesAreEmpty},t.prototype.getObservedElementSelector=function(){return tn(this.cssClasses.root)},t.prototype.supportResponsiveness=function(){return!0},t.prototype.needResponsiveness=function(){return this.supportResponsiveness()},t.prototype.needResponsiveWidth=function(){return this.colCount>2},t.prototype.getCurrentColCount=function(){return void 0===this.responsiveColCount||0===this.colCount?this.colCount:this.responsiveColCount},t.prototype.getContainerStyle=function(){return this.isResponsive?{gridAutoFlow:this.gridColCount?null:"column",gridTemplateColumns:this.gridColCount?"repeat(".concat(this.gridColCount,", 1fr)"):null}:{}},t.prototype.processResponsiveness=function(e,t){if(this._width=t=Math.floor(t),this.isResponsive){var n,o=this.choices.length+(this.isDesignMode?1:0),i=(this.gapBetweenItems||0)*this.imageScale,r=this.minImageWidth*this.imageScale,s=this.maxImageWidth*this.imageScale,a=this.maxImageHeight*this.imageScale,l=this.minImageHeight*this.imageScale,u=this.colCount,c=function(e,t,n){var o=Math.floor(e/(t+n));return(o+1)*(t+n)-n<=e&&o++,o}(t,r,i);0===u?(n=(i+r)*o-i>t?Math.floor((t-i*(c-1))/c):Math.floor((t-i*(o-1))/o),this.gridColCount=Math.max(Math.min(o,c),1)):(c<u?(this.responsiveColCount=Math.max(c,1),u=this.responsiveColCount):this.responsiveColCount=u,this.gridColCount=this.responsiveColCount,n=Math.floor((t-i*(u-1))/u)),n=Math.max(r,Math.min(n,s));var p=Number.MIN_VALUE;this.choices.forEach(function(e){var t=n/e.aspectRatio;p=t>p?t:p}),p>a?p=a:p<l&&(p=l);var h=this.responsiveImageWidth,d=this.responsiveImageHeight;return this.responsiveImageWidth=n,this.responsiveImageHeight=p,h!==this.responsiveImageWidth||d!==this.responsiveImageHeight}return!1},t.prototype.triggerResponsiveness=function(t){void 0===t&&(t=!0),t&&this.reCalcGapBetweenItemsCallback&&this.reCalcGapBetweenItemsCallback(),e.prototype.triggerResponsiveness.call(this,t)},t.prototype.afterRender=function(t){var n=this;e.prototype.afterRender.call(this,t);var i=this.getObservedElementSelector(),r=t&&i?t.querySelector(i):void 0;r&&(this.reCalcGapBetweenItemsCallback=function(){n.gapBetweenItems=Math.ceil(Number.parseFloat(o.getComputedStyle(r).gap))||16},this.reCalcGapBetweenItemsCallback())},Object.defineProperty(t.prototype,"ariaRole",{get:function(){return this.multiSelect?"group":"radiogroup"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRequired",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputRequiredAttribute",{get:function(){return this.multiSelect?this.hasRequiredError():null},enumerable:!1,configurable:!0}),ea([y({})],t.prototype,"responsiveImageHeight",void 0),ea([y({})],t.prototype,"responsiveImageWidth",void 0),ea([y({})],t.prototype,"isResponsiveValue",void 0),ea([y({})],t.prototype,"maxImageWidth",void 0),ea([y({})],t.prototype,"minImageWidth",void 0),ea([y({})],t.prototype,"maxImageHeight",void 0),ea([y({})],t.prototype,"minImageHeight",void 0),ea([y({})],t.prototype,"responsiveColCount",void 0),ea([y()],t.prototype,"gridColCount",void 0),t}(cr);D.addClass("imageitemvalue",[{name:"imageLink:file",serializationProperty:"locImageLink"}],function(e){return new ta(e)},"itemvalue"),D.addClass("responsiveImageSize",[],void 0,"number"),D.addClass("imagepicker",[{name:"showOtherItem",visible:!1},{name:"otherText",visible:!1},{name:"showNoneItem",visible:!1},{name:"showRefuseItem",visible:!1},{name:"showDontKnowItem",visible:!1},{name:"noneText",visible:!1},{name:"placeholder",visible:!1},{name:"otherErrorText",visible:!1},{name:"storeOthersAsComment",visible:!1},{name:"contentMode",default:"image",choices:["image","video"]},{name:"imageFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"imageHeight:number",minValue:0},{name:"imageWidth:number",minValue:0},{name:"minImageWidth:responsiveImageSize",default:200,minValue:0},{name:"minImageHeight:responsiveImageSize",default:133,minValue:0},{name:"maxImageWidth:responsiveImageSize",default:3e3,minValue:0},{name:"maxImageHeight:responsiveImageSize",default:3e3,minValue:0},"showLabel:boolean",{name:"colCount:number",default:0,choices:[0,1,2,3,4,5]},"multiSelect:boolean"],function(){return new na("")},"checkboxbase"),D.getProperty("imagepicker","choices").type="imageitemvalue[]",Io.Instance.registerQuestion("imagepicker",function(e){return new na(e)});var oa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ia=[".mp4",".mov",".wmv",".flv",".avi",".mkv"],ra="embed",sa=function(e){function t(t){var n=e.call(this,t)||this;return n.createLocalizableString("imageLink",n,!1).onGetTextCallback=function(e){return function(e,t){if(!e||!r.isUrlYoutubeVideo(e))return t?"":e;if(e.toLocaleLowerCase().indexOf(ra)>-1)return e;for(var n="",o=e.length-1;o>=0&&"="!==e[o]&&"/"!==e[o];o--)n=e[o]+n;return"https://www.youtube.com/embed/"+n}(e,"youtube"==n.contentMode)},n.createLocalizableString("altText",n,!1),n.registerPropertyChangedHandlers(["contentMode","imageLink"],function(){return n.calculateRenderedMode()}),n}return oa(t,e),t.prototype.getType=function(){return"image"},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.calculateRenderedMode()},Object.defineProperty(t.prototype,"imageLink",{get:function(){return this.getLocalizableStringText("imageLink")},set:function(e){this.setLocalizableStringText("imageLink",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locImageLink",{get:function(){return this.getLocalizableString("imageLink")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"altText",{get:function(){return this.getLocalizableStringText("altText")},set:function(e){this.setLocalizableStringText("altText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locAltText",{get:function(){return this.getLocalizableString("altText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.getPropertyValue("imageHeight")},set:function(e){this.setPropertyValue("imageHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedStyleHeight",{get:function(){return this.imageHeight?Gt(this.imageHeight):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHeight",{get:function(){return this.imageHeight?Wt(this.imageHeight):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.getPropertyValue("imageWidth")},set:function(e){this.setPropertyValue("imageWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedStyleWidth",{get:function(){return this.imageWidth?Gt(this.imageWidth):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedWidth",{get:function(){return this.imageWidth?Wt(this.imageWidth):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageFit",{get:function(){return this.getPropertyValue("imageFit")},set:function(e){this.setPropertyValue("imageFit",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentMode",{get:function(){return this.getPropertyValue("contentMode")},set:function(e){this.setPropertyValue("contentMode",e),"video"===e&&(this.showLabel=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMode",{get:function(){return this.getPropertyValue("renderedMode","image")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInvalid",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedAltText",{get:function(){return this.altText||this.title},enumerable:!1,configurable:!0}),t.prototype.getImageCss=function(){var e=this.getPropertyByName("imageHeight"),t=this.getPropertyByName("imageWidth"),n=e.isDefaultValue(this.imageHeight)&&t.isDefaultValue(this.imageWidth);return(new _e).append(this.cssClasses.image).append(this.cssClasses.adaptive,n).toString()},t.prototype.onLoadHandler=function(){this.contentNotLoaded=!1},t.prototype.onErrorHandler=function(){this.contentNotLoaded=!0},t.prototype.setRenderedMode=function(e){this.setPropertyValue("renderedMode",e)},t.prototype.calculateRenderedMode=function(){"auto"!==this.contentMode?this.setRenderedMode(this.contentMode):this.isYoutubeVideo()?this.setRenderedMode("youtube"):this.isVideo()?this.setRenderedMode("video"):this.setRenderedMode("image")},t.prototype.isYoutubeVideo=function(){return r.isUrlYoutubeVideo(this.imageLink)},t.prototype.isVideo=function(){var e=this.imageLink;if(!e)return!1;e=e.toLowerCase();for(var t=0;t<ia.length;t++)if(e.endsWith(ia[t]))return!0;return!1},function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([y({defaultValue:!1})],t.prototype,"contentNotLoaded",void 0),t}(es);D.addClass("image",[{name:"imageLink:file",serializationProperty:"locImageLink"},{name:"altText",serializationProperty:"locAltText",alternativeName:"text",category:"general"},{name:"contentMode",default:"auto",choices:["auto","image","video","youtube"]},{name:"imageFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"imageHeight",default:"150"},{name:"imageWidth",default:"200"}],function(){return new sa("")},"nonvalue"),Io.Instance.registerQuestion("image",function(e){return new sa(e)});class aa{constructor(e,t,n,o){if(isNaN(e)||isNaN(t))throw new Error(`Point is invalid: (${e}, ${t})`);this.x=+e,this.y=+t,this.pressure=n||0,this.time=o||Date.now()}distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}equals(e){return this.x===e.x&&this.y===e.y&&this.pressure===e.pressure&&this.time===e.time}velocityFrom(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0}}class la{static fromPoints(e,t){const n=this.calculateControlPoints(e[0],e[1],e[2]).c2,o=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new la(e[1],n,o,e[2],t.start,t.end)}static calculateControlPoints(e,t,n){const o=e.x-t.x,i=e.y-t.y,r=t.x-n.x,s=t.y-n.y,a=(e.x+t.x)/2,l=(e.y+t.y)/2,u=(t.x+n.x)/2,c=(t.y+n.y)/2,p=Math.sqrt(o*o+i*i),h=Math.sqrt(r*r+s*s),d=h/(p+h),f=u+(a-u)*d,g=c+(l-c)*d,y=t.x-f,m=t.y-g;return{c1:new aa(a+y,l+m),c2:new aa(u+y,c+m)}}constructor(e,t,n,o,i,r){this.startPoint=e,this.control2=t,this.control1=n,this.endPoint=o,this.startWidth=i,this.endWidth=r}length(){let e,t,n=0;for(let o=0;o<=10;o+=1){const i=o/10,r=this.point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),s=this.point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){const o=r-e,i=s-t;n+=Math.sqrt(o*o+i*i)}e=r,t=s}return n}point(e,t,n,o,i){return t*(1-e)*(1-e)*(1-e)+3*n*(1-e)*(1-e)*e+3*o*(1-e)*e*e+i*e*e*e}}class ua{constructor(){try{this._et=new EventTarget}catch(e){this._et=document}}addEventListener(e,t,n){this._et.addEventListener(e,t,n)}dispatchEvent(e){return this._et.dispatchEvent(e)}removeEventListener(e,t,n){this._et.removeEventListener(e,t,n)}}class ca extends ua{constructor(e,t={}){super(),this.canvas=e,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=e=>{1===e.buttons&&this._strokeBegin(e)},this._handleMouseMove=e=>{this._strokeMoveUpdate(e)},this._handleMouseUp=e=>{1===e.buttons&&this._strokeEnd(e)},this._handleTouchStart=e=>{if(e.cancelable&&e.preventDefault(),1===e.targetTouches.length){const t=e.changedTouches[0];this._strokeBegin(t)}},this._handleTouchMove=e=>{e.cancelable&&e.preventDefault();const t=e.targetTouches[0];this._strokeMoveUpdate(t)},this._handleTouchEnd=e=>{if(e.target===this.canvas){e.cancelable&&e.preventDefault();const t=e.changedTouches[0];this._strokeEnd(t)}},this._handlePointerStart=e=>{e.preventDefault(),this._strokeBegin(e)},this._handlePointerMove=e=>{this._strokeMoveUpdate(e)},this._handlePointerEnd=e=>{this._drawingStroke&&(e.preventDefault(),this._strokeEnd(e))},this.velocityFilterWeight=t.velocityFilterWeight||.7,this.minWidth=t.minWidth||.5,this.maxWidth=t.maxWidth||2.5,this.throttle="throttle"in t?t.throttle:16,this.minDistance="minDistance"in t?t.minDistance:5,this.dotSize=t.dotSize||0,this.penColor=t.penColor||"black",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=t.compositeOperation||"source-over",this.canvasContextOptions="canvasContextOptions"in t?t.canvasContextOptions:{},this._strokeMoveUpdate=this.throttle?function(e,t=250){let n,o,i,r=0,s=null;const a=()=>{r=Date.now(),s=null,n=e.apply(o,i),s||(o=null,i=[])};return function(...l){const u=Date.now(),c=t-(u-r);return o=this,i=l,c<=0||c>t?(s&&(clearTimeout(s),s=null),r=u,n=e.apply(o,i),s||(o=null,i=[])):s||(s=window.setTimeout(a,c)),n}}(ca.prototype._strokeUpdate,this.throttle):ca.prototype._strokeUpdate,this._ctx=e.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){const{_ctx:e,canvas:t}=this;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(e,t={}){return new Promise((n,o)=>{const i=new Image,r=t.ratio||window.devicePixelRatio||1,s=t.width||this.canvas.width/r,a=t.height||this.canvas.height/r,l=t.xOffset||0,u=t.yOffset||0;this._reset(this._getPointGroupOptions()),i.onload=()=>{this._ctx.drawImage(i,l,u,s,a),n()},i.onerror=e=>{o(e)},i.crossOrigin="anonymous",i.src=e,this._isEmpty=!1})}toDataURL(e="image/png",t){return"image/svg+xml"===e?("object"!=typeof t&&(t=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(t))}`):("number"!=typeof t&&(t=void 0),this.canvas.toDataURL(e,t))}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const e=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!e?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(e,{clear:t=!0}={}){t&&this.clear(),this._fromData(e,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(e)}toData(){return this._data}_getPointGroupOptions(e){return{penColor:e&&"penColor"in e?e.penColor:this.penColor,dotSize:e&&"dotSize"in e?e.dotSize:this.dotSize,minWidth:e&&"minWidth"in e?e.minWidth:this.minWidth,maxWidth:e&&"maxWidth"in e?e.maxWidth:this.maxWidth,velocityFilterWeight:e&&"velocityFilterWeight"in e?e.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:e&&"compositeOperation"in e?e.compositeOperation:this.compositeOperation}}_strokeBegin(e){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:e,cancelable:!0})))return;this._drawingStroke=!0;const t=this._getPointGroupOptions(),n=Object.assign(Object.assign({},t),{points:[]});this._data.push(n),this._reset(t),this._strokeUpdate(e)}_strokeUpdate(e){if(!this._drawingStroke)return;if(0===this._data.length)return void this._strokeBegin(e);this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:e}));const t=e.clientX,n=e.clientY,o=void 0!==e.pressure?e.pressure:void 0!==e.force?e.force:0,i=this._createPoint(t,n,o),r=this._data[this._data.length-1],s=r.points,a=s.length>0&&s[s.length-1],l=!!a&&i.distanceTo(a)<=this.minDistance,u=this._getPointGroupOptions(r);if(!a||!a||!l){const e=this._addPoint(i,u);a?e&&this._drawCurve(e,u):this._drawDot(i,u),s.push({time:i.time,x:i.x,y:i.y,pressure:i.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:e}))}_strokeEnd(e){this._drawingStroke&&(this._strokeUpdate(e),this._drawingStroke=!1,this.dispatchEvent(new CustomEvent("endStroke",{detail:e})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(e){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(e.minWidth+e.maxWidth)/2,this._ctx.fillStyle=e.penColor,this._ctx.globalCompositeOperation=e.compositeOperation}_createPoint(e,t,n){const o=this.canvas.getBoundingClientRect();return new aa(e-o.left,t-o.top,n,(new Date).getTime())}_addPoint(e,t){const{_lastPoints:n}=this;if(n.push(e),n.length>2){3===n.length&&n.unshift(n[0]);const e=this._calculateCurveWidths(n[1],n[2],t),o=la.fromPoints(n,e);return n.shift(),o}return null}_calculateCurveWidths(e,t,n){const o=n.velocityFilterWeight*t.velocityFrom(e)+(1-n.velocityFilterWeight)*this._lastVelocity,i=this._strokeWidth(o,n),r={end:i,start:this._lastWidth};return this._lastVelocity=o,this._lastWidth=i,r}_strokeWidth(e,t){return Math.max(t.maxWidth/(e+1),t.minWidth)}_drawCurveSegment(e,t,n){const o=this._ctx;o.moveTo(e,t),o.arc(e,t,n,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(e,t){const n=this._ctx,o=e.endWidth-e.startWidth,i=2*Math.ceil(e.length());n.beginPath(),n.fillStyle=t.penColor;for(let n=0;n<i;n+=1){const r=n/i,s=r*r,a=s*r,l=1-r,u=l*l,c=u*l;let p=c*e.startPoint.x;p+=3*u*r*e.control1.x,p+=3*l*s*e.control2.x,p+=a*e.endPoint.x;let h=c*e.startPoint.y;h+=3*u*r*e.control1.y,h+=3*l*s*e.control2.y,h+=a*e.endPoint.y;const d=Math.min(e.startWidth+a*o,t.maxWidth);this._drawCurveSegment(p,h,d)}n.closePath(),n.fill()}_drawDot(e,t){const n=this._ctx,o=t.dotSize>0?t.dotSize:(t.minWidth+t.maxWidth)/2;n.beginPath(),this._drawCurveSegment(e.x,e.y,o),n.closePath(),n.fillStyle=t.penColor,n.fill()}_fromData(e,t,n){for(const o of e){const{points:e}=o,i=this._getPointGroupOptions(o);if(e.length>1)for(let n=0;n<e.length;n+=1){const o=e[n],r=new aa(o.x,o.y,o.pressure,o.time);0===n&&this._reset(i);const s=this._addPoint(r,i);s&&t(s,i)}else this._reset(i),n(e[0],i)}}toSVG({includeBackgroundColor:e=!1}={}){const t=this._data,n=Math.max(window.devicePixelRatio||1,1),o=this.canvas.width/n,i=this.canvas.height/n,r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("viewBox",`0 0 ${o} ${i}`),r.setAttribute("width",o.toString()),r.setAttribute("height",i.toString()),e&&this.backgroundColor){const e=document.createElement("rect");e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("fill",this.backgroundColor),r.appendChild(e)}return this._fromData(t,(e,{penColor:t})=>{const n=document.createElement("path");if(!(isNaN(e.control1.x)||isNaN(e.control1.y)||isNaN(e.control2.x)||isNaN(e.control2.y))){const o=`M ${e.startPoint.x.toFixed(3)},${e.startPoint.y.toFixed(3)} C ${e.control1.x.toFixed(3)},${e.control1.y.toFixed(3)} ${e.control2.x.toFixed(3)},${e.control2.y.toFixed(3)} ${e.endPoint.x.toFixed(3)},${e.endPoint.y.toFixed(3)}`;n.setAttribute("d",o),n.setAttribute("stroke-width",(2.25*e.endWidth).toFixed(3)),n.setAttribute("stroke",t),n.setAttribute("fill","none"),n.setAttribute("stroke-linecap","round"),r.appendChild(n)}},(e,{penColor:t,dotSize:n,minWidth:o,maxWidth:i})=>{const s=document.createElement("circle"),a=n>0?n:(o+i)/2;s.setAttribute("r",a.toString()),s.setAttribute("cx",e.x.toString()),s.setAttribute("cy",e.y.toString()),s.setAttribute("fill",t),r.appendChild(s)}),r.outerHTML}}var pa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ha=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},da=function(e){function t(t){var n=e.call(this,t)||this;return n.valueIsUpdatingInternally=!1,n._loadedData=void 0,n.updateValueHandler=function(){n._loadedData=void 0,n.scaleCanvas(!0,!0)},n}return pa(t,e),t.prototype.getPenColorFromTheme=function(){var e=this.survey;return!!e&&!!e.themeVariables&&e.themeVariables["--sjs-primary-backcolor"]},t.prototype.updateColors=function(e){var t=this.getPenColorFromTheme(),n=this.getPropertyByName("penColor");e.penColor=this.penColor||t||n.defaultValue||"#1ab394";var o=this.getPropertyByName("backgroundColor"),i=t?"transparent":void 0,r=this.backgroundImage?"transparent":this.backgroundColor;e.backgroundColor=r||i||o.defaultValue||"#ffffff"},t.prototype.getCssRoot=function(t){return(new _e).append(e.prototype.getCssRoot.call(this,t)).append(t.small,"300"===this.signatureWidth.toString()).toString()},t.prototype.getFormat=function(){return"jpeg"===this.dataFormat?"image/jpeg":"svg"===this.dataFormat?"image/svg+xml":""},t.prototype.updateValue=function(){if(this.signaturePad){var e=this.signaturePad.toDataURL(this.getFormat());this.valueIsUpdatingInternally=!0,this.value=e,this.valueIsUpdatingInternally=!1}},t.prototype.getType=function(){return"signaturepad"},t.prototype.afterRenderQuestionElement=function(t){n.isAvailable()&&t&&(this.isDesignMode||this.initSignaturePad(t),this.element=t),e.prototype.afterRenderQuestionElement.call(this,t)},t.prototype.beforeDestroyQuestionElement=function(e){e&&this.destroySignaturePad(e)},t.prototype.themeChanged=function(e){this.signaturePad&&this.updateColors(this.signaturePad)},t.prototype.resizeCanvas=function(){this.canvas.width=this.containerWidth,this.canvas.height=this.containerHeight},t.prototype.scaleCanvas=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!1);var n=this.canvas,o=n.offsetWidth/this.containerWidth;(this.scale!=o||t)&&(this.scale=o,n.style.width=this.renderedCanvasWidth,this.resizeCanvas(),this.signaturePad.minWidth=this.penMinWidth*o,this.signaturePad.maxWidth=this.penMaxWidth*o,n.getContext("2d").scale(1/o,1/o),e&&this.loadPreview(this.value))},t.prototype.fromUrl=function(e){var t=this;if(this.isFileLoading=!0,function(e){return"string"==typeof e?/^data:((?:\w+\/(?:(?!;).)+)?)((?:;[^;]+?)*),(.+)$/.test(e):null}(e))this.fromDataUrl(e),this.isFileLoading=!1;else{var n=new Image;n.crossOrigin="anonymous",n.src=e,n.onload=function(){if(t.canvas){var e=o.createElement("canvas");e.width=t.containerWidth,e.height=t.containerHeight,e.getContext("2d").drawImage(n,0,0);var i=e.toDataURL(t.getFormat());t.fromDataUrl(i)}t.isFileLoading=!1},n.onerror=function(){t.isFileLoading=!1}}},t.prototype.fromDataUrl=function(e){if(this._loadedData=e,this.signaturePad){var t=1,o=this.scale;"svg"===this.dataFormat&&(t=n.getDevicePixelRatio()||1,o=1);var i={width:this.canvas.width*o/t,height:this.canvas.height*o/t};this.signaturePad.fromDataURL(e,i)}},Object.defineProperty(t.prototype,"loadedData",{get:function(){return this._loadedData},enumerable:!1,configurable:!0}),t.prototype.loadPreview=function(e){var t=this;if(!e)return this.signaturePad&&this.canvas&&(this.canvas.getContext("2d").clearRect(0,0,this.canvas.width*this.scale,this.canvas.height*this.scale),this.signaturePad.clear()),this.hasDrawnStroke=!1,void(this.valueWasChangedFromLastUpload=!1);if(this.storeDataAsText)this.fromDataUrl(e);else if(this.loadedData)this.fromDataUrl(this.loadedData);else{var n=e?[e]:[];this._previewLoader&&this._previewLoader.dispose(),this.isFileLoading=!0,this._previewLoader=new Ls(this,function(n,o){"success"===n&&o&&o.length>0&&o[0].content?(t.fromDataUrl(o[0].content),t.isFileLoading=!1):"skipped"===n&&t.fromUrl(e),t._previewLoader.dispose(),t._previewLoader=void 0}),this._previewLoader.load(n)}},t.prototype.onChangeQuestionValue=function(t){e.prototype.onChangeQuestionValue.call(this,t),this.isLoadingFromJson||(this._loadedData=void 0,this.loadPreview(t))},t.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.loadPreview(this.value)},t.prototype.initSignaturePad=function(e){var t=this,n=e.getElementsByTagName("canvas")[0];this.canvas=n,this.resizeCanvas();var o=new ca(n,{backgroundColor:"#ffffff"});this.signaturePad=o,this.isInputReadOnly&&o.off(),this.readOnlyChangedCallback=function(){t.isInputReadOnly?o.off():o.on()},this.updateColors(o),o.addEventListener("beginStroke",function(){t.scaleCanvas(),t.hasDrawnStroke=!0,n.focus()},{once:!1}),o.addEventListener("endStroke",function(){t.storeDataAsText?t.updateValue():t.valueWasChangedFromLastUpload=!0},{once:!1}),this.updateValueHandler(),this.readOnlyChangedCallback();var i=function(e,n){"signatureWidth"!==n.name&&"signatureHeight"!==n.name||t.valueIsUpdatingInternally||t.updateValueHandler()};this.onPropertyChanged.add(i),this.signaturePad.propertyChangedHandler=i},t.prototype.destroySignaturePad=function(e){this.signaturePad&&(this.onPropertyChanged.remove(this.signaturePad.propertyChangedHandler),this.signaturePad.off()),this.readOnlyChangedCallback=null,this.signaturePad=null},Object.defineProperty(t.prototype,"dataFormat",{get:function(){return this.getPropertyValue("dataFormat")},set:function(e){this.setPropertyValue("dataFormat",fa(e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"signatureWidth",{get:function(){return this.getPropertyValue("signatureWidth")},set:function(e){this.setPropertyValue("signatureWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"signatureHeight",{get:function(){return this.getPropertyValue("signatureHeight")},set:function(e){this.setPropertyValue("signatureHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerHeight",{get:function(){return this.signatureHeight||200},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerWidth",{get:function(){return this.signatureWidth||300},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedCanvasWidth",{get:function(){return this.signatureAutoScaleEnabled?"100%":this.containerWidth+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.getPropertyValue("height")},set:function(e){this.setPropertyValue("height",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowClear",{get:function(){return this.getPropertyValue("allowClear")},set:function(e){this.setPropertyValue("allowClear",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canShowClearButton",{get:function(){var e=!this.nothingIsDrawn(),t=this.isUploading;return!this.isInputReadOnly&&this.allowClear&&e&&!t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"penColor",{get:function(){return this.getPropertyValue("penColor")},set:function(e){this.setPropertyValue("penColor",e),this.signaturePad&&this.updateColors(this.signaturePad)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this.getPropertyValue("backgroundColor")},set:function(e){this.setPropertyValue("backgroundColor",e),this.signaturePad&&this.updateColors(this.signaturePad)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundImage",{get:function(){return this.getPropertyValue("backgroundImage")},set:function(e){this.setPropertyValue("backgroundImage",e),this.signaturePad&&this.updateColors(this.signaturePad)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearButtonCaption",{get:function(){return this.getLocalizationString("clearCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRenderedPlaceholder",{get:function(){return this.isReadOnly?this.locPlaceholderReadOnly:this.locPlaceholder},enumerable:!1,configurable:!0}),t.prototype.nothingIsDrawn=function(){var e=this.hasDrawnStroke,t=this.isEmpty(),n=this.isUploading,o=this.valueWasChangedFromLastUpload;return!e&&t&&!n&&!o},t.prototype.needShowPlaceholder=function(){return this.showPlaceholder&&this.nothingIsDrawn()},t.prototype.onBlurCore=function(t){if(e.prototype.onBlurCore.call(this,t),!this.storeDataAsText&&!this.element.contains(t.relatedTarget)){if(!this.valueWasChangedFromLastUpload)return;this.uploadFiles([(n=this.signaturePad.toDataURL(this.getFormat()),o=this.name+"."+fa(this.dataFormat),i=this.getFormat(),r=atob(n.split(",")[1]),s=new Uint8Array(r.split("").map(function(e){return e.charCodeAt(0)})).buffer,new File([s],o,{type:i}))]),this.valueWasChangedFromLastUpload=!1}var n,o,i,r,s},t.prototype.uploadResultItemToValue=function(e){return e.content},t.prototype.setValueFromResult=function(e){this.valueIsUpdatingInternally=!0,this.value=(null==e?void 0:e.length)?e.map(function(e){return e.content})[0]:void 0,this.valueIsUpdatingInternally=!1},t.prototype.clearValue=function(t,n){this.valueWasChangedFromLastUpload=!1,e.prototype.clearValue.call(this,t,n),this._loadedData=void 0,this.loadPreview(this.value)},t.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),300===this.signatureWidth&&this.width&&"number"==typeof this.width&&this.width&&(F.warn("Use signatureWidth property to set width for the signature pad"),this.signatureWidth=this.width,this.width=void 0),200===this.signatureHeight&&this.height&&(F.warn("Use signatureHeight property to set width for the signature pad"),this.signatureHeight=this.height,this.height=void 0)},ha([y({defaultValue:!1})],t.prototype,"hasDrawnStroke",void 0),ha([y({defaultValue:!1})],t.prototype,"isReadyForUpload",void 0),ha([y({defaultValue:!1})],t.prototype,"valueWasChangedFromLastUpload",void 0),ha([y()],t.prototype,"signatureAutoScaleEnabled",void 0),ha([y()],t.prototype,"penMinWidth",void 0),ha([y()],t.prototype,"penMaxWidth",void 0),ha([y({})],t.prototype,"showPlaceholder",void 0),ha([y({localizable:{defaultStr:"signaturePlaceHolder"}})],t.prototype,"placeholder",void 0),ha([y({localizable:{defaultStr:"signaturePlaceHolderReadOnly"}})],t.prototype,"placeholderReadOnly",void 0),t}(Es);function fa(e){return e||(e="png"),"jpeg"!==(e=e.replace("image/","").replace("+xml",""))&&"svg"!==e&&(e="png"),e}D.addClass("signaturepad",[{name:"signatureWidth:number",category:"general",default:300},{name:"signatureHeight:number",category:"general",default:200},{name:"signatureAutoScaleEnabled:boolean",category:"general",default:!1},{name:"penMinWidth:number",category:"general",default:.5},{name:"penMaxWidth:number",category:"general",default:2.5},{name:"height:number",category:"general",visible:!1},{name:"allowClear:boolean",category:"general",default:!0},{name:"showPlaceholder:boolean",category:"general",default:!0},{name:"placeholder:text",serializationProperty:"locPlaceholder",category:"general",dependsOn:"showPlaceholder",visibleIf:function(e){return e.showPlaceholder}},{name:"placeholderReadOnly:text",serializationProperty:"locPlaceholderReadOnly",category:"general",dependsOn:"showPlaceholder",visibleIf:function(e){return e.showPlaceholder}},{name:"backgroundImage:file",category:"general"},{name:"penColor:color",category:"general"},{name:"backgroundColor:color",category:"general"},{name:"dataFormat",category:"general",default:"png",choices:[{value:"png",text:"PNG"},{value:"jpeg",text:"JPEG"},{value:"svg",text:"SVG"}],onSettingValue:function(e,t){return fa(t)}},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"storeDataAsText:boolean",default:!0},{name:"waitForUpload:boolean",default:!1}],function(){return new da("")},"question"),Io.Instance.registerQuestion("signaturepad",function(e){return new da(e)});var ga=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ya=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},ma=function(e){function t(t){var n=e.call(this)||this;return n.item=t,n}return ga(t,e),t.prototype.getIndex=function(){return this.panelIndex},t.prototype.getQuestionData=function(){return this.item.data},t.prototype.getValue=function(e,t,n,o){if(0!==e.length){if(1===e.length){var i=this.getPanelValue(e[0].name);if(void 0!==i)return{isFound:!0,value:i,context:this}}var r=gn.expressionVariables,s=r.panel;if(e.length>1&&e[0].name.toLocaleLowerCase()===r.parentPanel.toLocaleLowerCase()){var a=this.item.data;if(a&&a.parentQuestion&&a.parent&&a.parent.data)return e[0].name=s,a.parent.data.getValueGetterContext().getValue(e,!0,n,o)}var l=this.item.panel,u=e[0].name===s;if(u||!t){u&&e.shift();var c=new Kn(l.questions).getValue(e,!1,n,o);if(c&&c.isFound)return c;var p=this.item.getAllValues();if(t){var h=this.getValueFromBindedQuestions(e,p);if(h)return h}return new N(p).getValue(e,!1,n,o)}}},t.prototype.getTextValue=function(t,n,o){return t=t.toLocaleLowerCase(),[this.indexVar,this.visIndexVar].indexOf(t)>-1&&n>-1&&n++,e.prototype.getTextValue.call(this,t,n,o)},Object.defineProperty(t.prototype,"indexVar",{get:function(){return gn.expressionVariables.panelIndex.toLocaleLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visIndexVar",{get:function(){return gn.expressionVariables.visiblePanelIndex.toLocaleLowerCase()},enumerable:!1,configurable:!0}),t.prototype.getPanelValue=function(e){return(e=e.toLocaleLowerCase())===this.indexVar?this.panelIndex:e==this.visIndexVar?this.visiblePanelIndex:void 0},Object.defineProperty(t.prototype,"panelIndex",{get:function(){return this.getPanels(!1).indexOf(this.item.panel)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePanelIndex",{get:function(){return this.getPanels(!0).indexOf(this.item.panel)},enumerable:!1,configurable:!0}),t.prototype.getPanels=function(e){var t=this.item.data;return t?e?t.visiblePanels:t.panels:[]},t}(Jn),ba=function(e){function t(t){var n=e.call(this,t)||this;return n.question=t,n}return ga(t,e),t.prototype.getValue=function(t,n,o,i){if(!i&&this.question.isEmpty())return{isFound:0===t.length,value:void 0};if(o>-1){var r=this.question;return o>=0&&o<r.panels.length?r.panels[o].data.getValueGetterContext().getValue(t,!1,o,i):{isFound:!1,value:void 0,context:this}}return e.prototype.getValue.call(this,t,n,o,i)},t}(Gn),va=function(e){function t(t){return e.call(this,t)||this}return ga(t,e),t}(dt),Ca=function(){function e(e,t){this.data=e,this.data=e,this.panelValue=t,this.textPreProcessor=new vo(this),this.setSurveyImpl()}return Object.defineProperty(e.prototype,"panel",{get:function(){return this.panelValue},enumerable:!1,configurable:!0}),e.prototype.setSurveyImpl=function(){this.panel.setSurveyImpl(this)},e.prototype.getValueGetterContext=function(){return new ma(this)},e.prototype.getValue=function(e){return this.getAllValues()[e]},e.prototype.setValue=function(e,t){var n=this.data.getPanelItemData(this),o=n?n[e]:void 0;if(!r.isTwoValueEquals(t,o,!1,!0,!1)){this.data.setPanelItemData(this,e,r.getUnbindValue(t));for(var i=this.panel.questions,s=0;s<i.length;s++){var a=i[s];a.getValueName()!==e&&a.checkBindings(e,t);var l=gn.commentSuffix;if(e.endsWith(l)){e=e.substring(0,e.length-l.length);var u=this.panel.getQuestionByName(e);u&&(t=u.value)}var c=gn.expressionVariables.panel+"."+e;a.runTriggers(c,t)}}},e.prototype.getVariable=function(e){},e.prototype.setVariable=function(e,t){},e.prototype.getComment=function(e){return this.getValue(e+gn.commentSuffix)||""},e.prototype.setComment=function(e,t,n){this.setValue(e+gn.commentSuffix,t)},e.prototype.findQuestionByName=function(e){if(e){var t=gn.expressionVariables.panel+".";if(0===e.indexOf(t))return this.panel.getQuestionByName(e.substring(t.length));var n=this.getSurvey();return n?n.getQuestionByName(e):null}},e.prototype.getEditingSurveyElement=function(){},e.prototype.getAllValues=function(){return this.data.getPanelItemData(this)},e.prototype.getFilteredProperties=function(){return this.data&&this.data.getRootData()?this.data.getRootData().getFilteredProperties():{survey:this.getSurvey()}},e.prototype.getSurveyData=function(){return this},e.prototype.getSurvey=function(){return this.data?this.data.getSurvey():null},e.prototype.getTextProcessor=function(){return this.textPreProcessor},e}(),Pa=function(){function e(e){this.data=e}return e.prototype.getSurveyData=function(){return null},e.prototype.getSurvey=function(){return this.data.getSurvey()},e.prototype.getTextProcessor=function(){return null},e}(),wa=function(e){function t(t){var n=e.call(this,t)||this;return n._renderedPanels=[],n.isPanelsAnimationRunning=!1,n.isAddingNewPanels=!1,n.isSetPanelItemData={},n.createNewArray("panels",function(e){n.onPanelAdded(e)},function(e){n.onPanelRemoved(e)}),n.createNewArray("visiblePanels"),n.templateValue=n.createAndSetupNewPanelObject(),n.template.renderWidth="100%",n.template.selectedElementInDesign=n,n.template.addElementCallback=function(e){n.addOnPropertyChangedCallback(e),n.rebuildPanels()},n.template.removeElementCallback=function(){n.rebuildPanels()},n.createLocalizableString("confirmDeleteText",n,!1,"confirmDelete"),n.createLocalizableString("keyDuplicationError",n,!1,!0),n.createLocalizableString("addPanelText",n,!1,"addPanel"),n.createLocalizableString("removePanelText",n,!1,"removePanel"),n.createLocalizableString("prevPanelText",n,!1,"pagePrevText"),n.createLocalizableString("nextPanelText",n,!1,"pageNextText"),n.createLocalizableString("noEntriesText",n,!1,"noEntriesText"),n.createLocalizableString("editPanelText",n,!1,"editText"),n.createLocalizableString("templateTabTitle",n,!0,"panelDynamicTabTextFormat"),n.createLocalizableString("tabTitlePlaceholder",n,!0,"tabTitlePlaceholder"),n.registerPropertyChangedHandlers(["panelsState"],function(){n.setPanelsState()}),n.registerPropertyChangedHandlers(["newPanelPosition","displayMode","showProgressBar"],function(){n.updateFooterActions()}),n.registerPropertyChangedHandlers(["allowAddPanel"],function(){n.updateNoEntriesTextDefaultLoc()}),n.registerPropertyChangedHandlers(["minPanelCount"],function(){n.onMinPanelCountChanged()}),n.registerPropertyChangedHandlers(["maxPanelCount"],function(){n.onMaxPanelCountChanged()}),n.registerPropertyChangedHandlers(["templateQuestionTitleLocation","templateQuestionTitleWidth"],function(){var e=n.visiblePanelsCore;e&&e.forEach(function(e){e.updateElementCss(!0)})}),n}return ga(t,e),Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getFirstQuestionToFocus=function(e){for(var t=0;t<this.visiblePanelsCore.length;t++){var n=this.visiblePanelsCore[t].getFirstQuestionToFocus(e);if(n)return n}return this.showAddPanelButton&&(!e||this.currentErrorCount>0)?this:null},t.prototype.getFirstInputElementId=function(){return this.showAddPanelButton?this.addButtonId:e.prototype.getFirstInputElementId.call(this)},t.prototype.getFirstErrorInputElementId=function(){var t=this.getFirstQuestionToFocus(!0);return t?t.inputId:e.prototype.getFirstErrorInputElementId.call(this)},t.prototype.setSurveyImpl=function(t,n){e.prototype.setSurveyImpl.call(this,t,n),this.setTemplatePanelSurveyImpl(),this.setPanelsSurveyImpl()},t.prototype.assignOnPropertyChangedToTemplate=function(){for(var e=this.template.elements,t=0;t<e.length;t++)this.addOnPropertyChangedCallback(e[t])},t.prototype.addOnPropertyChangedCallback=function(e){var t=this;e.isQuestion&&e.setParentQuestion(this),e.onPropertyChanged.add(function(e,n){t.onTemplateElementPropertyChanged(e,n)}),e.isPanel&&(e.addElementCallback=function(e){t.addOnPropertyChangedCallback(e)})},t.prototype.onTemplateElementPropertyChanged=function(e,t){if(!this.isLoadingFromJson&&!this.useTemplatePanel&&0!=this.panelsCore.length&&D.findProperty(e.getType(),t.name))for(var n=this.panelsCore,o=0;o<n.length;o++){var i=n[o].getQuestionByName(e.name);i&&i[t.name]!==t.newValue&&(i[t.name]=t.newValue)}},Object.defineProperty(t.prototype,"useTemplatePanel",{get:function(){return this.isDesignMode&&!this.isContentElement},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"paneldynamic"},t.prototype.clearOnDeletingContainer=function(){this.panelsCore.forEach(function(e){e.clearOnDeletingContainer()})},Object.defineProperty(t.prototype,"isAllowTitleLeft",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.removeElement=function(e){return this.template.removeElement(e)},Object.defineProperty(t.prototype,"template",{get:function(){return this.templateValue},enumerable:!1,configurable:!0}),t.prototype.getPanels=function(){return[this.template]},Object.defineProperty(t.prototype,"templateElements",{get:function(){return this.template.elements},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateTitle",{get:function(){return this.template.title},set:function(e){this.template.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTemplateTitle",{get:function(){return this.template.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateTabTitle",{get:function(){return this.locTemplateTabTitle.text},set:function(e){this.locTemplateTabTitle.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTemplateTabTitle",{get:function(){return this.getLocalizableString("templateTabTitle")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tabTitlePlaceholder",{get:function(){return this.locTabTitlePlaceholder.text},set:function(e){this.locTabTitlePlaceholder.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTabTitlePlaceholder",{get:function(){return this.getLocalizableString("tabTitlePlaceholder")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateDescription",{get:function(){return this.template.description},set:function(e){this.template.description=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTemplateDescription",{get:function(){return this.template.locDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateVisibleIf",{get:function(){return this.getPropertyValue("templateVisibleIf")},set:function(e){this.setPropertyValue("templateVisibleIf",e),this.template.visibleIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){for(var e=[],t=0;t<this.panelsCore.length;t++)e.push(this.panelsCore[t].data);return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panels",{get:function(){return this.buildPanelsFirstTime(this.canBuildPanels),this.panelsCore},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePanels",{get:function(){return this.buildPanelsFirstTime(this.canBuildPanels),this.visiblePanelsCore},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelsCore",{get:function(){return this.getPropertyValue("panels")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePanelsCore",{get:function(){return this.getPropertyValue("visiblePanels")},enumerable:!1,configurable:!0}),t.prototype.onPanelAdded=function(e){if(this.onPanelRemovedCore(e),e.visible){for(var t=0,n=this.panelsCore,o=0;o<n.length&&n[o]!==e;o++)n[o].visible&&t++;this.visiblePanelsCore.splice(t,0,e),this.addTabFromToolbar(e,t),this.currentPanel||(this.currentPanel=e),this.updateRenderedPanels()}},t.prototype.onPanelRemoved=function(e){var t=this.onPanelRemovedCore(e);if(this.currentPanel===e){var n=this.visiblePanelsCore;t>=n.length&&(t=n.length-1),this.currentPanel=t>=0?n[t]:null}this.updateRenderedPanels()},t.prototype.onPanelRemovedCore=function(e){var t=this.visiblePanelsCore,n=t.indexOf(e);return n>-1&&(t.splice(n,1),this.removeTabFromToolbar(e)),n},Object.defineProperty(t.prototype,"currentIndex",{get:function(){return this.isRenderModeList?-1:this.useTemplatePanel?0:this.visiblePanelsCore.indexOf(this.currentPanel)},set:function(e){e<0||this.visiblePanelCount<1||(e>=this.visiblePanelCount&&(e=this.visiblePanelCount-1),this.currentPanel=this.visiblePanelsCore[e])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentPanel",{get:function(){if(this.isDesignMode)return this.template;if(this.isRenderModeList||this.useTemplatePanel)return null;var e=this.getPropertyValue("currentPanel",null);return!e&&this.visiblePanelCount>0&&(e=this.visiblePanelsCore[0],this.currentPanel=e),e},set:function(e){if(!this.isRenderModeList&&!this.useTemplatePanel){var t=this.getPropertyValue("currentPanel"),n=e?this.visiblePanelsCore.indexOf(e):-1;if(!(e&&n<0||e===t)&&(t&&t.onHidingContent(),this.setPropertyValue("currentPanel",e),this.updateRenderedPanels(),this.updateFooterActions(),this.updateTabToolbarItemsPressedState(),this.fireCallback(this.currentIndexChangedCallback),n>-1&&this.survey)){var o={panel:e,visiblePanelIndex:n};this.survey.dynamicPanelCurrentIndexChanged(this,o)}}},enumerable:!1,configurable:!0}),t.prototype.updateRenderedPanels=function(){this.isRenderModeList?this.renderedPanels=[].concat(this.visiblePanels):this.currentPanel?this.renderedPanels=[this.currentPanel]:this.renderedPanels=[]},Object.defineProperty(t.prototype,"renderedPanels",{get:function(){return this._renderedPanels},set:function(e){0==this.renderedPanels.length||0==e.length?(this.blockAnimations(),this.panelsAnimation.sync(e),this.releaseAnimations()):(this.isPanelsAnimationRunning=!0,this.panelsAnimation.sync(e))},enumerable:!1,configurable:!0}),t.prototype.getPanelsAnimationOptions=function(){var e=this,t=function(){if(e.isRenderModeList)return"";var t=new _e,n=!1,o=e.renderedPanels.filter(function(t){return t!==e.currentPanel})[0],i=e.visiblePanels.indexOf(o);return i<0&&(n=!0,i=e.removedPanelIndex),t.append("sv-pd-animation-adding",!!e.focusNewPanelCallback).append("sv-pd-animation-removing",n).append("sv-pd-animation-left",i<=e.currentIndex).append("sv-pd-animation-right",i>e.currentIndex).toString()};return{getRerenderEvent:function(){return e.onElementRerendered},getAnimatedElement:function(t){var n,o;if(t&&e.cssContent){var i=tn(e.cssContent);return null===(o=null===(n=e.getWrapperElement())||void 0===n?void 0:n.querySelector(":scope ".concat(i," #").concat(t.id)))||void 0===o?void 0:o.parentElement}},getEnterOptions:function(){return{onBeforeRunAnimation:function(t){if(e.focusNewPanelCallback){var n=e.isRenderModeList?t:t.parentElement;Tt.ScrollElementToViewCore(n,!1,!1,{behavior:"smooth"})}!e.isRenderModeList&&t.parentElement?cn(t.parentElement,{heightTo:t.offsetHeight+"px"}):pn(t)},onAfterRunAnimation:function(e){hn(e),e.parentElement&&hn(e.parentElement)},cssClass:(new _e).append(e.cssClasses.panelWrapperEnter).append(t()).toString()}},getLeaveOptions:function(){return{onBeforeRunAnimation:function(t){!e.isRenderModeList&&t.parentElement?cn(t.parentElement,{heightFrom:t.offsetHeight+"px"}):pn(t)},onAfterRunAnimation:function(e){hn(e),e.parentElement&&hn(e.parentElement)},cssClass:(new _e).append(e.cssClasses.panelWrapperLeave).append(t()).toString()}},isAnimationEnabled:function(){return e.animationAllowed&&!!e.getWrapperElement()}}},t.prototype.disablePanelsAnimations=function(){this.panelsCore.forEach(function(e){e.blockAnimations()})},t.prototype.enablePanelsAnimations=function(){this.panelsCore.forEach(function(e){e.releaseAnimations()})},t.prototype.updatePanelsAnimation=function(){var e=this;this._panelsAnimations=new(this.isRenderModeList?Vt:xt)(this.getPanelsAnimationOptions(),function(t,n){e._renderedPanels=t,n||(e.isPanelsAnimationRunning=!1,e.focusNewPanel())},function(){return e._renderedPanels})},Object.defineProperty(t.prototype,"panelsAnimation",{get:function(){return this._panelsAnimations||this.updatePanelsAnimation(),this._panelsAnimations},enumerable:!1,configurable:!0}),t.prototype.onHidingContent=function(){e.prototype.onHidingContent.call(this),this.currentPanel?this.currentPanel.onHidingContent():this.visiblePanelsCore.forEach(function(e){return e.onHidingContent()})},Object.defineProperty(t.prototype,"confirmDelete",{get:function(){return this.getPropertyValue("confirmDelete")},set:function(e){this.setPropertyValue("confirmDelete",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyName",{get:function(){return this.getPropertyValue("keyName","")},set:function(e){this.setPropertyValue("keyName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"confirmDeleteText",{get:function(){return this.getLocalizableStringText("confirmDeleteText")},set:function(e){this.setLocalizableStringText("confirmDeleteText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locConfirmDeleteText",{get:function(){return this.getLocalizableString("confirmDeleteText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyDuplicationError",{get:function(){return this.getLocalizableStringText("keyDuplicationError")},set:function(e){this.setLocalizableStringText("keyDuplicationError",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locKeyDuplicationError",{get:function(){return this.getLocalizableString("keyDuplicationError")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prevPanelText",{get:function(){return this.getLocalizableStringText("prevPanelText")},set:function(e){this.setLocalizableStringText("prevPanelText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPrevPanelText",{get:function(){return this.getLocalizableString("prevPanelText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelPrevText",{get:function(){return this.prevPanelText},set:function(e){this.prevPanelText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPanelPrevText",{get:function(){return this.locPrevPanelText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPanelText",{get:function(){return this.getLocalizableStringText("nextPanelText")},set:function(e){this.setLocalizableStringText("nextPanelText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locNextPanelText",{get:function(){return this.getLocalizableString("nextPanelText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelNextText",{get:function(){return this.nextPanelText},set:function(e){this.nextPanelText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPanelNextText",{get:function(){return this.locNextPanelText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"addPanelText",{get:function(){return this.getLocalizableStringText("addPanelText")},set:function(e){this.setLocalizableStringText("addPanelText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locAddPanelText",{get:function(){return this.getLocalizableString("addPanelText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelAddText",{get:function(){return this.addPanelText},set:function(e){this.addPanelText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPanelAddText",{get:function(){return this.locAddPanelText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"removePanelText",{get:function(){return this.getLocalizableStringText("removePanelText")},set:function(e){this.setLocalizableStringText("removePanelText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRemovePanelText",{get:function(){return this.getLocalizableString("removePanelText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelRemoveText",{get:function(){return this.removePanelText},set:function(e){this.removePanelText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPanelRemoveText",{get:function(){return this.locRemovePanelText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isProgressTopShowing",{get:function(){return"carousel"==this.displayMode&&("top"===this.progressBarLocation||"topBottom"===this.progressBarLocation)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isProgressBottomShowing",{get:function(){return"carousel"==this.displayMode&&("bottom"===this.progressBarLocation||"topBottom"===this.progressBarLocation)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPrevButtonVisible",{get:function(){return this.currentIndex>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPrevButtonShowing",{get:function(){return this.isPrevButtonVisible},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNextButtonVisible",{get:function(){return this.currentIndex>=0&&this.currentIndex<this.visiblePanelCount-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNextButtonShowing",{get:function(){return this.isNextButtonVisible},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRangeShowing",{get:function(){return this.showProgressBar&&this.currentIndex>=0&&this.visiblePanelCount>1},enumerable:!1,configurable:!0}),t.prototype.getElementsInDesign=function(e){return void 0===e&&(e=!1),e?[this.template]:this.templateElements},t.prototype.prepareValueForPanelCreating=function(){this.addingNewPanelsValue=this.value,this.isAddingNewPanels=!0,this.isNewPanelsValueChanged=!1},t.prototype.setValueAfterPanelsCreating=function(){this.isAddingNewPanels=!1,this.isNewPanelsValueChanged&&(this.isValueChangingInternally=!0,this.value=this.addingNewPanelsValue,this.isValueChangingInternally=!1)},t.prototype.getValueCore=function(){return this.isAddingNewPanels?this.addingNewPanelsValue:e.prototype.getValueCore.call(this)},t.prototype.setValueCore=function(t){this.isAddingNewPanels?(this.isNewPanelsValueChanged=!0,this.addingNewPanelsValue=t):e.prototype.setValueCore.call(this,t)},t.prototype.setIsMobile=function(t){e.prototype.setIsMobile.call(this,t),(this.panelsCore||[]).forEach(function(e){return e.getQuestions(!0).forEach(function(e){e.setIsMobile(t)})})},t.prototype.themeChanged=function(t){e.prototype.themeChanged.call(this,t),(this.panelsCore||[]).forEach(function(e){return e.getQuestions(!0).forEach(function(e){e.themeChanged(t)})})},Object.defineProperty(t.prototype,"panelCount",{get:function(){return!this.canBuildPanels||this.wasNotRenderedInSurvey?this.getPropertyValue("panelCount"):this.panelsCore.length},set:function(e){if(!(e<0)){if(!this.isLoadingFromJson&&this.isDesignMode){var t=this.minPanelCount;e<t&&(e=t);var n=this.maxPanelCount;n>0&&e>n&&(e=n)}if(!this.canBuildPanels||this.wasNotRenderedInSurvey)return this.setPropertyValue("panelCount",e),void this.updateFooterActions();if(e!=this.panelsCore.length&&!this.useTemplatePanel){this.updateBindings("panelCount",e),this.prepareValueForPanelCreating();for(var o=e-this.panelCount===1,i=this.panelCount;i<e;i++){var r=this.createNewPanel();this.panelsCore.push(r),"list"==this.displayMode&&"default"!=this.panelsState&&("expanded"===this.panelsState?r.expand():r.title&&r.collapse())}o&&this.singleInputOnAddItem(this.settingPanelCountBasedOnValue),e<this.panelCount&&this.panelsCore.splice(e,this.panelCount-e),this.disablePanelsAnimations(),this.setValueAfterPanelsCreating(),this.setValueBasedOnPanelCount(),this.reRunCondition(),this.updateFooterActions(),this.fireCallback(this.panelCountChangedCallback),this.enablePanelsAnimations()}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePanelCount",{get:function(){return this.visiblePanels.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelsState",{get:function(){return this.getPropertyValue("panelsState")},set:function(e){this.setPropertyValue("panelsState",e)},enumerable:!1,configurable:!0}),t.prototype.getStructuredValue=function(e){if(void 0===e&&(e=-1),e<0||this.isEmpty()||!Array.isArray(this.value))return this.value;for(var t=new Array,n=Math.min(this.visiblePanelCount,this.value.length),o=0;o<n;o++){var i={};this.visiblePanels[o].collectValues(i,e),t.push(i)}return t},t.prototype.setTemplatePanelSurveyImpl=function(){this.template.setSurveyImpl(this.useTemplatePanel?this.surveyImpl:new Pa(this))},t.prototype.setPanelsSurveyImpl=function(){for(var e=0;e<this.panelsCore.length;e++){var t=this.panelsCore[e];t!=this.template&&t.setSurveyImpl(t.data)}},t.prototype.setPanelsState=function(){if(!this.useTemplatePanel&&"list"==this.displayMode&&this.templateTitle)for(var e=0;e<this.panelsCore.length;e++){var t=this.panelsState;"firstExpanded"===t&&(t=0===e?"expanded":"collapsed"),this.panelsCore[e].state=t}},t.prototype.setValueBasedOnPanelCount=function(){var e=this.value;if(e&&Array.isArray(e)||(e=[]),e.length!=this.panelCount){for(var t=e.length;t<this.panelCount;t++){var n=this.panels[t].getValue(),o=r.isValueEmpty(n)?{}:n;e.push(o)}e.length>this.panelCount&&e.splice(this.panelCount,e.length-this.panelCount),this.isValueChangingInternally=!0,this.value=e,this.isValueChangingInternally=!1}},Object.defineProperty(t.prototype,"minPanelCount",{get:function(){return this.getPropertyValue("minPanelCount")},set:function(e){e<0&&(e=0),this.setPropertyValue("minPanelCount",e)},enumerable:!1,configurable:!0}),t.prototype.onMinPanelCountChanged=function(){var e=this.minPanelCount;e>this.maxPanelCount&&(this.maxPanelCount=e),this.panelCount<e&&(this.panelCount=e)},Object.defineProperty(t.prototype,"maxPanelCount",{get:function(){return this.getPropertyValue("maxPanelCount")},set:function(e){e<=0||(e>gn.panel.maxPanelCount&&(e=gn.panel.maxPanelCount),this.setPropertyValue("maxPanelCount",e),this.updateFooterActions())},enumerable:!1,configurable:!0}),t.prototype.onMaxPanelCountChanged=function(){var e=this.maxPanelCount;e<this.minPanelCount&&(this.minPanelCount=e),this.panelCount>e&&(this.panelCount=e),this.updateFooterActions()},Object.defineProperty(t.prototype,"allowAddPanel",{get:function(){return this.getPropertyValue("allowAddPanel")},set:function(e){this.setPropertyValue("allowAddPanel",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"addButtonId",{get:function(){return this.id+"addPanel"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newPanelPosition",{get:function(){return this.getPropertyValue("newPanelPosition")},set:function(e){this.setPropertyValue("newPanelPosition",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowRemovePanel",{get:function(){return this.getPropertyValue("allowRemovePanel")},set:function(e){this.setPropertyValue("allowRemovePanel",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateQuestionTitleLocation",{get:function(){return this.getPropertyValue("templateQuestionTitleLocation")},set:function(e){this.setPropertyValue("templateQuestionTitleLocation",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateTitleLocation",{get:function(){return this.templateQuestionTitleLocation},set:function(e){this.templateQuestionTitleLocation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateQuestionTitleWidth",{get:function(){return this.template.questionTitleWidth},set:function(e){this.template.questionTitleWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateErrorLocation",{get:function(){return this.getPropertyValue("templateErrorLocation")},set:function(e){this.setPropertyValue("templateErrorLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),t.prototype.resetSingleInput=function(){e.prototype.resetSingleInput.call(this),this.locTemplateTitle.onGetTextCallback=null},t.prototype.getSingleInputQuestionsCore=function(e,t){this.onFirstRendering();var n=new Array,o=this.visiblePanels;if(t)for(var i=0;i<o.length;i++){var r=o[i];r.hasValueAnyQuestion(!0)&&r.validate(!1,!1)||this.fillSingleInputQuestionsByPanel(n,r)}return this.getSingleInputQuestionsForDynamic(e,n)},t.prototype.fillSingleInputQuestionsInContainer=function(e,t){var n=this.getPanelByQuestion(t);this.fillSingleInputQuestionsByPanel(e,n)},t.prototype.fillSingleInputQuestionsByPanel=function(e,t){t&&t.visibleQuestions.forEach(function(t){return t.addNestedQuestion(e,!0,!1,!1)})},t.prototype.getSingleQuestionLocTitleCore=function(){var e=this,t=this.locTemplateTitle;return t.onGetTextCallback=function(t){var n=e.singleInputQuestion;return n?e.processSingleInputTitle(t,e.getPanelByQuestion(n)):t},t},t.prototype.processSingleInputTitle=function(e,t){return e||(e=this.getSingleInputTitleTemplate()),t?t.getProcessedText(e):e},t.prototype.getSingleInputTitleTemplate=function(){return this.getLocalizationString("panelDynamicTabTextFormat")},t.prototype.getPanelByQuestion=function(e){for(var t=e.parent;t&&t.parent;)t=t.parent;return t},t.prototype.getSingleInputAddTextCore=function(){if(this.canAddPanel)return this.addPanelText},t.prototype.singleInputAddItemCore=function(){this.addPanelUI()},t.prototype.singleInputRemoveItemCore=function(e){var t=this.getPanelByQuestion(e),n=this.visiblePanelsCore.indexOf(t);this.removePanelUI(n)},t.prototype.getSingleQuestionOnChange=function(e){var t=this.visiblePanelsCore;if(t.length>0){(e<0||e>=t.length)&&(e=t.length-1);var n=t[e].visibleQuestions;if(n.length>0)return n[0]}return null},t.prototype.createSingleInputSummary=function(){var e=this,t=new ci(this,this.locNoEntriesText),n=new Array;return this.visiblePanels.forEach(function(t){var o=new Et(e,!0,void 0,e.locTemplateTitle.localizationName);o.setJson(e.locTemplateTitle.getJson()),o.onGetTextCallback=function(n){return e.processSingleInputTitle(e.templateTitle,t)};var i=new dt({locTitle:e.getLocalizableString("editPanelText"),action:function(){e.singInputEditPanel(t)}}),r=e.canRemovePanel?new dt({locTitle:e.locPanelRemoveText,action:function(){e.removePanelUI(t)}}):void 0;n.push(new ui(o,i,r))}),t.items=n,t},t.prototype.singleInputMoveToFirstCore=function(){for(var e,t=null===(e=this.singleInputQuestion)||void 0===e?void 0:e.parent;t&&t.parent;)t=t.parent;this.singInputEditPanel(t)},t.prototype.singInputEditPanel=function(e){if(e){var t=e.visibleQuestions;t.length>0&&this.setSingleInputQuestion(t[0])}},Object.defineProperty(t.prototype,"showQuestionNumbers",{get:function(){return this.getPropertyValue("showQuestionNumbers")},set:function(e){this.setPropertyValue("showQuestionNumbers",e),!this.isLoadingFromJson&&this.survey&&this.survey.questionVisibilityChanged(this,this.visible,!0)},enumerable:!1,configurable:!0}),t.prototype.notifySurveyOnChildrenVisibilityChanged=function(){return"onSurvey"===this.showQuestionNumbers},Object.defineProperty(t.prototype,"removePanelButtonLocation",{get:function(){return this.getPropertyValue("removePanelButtonLocation")},set:function(e){this.setPropertyValue("removePanelButtonLocation",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelRemoveButtonLocation",{get:function(){return this.removePanelButtonLocation},set:function(e){this.removePanelButtonLocation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showRangeInProgress",{get:function(){return this.showProgressBar},set:function(e){this.showProgressBar=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderMode",{get:function(){var e=this.displayMode;if("carousel"==e){var t=this.progressBarLocation;if("top"==t)return"progressTop";if("bottom"==t)return"progressBottom";if("topBottom"==t)return"progressTopBottom"}return e},set:function(e){(e||"").startsWith("progress")?("progressTop"==e?this.progressBarLocation="top":"progressBottom"==e?this.progressBarLocation="bottom":"progressTopBottom"==e&&(this.progressBarLocation="topBottom"),this.displayMode="carousel"):this.displayMode=e},enumerable:!1,configurable:!0}),t.prototype.updatePanelView=function(){this.blockAnimations(),this.updateRenderedPanels(),this.releaseAnimations(),this.updatePanelsAnimation()},Object.defineProperty(t.prototype,"tabAlign",{get:function(){return this.getPropertyValue("tabAlign")},set:function(e){this.setPropertyValue("tabAlign",e),this.isRenderModeTab&&(this.tabbedMenu.containerCss=this.getTabbedMenuCss())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRenderModeList",{get:function(){return"list"===this.displayMode||this.isSingleInputActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRenderModeTab",{get:function(){return"tab"===this.displayMode&&!this.isSingleInputActive},enumerable:!1,configurable:!0}),t.prototype.setVisibleIndex=function(t){if(this.isVisibleIndexNegative(t))return e.prototype.setVisibleIndex.call(this,-1);for(var n="onSurvey"===this.showQuestionNumbers,o=n?t:0,i=this.isDesignMode?[this.template]:this.visiblePanelsCore,r=0;r<i.length;r++){var s=this.setPanelVisibleIndex(i[r],o,"off"!=this.showQuestionNumbers);n&&(o+=s)}return e.prototype.setVisibleIndex.call(this,n?-1:t),n?o-t:1},t.prototype.setPanelVisibleIndex=function(e,t,n){return n?e.setVisibleIndex(t):(e.setVisibleIndex(-1),0)},Object.defineProperty(t.prototype,"canAddPanel",{get:function(){return!this.isDesignMode&&!(!this.legacyNavigation&&!this.isRenderModeList&&this.currentIndex<this.visiblePanelCount-1&&"next"!==this.newPanelPosition)&&this.allowAddPanel&&!this.isReadOnly&&this.panelCount<this.maxPanelCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canRemovePanel",{get:function(){return!this.isDesignMode&&this.allowRemovePanel&&!this.isReadOnly&&this.panelCount>this.minPanelCount},enumerable:!1,configurable:!0}),t.prototype.rebuildPanels=function(){var e;if(!this.isLoadingFromJson){this.prepareValueForPanelCreating();var t=[];if(this.useTemplatePanel)new Ca(this,this.template),t.push(this.template);else for(var n=0;n<this.panelCount;n++)t.push(this.createNewPanel());(e=this.panelsCore).splice.apply(e,function(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}([0,this.panelsCore.length],t,!1)),this.setValueAfterPanelsCreating(),this.setPanelsState(),this.reRunCondition(),this.updateFooterActions(),this.fireCallback(this.panelCountChangedCallback),this.updateTabToolbar()}},Object.defineProperty(t.prototype,"defaultPanelValue",{get:function(){return this.getPropertyValue("defaultPanelValue")},set:function(e){this.setPropertyValue("defaultPanelValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"copyDefaultValueFromLastEntry",{get:function(){return this.getPropertyValue("copyDefaultValueFromLastEntry")},set:function(e){this.setPropertyValue("copyDefaultValueFromLastEntry",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultValueFromLastPanel",{get:function(){return this.copyDefaultValueFromLastEntry},set:function(e){this.copyDefaultValueFromLastEntry=e},enumerable:!1,configurable:!0}),t.prototype.isDefaultValueEmpty=function(){return e.prototype.isDefaultValueEmpty.call(this)&&this.isValueEmpty(this.defaultPanelValue)},t.prototype.setDefaultValue=function(){if(!this.isValueEmpty(this.defaultPanelValue)&&this.isValueEmpty(this.defaultValue)){if(this.isEmpty()&&0!=this.panelCount){for(var t=[],n=0;n<this.panelCount;n++)t.push(this.defaultPanelValue);this.value=t}}else e.prototype.setDefaultValue.call(this)},Object.defineProperty(t.prototype,"isValueArray",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){var e=this.value;if(!e||!Array.isArray(e))return!0;for(var t=0;t<e.length;t++)if(!this.isRowEmpty(e[t]))return!1;return!0},t.prototype.getProgressInfo=function(){return Tt.getProgressInfoByElements(this.visiblePanelsCore,this.isRequired)},t.prototype.isRowEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t.prototype.addPanelUI=function(){return this.addPanel(void 0,!0)},t.prototype.addPanel=function(e,t){var n=!0===t;if(n){if(!this.canAddPanel)return null;if(!this.canLeaveCurrentPanel())return null}var o=this.addPanelCore(e);return n&&("list"===this.displayMode&&"default"!==this.panelsState&&o.expand(),this.focusNewPanelCallback=function(){null==o||o.focusFirstQuestion()},this.isPanelsAnimationRunning||this.focusNewPanel()),o},t.prototype.addPanelCore=function(e){var t=this.currentIndex;return void 0===e&&(e=t<0?this.panelCount:t+1),(e<0||e>this.panelCount)&&(e=this.panelCount),this.updateValueOnAddingPanel(t<0?this.panelCount-1:t,e),this.isRenderModeList||(this.currentIndex=e),this.notifyOnPanelAddedRemoved(!0,e),this.panelsCore[e]},t.prototype.focusNewPanel=function(){this.focusNewPanelCallback&&(this.focusNewPanelCallback(),this.focusNewPanelCallback=void 0)},t.prototype.updateValueOnAddingPanel=function(e,t){this.panelCount++;var n=this.value;if(Array.isArray(n)&&n.length===this.panelCount){var o=!1,i=this.panelCount-1;if(t<i){o=!0;var r=n[i];n.splice(i,1),n.splice(t,0,r)}if(this.isValueEmpty(this.defaultPanelValue)||(o=!0,this.copyValue(n[t],this.defaultPanelValue)),this.copyDefaultValueFromLastEntry&&n.length>1){var s=e>-1&&e<=i?e:i;o=!0,this.copyValue(n[t],n[s])}o&&(this.value=n)}},t.prototype.canLeaveCurrentPanel=function(){return"list"===this.displayMode||!this.currentPanel||this.currentPanel.validate(!0,!0)},t.prototype.copyValue=function(e,t){for(var n in t)e[n]=t[n]},t.prototype.getPanelRemoveButtonId=function(e){return e.id+"_remove_button"},t.prototype.isRequireConfirmOnDelete=function(e){if(!this.confirmDelete)return!1;var t=this.getVisualPanelIndex(e);if(t<0||t>=this.visiblePanelCount)return!1;var n=this.visiblePanelsCore[t].getValue();return!this.isValueEmpty(n)&&(this.isValueEmpty(this.defaultPanelValue)||!this.isTwoValueEquals(n,this.defaultPanelValue))},t.prototype.goToNextPanel=function(){return!(this.currentIndex<0||!this.canLeaveCurrentPanel()||(this.currentIndex++,0))},t.prototype.goToPrevPanel=function(){this.currentIndex<0||this.currentIndex--},t.prototype.removePanelUI=function(e){this.removePanel(e,this.isRequireConfirmOnDelete(e))},t.prototype.removePanel=function(e,t){var n=this,o=this.getVisualPanelIndex(e);if(!(o<0||o>=this.visiblePanelCount))if(void 0!==t){if(!this.canRemovePanel)return;var i=function(){var e;n.removePanelCore(o);var t=n.visiblePanelCount,i=o>=t?t-1:o,r=0===t?n.addButtonId:i>-1?n.getPanelRemoveButtonId(n.visiblePanels[i]):"";r&&Tt.FocusElement(r,!0,null===(e=n.survey)||void 0===e?void 0:e.rootElement)};t?Lt({message:this.confirmDeleteText,funcOnYes:function(){i()},locale:this.getLocale(),rootElement:this.survey.rootElement,cssClass:this.cssClasses.confirmDialog}):i()}else this.removePanelCore(o)},t.prototype.removePanelCore=function(e){this.removedPanelIndex=e;var t=this.visiblePanelsCore[e],n=this.panelsCore.indexOf(t);if(!(n<0)&&(!this.survey||this.survey.dynamicPanelRemoving(this,n,t))){this.panelsCore.splice(n,1),this.updateBindings("panelCount",this.panelCount),this.singleInputOnRemoveItem(e);var o=this.value;!o||!Array.isArray(o)||n>=o.length?this.updateFooterActions():(this.isValueChangingInternally=!0,o.splice(n,1),this.value=o,this.updateFooterActions(),this.fireCallback(this.panelCountChangedCallback),this.notifyOnPanelAddedRemoved(!1,n,t),this.isValueChangingInternally=!1)}},t.prototype.notifyOnPanelAddedRemoved=function(e,t,n){if(n||(n=this.panelsCore[t]),this.survey){var o="onSurvey"===this.showQuestionNumbers;e?this.survey.dynamicPanelAdded(this,t,n,o):this.survey.dynamicPanelRemoved(this,t,n,o)}e&&n&&"onPanel"===this.showQuestionNumbers&&n.setVisibleIndex(0)},t.prototype.getVisualPanelIndex=function(e){if(r.isNumber(e))return e;for(var t=this.visiblePanelsCore,n=0;n<t.length;n++)if(t[n]===e||t[n].data===e)return n;return-1},t.prototype.getPanelVisibleIndexById=function(e){for(var t=this.visiblePanelsCore,n=0;n<t.length;n++)if(t[n].id===e)return n;return-1},t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.locTemplateTitle.strChanged();for(var t=this.panelsCore,n=0;n<t.length;n++)t[n].locStrsChanged();this.tabbedMenu&&this.tabbedMenu.locStrsChanged()},t.prototype.clearIncorrectValues=function(){for(var e=0;e<this.panelsCore.length;e++)this.clearIncorrectValuesInPanel(e)},t.prototype.clearErrors=function(){e.prototype.clearErrors.call(this);for(var t=0;t<this.panelsCore.length;t++)this.panelsCore[t].clearErrors()},t.prototype.getQuestionFromArray=function(e,t){return t<0||t>=this.panelsCore.length?null:this.panelsCore[t].getQuestionByName(e)},t.prototype.clearIncorrectValuesInPanel=function(e){var t=this.panelsCore[e];t.clearIncorrectValues();var n=this.value,o=n&&e<n.length?n[e]:null;if(o){var i=!1;for(var r in o)this.getSharedQuestionFromArray(r,e)||t.getQuestionByValueName(r)||this.iscorrectValueWithPostPrefix(t,r,gn.commentSuffix)||this.iscorrectValueWithPostPrefix(t,r,gn.matrix.totalsSuffix)||(delete o[r],i=!0);i&&(n[e]=o,this.value=n)}},t.prototype.iscorrectValueWithPostPrefix=function(e,t,n){return t.indexOf(n)===t.length-n.length&&!!e.getQuestionByName(t.substring(0,t.indexOf(n)))},t.prototype.getSharedQuestionFromArray=function(e,t){return this.survey&&this.valueName?this.survey.getQuestionByValueNameFromArray(this.valueName,e,t):null},t.prototype.addConditionObjectsByContext=function(e,t){for(var n=(null==t?void 0:t.isValidator)?t.errorOwner:t,o=!!t&&(!0===t||this.template.questions.indexOf(n)>-1),i=new Array,r=this.template.questions,s=0;s<r.length;s++)r[s].addConditionObjectsByContext(i,t);for(var a=0;a<gn.panel.maxPanelCountInCondition;a++){var l="["+a+"].",u=this.getValueName()+l,c=this.processedTitle+l;for(s=0;s<i.length;s++)i[s].context?e.push(i[s]):e.push({name:u+i[s].name,text:c+i[s].text,question:i[s].question})}if(o){u=!0===t?this.getValueName()+".":"",c=!0===t?this.processedTitle+".":"";var p=gn.expressionVariables.panel+".";for(s=0;s<i.length;s++)if(i[s].question!=t){var h={name:u+p+i[s].name,text:c+p+i[s].text,question:i[s].question};h.context=this,e.push(h)}}},t.prototype.collectNestedQuestionsCore=function(e,t,n,o){o&&e.push(this);var i=t?this.visiblePanelsCore:this.panelsCore;Array.isArray(i)&&i.forEach(function(i){i.questions.forEach(function(i){return i.addNestedQuestion(e,t,n,o)})})},t.prototype.getConditionJson=function(t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),!n)return e.prototype.getConditionJson.call(this,t);var o=n,i=n.indexOf(".");i>-1&&(o=n.substring(0,i),n=n.substring(i+1));var r=this.template.getQuestionByName(o);return r?r.getConditionJson(t,n):null},t.prototype.onReadOnlyChanged=function(){var t=this.isReadOnly;this.template.readOnly=t;for(var n=0;n<this.panelsCore.length;n++)this.panelsCore[n].readOnly=t;this.updateNoEntriesTextDefaultLoc(),this.updateFooterActions(),e.prototype.onReadOnlyChanged.call(this)},t.prototype.updateNoEntriesTextDefaultLoc=function(){var e=this.getLocalizableString("noEntriesText");e&&(e.localizationName=this.isReadOnly||!this.allowAddPanel?"noEntriesReadonlyText":"noEntriesText")},t.prototype.onSurveyLoad=function(){this.template.readOnly=this.isReadOnly,this.template.onSurveyLoad(),this.panelCount<this.minPanelCount&&(this.panelCount=this.minPanelCount),this.panelCount>this.maxPanelCount&&(this.panelCount=this.maxPanelCount),this.buildPanelsFirstTime(),e.prototype.onSurveyLoad.call(this)},t.prototype.buildPanelsFirstTime=function(e){if(void 0===e&&(e=!1),!this.hasPanelBuildFirstTime&&(e||!this.wasNotRenderedInSurvey)){if(this.blockAnimations(),this.hasPanelBuildFirstTime=!0,this.isBuildingPanelsFirstTime=!0,this.getPropertyValue("panelCount")>0&&(this.panelCount=this.getPropertyValue("panelCount")),this.useTemplatePanel&&this.rebuildPanels(),this.setPanelsSurveyImpl(),this.setPanelsState(),this.assignOnPropertyChangedToTemplate(),this.data&&this.isValueChangedWithoutPanels&&(this.isValueChangedWithoutPanels=!1,this.runTriggersOnBuildPanelsFirstTime()),this.survey)for(var t=0;t<this.panelCount;t++)this.notifyOnPanelAddedRemoved(!0,t);this.updateIsReady(),this.showAddPanelButton||this.updateNoEntriesTextDefaultLoc(),this.updateFooterActions(),this.isBuildingPanelsFirstTime=!1,this.releaseAnimations()}},t.prototype.runTriggersOnBuildPanelsFirstTime=function(){var e=this;this.value,this.visiblePanelsCore.forEach(function(t){var n=e.getPanelItemData(t.data);if(!r.isValueEmpty(n)){var o=r.createCopyWithPrefix(n,gn.expressionVariables.panel+".");t.questions.forEach(function(e){return e.runTriggers("",void 0,o)})}})},Object.defineProperty(t.prototype,"showAddPanelButton",{get:function(){return this.allowAddPanel&&!this.isReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wasNotRenderedInSurvey",{get:function(){return!this.hasPanelBuildFirstTime&&!this.wasRendered&&!!this.survey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canBuildPanels",{get:function(){return!this.isLoadingFromJson&&!this.useTemplatePanel},enumerable:!1,configurable:!0}),t.prototype.onFirstRenderingCore=function(){e.prototype.onFirstRenderingCore.call(this),this.buildPanelsFirstTime(),this.template.onFirstRendering();for(var t=0;t<this.panelsCore.length;t++)this.panelsCore[t].onFirstRendering()},t.prototype.localeChanged=function(){e.prototype.localeChanged.call(this);for(var t=0;t<this.panelsCore.length;t++)this.panelsCore[t].localeChanged()},t.prototype.runConditionCore=function(t){e.prototype.runConditionCore.call(this,t),this.runPanelsCondition(this.panelsCore,t)},t.prototype.runTriggers=function(t,n,o){e.prototype.runTriggers.call(this,t,n,o),this.visiblePanelsCore.forEach(function(e){e.questions.forEach(function(e){return e.runTriggers(t,n,o)})})},t.prototype.reRunCondition=function(){this.data&&this.runCondition(this.getDataFilteredProperties())},t.prototype.runPanelsCondition=function(e,t){this.isValueChangingInternally=!0;for(var n=0;n<e.length;n++){var o=e[n],i=gn.expressionVariables.panel,s=r.createCopy(t);s[i]=o,o.runCondition(s),o.isVisible}this.isValueChangingInternally=!1},t.prototype.onAnyValueChanged=function(t,n){e.prototype.onAnyValueChanged.call(this,t,n),this.hasPanelBuildFirstTime||t!==this.getValueName()||(this.isValueChangedWithoutPanels=!0);for(var o=0;o<this.panelsCore.length;o++)this.panelsCore[o].onAnyValueChanged(t,n),this.panelsCore[o].onAnyValueChanged(gn.expressionVariables.panel,"")},t.prototype.hasKeysDuplicated=function(e){for(var t,n=[],o=0;o<this.panelsCore.length;o++)t=this.isValueDuplicated(this.panelsCore[o],n,e)||t;return t},t.prototype.updatePanelsContainsErrors=function(){for(var e=this.changingValueQuestion.parent;e;)e.updateContainsErrors(),e=e.parent;this.updateContainsErrors()},t.prototype.validateElementCore=function(t){if(this.isValueChangingInternally||this.isBuildingPanelsFirstTime)return!0;var n=!0;if(this.changingValueQuestion){var o=this.changingValueQuestion.validateElement(t);n=!this.hasKeysDuplicated(t)&&o,this.updatePanelsContainsErrors()}else n=this.validateInPanels(t);return e.prototype.validateElementCore.call(this,t)&&n},t.prototype.getContainsErrors=function(){var t=e.prototype.getContainsErrors.call(this);if(t)return t;for(var n=this.panelsCore,o=0;o<n.length;o++)if(n[o].containsErrors)return!0;return!1},t.prototype.getIsAnswered=function(){if(!e.prototype.getIsAnswered.call(this))return!1;for(var t=this.visiblePanelsCore,n=0;n<t.length;n++){var o=[];t[n].addQuestionsToList(o,!0);for(var i=0;i<o.length;i++)if(!o[i].isAnswered)return!1}return!0},t.prototype.clearValueOnHidding=function(t){if(!t){if(this.survey&&"none"===this.survey.getQuestionClearIfInvisible("onHidden"))return;this.clearValueInPanelsIfInvisible("onHiddenContainer")}e.prototype.clearValueOnHidding.call(this,t)},t.prototype.clearValueIfInvisible=function(t){void 0===t&&(t="onHidden");var n="onHidden"===t?"onHiddenContainer":t;this.clearValueInPanelsIfInvisible(n),e.prototype.clearValueIfInvisible.call(this,t)},t.prototype.clearValueInPanelsIfInvisible=function(e){for(var t=0;t<this.panelsCore.length;t++){var n=this.panelsCore[t],o=n.questions;this.isSetPanelItemData={};for(var i=0;i<o.length;i++){var r=o[i];r.visible&&!n.isVisible||(r.clearValueIfInvisible(e),this.isSetPanelItemData[r.getValueName()]=this.maxCheckCount+1)}}this.isSetPanelItemData={}},t.prototype.getIsRunningValidators=function(){if(e.prototype.getIsRunningValidators.call(this))return!0;for(var t=0;t<this.panelsCore.length;t++)for(var n=this.panelsCore[t].questions,o=0;o<n.length;o++)if(n[o].isRunningValidators)return!0;return!1},t.prototype.getAllErrors=function(){for(var t=e.prototype.getAllErrors.call(this),n=this.visiblePanelsCore,o=0;o<n.length;o++)for(var i=n[o].questions,r=0;r<i.length;r++){var s=i[r].getAllErrors();s&&s.length>0&&(t=t.concat(s))}return t},t.prototype.getValueGetterContext=function(){return new ba(this)},t.prototype.getDisplayValueCore=function(e,t){var n=this.getUnbindValue(t);if(!n||!Array.isArray(n))return n;for(var o=0;o<this.panelsCore.length&&o<n.length;o++){var i=n[o];i&&(n[o]=this.getPanelDisplayValue(o,i,e))}return n},t.prototype.getPanelDisplayValue=function(e,t,n){if(!t)return t;for(var o=this.panelsCore[e],i=Object.keys(t),r=0;r<i.length;r++){var s=i[r],a=o.getQuestionByValueName(s);if(a||(a=this.getSharedQuestionFromArray(s,e)),a){var l=a.getDisplayValue(n,t[s]);t[s]=l,n&&a.title&&a.title!==s&&(t[a.title]=l,delete t[s])}}return t},t.prototype.validateInPanels=function(e){for(var t=!0,n=this.visiblePanels,o=[],i=0;i<n.length;i++){var r=n[i].validateElement(e);r=!this.isValueDuplicated(n[i],o,e)&&r,!this.isRenderModeList&&!r&&t&&e.focusOnFirstError&&(this.currentIndex=i),t=r&&t}return t},t.prototype.isValueDuplicated=function(e,t,n){if(!this.keyName)return!1;var o=e.getQuestionByValueName(this.keyName);if(!o||o.isEmpty())return!1;var i=o.value;this.changingValueQuestion&&o!=this.changingValueQuestion&&o.validateElement(n);for(var r=0;r<t.length;r++)if(i==t[r])return n.fireCallback&&o.addError(new Rn(this.keyDuplicationError,this)),n.setErrorElement(o),!0;return t.push(i),!1},t.prototype.getPanelActions=function(e){var t=this,n=e.footerActions;return"right"!==this.removePanelButtonLocation&&n.push(new dt({id:"remove-panel-".concat(e.id),component:"sv-paneldynamic-remove-btn",visible:new Ie(function(){return[t.canRenderRemovePanel(e,"bottom")].every(function(e){return!0===e})}),data:{question:this,panel:e}})),this.survey&&(n=this.survey.getUpdatedPanelFooterActions(e,n,this)),n},t.prototype.canRenderRemovePanelOnRight=function(e){return this.canRenderRemovePanel(e,"right")},t.prototype.canRenderRemovePanel=function(e,t){var n=this.canRemovePanel,o="collapsed"!==e.state;return this.removePanelButtonLocation===t&&n&&o},t.prototype.createNewPanel=function(){var e=this,t=this.createAndSetupNewPanelObject(),n=this.template.toJSON();return(new A).toObject(n,t),t.renderWidth="100%",t.updateCustomWidgets(),t.questions.forEach(function(t){return t.setParentQuestion(e)}),new Ca(this,t),this.wasRendered&&(t.onFirstRendering(),t.locStrsChanged()),t.onGetFooterActionsCallback=function(){return e.getPanelActions(t)},t.onGetFooterToolbarCssCallback=function(){return e.cssClasses.panelFooter},t.registerPropertyChangedHandlers(["visible"],function(){t.visible?e.onPanelAdded(t):e.onPanelRemoved(t),e.updateFooterActions()}),t},t.prototype.createAndSetupNewPanelObject=function(){var e=this,t=this.createNewPanelObject();return t.isInteractiveDesignElement=!1,t.setParentQuestion(this),t.onGetQuestionTitleLocation=function(){return e.getTemplateQuestionTitleLocation()},t.onGetQuestionTitleWidth=function(){return e.templateQuestionTitleWidth},t},t.prototype.getTemplateQuestionTitleLocation=function(){return"default"!=this.templateQuestionTitleLocation?this.templateQuestionTitleLocation:this.getParentTitleLocation()},t.prototype.getChildErrorLocation=function(t){return"default"!==this.templateErrorLocation?this.templateErrorLocation:e.prototype.getChildErrorLocation.call(this,t)},t.prototype.createNewPanelObject=function(){return D.createClass("panel")},t.prototype.setPanelCountBasedOnValue=function(){if(!this.isValueChangingInternally&&!this.useTemplatePanel){var e=this.value,t=e&&Array.isArray(e)?e.length:0;0==t&&this.getPropertyValue("panelCount")>0&&(t=this.getPropertyValue("panelCount")),this.settingPanelCountBasedOnValue=!0,this.panelCount=t,this.settingPanelCountBasedOnValue=!1}},t.prototype.setQuestionValue=function(t){if(!this.settingPanelCountBasedOnValue){e.prototype.setQuestionValue.call(this,t,!1),this.setPanelCountBasedOnValue();for(var n=0;n<this.panelsCore.length;n++)this.panelUpdateValueFromSurvey(this.panelsCore[n]);this.updateIsAnswered()}},t.prototype.onSurveyValueChanged=function(t){if(void 0!==t||!this.isAllPanelsEmpty()){e.prototype.onSurveyValueChanged.call(this,t);for(var n=0;n<this.panelsCore.length;n++)this.panelSurveyValueChanged(this.panelsCore[n]);void 0===t&&this.setValueBasedOnPanelCount(),this.updateIsReady()}},t.prototype.isAllPanelsEmpty=function(){for(var e=0;e<this.panelsCore.length;e++)if(!r.isValueEmpty(this.panelsCore[e].getValue()))return!1;return!0},t.prototype.panelUpdateValueFromSurvey=function(e){for(var t=e.questions,n=this.getPanelItemData(e.data),o=0;o<t.length;o++){var i=t[o];i.updateValueFromSurvey(n[i.getValueName()]),i.updateCommentFromSurvey(n[i.getValueName()+gn.commentSuffix]),i.initDataUI()}},t.prototype.panelSurveyValueChanged=function(e){for(var t=e.questions,n=this.getPanelItemData(e.data),o=0;o<t.length;o++){var i=t[o];i.onSurveyValueChanged(n[i.getValueName()])}},t.prototype.onSetData=function(){e.prototype.onSetData.call(this),!this.isLoadingFromJson&&this.useTemplatePanel&&(this.setTemplatePanelSurveyImpl(),this.rebuildPanels())},t.prototype.isNewValueCorrect=function(e){return Array.isArray(e)},t.prototype.getValueChangingOptions=function(e){for(var t=e.parent;t.parent;)t=t.parent;var n=t,o=this.panels.indexOf(n);return{question:this,panel:n,name:e.name,panelIndex:o,panelData:this.getPanelItemDataByIndex(o),oldValue:e.value}},t.prototype.getItemIndex=function(e){var t=this.items.indexOf(e);return t>-1?t:this.items.length},t.prototype.getVisibleItemIndex=function(e){for(var t=this.visiblePanelsCore,n=0;n<t.length;n++)if(t[n].data===e)return n;return t.length},t.prototype.getPanelItemData=function(e){return this.getPanelItemDataByIndex(this.items.indexOf(e))},t.prototype.getPanelItemDataByIndex=function(e){var t=this.items,n=this.value;return e<0&&Array.isArray(n)&&n.length>t.length&&(e=t.length),e<0||!n||!Array.isArray(n)||n.length<=e?{}:n[e]},t.prototype.setPanelItemData=function(e,t,n){if(!(this.isSetPanelItemData[t]>this.maxCheckCount)){this.isSetPanelItemData[t]||(this.isSetPanelItemData[t]=0),this.isSetPanelItemData[t]++;var o=this.items,i=o.indexOf(e);i<0&&(i=o.length);var r=this.getUnbindValue(this.value);r&&Array.isArray(r)||(r=[]);for(var s=Math.max(i+1,o.length),a=r.length;a<s;a++)r.push({});r[i]||(r[i]={}),this.isValueEmpty(n)?delete r[i][t]:r[i][t]=n,i>=0&&i<this.panelsCore.length&&(this.changingValueQuestion=this.panelsCore[i].getQuestionByValueName(t)),this.value=r,this.changingValueQuestion=null,this.isSetPanelItemData[t]--,this.isSetPanelItemData[t]-1&&delete this.isSetPanelItemData[t]}},t.prototype.getRootData=function(){return this.data},t.prototype.getPlainData=function(t){void 0===t&&(t={includeEmpty:!0});var n=e.prototype.getPlainData.call(this,t);if(n){n.isNode=!0;var o=Array.isArray(n.data)?[].concat(n.data):[];n.data=this.panels.map(function(e,n){var o={name:e.name||n,title:e.title||"Panel",value:e.getValue(),displayValue:e.getValue(),getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!0,data:e.questions.map(function(e){return e.getPlainData(t)}).filter(function(e){return!!e})};return(t.calculations||[]).forEach(function(t){o[t.propertyName]=e[t.propertyName]}),o}),n.data=n.data.concat(o)}return n},t.prototype.updateElementCss=function(t){e.prototype.updateElementCss.call(this,t);for(var n=0;n<this.panelsCore.length;n++)this.panelsCore[n].updateElementCss(t)},Object.defineProperty(t.prototype,"progressText",{get:function(){var e=this.visiblePanelCount;return this.getLocalizationFormatString("panelDynamicProgressText",this.currentIndex+1,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progress",{get:function(){return(this.currentIndex+1)/this.visiblePanelCount*100+"%"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressBarAriaLabel",{get:function(){return l("progressbar",this.getLocale())},enumerable:!1,configurable:!0}),t.prototype.getRootCss=function(){return(new _e).append(e.prototype.getRootCss.call(this)).append(this.cssClasses.empty,this.getShowNoEntriesPlaceholder()).toString()},Object.defineProperty(t.prototype,"cssHeader",{get:function(){var t=this.isRenderModeTab&&!!this.visiblePanelCount;return(new _e).append(e.prototype.getCssHeader.call(this,this.cssClasses)).append(this.cssClasses.headerTab,this.hasTitleOnTop&&t).toString()},enumerable:!1,configurable:!0}),t.prototype.getTabsContainerCss=function(){return(new _e).append(this.cssClasses.tabsContainer).append(this.cssClasses.tabsContainerWithHeader,this.hasTitleOnTop).toString()},t.prototype.getPanelWrapperCss=function(e){return(new _e).append(this.cssClasses.panelWrapper,!e||e.visible).append(this.cssClasses.panelWrapperList,this.isRenderModeList).append(this.cssClasses.panelWrapperInRow,"right"===this.removePanelButtonLocation).toString()},t.prototype.getPanelRemoveButtonCss=function(){return(new _e).append(this.cssClasses.button).append(this.cssClasses.buttonRemove).append(this.cssClasses.buttonRemoveRight,"right"===this.removePanelButtonLocation).toString()},t.prototype.getAddButtonCss=function(){return(new _e).append(this.cssClasses.button).append(this.cssClasses.buttonAdd).append(this.cssClasses.buttonAdd+"--list-mode","list"===this.displayMode).toString()},t.prototype.getPrevButtonCss=function(){return(new _e).append(this.cssClasses.buttonPrev).append(this.cssClasses.buttonPrevDisabled,!this.isPrevButtonVisible).toString()},t.prototype.getNextButtonCss=function(){return(new _e).append(this.cssClasses.buttonNext).append(this.cssClasses.buttonNextDisabled,!this.isNextButtonVisible).toString()},Object.defineProperty(t.prototype,"noEntriesText",{get:function(){return this.getLocalizableStringText("noEntriesText")},set:function(e){this.setLocalizableStringText("noEntriesText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locNoEntriesText",{get:function(){return this.getLocalizableString("noEntriesText")},enumerable:!1,configurable:!0}),t.prototype.getShowNoEntriesPlaceholder=function(){return!!this.cssClasses.noEntriesPlaceholder&&!this.isDesignMode&&0===this.visiblePanelCount},t.prototype.needResponsiveWidth=function(){for(var e=this.getPanels(),t=0;t<e.length;t++){var n=e[t];if(n.isVisible&&n.needResponsiveWidth())return!0}return!1},Object.defineProperty(t.prototype,"hasTabbedMenu",{get:function(){return this.isRenderModeTab&&this.visiblePanels.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tabbedMenu",{get:function(){return this.isRenderModeTab?(this.tabbedMenuValue||(this.tabbedMenuValue=new yt,this.tabbedMenuValue.dotsItem.popupModel.showPointer=!1,this.tabbedMenuValue.dotsItem.popupModel.verticalPosition="bottom",this.tabbedMenuValue.dotsItem.popupModel.horizontalPosition="center",this.updateElementCss(!1)),this.tabbedMenuValue):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showFooterToolbar",{get:function(){return this.footerToolbar&&this._showFooterToolbar},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerToolbar",{get:function(){return this.footerToolbarValue||this.initFooterToolbar(),this.footerToolbarValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRole",{get:function(){return"group"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRequired",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaInvalid",{get:function(){return null},enumerable:!1,configurable:!0}),t.prototype.updateFooterActions=function(){this.updateFooterActionsCallback&&this.updateFooterActionsCallback()},t.prototype.initFooterToolbar=function(){var e=this;this.footerToolbarValue=this.createActionContainer();var t=[],n=new dt({id:"sv-pd-prev-btn",title:this.prevPanelText,action:function(){e.goToPrevPanel()}}),o=new dt({id:"sv-pd-next-btn",title:this.nextPanelText,action:function(){e.goToNextPanel()}}),i=new dt({id:"sv-pd-add-btn",component:"sv-paneldynamic-add-btn",data:{question:this}}),r=new dt({id:"sv-prev-btn-icon",component:"sv-paneldynamic-prev-btn",data:{question:this}}),s=new dt({id:"sv-pd-progress-text",component:"sv-paneldynamic-progress-text",data:{question:this}}),a=new dt({id:"sv-pd-next-btn-icon",component:"sv-paneldynamic-next-btn",data:{question:this}});t.push(n,o,i,r,s,a),this.updateFooterActionsCallback=function(){var t=e.legacyNavigation,l=e.isRenderModeList,u=e.isMobile,c=!t&&!l;n.visible=c&&e.currentIndex>0,o.visible=c&&e.currentIndex<e.visiblePanelCount-1,o.needSpace=u&&o.visible&&n.visible,i.visible=e.canAddPanel,i.needSpace=e.isMobile&&!o.visible&&n.visible,s.visible=!e.isRenderModeList&&!u,s.needSpace=!t&&!e.isMobile;var p=t&&!l;r.visible=p,a.visible=p,r.needSpace=p},this.updateFooterActionsCallback(),this.footerToolbarValue.setItems(t),this.footerToolbar.flushUpdates(),this._showFooterToolbar=new Ie(function(){var t;return null===(t=e.footerToolbarValue)||void 0===t?void 0:t.hasVisibleActions})},t.prototype.createTabByPanel=function(e,t){var n=this;if(this.isRenderModeTab){var o=new Et(e,!0);o.onGetTextCallback=function(o){if(o||(o=n.locTabTitlePlaceholder.renderedHtml),!n.survey)return o;var i={title:o,panel:e,visiblePanelIndex:t};return n.survey.dynamicPanelGetTabTitle(n,i),i.title},o.sharedData=this.locTemplateTabTitle;var i=e.id,r=this.getPanelVisibleIndexById(i)===this.currentIndex;return new va({id:"".concat(this.id,"_tab_").concat(i),panelId:i,pressed:r,locTitle:o,disableHide:r,action:function(){n.currentIndex=n.getPanelVisibleIndexById(i)}})}},t.prototype.getTabbedMenuCss=function(e){var t=null!=e?e:this.cssClasses;return(new _e).append(t.tabsRoot).append(t.tabsLeft,"left"===this.tabAlign).append(t.tabsRight,"right"===this.tabAlign).append(t.tabsCenter,"center"===this.tabAlign).toString()},t.prototype.updateTabToolbarItemsPressedState=function(){if(this.isRenderModeTab&&!(this.currentIndex<0||this.currentIndex>=this.visiblePanelCount)){var e=this.visiblePanelsCore[this.currentIndex];this.tabbedMenu.actions.forEach(function(t){var n=t.panelId===e.id;t.pressed=n,t.disableHide=n})}},t.prototype.updateTabToolbar=function(){var e=this;if(this.isRenderModeTab){for(var t=[],n=this.visiblePanelsCore,o=function(o){i.visiblePanelsCore.forEach(function(i){return t.push(e.createTabByPanel(n[o],o))})},i=this,r=0;r<n.length;r++)o(r);this.tabbedMenu.setItems(t)}},t.prototype.addTabFromToolbar=function(e,t){if(this.isRenderModeTab){var n=this.createTabByPanel(e,t);this.tabbedMenu.actions.splice(t,0,n),this.updateTabToolbarItemsPressedState()}},t.prototype.removeTabFromToolbar=function(e){if(this.isRenderModeTab){var t=this.tabbedMenu.actions.find(function(t){return t.panelId==e.id});t&&(this.tabbedMenu.actions.splice(this.tabbedMenu.actions.indexOf(t),1),this.updateTabToolbarItemsPressedState())}},Object.defineProperty(t.prototype,"showNavigation",{get:function(){return(!this.isReadOnly||1!=this.visiblePanelCount)&&this.visiblePanelCount>0&&!!this.cssClasses.footer},enumerable:!1,configurable:!0}),t.prototype.showSeparator=function(e){return this.isRenderModeList&&e<this.renderedPanels.length-1},t.prototype.calcCssClasses=function(t){var n=e.prototype.calcCssClasses.call(this,t),o=this.tabbedMenu;return o&&(o.containerCss=this.getTabbedMenuCss(n),o.cssClasses=n.tabs,o.dotsItem.cssClasses=n.tabs,o.dotsItem.popupModel.contentComponentData.model.cssClasses=t.list),n},t.prototype.onMobileChanged=function(){e.prototype.onMobileChanged.call(this),this.updateFooterActions()},t.maxCheckCount=3,ya([b({})],t.prototype,"_renderedPanels",void 0),ya([y({onSet:function(e,t){t.fireCallback(t.renderModeChangedCallback),t.updatePanelView()}})],t.prototype,"displayMode",void 0),ya([y({onSet:function(e,t){t.fireCallback(t.currentIndexChangedCallback)}})],t.prototype,"showProgressBar",void 0),ya([y({onSet:function(e,t){}})],t.prototype,"progressBarLocation",void 0),ya([y({defaultValue:!1})],t.prototype,"_showFooterToolbar",void 0),ya([y({defaultValue:!1,onSet:function(e,t){t.updateFooterActions()}})],t.prototype,"legacyNavigation",void 0),t}(Xn);D.addClass("paneldynamic",[{name:"showCommentArea:switch",layout:"row",visible:!0,category:"general"},{name:"templateElements",alternativeName:"questions",baseClassName:"question",visible:!1,isLightSerializable:!1},{name:"templateTitle:text",serializationProperty:"locTemplateTitle"},{name:"templateTabTitle",serializationProperty:"locTemplateTabTitle",visibleIf:function(e){return"tab"===e.displayMode}},{name:"tabTitlePlaceholder",serializationProperty:"locTabTitlePlaceholder",visibleIf:function(e){return"tab"===e.displayMode}},{name:"templateDescription:text",serializationProperty:"locTemplateDescription"},{name:"minWidth",defaultFunc:function(){return"auto"}},{name:"noEntriesText:text",serializationProperty:"locNoEntriesText"},{name:"allowAddPanel:boolean",default:!0},{name:"allowRemovePanel:boolean",default:!0},{name:"newPanelPosition",choices:["next","last"],default:"last",category:"layout"},{name:"panelCount:number",isBindable:!0,default:0,choices:[0,1,2,3,4,5,6,7,8,9,10]},{name:"minPanelCount:number",default:0,minValue:0},{name:"maxPanelCount:number",defaultFunc:function(){return gn.panel.maxPanelCount}},"defaultPanelValue:panelvalue",{name:"copyDefaultValueFromLastEntry:boolean",alternativeName:"defaultValueFromLastPanel"},{name:"panelsState",default:"default",choices:["default","collapsed","expanded","firstExpanded"],visibleIf:function(e){return"list"===e.displayMode}},{name:"keyName"},{name:"keyDuplicationError",serializationProperty:"locKeyDuplicationError"},{name:"confirmDelete:boolean"},{name:"confirmDeleteText",serializationProperty:"locConfirmDeleteText",visibleIf:function(e){return e.confirmDelete}},{name:"addPanelText",alternativeName:"panelAddText",serializationProperty:"locAddPanelText",visibleIf:function(e){return e.allowAddPanel}},{name:"removePanelText",alternativeName:"panelRemoveText",serializationProperty:"locRemovePanelText",visibleIf:function(e){return e.allowRemovePanel}},{name:"prevPanelText",alternativeName:"panelPrevText",serializationProperty:"locPrevPanelText",visibleIf:function(e){return"list"!==e.displayMode}},{name:"nextPanelText",alternativeName:"panelNextText",serializationProperty:"locNextPanelText",visibleIf:function(e){return"list"!==e.displayMode}},{name:"showQuestionNumbers",default:"off",choices:["off","onPanel","onSurvey"]},{name:"renderMode",visible:!1,isSerializable:!1},{name:"displayMode",default:"list",choices:["list","carousel","tab"]},{name:"showProgressBar:boolean",alternativeName:"showRangeInProgress",default:!0,visibleIf:function(e){return"carousel"===e.displayMode}},{name:"progressBarLocation",default:"top",choices:["top","bottom","topBottom"],visibleIf:function(e){return e.showProgressBar&&"carousel"===e.displayMode}},{name:"tabAlign",default:"center",choices:["left","center","right"],visibleIf:function(e){return"tab"===e.displayMode}},{name:"templateQuestionTitleLocation",alternativeName:"questionTitleLocation",default:"default",choices:["default","top","bottom","left"]},{name:"templateQuestionTitleWidth",visibleIf:function(e){return!!e&&e.template.availableQuestionTitleWidth()}},{name:"templateErrorLocation",default:"default",choices:["default","top","bottom"]},{name:"templateVisibleIf:expression",category:"logic"},{name:"removePanelButtonLocation",alternativeName:"panelRemoveButtonLocation",default:"bottom",choices:["bottom","right"],visibleIf:function(e){return e.allowRemovePanel}}],function(){return new wa("")},"question"),Io.Instance.registerQuestion("paneldynamic",function(e){return new wa(e)});var Va=function(){function e(){}return e.getProgressTextInBarCss=function(e){return(new _e).append(e.progressText).append(e.progressTextInBar).toString()},e.getProgressTextUnderBarCss=function(e){return(new _e).append(e.progressText).append(e.progressTextUnderBar).toString()},e}(),xa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Oa=function(e){function t(){return e.call(this)||this}return xa(t,e),Object.defineProperty(t,"operators",{get:function(){return null!=t.operatorsValue||(t.operatorsValue={empty:function(e,t){return!e},notempty:function(e,t){return!!e},equal:function(e,t){return e==t},notequal:function(e,t){return e!=t},contains:function(e,t){return e&&e.indexOf&&e.indexOf(t)>-1},notcontains:function(e,t){return!e||!e.indexOf||-1==e.indexOf(t)},greater:function(e,t){return e>t},less:function(e,t){return e<t},greaterorequal:function(e,t){return e>=t},lessorequal:function(e,t){return e<=t}}),t.operatorsValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.uniqueId},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"triggerbase"},t.prototype.toString=function(){var e=this.getType().replace("trigger",""),t=this.expression;return t&&(e+=", "+t),e},Object.defineProperty(t.prototype,"isInternal",{get:function(){return!0===this.isGhost},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"operator",{get:function(){return this.getPropertyValue("operator","equal")},set:function(e){e&&(e=e.toLowerCase(),t.operators[e]&&this.setPropertyValue("operator",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.getPropertyValue("value",null)},set:function(e){this.setPropertyValue("value",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.getPropertyValue("name","")},set:function(e){this.setPropertyValue("name",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expression",{get:function(){return this.getPropertyValue("expression",this.buildExpression())},set:function(e){this.setPropertyValue("expression",e)},enumerable:!1,configurable:!0}),t.prototype.canBeExecuted=function(e){return!0},t.prototype.canBeExecutedOnComplete=function(){return!1},t.prototype.checkExpression=function(e){var t=this;if(this.isExecutingOnNextPage=e.isOnNextPage,this.isExecutingOnNavigation=e.isOnNavigation||e.isOnNextPage,this.canBeExecuted(e.isOnNextPage)&&(!e.isOnComplete||this.canBeExecutedOnComplete())){var n=Object.keys(e.keys);if(!Array.isArray(n)||this.canBeExecuteOnKeysChange(n)){var o=e.properties||null;this.runExpressionByProperty("expression",o,function(e){t.triggerResult(!0===e,o)},function(n){return t.isCheckRequired(n,e.keys)})||this.isCheckRequired(null,e.keys)&&this.canSuccessOnEmptyExpression()&&this.triggerResult(!0,o)}}},t.prototype.canBeExecuteOnKeysChange=function(e){return!0},t.prototype.canSuccessOnEmptyExpression=function(){return!1},t.prototype.check=function(e){t.operators[this.operator](e,this.value)?this.onSuccess(null):this.onFailure()},Object.defineProperty(t.prototype,"requireValidQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.triggerResult=function(e,t){e?(this.onSuccess(t),this.onSuccessExecuted()):this.onFailure()},t.prototype.onSuccess=function(e){},t.prototype.onFailure=function(){},t.prototype.onSuccessExecuted=function(){},t.prototype.buildExpression=function(){return this.name?this.isValueEmpty(this.value)&&this.isRequireValue?"":"{"+this.name+"} "+this.operator+" "+ce.toOperandString(this.value):""},t.prototype.isCheckRequired=function(e,t){return!!t&&(!0===(null==e?void 0:e.hasFunction())||(new j).isAnyKeyChanged(t,this.getUsedVariables(e)))},t.prototype.getUsedVariables=function(e){if(!e)return[];var t=e.getVariables();if(Array.isArray(t))for(var n=gn.expressionVariables.unwrapPostfix,o=t.length-1;o>=0;o--){var i=t[o];i.endsWith(n)&&t.push(i.substring(0,i.length-n.length))}return t},Object.defineProperty(t.prototype,"isRequireValue",{get:function(){return"empty"!==this.operator&&"notempty"!=this.operator},enumerable:!1,configurable:!0}),t.operatorsValue=null,t}(Te),Sa=function(e){function t(){var t=e.call(this)||this;return t.ownerValue=null,t}return xa(t,e),Object.defineProperty(t.prototype,"owner",{get:function(){return this.ownerValue},enumerable:!1,configurable:!0}),t.prototype.setOwner=function(e){this.ownerValue=e},t.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.owner&&this.owner.getSurvey?this.owner.getSurvey():null},t.prototype.isRealExecution=function(){return!0},t.prototype.onSuccessExecuted=function(){this.owner&&this.isRealExecution()&&this.owner.triggerExecuted(this)},t}(Oa),Ia=function(e){function t(){var t=e.call(this)||this;return t.pages=[],t.questions=[],t}return xa(t,e),t.prototype.getType=function(){return"visibletrigger"},t.prototype.onSuccess=function(e){this.onTrigger(this.onItemSuccess)},t.prototype.onFailure=function(){this.onTrigger(this.onItemFailure)},t.prototype.onTrigger=function(e){if(this.owner)for(var t=this.owner.getObjects(this.pages,this.questions),n=0;n<t.length;n++)e(t[n])},t.prototype.onItemSuccess=function(e){e.visible=!0},t.prototype.onItemFailure=function(e){e.visible=!1},t}(Sa),Ta=function(e){function t(){return e.call(this)||this}return xa(t,e),t.prototype.getType=function(){return"completetrigger"},Object.defineProperty(t.prototype,"requireValidQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.isRealExecution=function(){return!gn.triggers.executeCompleteOnValueChanged===this.isExecutingOnNavigation},t.prototype.onSuccess=function(e){this.owner&&(this.isRealExecution()?this.owner.setCompleted(this):this.owner.canBeCompleted(this,!0))},t.prototype.onFailure=function(){this.owner.canBeCompleted(this,!1)},t}(Sa),Ra=function(e){function t(){return e.call(this)||this}return xa(t,e),t.prototype.getType=function(){return"setvaluetrigger"},t.prototype.canBeExecuted=function(e){return!e&&!!this.setToName},t.prototype.canBeExecuteOnKeysChange=function(t){return(1!==t.length||t[0]!==this.setToName)&&e.prototype.canBeExecuteOnKeysChange.call(this,t)},t.prototype.onPropertyValueChanged=function(t,n,o){if(e.prototype.onPropertyValueChanged.call(this,t,n,o),"setToName"===t){var i=this.getSurvey();i&&!i.isLoadingFromJson&&i.isDesignMode&&(this.setValue=void 0)}},Object.defineProperty(t.prototype,"setToName",{get:function(){return this.getPropertyValue("setToName","")},set:function(e){this.setPropertyValue("setToName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setValue",{get:function(){return this.getPropertyValue("setValue")},set:function(e){this.setPropertyValue("setValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVariable",{get:function(){return this.getPropertyValue("isVariable")},set:function(e){this.setPropertyValue("isVariable",e)},enumerable:!1,configurable:!0}),t.prototype.onSuccess=function(e){this.setToName&&this.owner&&this.owner.setTriggerValue(this.setToName,r.getUnbindValue(this.setValue),this.isVariable)},t}(Sa),Ea=function(e){function t(){return e.call(this)||this}return xa(t,e),t.prototype.getType=function(){return"skiptrigger"},Object.defineProperty(t.prototype,"requireValidQuestion",{get:function(){return this.canBeExecuted(!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gotoName",{get:function(){return this.getPropertyValue("gotoName","")},set:function(e){this.setPropertyValue("gotoName",e)},enumerable:!1,configurable:!0}),t.prototype.canBeExecuted=function(e){return e===!gn.triggers.executeSkipOnValueChanged},t.prototype.onSuccess=function(e){this.gotoName&&this.owner&&this.owner.focusQuestion(this.gotoName)},t}(Sa),Aa=function(e){function t(){return e.call(this)||this}return xa(t,e),t.prototype.getType=function(){return"runexpressiontrigger"},Object.defineProperty(t.prototype,"setToName",{get:function(){return this.getPropertyValue("setToName","")},set:function(e){this.setPropertyValue("setToName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"runExpression",{get:function(){return this.getPropertyValue("runExpression","")},set:function(e){this.setPropertyValue("runExpression",e)},enumerable:!1,configurable:!0}),t.prototype.canBeExecuted=function(e){return!e},t.prototype.onSuccess=function(e){var t=this;this.owner&&this.runExpressionByProperty("runExpression",e,function(e){t.onCompleteRunExpression(e)})},t.prototype.onCompleteRunExpression=function(e){this.setToName&&void 0!==e&&this.owner.setTriggerValue(this.setToName,r.convertValToQuestionVal(e),!1)},t}(Sa),Da=function(e){function t(){return e.call(this)||this}return xa(t,e),t.prototype.canBeExecuted=function(e){return!e&&!!this.setToName&&!!this.fromName},Object.defineProperty(t.prototype,"setToName",{get:function(){return this.getPropertyValue("setToName","")},set:function(e){this.setPropertyValue("setToName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fromName",{get:function(){return this.getPropertyValue("fromName","")},set:function(e){this.setPropertyValue("fromName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"copyDisplayValue",{get:function(){return this.getPropertyValue("copyDisplayValue")},set:function(e){this.setPropertyValue("copyDisplayValue",e)},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"copyvaluetrigger"},t.prototype.canBeExecuteOnKeysChange=function(t){return(1!==t.length||t[0]!==this.setToName)&&e.prototype.canBeExecuteOnKeysChange.call(this,t)},t.prototype.onSuccess=function(e){this.setToName&&this.owner&&this.owner.copyTriggerValue(this.setToName,this.fromName,this.copyDisplayValue)},t.prototype.canSuccessOnEmptyExpression=function(){return!0},t.prototype.getUsedVariables=function(t){var n=e.prototype.getUsedVariables.call(this,t);return 0===n.length&&this.fromName&&n.push(this.fromName),n},t}(Sa);D.addClass("trigger",[{name:"operator",default:"equal",visible:!1},{name:"value",visible:!1},"expression:condition"]),D.addClass("surveytrigger",[{name:"name",visible:!1}],null,"trigger"),D.addClass("visibletrigger",["pages:pages","questions:questions"],function(){return new Ia},"surveytrigger"),D.addClass("completetrigger",[],function(){return new Ta},"surveytrigger"),D.addClass("setvaluetrigger",[{name:"!setToName:questionvalue"},{name:"setValue:triggervalue",dependsOn:"setToName",visibleIf:function(e){return!!e&&!!e.setToName}},{name:"isVariable:boolean",visible:!1}],function(){return new Ra},"surveytrigger"),D.addClass("copyvaluetrigger",[{name:"!fromName:questionvalue"},{name:"!setToName:questionvalue"},{name:"copyDisplayValue:boolean",visible:!1}],function(){return new Da},"surveytrigger"),D.addClass("skiptrigger",[{name:"!gotoName:question"}],function(){return new Ea},"surveytrigger"),D.addClass("runexpressiontrigger",[{name:"setToName:questionvalue"},"runExpression:expression"],function(){return new Aa},"surveytrigger");var La=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ja=function(e){function t(t,n){void 0===n&&(n=null);var i=e.call(this)||this;return i.closeOnCompleteTimeout=0,i.surveyValue=n||i.createSurvey(t),i.surveyValue.fitToContainer=!0,i.windowElement=o.createElement("div"),i.survey.onComplete.add(function(e,t){i.onSurveyComplete()}),i.registerPropertyChangedHandlers(["isShowing"],function(){i.showingChangedCallback&&i.showingChangedCallback()}),i.registerPropertyChangedHandlers(["isExpanded"],function(){i.onExpandedChanged()}),i.width=new Ie(function(){return i.survey.width}),i.width=i.survey.width,i.updateCss(),i.onCreating(),i}return La(t,e),t.prototype.onCreating=function(){},t.prototype.getType=function(){return"popupsurvey"},Object.defineProperty(t.prototype,"survey",{get:function(){return this.surveyValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowing",{get:function(){return this.getPropertyValue("isShowing",!1)},set:function(e){this.setPropertyValue("isShowing",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFullScreen",{get:function(){return this.getPropertyValue("isFullScreen",!1)},set:function(e){!this.isExpanded&&e&&(this.isExpanded=!0),this.setPropertyValue("isFullScreen",e),this.setCssRoot()},enumerable:!1,configurable:!0}),t.prototype.show=function(){this.isShowing=!0},t.prototype.hide=function(){this.isShowing=!1},t.prototype.toggleFullScreen=function(){this.isFullScreen=!this.isFullScreen},Object.defineProperty(t.prototype,"isExpanded",{get:function(){return this.getPropertyValue("isExpanded",!1)},set:function(e){this.isFullScreen&&!e&&(this.isFullScreen=!1),this.setPropertyValue("isExpanded",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return!this.isExpanded},enumerable:!1,configurable:!0}),t.prototype.onExpandedChanged=function(){this.expandedChangedCallback&&this.expandedChangedCallback(),this.updateCssButton()},Object.defineProperty(t.prototype,"title",{get:function(){return this.survey.title},set:function(e){this.survey.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.survey.locTitle.isEmpty?null:this.survey.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locDescription",{get:function(){return this.survey.locTitle.isEmpty?null:this.survey.locDescription},enumerable:!1,configurable:!0}),t.prototype.expand=function(){this.isExpanded=!0},t.prototype.collapse=function(){this.isExpanded=!1},t.prototype.changeExpandCollapse=function(){this.isExpanded=!this.isExpanded},Object.defineProperty(t.prototype,"allowClose",{get:function(){return this.getPropertyValue("allowClose",!1)},set:function(e){this.setPropertyValue("allowClose",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowFullScreen",{get:function(){return this.getPropertyValue("allowFullScreen",!1)},set:function(e){this.setPropertyValue("allowFullScreen",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"css",{get:function(){return this.survey.css},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssButton",{get:function(){return this.getPropertyValue("cssButton","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssRoot",{get:function(){var e=this.getPropertyValue("cssRoot","");return this.isCollapsed&&(e+=" "+this.getPropertyValue("cssRootCollapsedMod","")),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssRootCollapsedMod",{get:function(){return this.getPropertyValue("cssRootCollapsedMod")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssRootContent",{get:function(){return this.getPropertyValue("cssRootContent")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssBody",{get:function(){return this.getPropertyValue("cssBody","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderRoot",{get:function(){return this.getPropertyValue("cssHeaderRoot","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderTitleCollapsed",{get:function(){return this.getPropertyValue("cssHeaderTitleCollapsed","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderButtonsContainer",{get:function(){return this.getPropertyValue("cssHeaderButtonsContainer","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderCollapseButton",{get:function(){return this.getPropertyValue("cssHeaderCollapseButton","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderCloseButton",{get:function(){return this.getPropertyValue("cssHeaderCloseButton","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssHeaderFullScreenButton",{get:function(){return this.getPropertyValue("cssHeaderFullScreenButton","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedWidth",{get:function(){var e=this.getPropertyValue("width","60%");return e&&!isNaN(e)&&(e+="px"),e},enumerable:!1,configurable:!0}),t.prototype.updateCss=function(){if(this.css&&this.css.window){var e=this.css.window;this.setCssRoot(),this.setPropertyValue("cssRootCollapsedMod",e.rootCollapsedMod),this.setPropertyValue("cssRootContent",e.rootContent),this.setPropertyValue("cssBody",e.body);var t=e.header;t&&(this.setPropertyValue("cssHeaderRoot",t.root),this.setPropertyValue("cssHeaderTitleCollapsed",t.titleCollapsed),this.setPropertyValue("cssHeaderButtonsContainer",t.buttonsContainer),this.setPropertyValue("cssHeaderCollapseButton",t.collapseButton),this.setPropertyValue("cssHeaderCloseButton",t.closeButton),this.setPropertyValue("cssHeaderFullScreenButton",t.fullScreenButton),this.updateCssButton())}},t.prototype.setCssRoot=function(){var e=this.css.window;this.isFullScreen?this.setPropertyValue("cssRoot",e.root+" "+e.rootFullScreenMode):this.setPropertyValue("cssRoot",e.root)},t.prototype.updateCssButton=function(){var e=this.css.window?this.css.window.header:null;e&&this.setCssButton(this.isExpanded?e.buttonExpanded:e.buttonCollapsed)},t.prototype.setCssButton=function(e){e&&this.setPropertyValue("cssButton",e)},t.prototype.createSurvey=function(e){return new rr(e)},t.prototype.onSurveyComplete=function(){if(!(this.closeOnCompleteTimeout<0))if(0==this.closeOnCompleteTimeout)this.hide();else{var e=this,t=null;t=setInterval(function(){e.hide(),clearInterval(t)},1e3*this.closeOnCompleteTimeout)}},t.prototype.onScroll=function(){this.survey.onScroll()},function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([y()],t.prototype,"width",void 0),t}(Te),_a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return La(t,e),t}(ja),Na=function(){function e(){this._lockScroll=!1}return e.prototype.setRootElement=function(e){var t=this;this._containerElementValue=null==e?void 0:e.querySelector(".sv-scroll__scroller"),this._scrollbarElement=null==e?void 0:e.querySelector(".sv-scroll__scrollbar"),this._scrollbarSizerElement=null==e?void 0:e.querySelector(".sv-scroll__scrollbar-sizer"),this._containerBodyElement=null==e?void 0:e.querySelector(".sv-scroll__container"),e&&n.isAvailable()&&(this._containerBodyResizeObserver=new ResizeObserver(function(e){for(var n=0,o=e;n<o.length;n++){var i=o[n],r=i.contentBoxSize?i.contentBoxSize[0].blockSize:i.contentRect.width;t._scrollbarSizerElement.style.height=r+"px"}t.onInnerHeightChanged&&t.onInnerHeightChanged(t._containerBodyElement.clientHeight>t._containerElementValue.clientHeight)}),this._containerBodyResizeObserver.observe(this._containerBodyElement))},e.prototype.onScrollContainer=function(){this._lockScroll=!0,this._scrollbarElement.scrollTop=this._containerElementValue.scrollTop},e.prototype.onScrollScrollbar=function(){this._lockScroll?this._lockScroll=!1:this._containerElementValue.scrollTop=this._scrollbarElement.scrollTop},e.prototype.unsubscribeRootElement=function(){this._containerBodyResizeObserver&&(this._containerBodyResizeObserver.disconnect(),this._containerBodyResizeObserver=void 0)},e}(),Ma=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ka=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Fa='input:not(:disabled):not([readonly]):not([type=hidden]),select:not(:disabled):not([readonly]),textarea:not(:disabled):not([readonly]), button:not(:disabled):not([readonly]), [tabindex]:not([tabindex^="-"])',Ba=function(e){function t(t){var n=e.call(this)||this;return n.popupSelector=".sv-popup",n.fixedPopupContainer=".sv-popup",n.containerSelector=".sv-popup__container",n.scrollingContentSelector=".sv-popup__scrolling-content",n.visibilityAnimation=new wt(n,function(e){n._isVisible!==e&&(e?(n.updateBeforeShowing(),n.updateIsVisible(e)):(n.updateOnHiding(),n.updateIsVisible(e),n.updateAfterHiding(),n._isPositionSetValue=!1))},function(){return n._isVisible}),n.onVisibilityChanged=new Ae,n.onModelIsVisibleChangedCallback=function(){n.isVisible=n.model.isVisible},n._isPositionSetValue=!1,n.model=t,n.locale=n.model.locale,n}return Ma(t,e),t.prototype.updateIsVisible=function(e){this._isVisible=e,this.onVisibilityChanged.fire(this,{isVisible:e})},t.prototype.updateBeforeShowing=function(){this.model.onShow()},t.prototype.updateAfterHiding=function(){this.model.onHiding()},t.prototype.getLeaveOptions=function(){return{cssClass:"sv-popup--leave",onBeforeRunAnimation:function(e){e.setAttribute("inert","")},onAfterRunAnimation:function(e){return e.removeAttribute("inert")}}},t.prototype.getEnterOptions=function(){return{cssClass:"sv-popup--enter"}},t.prototype.getAnimatedElement=function(){return this.getAnimationContainer()},t.prototype.isAnimationEnabled=function(){return"overlay"!==this.model.displayMode&&gn.animationEnabled},t.prototype.getRerenderEvent=function(){return this.onElementRerendered},t.prototype.getAnimationContainer=function(){var e;return null===(e=this.container)||void 0===e?void 0:e.querySelector(this.fixedPopupContainer)},Object.defineProperty(t.prototype,"isVisible",{get:function(){return this._isVisible},set:function(e){this.visibilityAnimation.sync(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this.containerElement||this.createdContainer},enumerable:!1,configurable:!0}),t.prototype.getLocale=function(){return this.locale?this.locale:e.prototype.getLocale.call(this)},t.prototype.hidePopup=function(){this.model.isVisible=!1},t.prototype.getStyleClass=function(){return(new _e).append(this.model.cssClass)},t.prototype.getShowFooter=function(){return this.isOverlay},t.prototype.getShowHeader=function(){return!1},t.prototype.getPopupHeaderTemplate=function(){},t.prototype.createFooterActionBar=function(){this.footerToolbarValue=new qe},t.prototype.resetDimensionsAndPositionStyleProperties=function(){this.top="",this.left="",this.height="",this.width="",this.minWidth=""},t.prototype.onModelChanging=function(e){},t.prototype.setupModel=function(e){this.model&&this.model.onVisibilityChanged.remove(this.onModelIsVisibleChangedCallback),this.onModelChanging(e),this._model=e,e.onVisibilityChanged.add(this.onModelIsVisibleChangedCallback),this.onModelIsVisibleChangedCallback()},Object.defineProperty(t.prototype,"model",{get:function(){return this._model},set:function(e){this.setupModel(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.model.title},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentComponentName",{get:function(){return this.model.contentComponentName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentComponentData",{get:function(){return this.model.contentComponentData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isModal",{get:function(){return this.model.isModal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFocusedContent",{get:function(){return this.model.isFocusedContent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFocusedContainer",{get:function(){return this.model.isFocusedContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showFooter",{get:function(){return this.getShowFooter()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return this.getShowHeader()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popupHeaderTemplate",{get:function(){return this.getPopupHeaderTemplate()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOverlay",{get:function(){return"overlay"===this.model.displayMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styleClass",{get:function(){return this.getStyleClass().toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cancelButtonText",{get:function(){return this.getLocalizationString("modalCancelButtonText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerToolbar",{get:function(){return this.footerToolbarValue||this.createFooterActionBar(),this.footerToolbarValue},enumerable:!1,configurable:!0}),t.prototype.onKeyDown=function(e){"Tab"===e.key||9===e.keyCode?this.trapFocus(e):"Escape"!==e.key&&27!==e.keyCode||this.hidePopup()},t.prototype.trapFocus=function(e){var t=this.container.querySelectorAll(Fa),n=t[0],o=t[t.length-1];e.shiftKey?gn.environment.root.activeElement===n&&(o.focus(),e.preventDefault()):gn.environment.root.activeElement===o&&(n.focus(),e.preventDefault())},t.prototype.switchFocus=function(){this.isFocusedContent?this.focusFirstInput():this.isFocusedContainer&&this.focusContainer()},Object.defineProperty(t.prototype,"isPositionSet",{get:function(){return this._isPositionSetValue},enumerable:!1,configurable:!0}),t.prototype.updateOnShowing=function(){this.prevActiveElement=gn.environment.root.activeElement,this.isOverlay&&this.resetDimensionsAndPositionStyleProperties(),this.switchFocus(),this._isPositionSetValue=!0},t.prototype.updateOnHiding=function(){this.isFocusedContent&&this.prevActiveElement&&this.prevActiveElement.focus({preventScroll:!0})},t.prototype.focusContainer=function(){if(this.container){var e=this.container.querySelector(this.popupSelector);null==e||e.focus()}},t.prototype.focusFirstInput=function(){var e=this;setTimeout(function(){if(e.container){var t=e.container.querySelector(e.model.focusFirstInputSelector||Fa);t?t.focus():e.focusContainer()}},100)},t.prototype.clickOutside=function(e){this.hidePopup(),null==e||e.stopPropagation()},t.prototype.blur=function(e){this.model.onBlur()},t.prototype.cancel=function(){this.model.onCancel(),this.hidePopup()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.model&&this.model.onVisibilityChanged.remove(this.onModelIsVisibleChangedCallback),this.createdContainer&&(this.createdContainer.remove(),this.createdContainer=void 0),this.footerToolbarValue&&this.footerToolbarValue.dispose(),this.resetComponentElement()},t.prototype.initializePopupContainer=function(){if(!this.container){var e=o.createElement("div");this.createdContainer=e,Mt(gn.environment.popupMountContainer).appendChild(e)}},t.prototype.setComponentElement=function(e){e&&(this.containerElement=e)},t.prototype.resetComponentElement=function(){this.containerElement=void 0,this.prevActiveElement=void 0},t.prototype.preventScrollOuside=function(e,t){for(var n=e.target;n!==this.container;){if("auto"===o.getComputedStyle(n).overflowY&&n.scrollHeight!==n.offsetHeight){var i=n.scrollHeight,r=n.scrollTop,s=n.clientHeight;if(!(t>0&&Math.abs(i-s-r)<1||t<0&&r<=0))return}n=n.parentElement}e.cancelable&&e.preventDefault()},ka([y({defaultValue:"0px"})],t.prototype,"top",void 0),ka([y({defaultValue:"0px"})],t.prototype,"left",void 0),ka([y({defaultValue:"auto"})],t.prototype,"height",void 0),ka([y({defaultValue:"auto"})],t.prototype,"width",void 0),ka([y({defaultValue:"auto"})],t.prototype,"minWidth",void 0),ka([y({defaultValue:!1})],t.prototype,"_isVisible",void 0),ka([y()],t.prototype,"locale",void 0),t}(Te),qa=function(){function e(e,t,n,o){this.x=e,this.y=t,this.width=n,this.height=o}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),e}(),Qa=function(){function e(){}return e.calculatePosition=function(e,t,n,o,i,r){void 0===r&&(r="flex");var s=e.left,a=e.top;return"flex"===r&&(s="center"==i?(e.left+e.right-n)/2:"left"==i?e.left-n:e.right),a="middle"==o?(e.top+e.bottom-t)/2:"top"==o?e.top-t:e.bottom,"center"!=i&&"middle"!=o&&("top"==o?a+=e.height:a-=e.height),{left:Math.round(s),top:Math.round(a)}},e.getCorrectedVerticalDimensions=function(t,n,o,i,r,s){var a;void 0===r&&(r=!0),void 0===s&&(s={top:0,bottom:0});var l=o-e.bottomIndent;if("top"===i&&(a={height:n,top:t}),t<-s.top)a={height:r?n+t:n,top:-s.top};else if(n+t>o){var u=Math.min(n,l-t);a={height:r?u:n,top:r?t:t-(n-u)}}return a&&(a.height=Math.min(a.height,l),a.top=Math.max(a.top,-s.top)),a},e.updateHorizontalDimensions=function(e,t,n,o,i,r){void 0===i&&(i="flex"),void 0===r&&(r={left:0,right:0}),t+=r.left+r.right;var s=void 0,a=e;return"center"===o&&("fixed"===i?(e+t>n&&(s=n-e),a-=r.left):e<0?(a=r.left,s=Math.min(t,n)):t+e>n&&(a=n-t,a=Math.max(a,r.left),s=Math.min(t,n))),"left"===o&&e<0&&(a=r.left,s=Math.min(t,n)),"right"===o&&t+e>n&&(s=n-e),{width:s-r.left-r.right,left:a}},e.updateVerticalPosition=function(e,t,n,o,i){if("middle"===o)return o;var r=t-(e.top+("center"!==n?e.height:0)),s=t+e.bottom-("center"!==n?e.height:0)-i;return r>0&&s<=0&&"top"==o?o="bottom":s>0&&r<=0&&"bottom"==o?o="top":s>0&&r>0&&(o=r<s?"top":"bottom"),o},e.updateHorizontalPosition=function(e,t,n,o){if("center"===n)return n;var i=t-e.left,r=t+e.right-o;return i>0&&r<=0&&"left"==n?n="right":r>0&&i<=0&&"right"==n?n="left":r>0&&i>0&&(n=i<r?"left":"right"),n},e.calculatePopupDirection=function(e,t){var n;return"center"==t&&"middle"!=e?n=e:"center"!=t&&(n=t),n},e.calculatePointerTarget=function(e,t,n,o,i,r,s){void 0===r&&(r=0),void 0===s&&(s=0);var a={};return"center"!=i?(a.top=e.top+e.height/2,a.left=e[i]):"middle"!=o&&(a.top=e[o],a.left=e.left+e.width/2),a.left=Math.round(a.left-n),a.top=Math.round(a.top-t),"left"==i&&(a.left-=r+s),"center"===i&&(a.left-=r),a},e.bottomIndent=16,e}(),za=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ha=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Ua=function(e){function t(t){var i=e.call(this,t)||this;return i.scrollEventCallBack=function(e){if(i.isOverlay&&Je)return e.stopPropagation(),void e.preventDefault();i.hidePopup()},i.resizeEventCallback=function(){if(n.isAvailable()){var e=n.getVisualViewport(),t=o.getDocumentElement();t&&e&&t.style.setProperty("--sv-popup-overlay-height","".concat(e.height*e.scale,"px"))}},i.resizeWindowCallback=function(){i.isOverlay||i.updatePosition(!0,"vue"===rr.platform||"vue3"===rr.platform||"react"==rr.platform||"js-ui"==rr.platform)},i.clientY=0,i.touchStartEventCallback=function(e){i.clientY=e.touches[0].clientY},i.touchMoveEventCallback=function(e){i.preventScrollOuside(e,i.clientY-e.changedTouches[0].clientY)},i.model.onRecalculatePosition.add(i.recalculatePositionHandler),i}return za(t,e),t.prototype.createFooterActionBar=function(){var t=this;e.prototype.createFooterActionBar.call(this),this.footerToolbar.setCssClasses({root:Be.root,defaultSizeMode:Be.defaultSizeMode,smallSizeMode:Be.smallSizeMode,item:"sd-action sv-menu-popup__button"},!1),this.footerToolbar.containerCss="sv-menu-footer-action-bar";var n=[{id:"cancel",visibleIndex:10,title:this.cancelButtonText,innerCss:"sv-popup__button--cancel",action:function(){t.cancel()}}];n=this.model.updateFooterActions(n),this.footerToolbarValue.setItems(n)},t.prototype.getAvailableAreaRect=function(){var e=this.model.getAreaCallback?this.model.getAreaCallback(this.container):void 0;if(e){var t=e.getBoundingClientRect();return new qa(t.x,t.y,t.width,t.height)}return new qa(0,0,n.getInnerWidth(),n.getInnerHeight())},t.prototype.getTargetElementRect=function(e){var t=this.container,n=this.model.getTargetCallback?this.model.getTargetCallback(t):void 0;if(t&&t.parentElement&&!this.isModal&&!n&&(n=t.parentElement),!n)return null;var o=n.getBoundingClientRect();return new qa(o.left-e.left,o.top-e.top,o.width,o.height)},t.prototype._updatePosition=function(){var e,t,i,r=this.getAvailableAreaRect(),s=this.getTargetElementRect(r);if(s){var a=null===(e=this.container)||void 0===e?void 0:e.querySelector(this.containerSelector);if(a){var l=null===(t=this.container)||void 0===t?void 0:t.querySelector(this.fixedPopupContainer),u=a.querySelector(this.scrollingContentSelector),c=o.getComputedStyle(a),p=parseFloat(c.marginLeft)||0,h=parseFloat(c.marginRight)||0,d=parseFloat(c.marginTop)||0,f=parseFloat(c.marginBottom)||0,g=a.offsetHeight-u.offsetHeight+u.scrollHeight,y=a.getBoundingClientRect().width;this.model.setWidthByTarget&&(this.minWidth=s.width+"px");var m=this.model.verticalPosition,b=this.getActualHorizontalPosition();if(n.isAvailable()){var v=[g,.9*n.getInnerHeight(),null===(i=n.getVisualViewport())||void 0===i?void 0:i.height];g=Math.ceil(Math.min.apply(Math,v.filter(function(e){return"number"==typeof e}))),m=Qa.updateVerticalPosition(s,g,this.model.horizontalPosition,this.model.verticalPosition,r.height),b=Qa.updateHorizontalPosition(s,y,b,r.width)}this.popupDirection=Qa.calculatePopupDirection(m,b);var C=Qa.calculatePosition(s,g,y+p+h,m,b,this.model.positionMode);if(n.isAvailable()){var P=Qa.getCorrectedVerticalDimensions(C.top,g,r.height,m,this.model.canShrink,{top:d,bottom:f});if(P&&(this.height=P.height+"px",C.top=P.top),this.model.setWidthByTarget)this.width=s.width+"px",C.left=s.left;else{var w=Qa.updateHorizontalDimensions(C.left,y,n.getInnerWidth(),b,this.model.positionMode,{left:p,right:h});w&&(this.width=w.width?w.width+"px":void 0,C.left=w.left)}}if(l){var V=l.getBoundingClientRect();C.top-=V.top,C.left-=V.left}this.showHeader&&(this.pointerTarget=Qa.calculatePointerTarget(s,C.top,C.left,m,b,p,h),this.pointerTarget.top+="px",this.pointerTarget.left+="px"),C.left+=r.left,C.top+=r.top,this.left=C.left+"px",this.top=C.top+"px"}}},t.prototype.getActualHorizontalPosition=function(){var e=this.model.horizontalPosition;return o.isAvailable()&&"rtl"==o.getComputedStyle(o.getBody()).direction&&("left"===this.model.horizontalPosition?e="right":"right"===this.model.horizontalPosition&&(e="left")),e},t.prototype.getStyleClass=function(){var t=this.model.getDisplayMode();return e.prototype.getStyleClass.call(this).append("sv-popup--menu-phone","menu-overlay"===t).append("sv-popup--menu-tablet","menu-popup-overlay"===t).append("sv-popup--menu-popup","menu-popup"===t).append("sv-popup--show-pointer","menu-popup"===t&&this.showHeader).append("sv-popup--".concat(this.popupDirection),"menu-popup"===t&&(this.showHeader||"top"==this.popupDirection||"bottom"==this.popupDirection))},t.prototype.getShowHeader=function(){return this.model.showPointer&&!this.isOverlay},t.prototype.getPopupHeaderTemplate=function(){return"popup-pointer"},t.prototype.setComponentElement=function(t){e.prototype.setComponentElement.call(this,t)},t.prototype.resetComponentElement=function(){e.prototype.resetComponentElement.call(this)},t.prototype.updateOnShowing=function(){var e=gn.environment.root;this.prevActiveElement=e.activeElement,this.isOverlay?this.resetDimensionsAndPositionStyleProperties():this.updatePosition(!0,!1),this.switchFocus(),n.addEventListener("resize",this.resizeWindowCallback),this.shouldCreateResizeCallback&&(n.getVisualViewport().addEventListener("resize",this.resizeEventCallback),this.container&&(this.container.addEventListener("touchstart",this.touchStartEventCallback),this.container.addEventListener("touchmove",this.touchMoveEventCallback)),this.resizeEventCallback()),n.addEventListener("scroll",this.scrollEventCallBack),this._isPositionSetValue=!0},Object.defineProperty(t.prototype,"shouldCreateResizeCallback",{get:function(){return!!n.getVisualViewport()&&this.isOverlay},enumerable:!1,configurable:!0}),t.prototype.updatePosition=function(e,t){var n=this;void 0===t&&(t=!0),e&&(this.height="auto"),t?setTimeout(function(){n._updatePosition()},1):this._updatePosition()},t.prototype.updateOnHiding=function(){e.prototype.updateOnHiding.call(this),n.removeEventListener("resize",this.resizeWindowCallback),this.shouldCreateResizeCallback&&(n.getVisualViewport().removeEventListener("resize",this.resizeEventCallback),this.container&&(this.container.removeEventListener("touchstart",this.touchStartEventCallback),this.container.removeEventListener("touchmove",this.touchMoveEventCallback))),n.removeEventListener("scroll",this.scrollEventCallBack),this.isDisposed||(this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.minWidth=void 0)},t.prototype.onModelChanging=function(t){var n=this;this.model&&this.model.onRecalculatePosition.remove(this.recalculatePositionHandler),this.recalculatePositionHandler||(this.recalculatePositionHandler=function(e,t){n.isOverlay||n.updatePosition(t.isResetHeight)}),e.prototype.onModelChanging.call(this,t),t.onRecalculatePosition.add(this.recalculatePositionHandler)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.updateOnHiding(),this.model&&(this.model.onRecalculatePosition.remove(this.recalculatePositionHandler),this.recalculatePositionHandler=void 0),this.resetComponentElement()},t.tabletSizeBreakpoint=600,Ha([y({defaultValue:"left"})],t.prototype,"popupDirection",void 0),Ha([y({defaultValue:{left:"0px",top:"0px"}})],t.prototype,"pointerTarget",void 0),t}(Ba),Wa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ga=function(e){function t(t){var n=e.call(this,t)||this;return n.onScrollOutsideCallback=function(e){n.preventScrollOuside(e,e.deltaY)},n}return Wa(t,e),t.prototype.getStyleClass=function(){var t=this.model.getDisplayMode();return e.prototype.getStyleClass.call(this).append("sv-popup--modal-popup","modal-popup"===t).append("sv-popup--modal-overlay","modal-overlay"===t)},t.prototype.getShowFooter=function(){return!0},t.prototype.createFooterActionBar=function(){var t=this;e.prototype.createFooterActionBar.call(this),this.footerToolbar.setCssClasses({root:Be.root,defaultSizeMode:Be.defaultSizeMode,smallSizeMode:Be.smallSizeMode,item:"sv-popup__body-footer-item sv-popup__button sv-modal-popup__button sd-btn sd-btn--small"},!1),this.footerToolbar.containerCss="sv-modal-footer-action-bar";var n=[{id:"cancel",visibleIndex:10,title:this.cancelButtonText,innerCss:"sv-popup__button--cancel",action:function(){t.cancel()}},{id:"apply",visibleIndex:20,title:this.applyButtonText,innerCss:"sv-popup__button--apply sd-btn--action",action:function(){t.apply()}}];n=this.model.updateFooterActions(n),this.footerToolbarValue.setItems(n)},Object.defineProperty(t.prototype,"applyButtonText",{get:function(){return this.getLocalizationString("modalApplyButtonText")},enumerable:!1,configurable:!0}),t.prototype.apply=function(){this.model.onApply&&!this.model.onApply()||this.hidePopup()},t.prototype.clickOutside=function(){},t.prototype.onKeyDown=function(t){"Escape"!==t.key&&27!==t.keyCode||this.model.onCancel(),e.prototype.onKeyDown.call(this,t)},t.prototype.updateOnShowing=function(){this.container&&this.container.addEventListener("wheel",this.onScrollOutsideCallback,{passive:!1}),e.prototype.updateOnShowing.call(this)},t.prototype.updateOnHiding=function(){this.container&&this.container.removeEventListener("wheel",this.onScrollOutsideCallback),e.prototype.updateOnHiding.call(this)},t}(Ba),Ja=function(){return Ja=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ja.apply(this,arguments)};function Ka(e,t){var n,i=Ja({},e);i.verticalPosition="top",i.horizontalPosition="left",i.showPointer=!1,i.isModal=!0,i.displayMode=e.displayMode||"popup";var r=new it(e.componentName,e.data,i);r.isFocusedContent=null===(n=e.isFocusedContent)||void 0===n||n;var s=new Ga(r);if(t&&t.appendChild){var a=o.createElement("div");t.appendChild(a),s.setComponentElement(a)}s.container||s.initializePopupContainer();var l=function(e,t){t.isVisible||a&&s.resetComponentElement(),s.onVisibilityChanged.remove(l)};return s.onVisibilityChanged.add(l),s}function Ya(e){return e.isModal?new Ga(e):new Ua(e)}var Xa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Za=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},$a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xa(t,e),t.prototype.getBaseType=function(){return"buttongroupitemvalue"},Za([y()],t.prototype,"iconName",void 0),Za([y()],t.prototype,"iconSize",void 0),Za([y()],t.prototype,"showCaption",void 0),t}(lr),el=function(e){function t(t){var n=e.call(this,t)||this;return n._allowClear=!0,n.createLocalizableString("buttongroupOptionsCaption",n,!1,!0),n.createLocalizableString("readOnlyText",n,!0),n.registerPropertyChangedHandlers(["value","renderAs","placeholder","choices","visibleChoices"],function(){n.updateReadOnlyText()}),n.updateReadOnlyText(),n}return Xa(t,e),t.prototype.locStrsChanged=function(){var t;e.prototype.locStrsChanged.call(this),this.updateReadOnlyText(),null===(t=this.dropdownListModelValue)||void 0===t||t.locStrsChanged()},t.prototype.updateReadOnlyText=function(){this.readOnlyText=this.displayValue||this.placeholder},t.prototype.getType=function(){return"buttongroup"},t.prototype.getItemValueType=function(){return"buttongroupitemvalue"},t.prototype.supportOther=function(){return!1},t.prototype.getControlClass=function(){return this.isEmpty(),(new _e).append(this.cssClasses.control).append(this.cssClasses.controlEmpty,this.isEmpty()).append(this.cssClasses.onError,this.hasCssError()).append(this.cssClasses.controlDisabled,this.isDisabledStyle).append(this.cssClasses.controlReadOnly,this.isReadOnlyStyle).append(this.cssClasses.controlPreview,this.isPreviewStyle).toString()},t.prototype.getFirstInputElementId=function(){return this.inputId+"_0"},t.prototype.getInputId=function(e){return this.inputId+"_"+e},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this.getLocalizableStringText("buttongroupOptionsCaption")},set:function(e){this.setLocalizableStringText("buttongroupOptionsCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceholder",{get:function(){return this.getLocalizableString("buttongroupOptionsCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowClear",{get:function(){return this._allowClear},set:function(e){this._allowClear=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"searchEnabled",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.isItemSelected=function(e){return e.value==this.value},Object.defineProperty(t.prototype,"readOnlyText",{get:function(){return this.getLocalizableStringText("readOnlyText")},set:function(e){this.setLocalizableStringText("readOnlyText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locReadOnlyText",{get:function(){return this.getLocalizableString("readOnlyText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showSelectedItemLocText",{get:function(){return!this.readOnly&&!this.inputHasValue&&!!this.selectedItemLocText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedItemLocText",{get:function(){var e;return null===(e=this.selectedItem)||void 0===e?void 0:e.locText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropdownListModel",{get:function(){return"dropdown"===this.renderAs&&this.onBeforeSetCompactRenderer(),this.dropdownListModelValue},set:function(e){this.dropdownListModelValue=e,this.updateElementCss()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this.getSingleSelectedItem()},enumerable:!1,configurable:!0}),t.prototype.onBlurCore=function(t){var n;null===(n=this.dropdownListModel)||void 0===n||n.onBlur(t),e.prototype.onBlurCore.call(this,t)},t.prototype.updateCssClasses=function(t,n){e.prototype.updateCssClasses.call(this,t,n),an(t,n)},t.prototype.calcCssClasses=function(t){var n=e.prototype.calcCssClasses.call(this,t);return this.dropdownListModelValue&&this.dropdownListModelValue.updateCssClasses(n.popup,n.list),n},t.prototype.needResponsiveWidth=function(){return!0},t.prototype.supportResponsiveness=function(){return!0},t.prototype.getCompactRenderAs=function(){return"dropdown"},t.prototype.getObservedElementSelector=function(){return".sd-button-group-scrollable-container"},t.prototype.onBeforeSetCompactRenderer=function(){this.isDisposed||this.dropdownListModelValue||(this.dropdownListModelValue=new fr(this))},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.dropdownListModelValue&&(this.dropdownListModelValue.dispose(),this.dropdownListModelValue=void 0)},Za([y({defaultValue:!1})],t.prototype,"inputHasValue",void 0),t}(cr);D.addClass("buttongroup",[{name:"choices:buttongroupitemvalue[]"}],function(){return new el("")},"checkboxbase"),D.addClass("buttongroupitemvalue",[{name:"showCaption:boolean",default:!0},{name:"iconName:text"},{name:"iconSize:number"}],function(e){return new $a(e)},"choiceitem");var tl=function(){function e(e,t,n){this.question=e,this.item=t,this.index=n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.item.value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconName",{get:function(){return this.item.iconName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconSize",{get:function(){return this.item.iconSize||24},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"caption",{get:function(){return this.item.locText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showCaption",{get:function(){return this.item.showCaption||void 0===this.item.showCaption},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRequired",{get:function(){return this.question.isRequired},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this.question.isItemSelected(this.item)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readOnly",{get:function(){return this.question.isInputReadOnly||!this.item.isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.question.name+"_"+this.question.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.question.inputId+"_"+this.index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasErrors",{get:function(){return this.question.errors.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"describedBy",{get:function(){return this.question.errors.length>0?this.question.id+"_errors":null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelClass",{get:function(){return(new _e).append(this.question.cssClasses.item).append(this.question.cssClasses.itemSelected,this.selected).append(this.question.cssClasses.itemHover,!this.readOnly&&!this.selected).append(this.question.cssClasses.itemDisabled,this.question.isReadOnly||!this.item.isEnabled).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"css",{get:function(){return{label:this.labelClass,icon:this.question.cssClasses.itemIcon,control:this.question.cssClasses.itemControl,caption:this.question.cssClasses.itemCaption,decorator:this.question.cssClasses.itemDecorator}},enumerable:!1,configurable:!0}),e.prototype.onChange=function(){this.question.selectItem(this.item)},e}(),nl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ol=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nl(t,e),t.prototype.getSurvey=function(e){var t;return void 0===e&&(e=!1),null===(t=this.owner)||void 0===t?void 0:t.getSurvey()},t.prototype.getType=function(){return"masksettings"},t.prototype.setData=function(e){var t=this;D.getProperties(this.getType()).forEach(function(n){var o=e[n.name];t[n.name]=void 0!==o?o:n.getDefaultValue(t)})},t.prototype.getData=function(){var e=this,t={};return D.getProperties(this.getType()).forEach(function(n){var o=e[n.name];n.isDefaultValue(o)||(t[n.name]=o)}),t},t.prototype.processInput=function(e){return{value:e.prevValue,caretPosition:e.selectionEnd,cancelPreventDefault:!1}},t.prototype.getUnmaskedValue=function(e){return e},t.prototype.getMaskedValue=function(e){return e},t.prototype.getTextAlignment=function(){return"auto"},t.prototype.getTypeForExpressions=function(){return"text"},function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([y()],t.prototype,"saveMaskedValue",void 0),t}(Te);D.addClass("masksettings",[{name:"saveMaskedValue:boolean",visibleIf:function(e){return!!e&&"masksettings"!==e.getType()}}],function(){return new ol});var il=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function rl(e){for(var t=[],n=!1,o=Object.keys(gn.maskSettings.patternDefinitions),i=0;i<e.length;i++){var r=e[i];r===gn.maskSettings.patternEscapeChar?n=!0:n?(n=!1,t.push({type:"fixed",value:r})):t.push({type:-1!==o.indexOf(r)?"regex":"const",value:r})}return t}function sl(e,t,n){for(var o=gn.maskSettings.patternDefinitions[n.value];t<e.length;){if(e[t].match(o))return t;t++}return t}function al(e,t,n,o){void 0===o&&(o=!1);var i="";if(!e)return i;for(var r="string"==typeof t?rl(t):t,s=0;s<r.length;s++)if("fixed"!==r[s].type||o||(i+=r[s].value),"regex"===r[s].type){var a=gn.maskSettings.patternDefinitions[r[s].value];if(!e[s]||!e[s].match(a)){if(n){i="";break}break}i+=e[s]}return i}var ll=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.literals=[],t}return il(t,e),t.prototype.updateLiterals=function(){this.literals=rl(this.pattern||"")},t.prototype.onPropertyValueChanged=function(t,n,o){e.prototype.onPropertyValueChanged.call(this,t,n,o),"pattern"===t&&this.updateLiterals()},t.prototype.getType=function(){return"patternmask"},t.prototype.fromJSON=function(t,n){e.prototype.fromJSON.call(this,t,n),this.updateLiterals()},t.prototype._getMaskedValue=function(e,t){return void 0===t&&(t=!1),function(e,t,n){for(var o=null==e?"":e,i="",r=0,s="string"==typeof t?rl(t):t,a=0;a<s.length;a++)switch(s[a].type){case"regex":if(r<o.length&&(r=sl(o,r,s[a])),r<o.length)i+=o[r];else{if(!n)return i;i+=gn.maskSettings.patternPlaceholderChar}r++;break;case"const":case"fixed":i+=s[a].value,s[a].value===o[r]&&r++}return i}(null==e?"":e,this.literals,t)},t.prototype._getUnmaskedValue=function(e,t){return void 0===t&&(t=!1),al(null==e?"":e,this.literals,t)},t.prototype.processInput=function(e){var t={value:e.prevValue,caretPosition:e.selectionEnd,cancelPreventDefault:!1};if(!e.insertedChars&&e.selectionStart===e.selectionEnd)return t;var n=e.prevValue.slice(0,e.selectionStart)+(e.insertedChars||""),o=al(e.prevValue.slice(0,e.selectionStart),this.literals.slice(0,e.selectionStart),!1),i=al(e.prevValue.slice(e.selectionEnd),this.literals.slice(e.selectionEnd),!1,!0);return t.value=this._getMaskedValue(o+(e.insertedChars||"")+i,!0),e.insertedChars||"backward"!==e.inputDirection?t.caretPosition=this._getMaskedValue(n).length:t.caretPosition=e.selectionStart,t},t.prototype.getMaskedValue=function(e){return this._getMaskedValue(e,!0)},t.prototype.getUnmaskedValue=function(e){return this._getUnmaskedValue(e,!0)},function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([y()],t.prototype,"pattern",void 0),t}(ol);D.addClass("patternmask",[{name:"pattern"}],function(){return new ll},"masksettings");var ul=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),cl=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},pl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ul(t,e),t.prototype.calccaretPosition=function(e,t,n){for(var o=e?this.displayNumber(this.parseNumber(e),!1).length:0,i=0,r=t.selectionStart,s=!t.insertedChars&&"forward"===t.inputDirection,a=0;a<n.length;a++)if(n[a]!==this.thousandsSeparator&&i++,i===o+(s?1:0)){r=s?a:a+1;break}return r},t.prototype.numericalCompositionIsEmpty=function(e){return!e.integralPart&&!e.fractionalPart},t.prototype.displayNumber=function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1);var o=e.integralPart;t&&o&&(o=function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=3);var o=[];if(t){for(var i=e.length-n;i>-n;i-=n)o.push(e.substring(i,i+n));o=o.reverse()}else for(i=0;i<e.length;i+=n)o.push(e.substring(i,i+n));return o}(o).join(this.thousandsSeparator));var i=e.fractionalPart,r=e.isNegative?"-":"";if(""===i){if(n)return o&&"0"!==o?r+o:o;var s=o+(e.hasDecimalSeparator&&!n?this.decimalSeparator:"");return"0"===s?s:r+s}return[r+(o=o||"0"),i=i.substring(0,this.precision)].join(this.decimalSeparator)},t.prototype.convertNumber=function(e){var t=e.isNegative?"-":"";return e.fractionalPart?parseFloat(t+(e.integralPart||"0")+"."+e.fractionalPart.substring(0,this.precision)):parseInt(t+e.integralPart||"0")},t.prototype.validateNumber=function(e,t){var n=this.min||Number.MIN_SAFE_INTEGER,o=this.max||Number.MAX_SAFE_INTEGER;if(this.numericalCompositionIsEmpty(e))return!0;if(void 0!==this.min||void 0!==this.max){var i=this.convertNumber(e);if(Number.isNaN(i))return!0;if(i>=n&&i<=o)return!0;if(!t){if(e.hasDecimalSeparator||0==i){var r=Math.pow(.1,(e.fractionalPart||"").length);if(i>=0)return i+r>n&&i<=o;if(i<0)return i>=n&&i-r<o}else{var s=i,a=i;if(i>0){if(i+1>n&&i<=o)return!0;for(;s=10*s+9,!((a*=10)>o);)if(s>n)return!0;return!1}if(i<0){if(i>=n&&i-1<o)return!0;for(;a=10*a-9,!((s*=10)<n);)if(a<o)return!0;return!1}}return i>=0&&i<=o||i<0&&i>=n}return!1}return!0},t.prototype.parseNumber=function(e){for(var t={integralPart:"",fractionalPart:"",hasDecimalSeparator:!1,isNegative:!1},n=null==e?"":e.toString(),o=0,i=0;i<n.length;i++){var r=n[i];switch(r){case"-":this.allowNegativeValues&&(void 0===this.min||this.min<0)&&o++;break;case this.decimalSeparator:this.precision>0&&(t.hasDecimalSeparator=!0);break;case this.thousandsSeparator:break;default:r.match(Er)&&(t.hasDecimalSeparator?t.fractionalPart+=r:t.integralPart+=r)}}return t.isNegative=o%2!=0,t.integralPart.length>1&&"0"===t.integralPart[0]&&(t.integralPart=t.integralPart.slice(1)),t},t.prototype.getNumberMaskedValue=function(e,t){void 0===t&&(t=!1);var n=this.parseNumber(e);return this.validateNumber(n,t)?this.displayNumber(n,!0,t):null},t.prototype.getNumberUnmaskedValue=function(e){var t=this.parseNumber(e);if(!this.numericalCompositionIsEmpty(t))return this.convertNumber(t)},t.prototype.getTextAlignment=function(){return"right"},t.prototype.getMaskedValue=function(e){var t=null==e?"":e.toString();return t=t.replace(".",this.decimalSeparator),this.getNumberMaskedValue(t,!0)},t.prototype.getUnmaskedValue=function(e){return this.getNumberUnmaskedValue(e)},t.prototype.processInput=function(e){var t={value:e.prevValue,caretPosition:e.selectionEnd,cancelPreventDefault:!1},n=e.prevValue.slice(0,e.selectionStart)+(e.insertedChars||""),o=n+e.prevValue.slice(e.selectionEnd),i=this.parseNumber(o);if(!this.validateNumber(i,!1))return t;var r=this.getNumberMaskedValue(o),s=this.calccaretPosition(n,e,r);return t.value=r,t.caretPosition=s,t},t.prototype.getType=function(){return"numericmask"},t.prototype.isValueUndefined=function(t){return""===t||e.prototype.isValueUndefined.call(this,t)},cl([y()],t.prototype,"allowNegativeValues",void 0),cl([y()],t.prototype,"decimalSeparator",void 0),cl([y()],t.prototype,"precision",void 0),cl([y()],t.prototype,"thousandsSeparator",void 0),cl([y()],t.prototype,"min",void 0),cl([y()],t.prototype,"max",void 0),t}(ol);D.addClass("numericmask",[{name:"allowNegativeValues:boolean",default:!0},{name:"decimalSeparator",default:".",maxLength:1},{name:"thousandsSeparator",default:",",maxLength:1},{name:"precision:number",default:2,minValue:0},{name:"min:number"},{name:"max:number"}],function(){return new pl},"masksettings");var hl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),dl=function(){return dl=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},dl.apply(this,arguments)},fl=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};function gl(e,t){switch(e){case"hour":case"minute":case"second":case"day":case"month":return 2;case"timeMarker":case"year":return t;default:return 1}}var yl=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultDate="1970-01-01T",t.turnOfTheCentury=68,t.twelve=12,t.lexems=[],t.inputDateTimeData=[],t.validBeginningOfNumbers={hour:1,hourU:2,minute:5,second:5,day:3,month:1},t}return hl(t,e),Object.defineProperty(t.prototype,"hasDatePart",{get:function(){return this.lexems.some(function(e){return"day"===e.type||"month"===e.type||"year"===e.type})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTimePart",{get:function(){return this.lexems.some(function(e){return"hour"===e.type||"minute"===e.type||"second"===e.type})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"is12Hours",{get:function(){return this.lexems.filter(function(e){return"hour"===e.type&&!e.upperCase}).length>0},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"datetimemask"},t.prototype.getTypeForExpressions=function(){return this.hasTimePart?"datetime-local":"datetime"},t.prototype.updateLiterals=function(){this.lexems=function(e){for(var t,n=[],o=function(e,o,i){if(void 0===i&&(i=!1),t&&t===e){n[n.length-1].count++;var r=gl(e,n[n.length-1].count);n[n.length-1].maxCount=r}else r=gl(e,1),n.push({type:e,value:o,count:1,maxCount:r,upperCase:i})},i=0;i<e.length;i++){var r=e[i];switch(r){case"m":o("month",r);break;case"d":o("day",r);break;case"y":o("year",r);break;case"h":o("hour",r,!1);break;case"H":o("hour",r,!0);break;case"M":o("minute",r);break;case"s":o("second",r);break;case"t":o("timeMarker",r);break;case"T":o("timeMarker",r,!0);break;default:n.push({type:"separator",value:r,count:1,maxCount:1,upperCase:!1})}t=n[n.length-1].type}return n}(this.pattern||"")},t.prototype.leaveOnlyNumbers=function(e){for(var t="",n=0;n<e.length;n++)e[n].match(Er)&&(t+=e[n]);return t},t.prototype.getMaskedStrFromISO=function(e){var t=this,n=new Date(e);return this.initInputDateTimeData(),this.hasTimePart||(n=new Date(e+"T00:00:00")),this.hasDatePart||(n=new Date(this.defaultDate+e)),isNaN(n)||this.lexems.forEach(function(e,o){var i=t.inputDateTimeData[o];switch(i.isCompleted=!0,e.type){case"hour":t.is12Hours?i.value=((n.getHours()-1)%t.twelve+1).toString():i.value=n.getHours().toString();break;case"minute":i.value=n.getMinutes().toString();break;case"second":i.value=n.getSeconds().toString();break;case"timeMarker":var r=n.getHours()>=t.twelve?"pm":"am";i.value=e.upperCase?r.toUpperCase():r;break;case"day":i.value=n.getDate().toString();break;case"month":i.value=(n.getMonth()+1).toString();break;case"year":var s=n.getFullYear();2==e.count&&(s%=100),i.value=s.toString()}}),this.getFormatedString(!0)},t.prototype.initInputDateTimeData=function(){var e=this;this.inputDateTimeData=[],this.lexems.forEach(function(t){e.inputDateTimeData.push({lexem:t,isCompleted:!1,value:void 0})})},t.prototype.getISO_8601Format=function(e){var t=[],n=[];if(void 0!==e.year){var o=this.getPlaceholder(4,e.year.toString(),"0")+e.year;t.push(o)}if(void 0!==e.month&&void 0!==e.year){var i=this.getPlaceholder(2,e.month.toString(),"0")+e.month;t.push(i)}if(void 0!==e.day&&void 0!==e.month&&void 0!==e.year){var r=this.getPlaceholder(2,e.day.toString(),"0")+e.day;t.push(r)}if(void 0!==e.hour){var s=this.getPlaceholder(2,e.hour.toString(),"0")+e.hour;n.push(s)}if(void 0!==e.minute&&void 0!==e.hour){var a=this.getPlaceholder(2,e.minute.toString(),"0")+e.minute;n.push(a)}if(void 0!==e.second&&void 0!==e.minute&&void 0!==e.hour){var l=this.getPlaceholder(2,e.second.toString(),"0")+e.second;n.push(l)}var u=[];return t.length>0&&u.push(t.join("-")),n.length>1&&u.push(n.join(":")),u.join("T")},t.prototype.isYearValid=function(e){if(void 0===e.min&&void 0===e.max)return!1;var t=e.year.toString(),n=e.min.toISOString().slice(0,t.length),o=e.max.toISOString().slice(0,t.length);return e.year>=parseInt(n)&&e.year<=parseInt(o)},t.prototype.createIDateTimeCompositionWithDefaults=function(e,t){var n=29==e.day&&2==e.month,o=e.min.getFullYear(),i=e.max.getFullYear();n&&(o=4*Math.ceil(o/4))>(i=4*Math.floor(i/4))&&(o=void 0,i=void 0);var r=void 0!==e.year?e.year:t?i:o,s=void 0!==e.month?e.month:t&&this.hasDatePart?12:1;return{year:r,month:s,day:void 0!==e.day?e.day:t&&this.hasDatePart?this.getMaxDateForMonth(r,s):1,hour:void 0!==e.hour?e.hour:t?23:0,minute:void 0!==e.minute?e.minute:t?59:0,second:void 0!==e.second?e.second:t?59:0}},t.prototype.getMaxDateForMonth=function(e,t){return 2==t?e%4==0&&e%100!=0||e%400==0?29:28:[31,28,31,30,31,30,31,31,30,31,30,31][t-1]},t.prototype.isDateValid=function(e){var t=new Date(this.getISO_8601Format(this.createIDateTimeCompositionWithDefaults(e,!1))),n=new Date(this.getISO_8601Format(this.createIDateTimeCompositionWithDefaults(e,!0)));return!isNaN(t)&&(t.getDate()===e.day||void 0===e.day)&&(t.getMonth()===e.month-1||void 0===e.month)&&(t.getFullYear()===e.year||void 0===e.year)&&n>=e.min&&t<=e.max},t.prototype.getPlaceholder=function(e,t,n){var o=e-(t||"").length;return o>0?n.repeat(o):""},t.prototype.isDateValid12=function(e){return this.is12Hours?!(this.is12Hours&&e.hour>this.twelve)&&(e.timeMarker?"p"===e.timeMarker[0].toLowerCase()?(e.hour!==this.twelve&&(e.hour+=this.twelve),this.isDateValid(e)):(e.hour===this.twelve&&(e.hour=0),this.isDateValid(e)):!!this.isDateValid(e)||(e.hour+=this.twelve,this.isDateValid(e))):this.isDateValid(e)},t.prototype.updateTimeMarkerInputDateTimeData=function(e,t){var n=e.value;if(n){var o="timeMarker",i=dl({},t);i[o]=n,this.isDateValid12(i)?e.isCompleted=!0:n=n.slice(0,n.length-1),e.value=n||void 0,t[o]=n||void 0}},t.prototype.updateInputDateTimeData=function(e,t){var n=e.value;if(n){var o=e.lexem.type,i=dl({},t);if(i[o]=parseInt(this.parseTwoDigitYear(e)),n.length===e.lexem.maxCount){if(this.isDateValid12(i))return e.isCompleted=!0,e.value=n||void 0,void(t[o]=parseInt(n)>0?parseInt(n):void 0);n=n.slice(0,n.length-1)}i[o]=parseInt(n);var r=parseInt(n[0]),s=this.validBeginningOfNumbers[o+(e.lexem.upperCase?"U":"")];"year"!==o||this.isYearValid(i)?void 0!==s&&r>s?this.isDateValid12(i)?e.isCompleted=!0:n=n.slice(0,n.length-1):void 0!==s&&0!==r&&r<=s&&(this.checkValidationDateTimePart(i,o,e),e.isCompleted&&!this.isDateValid12(i)&&(n=n.slice(0,n.length-1))):(n=n.slice(0,n.length-1),e.isCompleted=!1),e.value=n||void 0,t[o]=parseInt(n)>0?parseInt(n):void 0}},t.prototype.checkValidationDateTimePart=function(e,t,n){var o=e[t],i=10*o,r=10;"month"===t&&(r=3),"hour"===t&&(r=this.is12Hours?3:5),n.isCompleted=!0;for(var s=0;s<r;s++)if(e[t]=i+s,this.isDateValid12(e)){n.isCompleted=!1;break}e[t]=o},t.prototype.getCorrectDatePartFormat=function(e,t){var n=e.lexem,o=e.value||"";return o&&"timeMarker"===n.type?(t&&(o+=this.getPlaceholder(n.count,o,n.value)),o):(o&&e.isCompleted&&(o=parseInt(o).toString()),o&&e.isCompleted?o=this.getPlaceholder(n.count,o,"0")+o:(o=function(e,t){var n=t;return e.count<e.maxCount&&("day"===e.type&&0===parseInt(t[0])||"month"===e.type&&0===parseInt(t[0]))&&(n=t.slice(1,t.length)),n}(n,o),t&&(o+=this.getPlaceholder(n.count,o,n.value))),o)},t.prototype.createIDateTimeComposition=function(){var e,t;return this.hasDatePart?(e=this.min||"0001-01-01",t=this.max||"9996-12-31"):(e=this.defaultDate+(this.min||"00:00:00"),t=this.defaultDate+(this.max||"23:59:59")),{hour:void 0,minute:void 0,second:void 0,day:void 0,month:void 0,year:void 0,min:new Date(e),max:new Date(t)}},t.prototype.parseTwoDigitYear=function(e){var t=e.value;return"year"!==e.lexem.type||e.lexem.count>2?t:(this.max&&this.max.length>=4&&(this.turnOfTheCentury=parseInt(this.max.slice(2,4))),(parseInt(t)>this.turnOfTheCentury?"19":"20")+t)},t.prototype.getFormatedString=function(e){var t="",n="",o=!1,i=this.inputDateTimeData.length-1;if(!e){var r=this.inputDateTimeData.filter(function(e){return!!e.value});i=this.inputDateTimeData.indexOf(r[r.length-1])}for(var s=0;s<this.inputDateTimeData.length;s++){var a=this.inputDateTimeData[s];switch(a.lexem.type){case"timeMarker":case"hour":case"minute":case"second":case"day":case"month":case"year":if(void 0===a.value&&!e)return t+(o?n:"");var l=e||i>s;t+=n+this.getCorrectDatePartFormat(a,l),o=a.isCompleted;break;case"separator":n=a.lexem.value}}return t},t.prototype.cleanTimeMarker=function(e,t){var n="";e=e.toUpperCase();for(var o=0;o<e.length;o++)(!n&&("P"==e[o]||"A"==e[o])||n&&"M"==e[o])&&(n+=e[o]);return t?n.toUpperCase():n.toLowerCase()},t.prototype.setInputDateTimeData=function(e){var t=this,n=0;this.initInputDateTimeData(),this.lexems.forEach(function(o,i){if(e.length>0&&n<e.length){if("separator"===o.type)return;var r=t.inputDateTimeData[i],s=e[n],a=void 0;a="timeMarker"===o.type?t.cleanTimeMarker(s,o.upperCase):t.leaveOnlyNumbers(s),r.value=a.slice(0,o.maxCount),n++}})},t.prototype._getMaskedValue=function(e,t){var n=this;void 0===t&&(t=!0);var o=null==e?"":e.toString(),i=this.getParts(o);this.setInputDateTimeData(i);var r=this.createIDateTimeComposition();return this.inputDateTimeData.forEach(function(e){"timeMarker"===e.lexem.type?n.updateTimeMarkerInputDateTimeData(e,r):n.updateInputDateTimeData(e,r)}),this.getFormatedString(t)},t.prototype.getParts=function(e){for(var t=[],n=this.lexems.filter(function(e){return"separator"!==e.type}),o=this.lexems.filter(function(e){return"separator"===e.type}).map(function(e){return e.value}),i="",r=!1,s=!1,a=0;a<e.length;a++){var l=e[a];if(l.match(Er)||l===n[t.length].value||"timeMarker"===n[t.length].type?(r=!1,s=!1,i+=l):-1!==o.indexOf(l)?s||(r=!0,t.push(i),i=""):r||(s=!0,t.push(i),i=""),t.length>=n.length){r=!1;break}}return(""!=i||r)&&t.push(i),t},t.prototype.getUnmaskedValue=function(e){var t,n=this,o=null==e?"":e.toString(),i=this.getParts(o);this.setInputDateTimeData(i);var r=null===(t=this.inputDateTimeData.filter(function(e){return"timeMarker"===e.lexem.type})[0])||void 0===t?void 0:t.value.toLowerCase()[0],s=this.createIDateTimeComposition(),a=!1;return this.inputDateTimeData.forEach(function(e){var t=e.value;if("timeMarker"!=e.lexem.type&&"separator"!=e.lexem.type)if(!t||t.length<e.lexem.count)a=!0;else{var o=parseInt(n.parseTwoDigitYear(e));"hour"==e.lexem.type&&"p"===r&&o!=n.twelve&&(o+=n.twelve),s[e.lexem.type]=o}}),a?"":this.getISO_8601Format(s)},t.prototype.getMaskedValue=function(e){return this.getMaskedStrFromISO(e)},t.prototype.processInput=function(e){var t={value:e.prevValue,caretPosition:e.selectionEnd,cancelPreventDefault:!1},n=e.prevValue.slice(0,e.selectionStart),o=e.prevValue.slice(e.selectionEnd);return t.value=this._getMaskedValue(n+(e.insertedChars||"")+o),e.insertedChars||"backward"!==e.inputDirection?t.caretPosition=this._getMaskedValue(n+(e.insertedChars||""),!1).length:t.caretPosition=e.selectionStart,t},fl([y()],t.prototype,"min",void 0),fl([y()],t.prototype,"max",void 0),t}(ll);D.addClass("datetimemask",[{name:"min",type:"datetime",enableIf:function(e){return!!e.pattern}},{name:"max",type:"datetime",enableIf:function(e){return!!e.pattern}}],function(){return new yl},"patternmask");var ml,bl,vl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Cl=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Pl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vl(t,e),t.prototype.getType=function(){return"currencymask"},t.prototype.wrapText=function(e){var t=this.prefix||"",n=this.suffix||"",o=e;return o?(-1===o.indexOf(t)&&(o=t+o),-1===o.indexOf(n)&&(o+=n),o):o},t.prototype.unwrapInputArgs=function(e){var t=e.prevValue;if(t){if(this.prefix&&-1!==t.indexOf(this.prefix)){t=t.slice(t.indexOf(this.prefix)+this.prefix.length);var n=(this.prefix||"").length;e.selectionStart=Math.max(e.selectionStart-n,0),e.selectionEnd-=n}this.suffix&&-1!==t.indexOf(this.suffix)&&(t=t.slice(0,t.indexOf(this.suffix))),e.prevValue=t}},t.prototype.processInput=function(t){this.unwrapInputArgs(t);var n=e.prototype.processInput.call(this,t),o=(this.prefix||"").length;return n.value&&(n.caretPosition+=o),n.value=this.wrapText(n.value),n},t.prototype.getMaskedValue=function(t){var n=e.prototype.getMaskedValue.call(this,t);return this.wrapText(n)},Cl([y()],t.prototype,"prefix",void 0),Cl([y()],t.prototype,"suffix",void 0),t}(pl);function wl(e,t){if(ml!=e){var n="survey-core has version '"+ml+"' and "+t+" has version '"+e+"'. SurveyJS libraries should have the same versions to work correctly.";console.error(n)}}function Vl(e){xl(e)}function xl(e){!function(e,t,o){if(e){var i=function(e){var t,n,o,i={},r=0,s=0,a="",l=String.fromCharCode,u=e.length;for(t=0;t<64;t++)i["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t)]=t;for(n=0;n<u;n++)for(r=(r<<6)+i[e.charAt(n)],s+=6;s>=8;)((o=r>>>(s-=8)&255)||n<u-2)&&(a+=l(o));return a}(e);if(i){var r=i.indexOf(";");r<0||function(e){if(!e)return!0;var t="domains:",o=e.indexOf(t);if(o<0)return!0;var i=e.substring(o+8).toLowerCase().split(",");if(!Array.isArray(i)||0===i.length)return!0;var r=n.getLocation();if(r&&r.hostname){var s=r.hostname.toLowerCase();i.push("localhost");for(var a=0;a<i.length;a++)if(s.indexOf(i[a])>-1)return!0;return!1}return!0}(i.substring(0,r))&&(i=i.substring(r+1)).split(",").forEach(function(e){var n=e.indexOf("=");if(n>0){var i=new Date(e.substring(n+1));t[e.substring(0,n)]=new Date(o)<=i||i}})}}}(e,Il,bl)}function Ol(e){return!0===Sl(e)}function Sl(e){return Il[e.toString()]||!1}D.addClass("currencymask",[{name:"prefix"},{name:"suffix"}],function(){return new Pl},"numericmask"),ml="".concat("2.3.12"),gn.version=ml,bl="".concat("2025-10-22");var Il={},Tl=function(){function e(){this.icons={},this.iconPrefix="icon-",this.onIconsChanged=new Ae}return e.prototype.processId=function(e,t){return 0==e.indexOf(t)&&(e=e.substring(t.length)),qt[e]||e},e.prototype.registerIconFromSymbol=function(e,t){this.icons[e]=t},e.prototype.registerIconFromSvgViaElement=function(e,t,n){if(void 0===n&&(n=this.iconPrefix),o.isAvailable()){e=this.processId(e,n);var i=o.createElement("div");i.innerHTML=t;var r=o.createElement("symbol"),s=i.querySelector("svg");r.innerHTML=s.innerHTML;for(var a=0;a<s.attributes.length;a++)r.setAttributeNS("http://www.w3.org/2000/svg",s.attributes[a].name,s.attributes[a].value);r.id=n+e,this.registerIconFromSymbol(e,r.outerHTML)}},e.prototype.registerIconFromSvg=function(e,t,n){void 0===n&&(n=this.iconPrefix),e=this.processId(e,n);var o=(t=t.trim()).toLowerCase();return"<svg "===o.substring(0,5)&&"</svg>"===o.substring(o.length-6,o.length)&&(this.registerIconFromSymbol(e,'<symbol id="'+n+e+'" '+t.substring(5,o.length-6)+"</symbol>"),!0)},e.prototype.registerIconsFromFolder=function(e){var t=this;e.keys().forEach(function(n){t.registerIconFromSvg(n.substring(2,n.length-4).toLowerCase(),e(n))})},e.prototype.registerIcons=function(e){for(var t in e)this.registerIconFromSvg(t,e[t]);this.updateMarkup()},e.prototype.registerIcon=function(e,t,n){var o;void 0===n&&(n="v2"),this.registerIconFromSvg(e,t),Al(n,((o={})[e]=t,o))},e.prototype.iconsRenderedHtml=function(){var e=this;return Object.keys(this.icons).map(function(t){return e.icons[t]}).join("")},e.prototype.updateMarkup=function(){this.onIconsChanged.fire(this,{})},e}(),Rl=new Tl,El={};function Al(e,t){El[e]||(El[e]={});var n=El[e];for(var o in t)n[o]=t[o]}return t})());